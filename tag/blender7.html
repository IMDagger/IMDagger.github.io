<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="utf-8" />
        <title>IMDagger: Дневник</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="Блог IMDagger: IT и жизнь" />
        <meta name="keywords" content="python,lisp,scheme,racket,emacs,blender,программирование,моделирование,lua,c++,c,js,java,git,bazaar" />
        <meta name="author" content="Alex Moiseenko (IMDagger)" />

<meta name="robots" content="noindex"/>
        <!-- Open Graph -->
        <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" />
        <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" />
        <link rel="shortcut icon" href="http://imdagger.github.io/favicon.ico" />
        <link rel="stylesheet" href="/theme/css/html4css1.css" />
        <link rel="stylesheet" href="/theme/css/style.css" />
        <link rel="stylesheet" href="/theme/css/pygment.css" />
        <link rel="stylesheet" href="/theme/css/math.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML,http://imdagger.github.io/theme/js/math.js"></script>
        <script src="http://s3.amazonaws.com/nwapi/nwmatcher/nwmatcher-1.2.5-min.js"></script>
        <!--[if (gte IE 6)&(lte IE 8)]>
          <script type="text/javascript" src="/theme/js/selectivizr-min.js"></script>
          <noscript><link rel="stylesheet" href="[fallback css]" /></noscript>
        <![endif]-->

        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <link href="http://imdagger.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="IMDagger Atom-лента" />
    </head>

    <body>
        <div class="row page-head">
            <div class="row page-head-status page-head-status-top"><div class="col-sm-12 b-status mine"><p><i></i><a href="#" title="настроение" class="b-consistent-link"><b>Продать кому-то что-то всегда на деле сложнее, чем кажется</b></a></p></div></div>
            <div class="col-sm-2 page-left">
                <a href="#">
                    <img src="http://upics.yandex.ru/22199227/normal" ilo-full-src="http://upics.yandex.ru/22199227/normal">
                </a>
            </div>
            <div class="col-sm-10 all-posts">
                <div class="title-container">
                    <h1><b><a href="http://imdagger.github.io" class="fn nickname">IMDagger</a></b></h1>
                </div>
                <div class="title-menu">
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="active">
                            <a href="#">Дневник</a>
                        </li>
                        <li><a href="http://fotki.yandex.ru/users/imdagger">Фотки</a></li>
                        <li><a href="http://imdagger.github.io/pages/o-sebe.html">О себе</a></li>
                        <li><a href="http://imdagger.github.io/pages/rss-lenta.html">RSS-лента</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="row page-body">
<div class="col-sm-2 page-left">
<div class="row widget widget-photo">
    <a href="posts/2011/08/07/aga-popalsia/" class="b-user-photo__link"><img class="b-user-photo__img" src=" http://img-fotki.yandex.ru/get/5409/22199227.a/0_625fc_e780ccc7_L
?log_nocount=64720402854"></a>
</div><div class="row widget">
    <div class="widget-content b-user-info">
        <div class="widget__body">
            <div class="widget-user-info__age">
                <i class="widget-user-info__sex widget-user-info__sex_type_"></i> 26&nbsp;лет
            </div>
            <div class="widget-user-info__place">
                <a href="#">Гомель</a>,                <a href="#">Беларусь</a>            </div>
            <ul class="contacts">
                <li class="contact contact-type-email"><i></i><a href="mailto:imdagger@yandex.ru">imdagger@yandex.ru</a></li>
                <li class="contact contact-type-ya-online"><i></i>imdagger@ya.ru</li>
                <li class="contact contact-type-icq"><i></i>350395088</li>
            </ul>
        </div>
    </div>
</div>

<div class="row widget">
    <div class="widget-content">
        <div class="widget__title">
            <div class="widget__title-link">Метрика</div>
        </div>
        <div class="widget__body">
            <div class="widget-line">
              <!-- noindex -->
              <!-- googleoff: index -->
              <div class="widget-entry">
                <!-- Yandex.Metrika informer --><a href="https://metrika.yandex.ru/stat/?id=25746494&amp;from=informer" target="_blank" rel="nofollow"><img src="//bs.yandex.ru/informer/25746494/3_1_FFFFFFFF_EFEFEFFF_0_pageviews" style="width:88px; height:31px; border:0;" alt="Яндекс.Метрика" title="Яндекс.Метрика: данные за сегодня (просмотры, визиты и уникальные посетители)" onclick="try{Ya.Metrika.informer({i:this,id:25746494,lang:'ru'});return false}catch(e){}"/></a><!-- /Yandex.Metrika informer --><!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter25746494 = new Ya.Metrika({id:25746494, clickmap:true, trackLinks:true, accurateTrackBounce:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="//mc.yandex.ru/watch/25746494" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->
                <!-- googleon: index -->
                <!-- /noindex -->
                </div>
            </div>
        </div>
    </div>
</div><div class="row widget">
    <div class="widget-content">
        <div class="widget__title">
            <div class="widget__title-link">Популярное в дневнике</div>
        </div>
        <div class="widget__body">
            <div class="widget-line">
                <div class="widget-entry">
                    <div class="widget-day__title">25&nbsp;июня</div>
                    <div class="widget-entry clearfix">
                        <div class="widget-entry__item">
                            <div class="widget-entry__title">
                                <a href="#" class="h-link">&nbsp;&nbsp;&nbsp; Висцеральная теория сна выглядит стр…</a>
                            </div>
                            <div class="widget-entry__info">2&nbsp;ответа</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div></div>

<div class="col-sm-10 all-posts">
<div class="row b-post-filter">
    <span class="pull-right">
        записи по
        <div class="btn-group">
            <span type="button" class="pseudo-link" data-toggle="dropdown">месяцам</span>
            <ul class="dropdown-menu dropdown-menu-right" role="menu">
                <li><a rel="nofollow" href="#" class="h-link">Нулябрь</a><li>
                <li><a rel="nofollow" href="#" class="h-link">Первябрь</a><li>
            </ul>
        </div> ·
        <div class="btn-group">
            <span type="button" class="pseudo-link" data-toggle="dropdown">меткам</span>
            <ul class="dropdown-menu dropdown-menu-right" role="menu">                <li>                    <a rel="nofollow" class="tag-1" href="http://imdagger.github.io/tag/oshibka.html" class="h-link">ошибка</a>                    <a rel="nofollow" class="tag-2" href="http://imdagger.github.io/tag/linux.html" class="h-link">linux</a>                    <a rel="nofollow" class="tag-2" href="http://imdagger.github.io/tag/iandeks.html" class="h-link">Яндекс</a>                    <a rel="nofollow" class="tag-2" href="http://imdagger.github.io/tag/icfpc.html" class="h-link">icfpc</a>                    <a rel="nofollow" class="tag-1" href="http://imdagger.github.io/tag/rabota.html" class="h-link">работа</a>                </li>                <li>                    <a rel="nofollow" class="tag-1" href="http://imdagger.github.io/tag/programmirovanie.html" class="h-link">программирование</a>                    <a rel="nofollow" class="tag-2" href="http://imdagger.github.io/tag/javascript.html" class="h-link">javascript</a>                    <a rel="nofollow" class="tag-2" href="http://imdagger.github.io/tag/eda.html" class="h-link">еда</a>                    <a rel="nofollow" class="tag-2" href="http://imdagger.github.io/tag/sborka.html" class="h-link">сборка</a>                    <a rel="nofollow" class="tag-1" href="http://imdagger.github.io/tag/zhizn.html" class="h-link">жизнь</a>                </li>                <li>                    <a rel="nofollow" class="tag-1" href="http://imdagger.github.io/tag/blender.html" class="h-link">blender</a>                    <a rel="nofollow" class="tag-1" href="http://imdagger.github.io/tag/python.html" class="h-link">python</a>                    <a rel="nofollow" class="tag-2" href="http://imdagger.github.io/tag/google.html" class="h-link">google</a>                    <a rel="nofollow" class="tag-2" href="http://imdagger.github.io/tag/emacs.html" class="h-link">emacs</a>                    <a rel="nofollow" class="tag-1" href="http://imdagger.github.io/tag/bge.html" class="h-link">bge</a>                </li>                <li>                    <a rel="nofollow" class="tag-2" href="http://imdagger.github.io/tag/java.html" class="h-link">java</a>                    <a rel="nofollow" class="tag-1" href="http://imdagger.github.io/tag/radost.html" class="h-link">радость</a>                    <a rel="nofollow" class="tag-1" href="http://imdagger.github.io/tag/bredni.html" class="h-link">бредни</a>                    <a rel="nofollow" class="tag-1" href="http://imdagger.github.io/tag/ia.html" class="h-link">Я</a>                    <a rel="nofollow" class="tag-1" href="http://imdagger.github.io/tag/nabrosok.html" class="h-link">набросок</a>                </li>            </ul>
        </div> ·
        <div class="btn-group">
            <span type="button" class="pseudo-link" data-toggle="dropdown">типам</span>
            <ul class="dropdown-menu dropdown-menu-right" role="menu">
                <li><a rel="nofollow" href="http://imdagger.github.io/category/description.html" class="h-link">обращение</a><li>
                <li><a rel="nofollow" href="http://imdagger.github.io/category/friend.html" class="h-link">дружба</a><li>
                <li><a rel="nofollow" href="http://imdagger.github.io/category/join.html" class="h-link">клубы</a><li>
                <li><a rel="nofollow" href="http://imdagger.github.io/category/link.html" class="h-link">ссылки</a><li>
                <li><a rel="nofollow" href="http://imdagger.github.io/category/mood.html" class="h-link">настроение</a><li>
                <li><a rel="nofollow" href="http://imdagger.github.io/category/photo.html" class="h-link">фото</a><li>
                <li><a rel="nofollow" href="http://imdagger.github.io/category/text.html" class="h-link">текст</a><li>
                <li><a rel="nofollow" href="http://imdagger.github.io/category/video.html" class="h-link">видео</a><li>
                <li><a rel="nofollow" href="http://imdagger.github.io/category/wishlist.html" class="h-link"></a><li>
            </ul>
        </div>
    </span>
</div>
    <div class="row b-post">
<div class="panel panel-text">
    <div class="panel-heading b-post-type b-post-type-text">
        <b class="b-user">
            <a class="b-user__link" href="http://imdagger.github.io/author/imdagger.html"><b class="b-user__first-letter">I</b>MDagger</a>
        </b>
написал        <span class="pull-right b-date">
            <a class="h-link" href="http://imdagger.github.io/posts/2010/03/11/dinamicheskaia-zagruzka-iz-skriptov/" >
                11 марта 2010 года, 14:50
            </a>
        </span>
    </div>
    <div class="panel-body">
        <div class="col-sm-1 b-post__layout-left">
            <a href="http://imdagger.github.io/author/imdagger.html"><img src="http://upics.yandex.ru/22199227/middle"></a>
        </div>
        <div class="col-sm-11 b-right-col">
            <noindex>
<div class="row tags-row">
    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/blender.html">blender</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/vozmozhnosti.html">возможности</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/bge.html">bge</a></span></div>
            </noindex>
            <div class="post-title">
<a class="no-link" href="http://imdagger.github.io/posts/2010/03/11/dinamicheskaia-zagruzka-iz-skriptov/">Динамическая загрузка из скриптов</a>            </div>
            <div class="row post-body">
                <div class="b-text">
<p>Добавил в BGE вызов функций отложенной загрузки объектов сцены из
другого blend-файла, а также функцию отложенной выгрузки. До этого можно
было лишь пользоваться актуатором:</p>
<div class="highlight"><pre><span class="pgcss-n">cc</span> <span class="pgcss-o">=</span> <span class="pgcss-n">GameLogic</span><span class="pgcss-o">.</span><span class="pgcss-n">getCurrentController</span><span class="pgcss-p">()</span>
<span class="pgcss-n">blend_loader</span> <span class="pgcss-o">=</span> <span class="pgcss-n">cc</span><span class="pgcss-o">.</span><span class="pgcss-n">actuators</span><span class="pgcss-p">[</span><span class="pgcss-s">&#39;load&#39;</span><span class="pgcss-p">]</span>
<span class="pgcss-n">blend_loader</span><span class="pgcss-o">.</span><span class="pgcss-n">scene</span> <span class="pgcss-o">=</span> <span class="pgcss-s">&#39;Room stuff&#39;</span>
<span class="pgcss-n">room_number</span> <span class="pgcss-o">=</span> <span class="pgcss-mi">112</span>
<span class="pgcss-n">blend_loader</span><span class="pgcss-o">.</span><span class="pgcss-n">blendFileName</span> <span class="pgcss-o">=</span> <span class="pgcss-s">&#39;//room</span><span class="pgcss-si">%s</span><span class="pgcss-s">/stuff/main.blend&#39;</span> <span class="pgcss-o">%</span> <span class="pgcss-n">room_number</span>
<span class="pgcss-n">cc</span><span class="pgcss-o">.</span><span class="pgcss-n">activate</span><span class="pgcss-p">(</span><span class="pgcss-n">blend_loader</span><span class="pgcss-p">)</span>
</pre></div>
<p>blend_loader загрузит сцену из файла с относительным путём
<strong>//room112/stuff/main.blend</strong>,&nbsp;<strong>blendFileName</strong> это свойство,
которое указывает имя файла. так способом можно загружать за одну
итерацию BGE только количество сцен равное количеству активированных
актуаторов. С выгрузкой аналогично. Такой подход может быть удобным,
если нужно по мере загрузки обновлять изображение на экране и
отрисовывать, например полосу прогресса загрузки.</p>
<p>Но бывает нужно за один подход загрузить несколько групп объектов.
Немноог напоминает транзакции из баз данных, т.е. ничего не должно
вклиниваться между загрузкой двух сцен, ни отрисовка, ни другие события
актуаторов или сенсоров. Эту проблему решит добавка отдельного API для
загрузки не через актуаторы:</p>
<div class="highlight"><pre><span class="pgcss-n">room_file_name</span> <span class="pgcss-o">=</span> <span class="pgcss-s">&#39;//room</span><span class="pgcss-si">%s</span><span class="pgcss-s">/stuff/main.blend&#39;</span>
<span class="pgcss-n">room_number</span> <span class="pgcss-o">=</span> <span class="pgcss-mi">112</span>
<span class="pgcss-n">GameLogic</span><span class="pgcss-o">.</span><span class="pgcss-n">mergeBlendFile</span><span class="pgcss-p">(</span><span class="pgcss-s">&#39;Room Stuff&#39;</span><span class="pgcss-p">,</span> \
             <span class="pgcss-s">&#39;//room</span><span class="pgcss-si">%s</span><span class="pgcss-s">/stuff/main.blend&#39;</span> <span class="pgcss-o">%</span> <span class="pgcss-n">room_number</span><span class="pgcss-p">)</span>
 <span class="pgcss-n">room_number</span> <span class="pgcss-o">=</span> <span class="pgcss-mi">115</span>
 <span class="pgcss-n">GameLogic</span><span class="pgcss-o">.</span><span class="pgcss-n">unmergeBlendFile</span><span class="pgcss-p">(</span><span class="pgcss-s">&#39;Room Stuff&#39;</span><span class="pgcss-p">,</span> \
             <span class="pgcss-n">room_file_name</span> <span class="pgcss-o">%</span> <span class="pgcss-n">room_number</span><span class="pgcss-p">,</span> <span class="pgcss-bp">True</span><span class="pgcss-p">)</span>
</pre></div>
<p>Т.е. в сцену, где расположен объект, на котором исполняется данных
скрипт контроллера, добавить объекты из сцены&nbsp;Room
Stuff&nbsp;//room112/stuff/main.blend <u class="underline">
на следующей итерации</u>
. И тут же
потребовать выгрузки на следующей итерации сцены
из&nbsp;//room115/stuff/main.blend, True указывает, что это <strong>Forced</strong> режим
(когда BGE пробудет удалить и blend-файл из памяти, если никто его не
использует). False — обычный режим, BGE удаляет объекты, но blend-файл
оставляет в памяти, чтобы в следующий раз не считывать с диска (вдруг
его опять скоро попросят загрузиться).</p>
<p>Нужно учитывать, что загрузка и выгрузка происходят на новой
итерации, но… проверка при выгрузке происходит сразу. Т.е., если
попросить загрузить <strong>A</strong> и тут же попросить выгрузить <strong>A</strong>, то
загрузка будет (на новой итерации), а при выгрузке скажет, что файл ещё
не загрузился (сразу после исполнения функции).</p>
<p>Соберусь с силами и сделаю ещё один билд. Нужно подправить
функционал связанный с оверлеями :) Я рассчитываю его тоже включить в
сборку.</p>
                </div>
            </div>
            <div class="row comments-row">
                <span><a class="pseudo-link b-candy b-comment-shortcut"><i class="b-ico"></i>ответить</a></span>
            </div>
        </div>
    </div>
</div><div class="panel panel-text">
    <div class="panel-heading b-post-type b-post-type-text">
        <b class="b-user">
            <a class="b-user__link" href="http://imdagger.github.io/author/imdagger.html"><b class="b-user__first-letter">I</b>MDagger</a>
        </b>
написал        <span class="pull-right b-date">
            <a class="h-link" href="http://imdagger.github.io/posts/2010/03/10/iandeks-tormozit/" >
                10 марта 2010 года, 21:52
            </a>
        </span>
    </div>
    <div class="panel-body">
        <div class="col-sm-1 b-post__layout-left">
            <a href="http://imdagger.github.io/author/imdagger.html"><img src="http://upics.yandex.ru/22199227/middle"></a>
        </div>
        <div class="col-sm-11 b-right-col">
            <noindex>
<div class="row tags-row">
    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/bge.html">bge</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/iandeks.html">Яндекс</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/pechal.html">печаль</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/blender.html">blender</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/ia.html">Я</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/zol.html">зол</a></span></div>
            </noindex>
            <div class="post-title">
<a class="no-link" href="http://imdagger.github.io/posts/2010/03/10/iandeks-tormozit/">Яндекс тормозит</a>            </div>
            <div class="row post-body">
                <div class="b-text">
<p>Я ужасно зол! Яндекс тормозит! Все сервисы, кажется он нас
дискриминирует по IP, это случается вечером (и не у меня одного,
провайдера разные, но есть и те у кого провайдер совсем в другой подсети
и не тормозит). Ничего больше не тормозит, только он, т.е. эт оне
проблема зоны ru! Это не выносимо, т.к. ping-гуется быстро, Jabber
работает быстро, а 80 порт для HTTP тормозит зверски.
Через webproxy.ru работает более менее, т.е. хотя бы не по 30-40 минут
грузится 1-2 килобайта. И случается только вечером… :( А я так хотел
разного интересного написать про BGE.</p>
                </div>
            </div>
            <div class="row comments-row">
                <span><a class="pseudo-link b-candy b-comment-shortcut"><i class="b-ico"></i>ответить</a></span>
            </div>
        </div>
    </div>
</div><div class="panel panel-text">
    <div class="panel-heading b-post-type b-post-type-text">
        <b class="b-user">
            <a class="b-user__link" href="http://imdagger.github.io/author/imdagger.html"><b class="b-user__first-letter">I</b>MDagger</a>
        </b>
написал        <span class="pull-right b-date">
            <a class="h-link" href="http://imdagger.github.io/posts/2010/03/05/mesto-dlia-linzy/" >
                5 марта 2010 года, 21:59
            </a>
        </span>
    </div>
    <div class="panel-body">
        <div class="col-sm-1 b-post__layout-left">
            <a href="http://imdagger.github.io/author/imdagger.html"><img src="http://upics.yandex.ru/22199227/middle"></a>
        </div>
        <div class="col-sm-11 b-right-col">
            <noindex>
<div class="row tags-row">
    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/blender.html">blender</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/r2d2.html">r2d2</a></span></div>
            </noindex>
            <div class="post-title">
<a class="no-link" href="http://imdagger.github.io/posts/2010/03/05/mesto-dlia-linzy/">Место для линзы</a>            </div>
            <div class="row post-body">
                <div class="b-text">
<p>Сделал крепление и механизм линзы для R2D2. Хтел вчера выложить, но
Яндекс уже четвёртый день тормозит по вечерам (не выносимо!). Пожалуй не
стоило включать сглаживание для всего синего материала, т.к. появились
косяки в других местах, ну ничего всё равно я ещё LuxRender не
настраивал:</p>
<p class="text-center"><a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/146539/"><img alt="image0" src="http://img-fotki.yandex.ru/get/3808/imdagger.6/0_23c6b_83058a66_L" title="image0"/></a></p>                </div>
            </div>
            <div class="row comments-row">
                <span><a class="pseudo-link b-candy b-comment-shortcut"><i class="b-ico"></i>ответить</a></span>
            </div>
        </div>
    </div>
</div><div class="panel panel-text">
    <div class="panel-heading b-post-type b-post-type-text">
        <b class="b-user">
            <a class="b-user__link" href="http://imdagger.github.io/author/imdagger.html"><b class="b-user__first-letter">I</b>MDagger</a>
        </b>
написал        <span class="pull-right b-date">
            <a class="h-link" href="http://imdagger.github.io/posts/2010/03/02/retopologiia/" >
                2 марта 2010 года, 14:27
            </a>
        </span>
    </div>
    <div class="panel-body">
        <div class="col-sm-1 b-post__layout-left">
            <a href="http://imdagger.github.io/author/imdagger.html"><img src="http://upics.yandex.ru/22199227/middle"></a>
        </div>
        <div class="col-sm-11 b-right-col">
            <noindex>
<div class="row tags-row">
    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/blender.html">blender</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/retopologiia.html">ретопология</a></span></div>
            </noindex>
            <div class="post-title">
<a class="no-link" href="http://imdagger.github.io/posts/2010/03/02/retopologiia/">Ретопология</a>            </div>
            <div class="row post-body">
                <div class="b-text">
<p>Оказывается функция Retopo в режиме редактирования достаточно
полезная для меня вещь. Бывает мне нужно вырезать фигуру некоторой
правильной формы на поверхности другого объекта, или просто переработать
частично сетку, если кривая (она у меня часто кривая x-D). Например,
чтобы вырезать круг на голове R2D2 (знаю, что для такой фигуры есть
скрипт, но мне не только круги приходится вырезать) под линзу я бы по
старинке сделал так: создал круг, спроецировал при помощи Shinkwrap
модификатора на поверхность объекта, применил модификатор и объединил
объекты, затем убрал лишнее и соединил. Теперь можно сделать так:</p>
<p>Верхняя часть меша робота</p>
<p class="text-center"><a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/144869/"><img alt="image0" src="http://img-fotki.yandex.ru/get/3807/imdagger.6/0_235e5_a6b4b091_L" title="image0"/></a></p>
<p class="cut text-center"><a class="h-link reference internal" data-toggle="collapse" href="#cut_66959696">смотреть далее</a></p>
<div class="collapse" id="cut_66959696">
<p class="text-center">Добавление нового пустого меша</p>
<p class="text-center"><a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/144870/"><img alt="image1" src="http://img-fotki.yandex.ru/get/3813/imdagger.6/0_235e6_1007e7c7_L" title="image1"/></a></p>
<p class="text-center">Включение режима Retopo при редактировании пустого меша</p>
<p class="text-center"><a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/144874/"><img alt="image2" src="http://img-fotki.yandex.ru/get/3911/imdagger.6/0_235ea_1484b9f1_L" title="image2"/></a></p>
<p class="text-center">Добавка окружности</p>
<p class="text-center"><a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/144875/"><img alt="image3" src="http://img-fotki.yandex.ru/get/3814/imdagger.6/0_235eb_b4c1cd8e_L" title="image3"/></a></p>
<p class="text-center">Правая половина убрана, т.к. меш робота уже имеет  модификатор Mirror</p>
<p class="text-center"><a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/144876/"><img alt="image4" src="http://img-fotki.yandex.ru/get/3907/imdagger.6/0_235ec_c20ac303_L" title="image4"/></a></p>
<p class="text-center">Видно, что окружность «легла» на поверхность робота</p>
<p class="text-center"><a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/144877/"><img alt="image5" src="http://img-fotki.yandex.ru/get/3807/imdagger.6/0_235ed_a22f0a5a_L" title="image5"/></a></p>
</div>                </div>
            </div>
            <div class="row comments-row">
                <span><a class="pseudo-link b-candy b-comment-shortcut"><i class="b-ico"></i>ответить</a></span>
            </div>
        </div>
    </div>
</div><div class="panel panel-text">
    <div class="panel-heading b-post-type b-post-type-text">
        <b class="b-user">
            <a class="b-user__link" href="http://imdagger.github.io/author/imdagger.html"><b class="b-user__first-letter">I</b>MDagger</a>
        </b>
написал        <span class="pull-right b-date">
            <a class="h-link" href="http://imdagger.github.io/posts/2010/02/28/zametka/" >
                28 февраля 2010 года, 20:10
            </a>
        </span>
    </div>
    <div class="panel-body">
        <div class="col-sm-1 b-post__layout-left">
            <a href="http://imdagger.github.io/author/imdagger.html"><img src="http://upics.yandex.ru/22199227/middle"></a>
        </div>
        <div class="col-sm-11 b-right-col">
            <noindex>
<div class="row tags-row">
    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/blender.html">blender</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/zhizn.html">жизнь</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/zametka.html">заметка</a></span></div>
            </noindex>
            <div class="post-title">
<a class="no-link" href="http://imdagger.github.io/posts/2010/02/28/zametka/">Заметка</a>            </div>
            <div class="row post-body">
                <div class="b-text">
<p>Ещё полезная вещь <kbd class="kbd">
W, Alt + 8</kbd>
. Выбираешь две точки, применяешь
функцию и вуаля.. оно выбрало все вершины на пути от одной точки к
другой. Это в дополнение к Edge Loop Select и Edge Ring Select. Думаю
моя жизнь станет немного проще.</p>
                </div>
            </div>
            <div class="row comments-row">
                <span><a class="pseudo-link b-candy b-comment-shortcut"><i class="b-ico"></i>ответить</a></span>
            </div>
        </div>
    </div>
</div><div class="panel panel-text">
    <div class="panel-heading b-post-type b-post-type-text">
        <b class="b-user">
            <a class="b-user__link" href="http://imdagger.github.io/author/imdagger.html"><b class="b-user__first-letter">I</b>MDagger</a>
        </b>
написал        <span class="pull-right b-date">
            <a class="h-link" href="http://imdagger.github.io/posts/2010/02/28/4000-samplespix/" >
                28 февраля 2010 года, 11:30
            </a>
        </span>
    </div>
    <div class="panel-body">
        <div class="col-sm-1 b-post__layout-left">
            <a href="http://imdagger.github.io/author/imdagger.html"><img src="http://upics.yandex.ru/22199227/middle"></a>
        </div>
        <div class="col-sm-11 b-right-col">
            <noindex>
<div class="row tags-row">
    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/blender.html">blender</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/luxrender.html">luxrender</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/r2d2.html">r2d2</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/nabrosok.html">набросок</a></span></div>
            </noindex>
            <div class="post-title">
<a class="no-link" href="http://imdagger.github.io/posts/2010/02/28/4000-samplespix/">4000 samples/pix</a>            </div>
            <div class="row post-body">
                <div class="b-text">
<p>После 15 часов рендеринга LuxRender достиг 4000 samples/pix, что
очень даже быстро для моей рабочей машинки. Вот робот R2D2 с меньшим
количеством шумов. У него ещё нет: проектора, линзы, индикатора
процессора, панели с гаджетами, двух ног, зарядной системы. Есть только
минимум, думаю в течение нескольких недель (или месяцев с перерывами на
основную работу) доработаю до приемлемого вида. С чем пока у меня
туговато очень — не умею управлять LuxRender, делать хорошие материалы и
освещение, а также контраст, но думаю почитаю и научусь. Я ещё задумал
добавить окружение этой картинке, горы и песчаник, как на далёкой
далёкой галактике планете. Осознал то, что включать Subsurf в Blender не
обязательно при рендеринге LuxRender’ом, достаточно в самом люксе
включить Subsurf на материал (главное не забывать <kbd class="kbd">
Ctrl+A</kbd>
 применять, а то
всё съедет).</p>
<p class="text-center"><a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/143966/"><img alt="image0" src="http://img-fotki.yandex.ru/get/3910/imdagger.5/0_2325e_c75d9175_L" title="image0"/></a></p>                </div>
            </div>
            <div class="row comments-row">
                <span><a class="pseudo-link b-candy b-comment-shortcut"><i class="b-ico"></i>ответить</a></span>
            </div>
        </div>
    </div>
</div><div class="panel panel-text">
    <div class="panel-heading b-post-type b-post-type-text">
        <b class="b-user">
            <a class="b-user__link" href="http://imdagger.github.io/author/imdagger.html"><b class="b-user__first-letter">I</b>MDagger</a>
        </b>
написал        <span class="pull-right b-date">
            <a class="h-link" href="http://imdagger.github.io/posts/2010/02/27/r2d2/" >
                27 февраля 2010 года, 21:25
            </a>
        </span>
    </div>
    <div class="panel-body">
        <div class="col-sm-1 b-post__layout-left">
            <a href="http://imdagger.github.io/author/imdagger.html"><img src="http://upics.yandex.ru/22199227/middle"></a>
        </div>
        <div class="col-sm-11 b-right-col">
            <noindex>
<div class="row tags-row">
    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/blender.html">blender</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/r2d2.html">r2d2</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/robot.html">робот</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/3d.html">3d</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/modelirovanie.html">моделирование</a></span></div>
            </noindex>
            <div class="post-title">
<a class="no-link" href="http://imdagger.github.io/posts/2010/02/27/r2d2/">R2D2</a>            </div>
            <div class="row post-body">
                <div class="b-text">
<p>Хотел сегодня сделать на конкурс про пылесос модель робота R2D2, из
которого будет торчать гофрированный шланг и трубка. И будет что-то в
духе: “Дроид R2D2 на службе в мирное время!”. Но вот моделирую я
медленно, поэтому через несколько часов работы я уже осознал, что не
успею завершить сё к сроку. Жаль конечно… Но я попробую доделать эту
работу потихонечку в свободное время. Сетка вышла кажется не ужасная и я
всего использовал несколько треугольников ( не знал как выкрутиться), а
в основном сетка состоит из квадов. Чему я полезному научился во время
создания робота R2D2?</p>
<p>Понял, что больше так нельзя создавать круги, не следует
использовать треугольники при их создании, слева на рисунке как
правильно ( на мой взгляд), а справа как я делал раньше:</p>
<p class="text-center"><a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/143854/"><img alt="image0" src="http://img-fotki.yandex.ru/get/3814/imdagger.5/0_231ee_f79977fa_L" title="image0"/></a></p>
<p>Треугольники и Set Smooth создают очень странные артефакты — лучше
делать без них. Потом я чуть не угробил всю свою работу, поэтому стал
периодически сохранять промежуточные версии, когда пытаюсь что-то сильно
модифицировать. В этом мне помогли клавиши <strong>+</strong> и <strong>–</strong> в меню
сохранения — они автоинкрементируют (декрементируют) номер в названии
файла.</p>
<p>Облегчило и ускорило моделирование сочетание клавиш <kbd class="kbd">
Ctrl+E, 7</kbd>

(выбор всего пути точек по заданному ребру). Это полезная функция,
особенно когда нужно применить свойство грани к группе рёбер. Как только
я выделил цепочку вершин, то сразу нажимал <kbd class="kbd">
Ctrl+E, Alt+1</kbd>
 (Mark
Sharp), это позволяло бороться с <strong>Set Smooth</strong> при помощи модификатора
<strong>Edge Split</strong>.</p>
<p>Ещё, когда мне несколько раз потребовалось спроецировать некоторый
меш на тело объекта, то я воспользовался старым добрым <strong>Shinkwrap</strong> с
выбором типа <strong>projection</strong> и нужно осью. Также мои нервы были спасены
непримечательной кнопкой с кубиком и подсказкой Occlude background
geometry, она запретила просвечиваться рёбрам через передние грани,
порой очень не удобно, что выбираешь «левые» точки или грани. Эта
функция спасает от таких бед.</p>
<p>Вот мой R2D2, постобработки нет, ещё шумновато, т.к. рендерилось на
медленной машине всего минут 50.</p>
<p class="text-center"><a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/143856/"><img alt="image1" src="http://img-fotki.yandex.ru/get/3813/imdagger.5/0_231f0_224a7c2d_L" title="image1"/></a></p>                </div>
            </div>
            <div class="row comments-row">
                <span><a class="pseudo-link b-candy b-comment-shortcut"><i class="b-ico"></i>ответить</a></span>
            </div>
        </div>
    </div>
</div><div class="panel panel-text">
    <div class="panel-heading b-post-type b-post-type-text">
        <b class="b-user">
            <a class="b-user__link" href="http://imdagger.github.io/author/imdagger.html"><b class="b-user__first-letter">I</b>MDagger</a>
        </b>
написал        <span class="pull-right b-date">
            <a class="h-link" href="http://imdagger.github.io/posts/2010/02/25/polosa-prokrutki/" >
                25 февраля 2010 года, 21:29
            </a>
        </span>
    </div>
    <div class="panel-body">
        <div class="col-sm-1 b-post__layout-left">
            <a href="http://imdagger.github.io/author/imdagger.html"><img src="http://upics.yandex.ru/22199227/middle"></a>
        </div>
        <div class="col-sm-11 b-right-col">
            <noindex>
<div class="row tags-row">
    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/blender.html">blender</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/last_gateway_to_hell.html">last_gateway_to_hell</a></span></div>
            </noindex>
            <div class="post-title">
<a class="no-link" href="http://imdagger.github.io/posts/2010/02/25/polosa-prokrutki/">Полоса прокрутки</a>            </div>
            <div class="row post-body">
                <div class="b-text">
<p>&nbsp; &nbsp; Доделал код для полосы прокрутки в редакторе, в игровом режиме она
себя и так хорошо чувствовала. Теперь в редакторе можно захватить
слайдер и тащить его, при этом страница с содержимым рюкзака
обновляется. Сегодня дома почищу код скроллбара и выложу его. Возможно
расширю интерфейс объекта, который является внутренним для полосы
прокрутки, т.к. pos, scroll_down, scroll_up хватает, но выводит
кривовато: если есть новая желаемая позиция и нужно слайдер сдвинуть в
неё, если это возможно, то приходится проверять направление, затем
сдвигать в него слайдер при помощи scroll_down или scroll_up,
проверять свойство pos. Если слайдер вылазит за него, то применять
«обратный скроллинг», но контроллер рюкзака при прокрутке вызывает
обновление представления в случает необходимости. Поэтому я планирую
добавить свойства next_pos и prev_pos, чтобы определять возможность
перехода к новой позиции.</p>
                </div>
            </div>
            <div class="row comments-row">
                <span><a class="pseudo-link b-candy b-comment-shortcut"><i class="b-ico"></i>ответить</a></span>
            </div>
        </div>
    </div>
</div><div class="panel panel-text">
    <div class="panel-heading b-post-type b-post-type-text">
        <b class="b-user">
            <a class="b-user__link" href="http://imdagger.github.io/author/imdagger.html"><b class="b-user__first-letter">I</b>MDagger</a>
        </b>
написал        <span class="pull-right b-date">
            <a class="h-link" href="http://imdagger.github.io/posts/2010/02/24/skroll/" >
                24 февраля 2010 года, 21:28
            </a>
        </span>
    </div>
    <div class="panel-body">
        <div class="col-sm-1 b-post__layout-left">
            <a href="http://imdagger.github.io/author/imdagger.html"><img src="http://upics.yandex.ru/22199227/middle"></a>
        </div>
        <div class="col-sm-11 b-right-col">
            <noindex>
<div class="row tags-row">
    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/blender.html">blender</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/bge.html">bge</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/last_gateway_to_hell.html">last_gateway_to_hell</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/skroll.html">скролл</a></span></div>
            </noindex>
            <div class="post-title">
<a class="no-link" href="http://imdagger.github.io/posts/2010/02/24/skroll/">Скролл</a>            </div>
            <div class="row post-body">
                <div class="b-text">
<p>Открыл я файл с исходным кодом Blender в том месте, где должен
обрабатываться элемент интерфейса такой, как полоса прокрутки и увидел
то, что и ожидал:</p>
<div class="highlight"><pre><span class="pgcss-k">case</span> <span class="pgcss-nl">SCROLL</span><span class="pgcss-p">:</span>
   <span class="pgcss-cm">/* DrawBut(b, 1); */</span>
   <span class="pgcss-cm">/* do_scrollbut(b); */</span>
   <span class="pgcss-cm">/* DrawBut(b,0); */</span>
   <span class="pgcss-k">break</span><span class="pgcss-p">;</span>
</pre></div>
<p>Логично, что функция полосы прокрутки не задокументирована и не
работает. Поэтому и в LuxRender экспортёре реализуют свой класс scrollbar.
Я взял этот класс и посмотрел как он определяет позицию она и
работает в общем. Переделал его под свои нужды, т.к. в экспортёре он
высотой во всё окно и прижат к правому краю. Мне нужна произвольная
позиция и использование уже существующего класса контроллера <code class="code">
Bag</code>
,
который реализует метода <code class="code">
scroll_up</code>
, <code class="code">
scroll_down</code>
 и <code class="code">
pos</code>
. Новый класс
<code class="code">
base.editor_utils.Scrollbar</code>
 принимает в качестве аргумента контроллер
рюкзака, получается такое своеобразное представление-контроллер, которое
обрабатывает и события, передавая их в настоящий контроллер. Сразу
заработало перемещение ползунка при нажатии на кноки, т.к. класс себя
позиционирует как дополнительное представление контроллера рюкзака.</p>
<p class="text-center"><a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/142871/"><img alt="image0" src="http://img-fotki.yandex.ru/get/3908/imdagger.5/0_22e17_8e398c87_L" title="image0"/></a></p>                </div>
            </div>
            <div class="row comments-row">
                <span><a class="pseudo-link b-candy b-comment-shortcut"><i class="b-ico"></i>ответить</a></span>
            </div>
        </div>
    </div>
</div><div class="panel panel-text">
    <div class="panel-heading b-post-type b-post-type-text">
        <b class="b-user">
            <a class="b-user__link" href="http://imdagger.github.io/author/imdagger.html"><b class="b-user__first-letter">I</b>MDagger</a>
        </b>
написал        <span class="pull-right b-date">
            <a class="h-link" href="http://imdagger.github.io/posts/2010/02/23/dorabotka/" >
                23 февраля 2010 года, 13:04
            </a>
        </span>
    </div>
    <div class="panel-body">
        <div class="col-sm-1 b-post__layout-left">
            <a href="http://imdagger.github.io/author/imdagger.html"><img src="http://upics.yandex.ru/22199227/middle"></a>
        </div>
        <div class="col-sm-11 b-right-col">
            <noindex>
<div class="row tags-row">
    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/blender.html">blender</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/dorabotka.html">доработка</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/nabrosok.html">набросок</a></span></div>
            </noindex>
            <div class="post-title">
<a class="no-link" href="http://imdagger.github.io/posts/2010/02/23/dorabotka/">Доработка</a>            </div>
            <div class="row post-body">
                <div class="b-text">
<p>Взял я одну из своих первых удачных (т.е. ту, которую можно было
показать людям, а не держать в подполье своего винчестера) работ в
Blender (я её делал, как поздравительную открытку) и немного доработал
вчера. Поменял типы источников света, их размещение и переименовал
материалы. Сократил количество полигонов в ~5 раз! Применил SetSmooth,
но сетку не изменял (так и осталась она старая), лишь конвертировал из
треугольников в квады. Добавил ружьё и убрал поздравительную надпись :)
Вот, что получилось:</p>
<p class="text-center"><a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/142606/"><img alt="image0" src="http://img-fotki.yandex.ru/get/3910/imdagger.5/0_22d0e_5bafc7a1_L" title="image0"/></a></p>
<p>Я это изображение использую для аватарки на форуме.</p>                </div>
            </div>
            <div class="row comments-row">
                <span><a class="pseudo-link b-candy b-comment-shortcut"><i class="b-ico"></i>ответить</a></span>
            </div>
        </div>
    </div>
</div>        <div class="panel panel-default">
            <div class="panel-body more">
                <span class="less-prev"><a class="h-link" href="http://imdagger.github.io/tag/blender6.html">Назад</a></span>
                <span class="more-next"><a class="h-link" href="http://imdagger.github.io/tag/blender8.html">Ещё записи</a></span>
            </div>
        </div>
    </div>
</div>
        </div>
    </body>
</html>