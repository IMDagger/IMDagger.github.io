<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="utf-8" />
        <title>IMDagger: Дневник</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="" />
        <meta name="author" content="Alex Moiseenko" />
        <!-- Open Graph -->
        <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" />
        <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" />
        <link rel="shortcut icon" href="/favicon.ico" />
        <link rel="stylesheet" href="/theme/css/html4css1.css" />
        <link rel="stylesheet" href="/theme/css/style.css" />
        <link rel="stylesheet" href="/theme/css/pygment.css" />
        <link rel="stylesheet" href="/theme/css/math.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
        <script type="text/x-mathjax-config">
         MathJax.Hub.Config({
             'HTML-CSS': {
                 linebreaks: {
                     automatic: true,
                     width: 'container'
                 }
             },
             tex2jax: {
                 inlineMath: [['$math$','$/math$']],
                 displayMath: [['$$math$$','$$/math$$']],
                 skipTags: ['pre', 'code'],
                 preview: ['формула...'],
                 ignoreClass: 'math-ignore'
             }
         });
        </script>
        <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>


        <script src="http://s3.amazonaws.com/nwapi/nwmatcher/nwmatcher-1.2.5-min.js"></script>
        <!--[if (gte IE 6)&(lte IE 8)]>
          <script type="text/javascript" src="/theme/js/selectivizr-min.js"></script>
          <noscript><link rel="stylesheet" href="[fallback css]" /></noscript>
        <![endif]-->

        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
    </head>

    <body>
        <div class="row page-head">
            <div class="row page-head-status page-head-status-top"><div class="col-sm-12 b-status mine"><p><i></i><a href="#" title="настроение" class="b-consistent-link"><b>ни к чему чужое мнение, в моде самовыражение</b></a></p></div></div>
            <div class="col-sm-2 page-left">
                <a href="#">
                    <img src="http://upics.yandex.ru/22199227/normal" ilo-full-src="http://upics.yandex.ru/22199227/normal">
                </a>
            </div>
            <div class="col-sm-10 all-posts">
                <div class="title-container">
                    <h1><b><a href="http://imdagger.github.io/" class="fn nickname">IMDagger</a></b></h1>
                </div>
                <div class="title-menu">
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="active">
                            <a href="#">Дневник</a>
                        </li>
                        <li><a href="#">О себе</a></li>
                        <li><a href="#">Фотки</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="row page-body">
<div class="col-sm-2 page-left">
<div class="row widget widget-photo">
    <a href="posts/2011/08/07/aga-popalsia/" class="b-user-photo__link"><img class="b-user-photo__img" src=" http://img-fotki.yandex.ru/get/5409/22199227.a/0_625fc_e780ccc7_L
?log_nocount=64720402854"></a>
</div><div class="row widget">
    <div class="widget-content b-user-info">
        <div class="widget__body">
            <div class="widget-user-info__age">
                <i class="widget-user-info__sex widget-user-info__sex_type_"></i> 26&nbsp;лет
            </div>
            <div class="widget-user-info__place">
                <a href="#">Гомель</a>,                <a href="#">Беларусь</a>            </div>
            <ul class="contacts">
                <li class="contact contact-type-email"><i></i><a href="mailto:imdagger@yandex.ru">imdagger@yandex.ru</a></li>
                <li class="contact contact-type-ya-online"><i></i>imdagger@ya.ru</li>
                <li class="contact contact-type-icq"><i></i>350395088</li>
            </ul>
        </div>
    </div>
</div>

<div class="row widget">
    <div class="widget-content">
        <div class="widget__title">
            <div class="widget__title-link">Популярное в дневнике</div>
        </div>
        <div class="widget__body">
            <div class="widget-line">
                <div class="widget-entry">
                    <div class="widget-day__title">25&nbsp;июня</div>
                    <div class="widget-entry clearfix">
                        <div class="widget-entry__item">
                            <div class="widget-entry__title">
                                <a href="#" class="h-link">&nbsp;&nbsp;&nbsp; Висцеральная теория сна выглядит стр…</a>
                            </div>
                            <div class="widget-entry__info">2&nbsp;ответа</div>
                        </div>
                    </div>
                </div>
                <div class="widget-entry">
                    <div class="widget-day__title">16&nbsp;мая</div>
                    <div class="widget-entry clearfix">
                        <div class="widget-entry__item">
                            <div class="widget-entry__title">
                                <a href="#" class="h-link">Пожалуй у ByFly сегодня даже более серьё…</a>
                            </div>
                            <div class="widget-entry__info">2&nbsp;ответа</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div></div>

<div class="col-sm-10 all-posts">
<div class="row b-post-filter">
    <span class="pull-right">
        записи по
        <div class="btn-group">
            <span type="button" class="pseudo-link" data-toggle="dropdown">месяцам</span>
            <ul class="dropdown-menu dropdown-menu-right" role="menu">
                <li><a href="#" class="h-link">Нулябрь</a><li>
                <li><a href="#" class="h-link">Первябрь</a><li>
            </ul>
        </div> ·
        <div class="btn-group">
            <span type="button" class="pseudo-link" data-toggle="dropdown">меткам</span>
            <ul class="dropdown-menu dropdown-menu-right" role="menu">                <li>                    <a class="tag-1" href="/tag/radost.html" class="h-link">радость</a>                    <a class="tag-2" href="/tag/sborka.html" class="h-link">сборка</a>                    <a class="tag-2" href="/tag/icfpc.html" class="h-link">icfpc</a>                    <a class="tag-1" href="/tag/ia.html" class="h-link">Я</a>                    <a class="tag-1" href="/tag/zhizn.html" class="h-link">жизнь</a>                </li>                <li>                    <a class="tag-1" href="/tag/rabota.html" class="h-link">работа</a>                    <a class="tag-2" href="/tag/bredni.html" class="h-link">бредни</a>                    <a class="tag-1" href="/tag/programmirovanie.html" class="h-link">программирование</a>                    <a class="tag-2" href="/tag/linux.html" class="h-link">linux</a>                    <a class="tag-2" href="/tag/javascript.html" class="h-link">javascript</a>                </li>                <li>                    <a class="tag-1" href="/tag/python.html" class="h-link">python</a>                    <a class="tag-2" href="/tag/emacs.html" class="h-link">emacs</a>                    <a class="tag-2" href="/tag/java.html" class="h-link">java</a>                    <a class="tag-2" href="/tag/eda.html" class="h-link">еда</a>                    <a class="tag-1" href="/tag/oshibka.html" class="h-link">ошибка</a>                </li>                <li>                    <a class="tag-1" href="/tag/blender.html" class="h-link">blender</a>                    <a class="tag-2" href="/tag/iandeks.html" class="h-link">Яндекс</a>                    <a class="tag-1" href="/tag/bge.html" class="h-link">bge</a>                    <a class="tag-1" href="/tag/nabrosok.html" class="h-link">набросок</a>                    <a class="tag-2" href="/tag/google.html" class="h-link">google</a>                </li>            </ul>
        </div> ·
        <div class="btn-group">
            <span type="button" class="pseudo-link" data-toggle="dropdown">типам</span>
            <ul class="dropdown-menu dropdown-menu-right" role="menu">
                <li><a href="/category/description.html" class="h-link">обращение</a><li>
                <li><a href="/category/friend.html" class="h-link"></a><li>
                <li><a href="/category/join.html" class="h-link"></a><li>
                <li><a href="/category/link.html" class="h-link">ссылки</a><li>
                <li><a href="/category/mood.html" class="h-link">настроение</a><li>
                <li><a href="/category/photo.html" class="h-link">фото</a><li>
                <li><a href="/category/text.html" class="h-link">текст</a><li>
                <li><a href="/category/video.html" class="h-link">видео</a><li>
                <li><a href="/category/wishlist.html" class="h-link"></a><li>
            </ul>
        </div>
    </span>
</div>
    <div class="row b-post">
<div class="panel panel-text">
    <div class="panel-heading b-post-type b-post-type-text">
        <b class="b-user">
            <a class="b-user__link" href="author/imdagger.html"><b class="b-user__first-letter">I</b>MDagger</a>
        </b>
написал        <span class="pull-right b-date">
            <a class="h-link" href="/posts/2012/04/22/flash-socket-blokirovalsia-antivirusami/" >
                22 апреля 2012 года, 10:02
            </a>
        </span>
    </div>
    <div class="panel-body">
        <div class="col-sm-1 b-post__layout-left">
            <a href="author/imdagger.html"><img src="http://upics.yandex.ru/22199227/middle"></a>
        </div>
        <div class="col-sm-11 b-right-col">
<div class="row tags-row">
    <span class="tag"><a class="h-link" href="/tag/antivirus.html">антивирус</a></span>,    <span class="tag"><a class="h-link" href="/tag/flash.html">flash</a></span>,    <span class="tag"><a class="h-link" href="/tag/programmirovanie.html">программирование</a></span>,    <span class="tag"><a class="h-link" href="/tag/soket.html">сокет</a></span>,    <span class="tag"><a class="h-link" href="/tag/rabota.html">работа</a></span></div>
            <div class="post-title">
<a class="no-link" href="/posts/2012/04/22/flash-socket-blokirovalsia-antivirusami/">Flash socket блокировался антивирусами</a>            </div>
            <div class="row post-body">
                <div class="b-text">
<p>&nbsp;&nbsp;&nbsp; Неожиданная проблема с тем, что у некоторых игроков не отображались
обновления, разрешилась. Сузив круг виновных приложений и платформ,
выяснилось, что это антивирус. При чём Kaspersky и Avast себя вели
достаточно одинаково — блокировали запрос из Flash без каки-либо
собщений пользователю и отметов в журнале событий. Такое молчаливое
поведение достаточно странно. Но после продолжительных поисков
выяснилось, что достаточно сменить порт для соединения с 80-го. В nginx
было выставлено дополнительно слушать 81-ый порт. После этого проблема с
Flash и его socket соединением решилась.</p>
                </div>
            </div>
            <div class="row comments-row">
                <span><a class="pseudo-link b-candy b-comment-shortcut"><i class="b-ico"></i>ответить</a></span>
            </div>
        </div>
    </div>
</div><div class="panel panel-text">
    <div class="panel-heading b-post-type b-post-type-text">
        <b class="b-user">
            <a class="b-user__link" href="author/imdagger.html"><b class="b-user__first-letter">I</b>MDagger</a>
        </b>
написал        <span class="pull-right b-date">
            <a class="h-link" href="/posts/2012/04/14/podruzhil-textureatlas-assetmanager-i-multizagruzku/" title="изменено 14 апреля 2012 года в 01:49">
                14 апреля 2012 года, 01:48
            </a>
        </span>
    </div>
    <div class="panel-body">
        <div class="col-sm-1 b-post__layout-left">
            <a href="author/imdagger.html"><img src="http://upics.yandex.ru/22199227/middle"></a>
        </div>
        <div class="col-sm-11 b-right-col">
<div class="row tags-row">
    <span class="tag"><a class="h-link" href="/tag/programmirovanie.html">программирование</a></span>,    <span class="tag"><a class="h-link" href="/tag/libgdx.html">libGDX</a></span>,    <span class="tag"><a class="h-link" href="/tag/menedzher.html">менеджер</a></span>,    <span class="tag"><a class="h-link" href="/tag/resursy.html">ресурсы</a></span>,    <span class="tag"><a class="h-link" href="/tag/platformy.html">платформы</a></span>,    <span class="tag"><a class="h-link" href="/tag/unifikatsiia.html">унификация</a></span>,    <span class="tag"><a class="h-link" href="/tag/atlas.html">атлас</a></span></div>
            <div class="post-title">
<a class="no-link" href="/posts/2012/04/14/podruzhil-textureatlas-assetmanager-i-multizagruzku/">Подружил TextureAtlas, AssetManager и мультизагрузку</a>            </div>
            <div class="row post-body">
                <div class="b-text">
<p>Одним из преимуществ libGDX является то, что реально писать
приложение на PC, отлаживать большую часть приложения на PC без
эмулятора смартфона. Но есть особенность в том, где ищет библиотека
ресурсы на PC платформе и на Android. <code class="code">
Gdx.files.internal</code>
 для PC ищет
данные начиная с корня приложения, а на платформе Android начиная с
директории assets.</p>
<p>Это создаёт небольшие неудобства для унификации и отладки. Хотелось
бы свободно заливать, запускать и не думать сильно о платформе. А ещё
управлять удобно загруженными ресурсами, поддерживать связи между ними,
выгружать. Со всем этим помогает объект класса AssetManager.</p>
<p>Поэтому удобно немного расширить его поведение и указать, где
искать необходимые файлы. Когда я попытался создать свой резолвер и
просто добавлять assets/ для случая PC-платформу, то наткнулся на
проблему с загрузкой TextureAtlas. Сам pack-файл загружался прекрасно, а
вот уже изображения указанные в нём загружались как assets/assets/*,
что было некорректно и не приемлемо. Поэтому пришла простая мысль
проверять начинается ли путь с assets/ и, если это так, то не добавлять
префикс ещё раз:</p>
<div class="highlight"><pre><span class="pgcss-o">...</span>
    <span class="pgcss-kd">protected</span> <span class="pgcss-kd">class</span> <span class="pgcss-nc">MultiResolver</span> <span class="pgcss-kd">extends</span> <span class="pgcss-n">InternalFileHandleResolver</span>
<span class="pgcss-o">{</span>
        <span class="pgcss-kd">public</span> <span class="pgcss-n">FileHandle</span> <span class="pgcss-nf">resolve</span> <span class="pgcss-o">(</span><span class="pgcss-n">String</span> <span class="pgcss-n">fileName</span><span class="pgcss-o">)</span> <span class="pgcss-o">{</span>
            <span class="pgcss-k">if</span> <span class="pgcss-o">(</span><span class="pgcss-n">Gdx</span><span class="pgcss-o">.</span><span class="pgcss-na">app</span><span class="pgcss-o">.</span><span class="pgcss-na">getType</span><span class="pgcss-o">()</span> <span class="pgcss-o">!=</span> <span class="pgcss-n">Application</span><span class="pgcss-o">.</span><span class="pgcss-na">ApplicationType</span><span class="pgcss-o">.</span><span class="pgcss-na">Android</span><span class="pgcss-o">)</span> <span class="pgcss-o">{</span>
                <span class="pgcss-k">if</span> <span class="pgcss-o">(!</span><span class="pgcss-n">fileName</span><span class="pgcss-o">.</span><span class="pgcss-na">startsWith</span><span class="pgcss-o">(</span><span class="pgcss-s">&quot;assets/&quot;</span><span class="pgcss-o">))</span>
                    <span class="pgcss-n">fileName</span> <span class="pgcss-o">=</span> <span class="pgcss-s">&quot;assets/&quot;</span> <span class="pgcss-o">+</span> <span class="pgcss-n">fileName</span><span class="pgcss-o">;</span>
            <span class="pgcss-o">}</span>
            <span class="pgcss-k">return</span> <span class="pgcss-kd">super</span><span class="pgcss-o">.</span><span class="pgcss-na">resolve</span><span class="pgcss-o">(</span><span class="pgcss-n">fileName</span><span class="pgcss-o">);</span>
        <span class="pgcss-o">}</span>
    <span class="pgcss-o">}</span>

    <span class="pgcss-kd">public</span> <span class="pgcss-kt">void</span> <span class="pgcss-nf">error</span><span class="pgcss-o">(</span><span class="pgcss-n">String</span> <span class="pgcss-n">fileName</span><span class="pgcss-o">,</span> <span class="pgcss-n">Class</span> <span class="pgcss-n">type</span><span class="pgcss-o">,</span> <span class="pgcss-n">Throwable</span> <span class="pgcss-n">throwable</span><span class="pgcss-o">)</span> <span class="pgcss-o">{</span>
        <span class="pgcss-n">Gdx</span><span class="pgcss-o">.</span><span class="pgcss-na">app</span><span class="pgcss-o">.</span><span class="pgcss-na">error</span><span class="pgcss-o">(</span><span class="pgcss-s">&quot;RESOURCE&quot;</span><span class="pgcss-o">,</span> <span class="pgcss-s">&quot;Problem with file &quot;</span> <span class="pgcss-o">+</span> <span class="pgcss-n">fileName</span> <span class="pgcss-o">+</span> <span class="pgcss-s">&quot; class &quot;</span> <span class="pgcss-o">+</span> <span class="pgcss-n">type</span> <span class="pgcss-o">+</span> <span class="pgcss-s">&quot; &quot;</span> <span class="pgcss-o">+</span> <span class="pgcss-n">throwable</span><span class="pgcss-o">);</span>
    <span class="pgcss-o">}</span>

    <span class="pgcss-kd">public</span> <span class="pgcss-nf">MediaLoader</span><span class="pgcss-o">()</span> <span class="pgcss-o">{</span>
        <span class="pgcss-n">manager</span> <span class="pgcss-o">=</span> <span class="pgcss-k">new</span> <span class="pgcss-n">AssetManager</span><span class="pgcss-o">();</span>
        <span class="pgcss-n">manager</span><span class="pgcss-o">.</span><span class="pgcss-na">setErrorListener</span><span class="pgcss-o">(</span><span class="pgcss-k">this</span><span class="pgcss-o">);</span>
        <span class="pgcss-n">manager</span><span class="pgcss-o">.</span><span class="pgcss-na">setLoader</span><span class="pgcss-o">(</span><span class="pgcss-n">BitmapFont</span><span class="pgcss-o">.</span><span class="pgcss-na">class</span><span class="pgcss-o">,</span> <span class="pgcss-k">new</span> <span class="pgcss-n">BitmapFontLoader</span><span class="pgcss-o">(</span><span class="pgcss-k">new</span> <span class="pgcss-n">MultiResolver</span><span class="pgcss-o">())</span>
        <span class="pgcss-n">manager</span><span class="pgcss-o">.</span><span class="pgcss-na">setLoader</span><span class="pgcss-o">(</span><span class="pgcss-n">Music</span><span class="pgcss-o">.</span><span class="pgcss-na">class</span><span class="pgcss-o">,</span> <span class="pgcss-k">new</span> <span class="pgcss-n">MusicLoader</span><span class="pgcss-o">(</span><span class="pgcss-k">new</span> <span class="pgcss-n">MultiResolver</span><span class="pgcss-o">())</span>
        <span class="pgcss-n">manager</span><span class="pgcss-o">.</span><span class="pgcss-na">setLoader</span><span class="pgcss-o">(</span><span class="pgcss-n">Pixmap</span><span class="pgcss-o">.</span><span class="pgcss-na">class</span><span class="pgcss-o">,</span> <span class="pgcss-k">new</span> <span class="pgcss-n">PixmapLoader</span><span class="pgcss-o">(</span><span class="pgcss-k">new</span> <span class="pgcss-n">MultiResolver</span><span class="pgcss-o">())</span>
        <span class="pgcss-n">manager</span><span class="pgcss-o">.</span><span class="pgcss-na">setLoader</span><span class="pgcss-o">(</span><span class="pgcss-n">Sound</span><span class="pgcss-o">.</span><span class="pgcss-na">class</span><span class="pgcss-o">,</span> <span class="pgcss-k">new</span> <span class="pgcss-n">SoundLoader</span><span class="pgcss-o">(</span><span class="pgcss-k">new</span> <span class="pgcss-n">MultiResolver</span><span class="pgcss-o">())</span>
        <span class="pgcss-n">manager</span><span class="pgcss-o">.</span><span class="pgcss-na">setLoader</span><span class="pgcss-o">(</span><span class="pgcss-n">TextureAtlas</span><span class="pgcss-o">.</span><span class="pgcss-na">class</span><span class="pgcss-o">,</span> <span class="pgcss-k">new</span> <span class="pgcss-n">TextureAtlasLoader</span><span class="pgcss-o">(</span><span class="pgcss-k">new</span> <span class="pgcss-n">MultiResolver</span><span class="pgcss-o">())</span>
        <span class="pgcss-n">manager</span><span class="pgcss-o">.</span><span class="pgcss-na">setLoader</span><span class="pgcss-o">(</span><span class="pgcss-n">Texture</span><span class="pgcss-o">.</span><span class="pgcss-na">class</span><span class="pgcss-o">,</span> <span class="pgcss-k">new</span> <span class="pgcss-n">TextureLoader</span><span class="pgcss-o">(</span><span class="pgcss-k">new</span> <span class="pgcss-n">MultiResolver</span><span class="pgcss-o">())</span>
        <span class="pgcss-n">manager</span><span class="pgcss-o">.</span><span class="pgcss-na">setLoader</span><span class="pgcss-o">(</span><span class="pgcss-n">Skin</span><span class="pgcss-o">.</span><span class="pgcss-na">class</span><span class="pgcss-o">,</span> <span class="pgcss-k">new</span> <span class="pgcss-n">SkinLoader</span><span class="pgcss-o">(</span><span class="pgcss-k">new</span> <span class="pgcss-n">MultiResolver</span><span class="pgcss-o">())</span>
        <span class="pgcss-n">manager</span><span class="pgcss-o">.</span><span class="pgcss-na">setLoader</span><span class="pgcss-o">(</span><span class="pgcss-n">TileMapRenderer</span><span class="pgcss-o">.</span><span class="pgcss-na">class</span><span class="pgcss-o">,</span> <span class="pgcss-k">new</span> <span class="pgcss-n">TileMapRendererLoader</span><span class="pgcss-o">(</span><span class="pgcss-k">new</span> <span class="pgcss-n">MultiResolver</span><span class="pgcss-o">())</span>
    <span class="pgcss-o">}</span>
<span class="pgcss-o">...</span>
</pre></div>
<p>Возможно есть более красивые и грамотные решения, но меня и это
вполне устраивает. Тем более, что я не собираюсь создавать вложенные
assets директории. В примерах от libGDX перед pack-файлом принудительно
указывают требование на загрузку изображения от этого pack-файла, но
видимо там это сделано лишь для примера, т.к. реальной необходимости в
этом нет.</p>
<div class="highlight"><pre><span class="pgcss-n">manager</span><span class="pgcss-o">.</span><span class="pgcss-na">load</span><span class="pgcss-o">(</span><span class="pgcss-s">&quot;planet/pack&quot;</span><span class="pgcss-o">,</span> <span class="pgcss-n">TextureAtlas</span><span class="pgcss-o">.</span><span class="pgcss-na">class</span><span class="pgcss-o">);</span>
<span class="pgcss-c1">// ... когда всё загрузилось и готово</span>
<span class="pgcss-n">atlas</span> <span class="pgcss-o">=</span> <span class="pgcss-n">manager</span><span class="pgcss-o">.</span><span class="pgcss-na">get</span><span class="pgcss-o">(</span><span class="pgcss-s">&quot;planet/pack&quot;</span><span class="pgcss-o">,</span> <span class="pgcss-n">TextureAtlas</span><span class="pgcss-o">.</span><span class="pgcss-na">class</span><span class="pgcss-o">);</span>
</pre></div>
                </div>
            </div>
            <div class="row comments-row">
                <span><a class="pseudo-link b-candy b-comment-shortcut"><i class="b-ico"></i>ответить</a></span>
            </div>
        </div>
    </div>
</div><div class="panel panel-text">
    <div class="panel-heading b-post-type b-post-type-text">
        <b class="b-user">
            <a class="b-user__link" href="author/imdagger.html"><b class="b-user__first-letter">I</b>MDagger</a>
        </b>
написал        <span class="pull-right b-date">
            <a class="h-link" href="/posts/2012/04/09/nebolshie-zagvozdki-s-soketom/" >
                9 апреля 2012 года, 01:26
            </a>
        </span>
    </div>
    <div class="panel-body">
        <div class="col-sm-1 b-post__layout-left">
            <a href="author/imdagger.html"><img src="http://upics.yandex.ru/22199227/middle"></a>
        </div>
        <div class="col-sm-11 b-right-col">
<div class="row tags-row">
    <span class="tag"><a class="h-link" href="/tag/flash.html">flash</a></span>,    <span class="tag"><a class="h-link" href="/tag/trudnost.html">трудность</a></span>,    <span class="tag"><a class="h-link" href="/tag/programmirovanie.html">программирование</a></span>,    <span class="tag"><a class="h-link" href="/tag/soket.html">сокет</a></span>,    <span class="tag"><a class="h-link" href="/tag/port.html">порт</a></span></div>
            <div class="post-title">
<a class="no-link" href="/posts/2012/04/09/nebolshie-zagvozdki-s-soketom/">Небольшие загвоздки с сокетом</a>            </div>
            <div class="row post-body">
                <div class="b-text">
<p>Придётся ещё на сервере открыть 843 порт и отдавать там файл
crossdomain.xml, т.к. того требует Flash socket policy, эх… а я думал,
что подводных камней вообще не будет :) Нашёл вот
<a class="reference external" href="http://www.adobe.com/devnet/flashplayer/articles/socket_policy_files.html">тут</a>,
что и к чему и почему.</p>
                </div>
            </div>
            <div class="row comments-row">
                <span><a class="pseudo-link b-candy b-comment-shortcut"><i class="b-ico"></i>ответить</a></span>
            </div>
        </div>
    </div>
</div><div class="panel panel-link">
    <div class="panel-heading b-post-type b-post-type-link">
        <b class="b-user">
            <a class="b-user__link" href="author/imdagger.html"><b class="b-user__first-letter">I</b>MDagger</a>
        </b>
поделился ссылкой        <span class="pull-right b-date">
            <a class="h-link" href="/posts/2012/04/04/icfpc-2012/" >
                4 апреля 2012 года, 01:32
            </a>
        </span>
    </div>
    <div class="panel-body">
        <div class="col-sm-1 b-post__layout-left">
            <a href="author/imdagger.html"><img src="http://upics.yandex.ru/22199227/middle"></a>
        </div>
        <div class="col-sm-11 b-right-col">
<div class="row tags-row">
    <span class="tag"><a class="h-link" href="/tag/sorevnovanie.html">соревнование</a></span>,    <span class="tag"><a class="h-link" href="/tag/radost.html">радость</a></span>,    <span class="tag"><a class="h-link" href="/tag/zhizn.html">жизнь</a></span>,    <span class="tag"><a class="h-link" href="/tag/programmirovanie.html">программирование</a></span>,    <span class="tag"><a class="h-link" href="/tag/icfpc.html">icfpc</a></span></div>
            <div class="post-title">
<a class="h-link" href="http://icfpconference.org/icfp2012/">
    <img class="b-ico" src="http://favicon.yandex.ru/favicon/icfpconference.org?default=yaru-external">ICFPC 2012</a>
            </div>
            <div class="row post-body">
                <div class="b-text">
<p>&nbsp; &nbsp; Ура! Организаторы ICFP Programming Contest определились с датой
проведения, надеюсь, что с 13 по 16 июля я смогу принять участие в
соревновании, нужно будет ещё подготовиться к этому мероприятию, как
только появится более подробная информация по требованиям.
The ICFP Programming Contest dates have been announced. The contest will
run from Friday 13 July 12:00 GMT to Monday 16 July 12:00 GMT.</p>
                </div>
            </div>
            <div class="row comments-row">
                <span><a class="pseudo-link b-candy b-comment-shortcut"><i class="b-ico"></i>ответить</a></span>
            </div>
        </div>
    </div>
</div><div class="panel panel-text">
    <div class="panel-heading b-post-type b-post-type-text">
        <b class="b-user">
            <a class="b-user__link" href="author/imdagger.html"><b class="b-user__first-letter">I</b>MDagger</a>
        </b>
написал        <span class="pull-right b-date">
            <a class="h-link" href="/posts/2012/03/31/eksperiment-proshiol-uspeshno/" >
                31 марта 2012 года, 02:43
            </a>
        </span>
    </div>
    <div class="panel-body">
        <div class="col-sm-1 b-post__layout-left">
            <a href="author/imdagger.html"><img src="http://upics.yandex.ru/22199227/middle"></a>
        </div>
        <div class="col-sm-11 b-right-col">
<div class="row tags-row">
    <span class="tag"><a class="h-link" href="/tag/programmirovanie.html">программирование</a></span>,    <span class="tag"><a class="h-link" href="/tag/radost.html">радость</a></span>,    <span class="tag"><a class="h-link" href="/tag/http.html">HTTP</a></span>,    <span class="tag"><a class="h-link" href="/tag/python.html">python</a></span>,    <span class="tag"><a class="h-link" href="/tag/serializatsiia.html">сериализация</a></span>,    <span class="tag"><a class="h-link" href="/tag/pyamf.html">pyamf</a></span>,    <span class="tag"><a class="h-link" href="/tag/flash.html">flash</a></span>,    <span class="tag"><a class="h-link" href="/tag/rabota.html">работа</a></span>,    <span class="tag"><a class="h-link" href="/tag/flex.html">flex</a></span></div>
            <div class="post-title">
<a class="no-link" href="/posts/2012/03/31/eksperiment-proshiol-uspeshno/">Эксперимент прошёл успешно</a>            </div>
            <div class="row post-body">
                <div class="b-text">
<p>&nbsp;&nbsp;&nbsp; Очень большой поток сообщений через chunked канал мы не проверяли,
но всё работает отлично. События передаются, только, т.к. Flash часть
без Flex, то нужно чтобы списки не передавались как
flex.messaging.io.ArrayCollection, т.к. они только во Flex есть. Поэтому
нужно, чтобы <strong>pyamf.amf3.use_proxies_default</strong> был равен <strong>False</strong>.
Так же стоит выставить заголовки, чтобы промежуточные прокси-сервера,
если таковые имеются не изменяли содержимое и не кэшировали его, т.к.
это всё таки события из игровой системы. И не очень бы хотелось, чтобы
игрок вошёл в игру и случилось дежавю.</p>
<blockquote>
…
Cache-Control: no-cache, no-transform
…</blockquote>
<p>&nbsp;&nbsp;&nbsp; Ещё забавно, когда из браузера обращается к обработчику, то
начинается скачиванием бинарного файла с AMF-объектами, и он может
скачиваться бесконечно.</p>
                </div>
            </div>
            <div class="row comments-row">
                <span><a class="pseudo-link b-candy b-comment-shortcut"><i class="b-ico"></i>ответить</a></span>
            </div>
        </div>
    </div>
</div><div class="panel panel-link">
    <div class="panel-heading b-post-type b-post-type-link">
        <b class="b-user">
            <a class="b-user__link" href="author/imdagger.html"><b class="b-user__first-letter">I</b>MDagger</a>
        </b>
поделился ссылкой        <span class="pull-right b-date">
            <a class="h-link" href="/posts/2012/02/17/unit-testy-dlia-libgdx/" >
                17 февраля 2012 года, 16:11
            </a>
        </span>
    </div>
    <div class="panel-body">
        <div class="col-sm-1 b-post__layout-left">
            <a href="author/imdagger.html"><img src="http://upics.yandex.ru/22199227/middle"></a>
        </div>
        <div class="col-sm-11 b-right-col">
<div class="row tags-row">
    <span class="tag"><a class="h-link" href="/tag/kod.html">код</a></span>,    <span class="tag"><a class="h-link" href="/tag/ssylka.html">ссылка</a></span>,    <span class="tag"><a class="h-link" href="/tag/libgdx.html">libGDX</a></span>,    <span class="tag"><a class="h-link" href="/tag/programmirovanie.html">программирование</a></span>,    <span class="tag"><a class="h-link" href="/tag/testirovanie.html">тестирование</a></span></div>
            <div class="post-title">
<a class="h-link" href="http://libgdx.googlecode.com/svn/trunk/tests/gdx-tests/src/com/badlogic/gdx/tests/">
    <img class="b-ico" src="http://favicon.yandex.ru/favicon/libgdx.googlecode.com?default=yaru-external">Unit-тесты для libGDX</a>
            </div>
            <div class="row post-body">
                <div class="b-text">
<p>Порой тесты поясняют суть библиотеки даже лучше, чем любая документация
и туториалы.</p>
                </div>
            </div>
            <div class="row comments-row">
                <span><a class="pseudo-link b-candy b-comment-shortcut"><i class="b-ico"></i>ответить</a></span>
            </div>
        </div>
    </div>
</div><div class="panel panel-text">
    <div class="panel-heading b-post-type b-post-type-text">
        <b class="b-user">
            <a class="b-user__link" href="author/imdagger.html"><b class="b-user__first-letter">I</b>MDagger</a>
        </b>
написал        <span class="pull-right b-date">
            <a class="h-link" href="/posts/2012/02/14/neulovimyi-opechatko/" >
                14 февраля 2012 года, 02:14
            </a>
        </span>
    </div>
    <div class="panel-body">
        <div class="col-sm-1 b-post__layout-left">
            <a href="author/imdagger.html"><img src="http://upics.yandex.ru/22199227/middle"></a>
        </div>
        <div class="col-sm-11 b-right-col">
<div class="row tags-row">
    <span class="tag"><a class="h-link" href="/tag/programmirovanie.html">программирование</a></span>,    <span class="tag"><a class="h-link" href="/tag/identitymap.html">IdentityMap</a></span>,    <span class="tag"><a class="h-link" href="/tag/java.html">java</a></span>,    <span class="tag"><a class="h-link" href="/tag/nazvanie.html">название</a></span>,    <span class="tag"><a class="h-link" href="/tag/libgdx.html">libGDX</a></span>,    <span class="tag"><a class="h-link" href="/tag/opechatka.html">опечатка</a></span>,    <span class="tag"><a class="h-link" href="/tag/klass.html">класс</a></span>,    <span class="tag"><a class="h-link" href="/tag/zabavno.html">забавно</a></span></div>
            <div class="post-title">
<a class="no-link" href="/posts/2012/02/14/neulovimyi-opechatko/">Неуловимый Опечатко</a>            </div>
            <div class="row post-body">
                <div class="b-text">
<p>Минут 25 (может даже больше, если считать, что я проблему увидел
раньше, но решил исправить более приоритетные и понятные) потратил на
поиски, почему один java-файл не компилируется. Смотрю в название класса
в libGDX написано название, смотрю в класс, который его использует вроде
тоже самое. А начинаю компилировать, выпадает ошибка:</p>
<pre class="literal-block">
[javac] MailBox.java:22: cannot find symbol
[javac] symbol  : class IndentityMap
[javac] location: class by.sweetpair.longtrip.notifications.MailBox
[javac]         qSlots = new IndentityMap&lt;String, AtomicQueue&lt;Object&gt;&gt;();
[javac]                      ^
</pre>
<p>Сижу туплю, туплю, пытаюсь найти более сложное объяснение, почему
оно не компилируется. Не могу поверить, что тут может быть опечатка,
ведь разве я мог опечататься в слове IdentityMap? I..den..tity, что?
Ооопс, а у меня закралась незаметная буква N после буквы I Наверное пара
identity и indentity одна из частых неуловимых опечаток Хотя я помню,
что идентификация пишется без буквы эн после и, но часто на автомате
пишу это слово как отступ (indent).</p>
                </div>
            </div>
            <div class="row comments-row">
                <span><a class="pseudo-link b-candy b-comment-shortcut"><i class="b-ico"></i>ответить</a></span>
            </div>
        </div>
    </div>
</div><div class="panel panel-text">
    <div class="panel-heading b-post-type b-post-type-text">
        <b class="b-user">
            <a class="b-user__link" href="author/imdagger.html"><b class="b-user__first-letter">I</b>MDagger</a>
        </b>
написал        <span class="pull-right b-date">
            <a class="h-link" href="/posts/2012/02/06/kak-by-slozhilos/" >
                6 февраля 2012 года, 01:55
            </a>
        </span>
    </div>
    <div class="panel-body">
        <div class="col-sm-1 b-post__layout-left">
            <a href="author/imdagger.html"><img src="http://upics.yandex.ru/22199227/middle"></a>
        </div>
        <div class="col-sm-11 b-right-col">
<div class="row tags-row">
    <span class="tag"><a class="h-link" href="/tag/ia.html">Я</a></span>,    <span class="tag"><a class="h-link" href="/tag/bredni.html">бредни</a></span>,    <span class="tag"><a class="h-link" href="/tag/zhizn.html">жизнь</a></span>,    <span class="tag"><a class="h-link" href="/tag/programmirovanie.html">программирование</a></span>,    <span class="tag"><a class="h-link" href="/tag/python.html">python</a></span></div>
            <div class="post-title">
<a class="no-link" href="/posts/2012/02/06/kak-by-slozhilos/">Как бы сложилось?</a>            </div>
            <div class="row post-body">
                <div class="b-text">
<p>Интересно, чтобы случилось и как бы сложилась моя карьера и личная
жизнь, если бы не стал программировать на Python. Помню я на него
посмотрел ещё в 2005 году, всё что у меня было — стандартная
документация поставляемая с пакетом из дистрибутива. Тогда я взглянул на
него и он мне показался каким-то сложноватым :) Хотя про сам язык я слышал
и раньше он старших ребят, я тогда ещё учился в школе. В 2006 году мне
попался на глаза Lua, и очень понравился. Так прошёл год разработки на
нём, а может чуть больше или меньше. Язык мне понравился, прототипная
модель тоже, до него я с такой не сталкивался. Но не хватало «батареек».
И тут я ещё раз взглянул на Python, и понеслось. Он стал для меня
понятнее и приятнее, роднее, чем раньше сразу в 2005. Оказалось, что в
комплекте с ним идёт очень много удобных библиотек, а главное интуитивно
понятных, как и сам язык. Так он меня и завёл на проекты Slide Inc., а
затем Google Slide Inc. после поглощения. А так же он повлиял на мою
личную жизнь, т.к. я бы не встретил тех людей, которых встретил,
вращаясь в этой области.</p>
                </div>
            </div>
            <div class="row comments-row">
                <span><a class="pseudo-link b-candy b-comment-shortcut"><i class="b-ico"></i>ответить</a></span>
            </div>
        </div>
    </div>
</div><div class="panel panel-text">
    <div class="panel-heading b-post-type b-post-type-text">
        <b class="b-user">
            <a class="b-user__link" href="author/imdagger.html"><b class="b-user__first-letter">I</b>MDagger</a>
        </b>
написал        <span class="pull-right b-date">
            <a class="h-link" href="/posts/2012/01/05/combadlogicgdxutils/" >
                5 января 2012 года, 23:51
            </a>
        </span>
    </div>
    <div class="panel-body">
        <div class="col-sm-1 b-post__layout-left">
            <a href="author/imdagger.html"><img src="http://upics.yandex.ru/22199227/middle"></a>
        </div>
        <div class="col-sm-11 b-right-col">
<div class="row tags-row">
    <span class="tag"><a class="h-link" href="/tag/utils.html">utils</a></span>,    <span class="tag"><a class="h-link" href="/tag/libgdx.html">libGDX</a></span>,    <span class="tag"><a class="h-link" href="/tag/programmirovanie.html">программирование</a></span></div>
            <div class="post-title">
<a class="no-link" href="/posts/2012/01/05/combadlogicgdxutils/">com.badlogic.gdx.utils</a>            </div>
            <div class="row post-body">
                <div class="b-text">
<p>libGDX радует своим utils, там есть и <code class="code">
JsonReader</code>
 и <code class="code">
XmlReader</code>
 и
другие полезные фишечки.</p>
                </div>
            </div>
            <div class="row comments-row">
                <span><a class="pseudo-link b-candy b-comment-shortcut"><i class="b-ico"></i>ответить</a></span>
            </div>
        </div>
    </div>
</div><div class="panel panel-text">
    <div class="panel-heading b-post-type b-post-type-text">
        <b class="b-user">
            <a class="b-user__link" href="author/imdagger.html"><b class="b-user__first-letter">I</b>MDagger</a>
        </b>
написал        <span class="pull-right b-date">
            <a class="h-link" href="/posts/2011/12/29/requirejs-moduli/" >
                29 декабря 2011 года, 03:55
            </a>
        </span>
    </div>
    <div class="panel-body">
        <div class="col-sm-1 b-post__layout-left">
            <a href="author/imdagger.html"><img src="http://upics.yandex.ru/22199227/middle"></a>
        </div>
        <div class="col-sm-11 b-right-col">
<div class="row tags-row">
    <span class="tag"><a class="h-link" href="/tag/zagruzka.html">загрузка</a></span>,    <span class="tag"><a class="h-link" href="/tag/oshibka.html">ошибка</a></span>,    <span class="tag"><a class="h-link" href="/tag/programmirovanie.html">программирование</a></span>,    <span class="tag"><a class="h-link" href="/tag/radost.html">радость</a></span>,    <span class="tag"><a class="h-link" href="/tag/javascript.html">javascript</a></span>,    <span class="tag"><a class="h-link" href="/tag/undefined.html">undefined</a></span>,    <span class="tag"><a class="h-link" href="/tag/modul.html">модуль</a></span>,    <span class="tag"><a class="h-link" href="/tag/requirejs.html">RequireJS</a></span>,    <span class="tag"><a class="h-link" href="/tag/zavisimost.html">зависимость</a></span>,    <span class="tag"><a class="h-link" href="/tag/rabota.html">работа</a></span></div>
            <div class="post-title">
<a class="no-link" href="/posts/2011/12/29/requirejs-moduli/">RequireJS модули</a>            </div>
            <div class="row post-body">
                <div class="b-text">
<p>Мне нужно было подправить странную проблему в JavaScript коде,
структура которого была написана не мной. Сервер возвращает некоторый
готовый HTML, который принимает клиентская сторона и превращает в DOM.
Возвращаемая страница содержала несколько тегов <code class="code">
&lt;script&gt;</code>
, я создал
несколько js-файлов, при чём B нуждался в A, и был после них тег
<code class="code">
&lt;script&gt;</code>
 с прописанным кодом в шаблоне, где создавался экземпляр
прототипа из файла B.</p>
<p>И всё это счастье срабатывало на нажатие кнопки. Я обнаружил, что
кнопку приходится нажимать несколько раз. При чём странным образом
первый раз код выпадал с ошибкой и говорил, что не знает такой прототип
C и в помине (и что он undefined), хотя чуть выше был подключён
JavaScript-код для него.</p>
<p>Пару проб с <strong>alert</strong>-ами и выяснилось, что если этот участок кода
немного подождёт, то всё проходит из соринки и задоринки. Стало ясно,
что <code class="code">
&lt;script&gt;</code>
 элементы обходятся в произвольном порядке и по мере
загрузки. В тот момент, когда блок кода исполнялся, протопит C ещё
загружался с сервера. Пришлось искать решения.</p>
<p>И оно нашлось <a class="reference external" href="http://requirejs.org/">RequireJS</a>, что позволило
мне собрать части кода как модули и определить зависимости между ними. Я
не JavaScript разработчик, поэтому я раньше не особо задумывался, что в
JS есть такие проблемы и до этого не искал таких библиотек.</p>
<p>Но после того как я сделал модули меня ждал небольшой сюрприз
(документацию я смотрел невнимательно):</p>
<blockquote>
<div class="line-block">
<div class="line">// a/b/c</div>
<div class="line">define([], function() { … });</div>
<div class="line">// mod/user</div>
<div class="line">define([’a/b/c’, …], function (mod_a) {</div>
<div class="line">&nbsp; &nbsp; ....</div>
<div class="line">&nbsp; &nbsp; <strong>mod_a undefined, т.к. модуль ничего не экспортирует</strong></div>
<div class="line">});</div>
</div>
</blockquote>
<p>Я ничего не возвращал из данной функции, почему-то подразумевая, что
всё как-то само отправится в глобальную видимость, хотя сто раз прочёл в
доке про указание на анонимную функцию и т.д.</p>
<p>А затем час волосы на себе рвал пытаясь понять почему mod_a
переменная undefined и не содержит заветного модуля. Оказалось, что
функция возвращает словарь с данными, которые модуль экспортирует.</p>
<blockquote>
<div class="line-block">
<div class="line">// a/b/c</div>
<div class="line">define([], function() { … return {exported: MyMegaProto}; });</div>
<div class="line">// mod/user</div>
<div class="line">define([’a/b/c’, …], function (mod_a) {</div>
<div class="line">&nbsp; &nbsp; ...</div>
<div class="line">&nbsp; &nbsp; <strong>использовать mod_a.exported</strong></div>
<div class="line">&nbsp; &nbsp; ...</div>
<div class="line">&nbsp; &nbsp; return … // то что экспортируем</div>
<div class="line">});</div>
</div>
</blockquote>
                </div>
            </div>
            <div class="row comments-row">
                <span><a class="pseudo-link b-candy b-comment-shortcut"><i class="b-ico"></i>ответить</a></span>
            </div>
        </div>
    </div>
</div>        <div class="panel panel-default">
            <div class="panel-body more">
                <span class="less-prev"><a class="h-link" href="tag/programmirovanie3.html">Назад</a></span>
                <span class="more-next"><a class="h-link" href="tag/programmirovanie5.html">Ещё записи</a></span>
            </div>
        </div>
    </div>
</div>
        </div>
<!-- Yandex.Metrika informer --><a href="https://metrika.yandex.ru/stat/?id=25746494&amp;from=informer" target="_blank" rel="nofollow"><img src="//bs.yandex.ru/informer/25746494/3_1_FFFFFFFF_EFEFEFFF_0_pageviews" style="width:88px; height:31px; border:0;" alt="Яндекс.Метрика" title="Яндекс.Метрика: данные за сегодня (просмотры, визиты и уникальные посетители)" onclick="try{Ya.Metrika.informer({i:this,id:25746494,lang:'ru'});return false}catch(e){}"/></a><!-- /Yandex.Metrika informer --><!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter25746494 = new Ya.Metrika({id:25746494, clickmap:true, trackLinks:true, accurateTrackBounce:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="//mc.yandex.ru/watch/25746494" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->    </body>
</html>