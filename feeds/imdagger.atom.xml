<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>IMDagger</title><link href="/" rel="alternate"></link><link href="/feeds/imdagger.atom.xml" rel="self"></link><id>/</id><updated>2014-07-18T23:59:00+03:00</updated><entry><title>Переезд</title><link href="/posts/2014/06/26/pereezd/" rel="alternate"></link><updated>2014-06-26T17:23:23+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-06-26:posts/2014/06/26/pereezd/</id><summary type="html">&lt;p&gt;Такс, придётся подумать куда перехать с Я.ру, чтобы всё перенести
как нужно. Жду, когда они зальют на Я.Диск все посты в HTML, чтобы
посмотреть, что там, хотя если они будут долго шевелиться, то мне
придётся самому сделать краулера, который вытащит всё моё. В принципе
такими темпами стоит подумать и о моей второй почте, и подвязать к ней
сервисы тоже, чтобы не растерять всё. Т.к. всё что меня держало это
OpenID и Jabber от Яндекса.&lt;/p&gt;
</summary><category term="переезд"></category><category term="прощай"></category><category term="Я.ру"></category><category term="Яндекс"></category></entry><entry><title></title><link href="/posts/2014/06/25/urn:ya.ru:post/22199227/1969/" rel="alternate"></link><updated>2014-06-25T02:49:44+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-06-25:posts/2014/06/25/urn:ya.ru:post/22199227/1969/</id><summary type="html">&lt;p&gt;Висцеральная теория сна выглядит стройно и убедительно, и сходится с
опытами. И это позволяет подругому взгянуть на то, зачем мы вообще спим
и под другим углом осознать «усталость». Проглотил на одном дыхании.&lt;/p&gt;
</summary><category term="теория"></category><category term="сон"></category><category term="Пигарев"></category><category term="наука"></category></entry><entry><title>Малина в корпусе</title><link href="/posts/2014/06/21/malina-v-korpuse/" rel="alternate"></link><updated>2014-06-21T16:19:31+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-06-21:posts/2014/06/21/malina-v-korpuse/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/643281"&gt;&lt;img alt="Малина в корпусе" src="http://img-fotki.yandex.ru/get/9666/22199227.b/0_9d0d1_706b1fc6_L" title="Малина в корпусе"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/643282"&gt;&lt;img alt="Малина в корпусе" src="http://img-fotki.yandex.ru/get/9489/22199227.b/0_9d0d2_44287593_L" title="Малина в корпусе"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Корпус добротный, утяжелённый, на силиконовой подложке, чтобы не
скользил; хотя сама плата во много раз меньше корпуса (размером с
кредитную карту).&lt;/p&gt;</summary><category term="компьютер"></category><category term="pi"></category><category term="корпус"></category><category term="устройство"></category><category term="raspberry"></category></entry><entry><title></title><link href="/posts/2014/06/13/urn:ya.ru:post/22199227/1967/" rel="alternate"></link><updated>2014-06-13T02:32:51+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-06-13:posts/2014/06/13/urn:ya.ru:post/22199227/1967/</id><summary type="html">&lt;p&gt;В сериалах с закадровым смехом настолько к нему привыкаешь, что
когда смотрю новый ситком без закадрового смеха, то уже чувствую
странное ощущение тревожности (моз такой: «бзыыынь..бзыынь.. вроде
смешно, а чего никто не смеётся?»). Хотя, собственно, привыкнуть к
стороннему смеху было тоже сложно, особенно, когда кажется, что шутка не
смешная; а они всё равно радуются. Это, наверное, для меня как Гриффинов
смотреть… начинаешь смотреть — кажется странным, потом втягиваешься,
привыкаешь и вот уже смеёшься… бах! посмотрел уже 10 сезонов. Потом
долгий перерыв, и оказывается, что успел отвыкнуть и нужен опять
разогрев.&lt;/p&gt;
</summary><category term="смех"></category><category term="привычка"></category><category term="сериал"></category><category term="жизнь"></category><category term="бредни"></category></entry><entry><title></title><link href="/posts/2014/06/07/urn:ya.ru:post/22199227/1966/" rel="alternate"></link><updated>2014-06-07T13:54:01+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-06-07:posts/2014/06/07/urn:ya.ru:post/22199227/1966/</id><summary type="html">&lt;p&gt;Rust в качестве замены C++ выглядит для меня довольно интересно. И
гигиеничные макросы дают больше свободы в метапрограммировании, чем
исторический костыль из плюсов.&lt;/p&gt;
</summary><category term="Rust"></category><category term="мысль"></category><category term="C++"></category></entry><entry><title></title><link href="/posts/2014/05/30/urn:ya.ru:post/22199227/1965/" rel="alternate"></link><updated>2014-05-30T18:33:33+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-05-30:posts/2014/05/30/urn:ya.ru:post/22199227/1965/</id><summary type="html">&lt;p&gt;Ееее! Сегодня моему «уютненькому» уже 5 лет! Пусть растёт большой :)
Хотя уже совсем не так быстро как раньше.&lt;/p&gt;
</summary><category term="блог"></category><category term="5"></category><category term="годовщина"></category></entry><entry><title></title><link href="/posts/2014/05/25/urn:ya.ru:post/22199227/1964/" rel="alternate"></link><updated>2014-05-25T01:01:28+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-05-25:posts/2014/05/25/urn:ya.ru:post/22199227/1964/</id><summary type="html">&lt;p&gt;Повезло, сегодня чуть не наступил на змею ногой. Впредь буду
внимательнее смотреть, что ползает по земле.&lt;/p&gt;
</summary><category term="Я"></category><category term="опасность"></category><category term="жизнь"></category></entry><entry><title>ICFPC 2014</title><link href="/posts/2014/05/22/icfpc-2014/" rel="alternate"></link><updated>2014-05-22T03:34:41+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-05-22:posts/2014/05/22/icfpc-2014/</id><summary type="html">&lt;p&gt;Ура! Наконец стали известны даты ICFP Programming Contest 2014. Это
будет 3 дня начиная с 25 июля. С нетерпением жду новых приключений :).&lt;/p&gt;
</summary><category term="соревнование"></category><category term="2014"></category><category term="ожидание"></category><category term="icfpc"></category></entry><entry><title></title><link href="/posts/2014/05/22/urn:ya.ru:post/22199227/1962/" rel="alternate"></link><updated>2014-05-22T01:59:40+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-05-22:posts/2014/05/22/urn:ya.ru:post/22199227/1962/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Попробовал мороженое от Zielona Budka (это Польша), взял то, что без
молочных продуктов сделано. Я думал оно будет по вкусу и фактуре как
фруктовый лёд, а оказалось, что &lt;strong&gt;лучше&lt;/strong&gt; многих сортов мороженого, что
я пробовал. И килокалорий вышло всего 145 и без холестерина. В следующий
раз попробую их малиновый сорбет.&lt;/p&gt;
</summary><category term="радость"></category><category term="жизнь"></category><category term="еда"></category><category term="мороженое"></category></entry><entry><title></title><link href="/posts/2014/05/17/urn:ya.ru:post/22199227/1959/" rel="alternate"></link><updated>2014-05-17T04:29:10+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-05-17:posts/2014/05/17/urn:ya.ru:post/22199227/1959/</id><summary type="html">&lt;p&gt;Странно, как я пропустил такой интересный фильм как «Limitless». Хм,
может быть я забыл опять принять свои ноотропы? :)&lt;/p&gt;
</summary><category term="интересно"></category><category term="фильм"></category><category term="жизнь"></category></entry><entry><title></title><link href="/posts/2014/05/16/urn:ya.ru:post/22199227/1958/" rel="alternate"></link><updated>2014-05-16T02:00:52+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-05-16:posts/2014/05/16/urn:ya.ru:post/22199227/1958/</id><summary type="html">&lt;p&gt;Пожалуй у ByFly сегодня даже более серьёзные проблемы, чем все эти две
или три недели:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;…&lt;/div&gt;
&lt;div class="line"&gt;3354 packets transmitted, 12 received, &lt;strong&gt;99% packet loss&lt;/strong&gt;, time 3380764ms&lt;/div&gt;
&lt;div class="line"&gt;rtt min/avg/max/mdev = 244.105/1204.424/3983.568/1329.357 ms, pipe 4&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
</summary><category term="byfly"></category><category term="интернет"></category><category term="проблема"></category></entry><entry><title></title><link href="/posts/2014/05/14/urn:ya.ru:post/22199227/1957/" rel="alternate"></link><updated>2014-05-14T18:35:17+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-05-14:posts/2014/05/14/urn:ya.ru:post/22199227/1957/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Наконец я заметил, где в Gimp переключается цетовой профиль для уже
существующих изображений (т.к. настройки рабочего холста расположены в
Правка → Параметры → Управление цветом), а я для профиля искал тоже
параметры в настройках а они в:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Изображение → Режим → Назначить цветовой профиль&lt;/p&gt;
&lt;p&gt;Изображение → Режим → Преобразовать в цветовой профиль&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp; Теперь я могу сохранять PNG с цветовым профилем sRGB. Заодно
познакомился с утилитой colormgr, при помощи которой можно посмотреть
устройства и профили.&lt;/p&gt;
</summary><category term="gimp"></category><category term="цвет"></category><category term="colormgr"></category><category term="профиль"></category><category term="srgb"></category></entry><entry><title>Транспорт в Гомеле</title><link href="/posts/2014/05/05/transport-v-gomele/" rel="alternate"></link><updated>2014-05-05T19:15:40+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-05-05:posts/2014/05/05/transport-v-gomele/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; В браузере я привык использовать gomeltrans.net, но на смартфоне я
редко включаю 3G-интернет. А вот для мобильной версии нашёлся GoTrans,
удобное приложение, может работать оффлайн, сайт у них тоже приятный;
правда привычкам изменять сложно и с компьютера я буду как и раньше
открывать любимый сайт. Зато в мобильном +1 приложение.&lt;/p&gt;
</summary><category term="мобильный"></category><category term="транспорт"></category><category term="Гомель"></category><category term="приложение"></category></entry><entry><title></title><link href="/posts/2014/05/02/urn:ya.ru:post/22199227/1953/" rel="alternate"></link><updated>2014-05-02T02:06:14+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-05-02:posts/2014/05/02/urn:ya.ru:post/22199227/1953/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Игра “Нямстеры” затягивает… Простые правила, забавные персонажи и
приятный игровой процесс. Убивает время однозначно.&lt;/p&gt;
</summary><category term="игра"></category><category term="нямстеры"></category></entry><entry><title>Pygame и MP3</title><link href="/posts/2014/04/25/pygame-i-mp3/" rel="alternate"></link><updated>2014-04-25T17:35:01+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-04-25:posts/2014/04/25/pygame-i-mp3/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; В документации написано, что mp3 ограниченно поддерживается и на
некоторых платформах могут быть проблемы (даже падение с segfault). В
моём случае на Ubuntu 12.04 LTS с Pygame из пакетов и всем остальным по
умолчанию попытка проиграть MP3 заканчивается щелчком из динамика, но не
падает (возможно так не для любого файла, но для тех, что у меня были
случилось именно так). Я решил переконвертировать из в OGG-формат. Но
после опять, щелчок и всё, благо у меня был один рабочий файл и я
увидел, что мои конвертированные — пожаты FLAC, а рабочий — Vorbis.
После этого я указал принудительно использовать нужный кодек (а не по
умолчанию) и Pygame стал всё отлично воспроизводить:&lt;/p&gt;
&lt;blockquote&gt;
&lt;strong&gt;avconv -i файл.mp3 -codec:a libvorbis файл.ogg&lt;/strong&gt;&lt;/blockquote&gt;
</summary><category term="музыка"></category><category term="ubuntu"></category><category term="звук"></category><category term="pygame"></category><category term="vorbis"></category><category term="mp3"></category><category term="flac"></category><category term="ogg"></category></entry><entry><title>atan2</title><link href="/posts/2014/04/19/atan2/" rel="alternate"></link><updated>2014-04-19T16:22:37+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-04-19:posts/2014/04/19/atan2/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Стоит быть внимательным с функцией atan2 и из Python (math.atan2) и
из Racket (да, и наверное везде так). Первый аргумент это Y, а второй X.
Но не наоборот.&lt;/p&gt;
</summary><category term="внимательность"></category><category term="аргументы"></category><category term="atan2"></category><category term="python"></category><category term="racket"></category><category term="параметры"></category></entry><entry><title>Потокобезопасность</title><link href="/posts/2014/04/15/potokobezopasnost/" rel="alternate"></link><updated>2014-04-15T03:53:22+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-04-15:posts/2014/04/15/potokobezopasnost/</id><summary type="html">&lt;p&gt;Похоже,
что&amp;nbsp;&lt;a class="reference external" href="http://license.scala.com/readme/ScriptingAutomation.html"&gt;ScalaPlayer&lt;/a&gt;
не дружит с попыткой дёргать его метод Log из разных нитей из Python.
Как-то это всё заканчивается плачевно — тихим падением. Поэтому лучше
завернуть ScalaPlayer.Log в родной python-овский обработчик из модуля
logging:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-nn"&gt;logging&lt;/span&gt;

&lt;span class="pgcss-k"&gt;class&lt;/span&gt; &lt;span class="pgcss-nc"&gt;ScalaLogHandler&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;logging&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;Handler&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;

    &lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;emit&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;record&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;ScalaPlayer&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;Log&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;format&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;record&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;
&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Т.к. logging.Handler потокобезопасный и весь модуль logging тоже.&lt;/p&gt;
</summary><category term="блокировка"></category><category term="ScalaPlayer"></category><category term="scala"></category><category term="поток"></category><category term="python"></category><category term="безопасность"></category></entry><entry><title></title><link href="/posts/2014/04/11/urn:ya.ru:post/22199227/1949/" rel="alternate"></link><updated>2014-04-11T20:14:58+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-04-11:posts/2014/04/11/urn:ya.ru:post/22199227/1949/</id><summary type="html">&lt;p&gt;Купил новые батарейки для моего беспроводного грызуна. Вставил,
подключил, не работает. Мышь пролежала до этого где-то полгода без
использования. Пришлось разобрать, убрал все окисления, зачистил
контакты питания, убрал в нескольких местах КЗ на дорожках, собрал, ура!
снова работает. :)&lt;/p&gt;
</summary><category term="починил"></category><category term="мышь"></category><category term="неисправность"></category><category term="беспроводная"></category></entry><entry><title></title><link href="/posts/2014/04/11/urn:ya.ru:post/22199227/1948/" rel="alternate"></link><updated>2014-04-11T01:40:08+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-04-11:posts/2014/04/11/urn:ya.ru:post/22199227/1948/</id><summary type="html">&lt;p&gt;Я расчитывал, что сборка числа в комплексное (достаточно дешёвая
операция) и последующее вычисление магнитуды будут быстрее, чем сумма
квадратов и извлечение корня, т.к. функция magnitude реализована в
математическом ядре Racket и написана на C. Но это не так,
JIT-оптимизированный код справляется с задачей быстрее, т.к. нет лишних
вызовов функций, чистая математика. А если подключить racket/flonums для
дробной арифметики, то скорость тогда ещё больше возрастает.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-nv"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;time &lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;for&lt;/span&gt; &lt;span class="pgcss-p"&gt;([&lt;/span&gt;&lt;span class="pgcss-nf"&gt;i&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;in-range&lt;/span&gt; &lt;span class="pgcss-mi"&gt;1000000&lt;/span&gt;&lt;span class="pgcss-p"&gt;)])&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;magnitude &lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;make-rectangular &lt;/span&gt;&lt;span class="pgcss-nv"&gt;i&lt;/span&gt; &lt;span class="pgcss-nv"&gt;i&lt;/span&gt;&lt;span class="pgcss-p"&gt;))))&lt;/span&gt;
&lt;span class="pgcss-nv"&gt;cpu&lt;/span&gt; &lt;span class="pgcss-nv"&gt;time:&lt;/span&gt; &lt;span class="pgcss-mi"&gt;2020&lt;/span&gt; &lt;span class="pgcss-nv"&gt;real&lt;/span&gt; &lt;span class="pgcss-nv"&gt;time:&lt;/span&gt; &lt;span class="pgcss-mi"&gt;2013&lt;/span&gt; &lt;span class="pgcss-nv"&gt;gc&lt;/span&gt; &lt;span class="pgcss-nv"&gt;time:&lt;/span&gt; &lt;span class="pgcss-mi"&gt;20&lt;/span&gt;
&lt;span class="pgcss-nv"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;time &lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;for&lt;/span&gt; &lt;span class="pgcss-p"&gt;([&lt;/span&gt;&lt;span class="pgcss-nf"&gt;i&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;in-range&lt;/span&gt; &lt;span class="pgcss-mi"&gt;1000000&lt;/span&gt;&lt;span class="pgcss-p"&gt;)])&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;let &lt;/span&gt;&lt;span class="pgcss-p"&gt;([&lt;/span&gt;&lt;span class="pgcss-nf"&gt;i&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;-&amp;gt;fl&lt;/span&gt; &lt;span class="pgcss-nv"&gt;i&lt;/span&gt;&lt;span class="pgcss-p"&gt;)])&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;magnitude &lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;make-rectangular &lt;/span&gt;&lt;span class="pgcss-nv"&gt;i&lt;/span&gt; &lt;span class="pgcss-nv"&gt;i&lt;/span&gt;&lt;span class="pgcss-p"&gt;)))))&lt;/span&gt;
&lt;span class="pgcss-nv"&gt;cpu&lt;/span&gt; &lt;span class="pgcss-nv"&gt;time:&lt;/span&gt; &lt;span class="pgcss-mi"&gt;1280&lt;/span&gt; &lt;span class="pgcss-nv"&gt;real&lt;/span&gt; &lt;span class="pgcss-nv"&gt;time:&lt;/span&gt; &lt;span class="pgcss-mi"&gt;1279&lt;/span&gt; &lt;span class="pgcss-nv"&gt;gc&lt;/span&gt; &lt;span class="pgcss-nv"&gt;time:&lt;/span&gt; &lt;span class="pgcss-mi"&gt;48&lt;/span&gt;
&lt;span class="pgcss-nv"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;time &lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;for&lt;/span&gt; &lt;span class="pgcss-p"&gt;([&lt;/span&gt;&lt;span class="pgcss-nf"&gt;i&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;in-range&lt;/span&gt; &lt;span class="pgcss-mi"&gt;1000000&lt;/span&gt;&lt;span class="pgcss-p"&gt;)])&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;sqrt &lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;+ &lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;* &lt;/span&gt;&lt;span class="pgcss-nv"&gt;i&lt;/span&gt; &lt;span class="pgcss-nv"&gt;i&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;* &lt;/span&gt;&lt;span class="pgcss-nv"&gt;i&lt;/span&gt; &lt;span class="pgcss-nv"&gt;i&lt;/span&gt;&lt;span class="pgcss-p"&gt;)))))&lt;/span&gt;
&lt;span class="pgcss-nv"&gt;cpu&lt;/span&gt; &lt;span class="pgcss-nv"&gt;time:&lt;/span&gt; &lt;span class="pgcss-mi"&gt;984&lt;/span&gt; &lt;span class="pgcss-nv"&gt;real&lt;/span&gt; &lt;span class="pgcss-nv"&gt;time:&lt;/span&gt; &lt;span class="pgcss-mi"&gt;980&lt;/span&gt; &lt;span class="pgcss-nv"&gt;gc&lt;/span&gt; &lt;span class="pgcss-nv"&gt;time:&lt;/span&gt; &lt;span class="pgcss-mi"&gt;8&lt;/span&gt;
&lt;span class="pgcss-nv"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;time &lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;for&lt;/span&gt; &lt;span class="pgcss-p"&gt;([&lt;/span&gt;&lt;span class="pgcss-nf"&gt;i&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;in-range&lt;/span&gt; &lt;span class="pgcss-mi"&gt;1000000&lt;/span&gt;&lt;span class="pgcss-p"&gt;)])&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;let &lt;/span&gt;&lt;span class="pgcss-p"&gt;([&lt;/span&gt;&lt;span class="pgcss-nf"&gt;i&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;-&amp;gt;fl&lt;/span&gt; &lt;span class="pgcss-nv"&gt;i&lt;/span&gt;&lt;span class="pgcss-p"&gt;)])&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;flsqrt&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;fl+&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;fl*&lt;/span&gt; &lt;span class="pgcss-nv"&gt;i&lt;/span&gt; &lt;span class="pgcss-nv"&gt;i&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;fl*&lt;/span&gt; &lt;span class="pgcss-nv"&gt;i&lt;/span&gt; &lt;span class="pgcss-nv"&gt;i&lt;/span&gt;&lt;span class="pgcss-p"&gt;))))))&lt;/span&gt;
&lt;span class="pgcss-nv"&gt;cpu&lt;/span&gt; &lt;span class="pgcss-nv"&gt;time:&lt;/span&gt; &lt;span class="pgcss-mi"&gt;84&lt;/span&gt; &lt;span class="pgcss-nv"&gt;real&lt;/span&gt; &lt;span class="pgcss-nv"&gt;time:&lt;/span&gt; &lt;span class="pgcss-mi"&gt;84&lt;/span&gt; &lt;span class="pgcss-nv"&gt;gc&lt;/span&gt; &lt;span class="pgcss-nv"&gt;time:&lt;/span&gt; &lt;span class="pgcss-mi"&gt;8&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Разница между первым и последним вариантом наглядна.&lt;/p&gt;
</summary><category term="magnitude"></category><category term="flonum"></category><category term="производительность"></category><category term="вычисление"></category><category term="расстояние"></category><category term="racket"></category></entry><entry><title>Множители</title><link href="/posts/2014/03/25/mnozhiteli/" rel="alternate"></link><updated>2014-03-25T13:28:27+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-03-25:posts/2014/03/25/mnozhiteli/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Забавно, что первое такое N, что количество натуральных чисел с
нечётным числом простых множителей равно количеству с чётным числом
множителей на отрезке [2;N], является 906150257 и не какое-нибудь другое
меньшее.&lt;/p&gt;
</summary><category term="простое"></category><category term="программирование"></category><category term="математика"></category><category term="вычисление"></category></entry><entry><title>Регулярка и проверка на простоту?</title><link href="/posts/2014/03/24/reguliarka-i-proverka-na-prostotu/" rel="alternate"></link><updated>2014-03-24T02:30:29+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-03-24:posts/2014/03/24/reguliarka-i-proverka-na-prostotu/</id><summary type="html">&lt;p&gt;Немного безумия и можно при помощи регулярного выражения проверить
простое ли число&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-nn"&gt;re&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-n"&gt;is_complex&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;re&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;compile&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;r&amp;#39;^1?$|^(11+?)\1+$&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;check_prime&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;n&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;... &lt;/span&gt;    &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-ow"&gt;not&lt;/span&gt; &lt;span class="pgcss-nb"&gt;bool&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;is_complex&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;match&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class="pgcss-o"&gt;*&lt;/span&gt; &lt;span class="pgcss-n"&gt;n&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class="cut"&gt;&lt;a class="h-link reference internal" href="#cut_56565520"data-toggle="collapse"&gt;Подробнее&lt;/a&gt;&lt;/span&gt;&lt;div class="collapse" id="cut_56565520"&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&amp;gt;&amp;gt;&amp;gt; check_prime(1)&lt;/div&gt;
&lt;div class="line"&gt;&lt;strong&gt;False&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;&amp;gt;&amp;gt;&amp;gt; check_prime(2)&lt;/div&gt;
&lt;div class="line"&gt;&lt;strong&gt;True&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;&amp;gt;&amp;gt;&amp;gt; check_prime(3)&lt;/div&gt;
&lt;div class="line"&gt;&lt;strong&gt;True&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;&amp;gt;&amp;gt;&amp;gt; check_prime(4)&lt;/div&gt;
&lt;div class="line"&gt;&lt;strong&gt;False&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;&amp;gt;&amp;gt;&amp;gt; check_prime(101)&lt;/div&gt;
&lt;div class="line"&gt;&lt;strong&gt;True&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;&amp;gt;&amp;gt;&amp;gt; check_prime(200)&lt;/div&gt;
&lt;div class="line"&gt;&lt;strong&gt;False&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;&amp;gt;&amp;gt;&amp;gt; check_prime(243)&lt;/div&gt;
&lt;div class="line"&gt;&lt;strong&gt;False&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;&amp;gt;&amp;gt;&amp;gt; check_prime(901)&lt;/div&gt;
&lt;div class="line"&gt;&lt;strong&gt;False&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;&amp;gt;&amp;gt;&amp;gt; check_prime(903)&lt;/div&gt;
&lt;div class="line"&gt;&lt;strong&gt;False&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;&amp;gt;&amp;gt;&amp;gt; check_prime(997)&lt;/div&gt;
&lt;div class="line"&gt;&lt;strong&gt;True&lt;/strong&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Как работает это? is_complex проверяет есть ли у числа какие-либо
два множителя, т.е. при помощи регулярного аражения происходит
факторизация числа. Само число записывается как такое же количество
единиц равное значению.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Часть&lt;/em&gt; выражения:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
... ^(11+?)\1+ ...
&lt;/pre&gt;
&lt;p&gt;Означает, что строка состоит из двух или более единиц таких, что
встречаются два или более раза в ней. Т.е. получается, что проверка
регулярным выражением пытается выразить N единиц через A * B; если это
возможно, то число составное.&lt;/p&gt;
</summary><category term="ненормальное"></category><category term="программирование"></category><category term="число"></category><category term="простое"></category></entry><entry><title>django-polymorphic и поле начинающееся с подчёркивания</title><link href="/posts/2014/03/15/django-polymorphic-i-pole-nachinaiushcheesia-s-podchiorkivaniia/" rel="alternate"></link><updated>2014-03-15T03:31:49+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-03-15:posts/2014/03/15/django-polymorphic-i-pole-nachinaiushcheesia-s-podchiorkivaniia/</id><summary type="html">&lt;p&gt;Если название поля начинается с одинарного продчёркивания, то в
некоторых случаях в вложенных запросах не получится его использовать,
polymorphic будет ругаться на модель. Почему? Потому, что в
django-polymorphic есть поддержка &amp;quot;_&lt;strong&gt;_&lt;/strong&gt;_&amp;quot; (тройного
подчёркивания), которое означает, что указана модель и её поле. Это всё
нужно, чтобы не писать
filter(writtingdocument_sellabledocument_traidingdocument_mymegafield),
а написать просто filter(TraidingDocument_&lt;strong&gt;_&lt;/strong&gt;_mymegafield), и
библиотека уже сама сгенерирует полный путь. Удобно, в доке описано, но
я как-то не обратил внимание, что там оно тройное и тогда не уловит
из-за этого суть. А наткнулся, когда попытался обратное поле фильтровать
_client_profile, получалось, что-то типа
filter(user_&lt;strong&gt;_&lt;/strong&gt;_client_profile), и от этого django-polymorphic
решал, что user никакое не название промежуточного поля, а название
модели. Быстрое решение? Не называть с “_” поля, если используешь
библиотеку полиморфных моделей.&lt;/p&gt;
</summary><category term="django-polymorphic"></category><category term="запрос"></category><category term="программирование"></category><category term="подчёркивание"></category><category term="название"></category><category term="модель"></category><category term="поле"></category><category term="python"></category><category term="тройной"></category><category term="фильтрация"></category></entry><entry><title></title><link href="/posts/2014/03/12/urn:ya.ru:post/22199227/1942/" rel="alternate"></link><updated>2014-03-12T03:08:41+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-03-12:posts/2014/03/12/urn:ya.ru:post/22199227/1942/</id><summary type="html">&lt;p&gt;ни к чему чужое мнение, в моде самовыражение&lt;/p&gt;
</summary></entry><entry><title>Синтаксическая параметризация</title><link href="/posts/2014/03/12/sintaksicheskaia-parametrizatsiia/" rel="alternate"></link><updated>2014-03-12T03:06:10+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-03-12:posts/2014/03/12/sintaksicheskaia-parametrizatsiia/</id><summary type="html">&lt;p&gt;Если использовать обычный syntax-parameterize, то внутри него ни
объявить структуру, ни переменные. Но зато есть
&lt;a class="reference external" href="http://docs.racket-lang.org/reference/splicing.html?q=splicing-synax-parameterize&amp;amp;q=syntax-parameterize#%28form._%28%28lib._racket%2Fsplicing..rkt%29._splicing-syntax-parameterize%29%29"&gt;splicing-syntax-parameterize&lt;/a&gt;,
который как раз все объявления пробрасывает на уровень выше — в
родительскую конструкцию. Только обязательно следует импортировать
&lt;code class="code"&gt;
(require racket/splicing)&lt;/code&gt;
, т.к. конструкция описана в этом модуле и без
подключения может казаться, что сплайсинг не работает, а не то, что
идентификатор не объявлен.&lt;/p&gt;
</summary><category term="racket"></category><category term="splicing-syntax-parameterize"></category><category term="struct"></category></entry><entry><title></title><link href="/posts/2014/03/12/urn:ya.ru:post/22199227/1940/" rel="alternate"></link><updated>2014-03-12T02:59:11+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-03-12:posts/2014/03/12/urn:ya.ru:post/22199227/1940/</id><summary type="html">&lt;p&gt;Удобная штука декорирование в Racket для структур, правда я думал, что
оно реализовано на уровне библиотеки, а оказалось, что в самом рантайме.
Оно используется для контрактного программирования (есть и chaperone,
который для постусловий), но может быть полезна для перехвата, например,
момента, когда происходит установка поля в структуре и последующей
модификации.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;struct&lt;/span&gt; &lt;span class="pgcss-nv"&gt;x&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;y&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-kd"&gt;#:mutable)&lt;/span&gt;
&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;define &lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;some&lt;/span&gt; &lt;span class="pgcss-nv"&gt;f&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;impersonate-struct &lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;x&lt;/span&gt; &lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
                     &lt;span class="pgcss-nv"&gt;set-x-y!&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;lambda &lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;self&lt;/span&gt; &lt;span class="pgcss-nv"&gt;new-v&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;f&lt;/span&gt; &lt;span class="pgcss-nv"&gt;new-v&lt;/span&gt;&lt;span class="pgcss-p"&gt;))))&lt;/span&gt;

&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;define &lt;/span&gt;&lt;span class="pgcss-nv"&gt;m&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;some&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;lambda &lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;x&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;add1 &lt;/span&gt;&lt;span class="pgcss-nv"&gt;x&lt;/span&gt;&lt;span class="pgcss-p"&gt;))))&lt;/span&gt;
&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;define &lt;/span&gt;&lt;span class="pgcss-nv"&gt;m2&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;some&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;lambda &lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;x&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;sub1 &lt;/span&gt;&lt;span class="pgcss-nv"&gt;x&lt;/span&gt;&lt;span class="pgcss-p"&gt;))))&lt;/span&gt;

&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;x-y&lt;/span&gt; &lt;span class="pgcss-nv"&gt;m&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-c1"&gt;;; 1&lt;/span&gt;
&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;x-y&lt;/span&gt; &lt;span class="pgcss-nv"&gt;m2&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-c1"&gt;;; 1&lt;/span&gt;

&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;set-x-y!&lt;/span&gt; &lt;span class="pgcss-nv"&gt;m&lt;/span&gt; &lt;span class="pgcss-mi"&gt;3&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;set-x-y!&lt;/span&gt; &lt;span class="pgcss-nv"&gt;m2&lt;/span&gt; &lt;span class="pgcss-mi"&gt;3&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;x-y&lt;/span&gt; &lt;span class="pgcss-nv"&gt;m&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-c1"&gt;;; 4&lt;/span&gt;
&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;x-y&lt;/span&gt; &lt;span class="pgcss-nv"&gt;m2&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-c1"&gt;;; 2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</summary><category term="контракт"></category><category term="impersonate"></category><category term="racket"></category><category term="обработчик"></category></entry><entry><title></title><link href="/posts/2014/03/09/urn:ya.ru:post/22199227/1939/" rel="alternate"></link><updated>2014-03-09T01:42:02+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-03-09:posts/2014/03/09/urn:ya.ru:post/22199227/1939/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Для меня было довольно неожиданным увидеть в списке тех мест, где
соревнование Google Code Jam не распространяется провинцию Квебек
(Канада); это среди Северной Кореи, Судана, Кубы, Сирии и Саудовской
Аравии.&lt;/p&gt;
</summary><category term="соревнование"></category><category term="Квебек"></category><category term="google"></category><category term="codejam"></category></entry><entry><title>Быстрая аппроксимация расстояния</title><link href="/posts/2014/02/27/bystraia-approksimatsiia-rasstoianiia/" rel="alternate"></link><updated>2014-02-27T01:24:14+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-02-27:posts/2014/02/27/bystraia-approksimatsiia-rasstoianiia/</id><summary type="html">&lt;p&gt;Улучшенное Манхэттенское расстояние.&lt;/p&gt;
</summary><category term="расстояние"></category><category term="быстрый"></category><category term="функция"></category><category term="аппроксимация"></category></entry><entry><title>Скрещивание ужа и ежа</title><link href="/posts/2014/02/26/skreshchivanie-uzha-i-ezha/" rel="alternate"></link><updated>2014-02-26T22:51:56+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-02-26:posts/2014/02/26/skreshchivanie-uzha-i-ezha/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Выложил на Github &lt;a class="reference external" href="https://gist.github.com/IMDagger/9220764"&gt;мой
переходник&lt;/a&gt;, который
пытается любыми правдами и неправдами транслировать зарегистрированные
модели из Django Admin в XAdmin. Для этого приходится собирать все
атрибуты, которые объявлены после базовой модели, строить над ними
обёртки, которые подсовывают requests параметр по необходимости (actions
не принимают этот параметр). И после этого приводится list_display поле
в перевариваемый вид для XAdmin, т.к. она не работает с полями в виде
функций, приходится их регистрировать в классе при чём так, чтобы
обёртка выглядела как то, что оборачивают — со всеми short_description.
Свойства пока не обслуживаются, всё равно они встречаются редко в
дескрипторах моделей для админки. Лучше конечно без него, но некоторые
библиотеки описывают свои модели для админки и хотелось бы их иметь
автоматически.&lt;/p&gt;
</summary><category term="django-xadmin"></category><category term="Django"></category><category term="преобразование"></category><category term="XAdmin"></category><category term="трасляция"></category><category term="переходник"></category></entry><entry><title></title><link href="/posts/2014/02/25/urn:ya.ru:post/22199227/1936/" rel="alternate"></link><updated>2014-02-25T01:43:20+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-02-25:posts/2014/02/25/urn:ya.ru:post/22199227/1936/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Сделал переходник, который автоматом классы админки из django-admin
приводит к форме, которую понимает django-xadmin. Конечно полное решение
сделать не так и просто, поэтому я остановился на частичном, костыльном.
Всё из-за того, что xadmin не расширяет стандартный admin, а скорее
копирует функционал с огромным количеством своих несовместимых
изменений. Но в целом интерфейс на уровне кода у них похож при описании
обработчика для модели. Нужно привести немного в человеческий вид и
выложить на Gist, может кому будет полезно. Т.к. полно библиотек которые
регистрируют свои дополнения к админке, но xadmin их не может
подхватить.&lt;/p&gt;
</summary><category term="django-xadmin"></category><category term="обработчик"></category><category term="модель"></category><category term="admin"></category><category term="совместимость"></category><category term="Django"></category></entry><entry><title></title><link href="/posts/2014/02/20/urn:ya.ru:post/22199227/1935/" rel="alternate"></link><updated>2014-02-20T01:45:09+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-02-20:posts/2014/02/20/urn:ya.ru:post/22199227/1935/</id><summary type="html">&lt;p&gt;Не нашёл я как в Django сделать так, чтобы в ModelForm можно было
уже &lt;strong&gt;ранее описанным&lt;/strong&gt; полям изменять их widget, и всё из-за того, что
поля инстанцируются ещё в метаклассе, что вызывает проблемы — заново
туда не подсунуть widget, label и другие аргументы. Поэтому пришлось
построить небольшой свой велосипед с квадратными колёсами. В котором
поля, которые перекрывают другие и при этом нуждаются в гибкости (чтобы
в наследниках можно было легко заменить некритичные участки),
объявляются как &lt;code class="code"&gt;
Meta.override _fields&lt;/code&gt;
:&lt;/p&gt;
&lt;p&gt;Он &lt;a class="reference external" href="https://gist.github.com/IMDagger/9102834"&gt;доступен на GitGub&lt;/a&gt;.&lt;/p&gt;
&lt;span class="cut"&gt;&lt;a class="h-link reference internal" href="#cut_53069392"data-toggle="collapse"&gt;посмотреть мой велосипед&lt;/a&gt;&lt;/span&gt;&lt;div class="collapse" id="cut_53069392"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-c"&gt;# -*- coding: utf-8 -*-&lt;/span&gt;
&lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;django&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;forms&lt;/span&gt;
&lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;django.forms&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;widgets&lt;/span&gt;

&lt;span class="pgcss-k"&gt;class&lt;/span&gt; &lt;span class="pgcss-nc"&gt;ModelFormStyler&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;forms&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;ModelForm&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;__metaclass__&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
    &lt;span class="pgcss-sd"&gt;&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;    Allows to write such kind of forms:&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;    ...&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;    class Some(ModelFormStyler):&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;        class Meta:&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;            model = ...&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;            widgets = {&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;                ...&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;                &amp;#39;field1&amp;#39;: widgets.Textarea(attrs={&amp;#39;rows&amp;#39;: 5}),&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;            },&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;            override_fields = {&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;                &amp;#39;field1&amp;#39;: (forms.CharField, dict(label=..., ...)),&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;                &amp;#39;field2&amp;#39;: (MyCustomField, dict(widget=widgets.TextInput())),&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;            }&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;         ... methods here ...&lt;/span&gt;

&lt;span class="pgcss-sd"&gt;    class Some2(Some):&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;        class Meta:&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;            model = ...&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;            widgets = {&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;                ...&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;                &amp;#39;field1&amp;#39;: widgets.Textarea(attrs={&amp;#39;rows&amp;#39;: 100500}),&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;                &amp;#39;field2&amp;#39;: widgets.Textarea(attrs={&amp;#39;rows&amp;#39;: 100500}),&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;            },&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;            labels = {&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;                &amp;#39;field1&amp;#39;: &amp;#39;another label&amp;#39;,&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;            },&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;            override_fields = {&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;                &amp;#39;field2&amp;#39;: (MyCustomField2, {}),&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;            }&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;         ... methods here again ...&lt;/span&gt;

&lt;span class="pgcss-sd"&gt;    &amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;

    &lt;span class="pgcss-n"&gt;__sections&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-p"&gt;{&lt;/span&gt;
        &lt;span class="pgcss-s"&gt;&amp;#39;widgets&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;widget&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-c"&gt;# section name -&amp;gt; argument name&lt;/span&gt;
        &lt;span class="pgcss-s"&gt;&amp;#39;labels&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;label&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
    &lt;span class="pgcss-p"&gt;}&lt;/span&gt;

    &lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;__new__&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;cls&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;name&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;bases&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;attrs&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;super_new&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nb"&gt;super&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ModelFormStyler&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;cls&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;__new__&lt;/span&gt;

        &lt;span class="pgcss-n"&gt;cls&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;_override_custom_widgets&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;bases&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;attrs&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;new_class&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;super_new&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;cls&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;name&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;bases&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;attrs&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-n"&gt;new_class&lt;/span&gt;

    &lt;span class="pgcss-nd"&gt;@classmethod&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;__replacement_for&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;cls&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;attrs&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;bases&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;fname&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;opt_name&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;try&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
            &lt;span class="pgcss-c"&gt;# .widgets, .labels and etc&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-nb"&gt;getattr&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;attrs&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;Meta&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;],&lt;/span&gt; &lt;span class="pgcss-n"&gt;opt_name&lt;/span&gt;&lt;span class="pgcss-p"&gt;)[&lt;/span&gt;&lt;span class="pgcss-n"&gt;fname&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;except&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;pass&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-n"&gt;base&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-n"&gt;bases&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;try&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
                &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-nb"&gt;getattr&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;base&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;Meta&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;opt_name&lt;/span&gt;&lt;span class="pgcss-p"&gt;)[&lt;/span&gt;&lt;span class="pgcss-n"&gt;fname&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;except&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
                &lt;span class="pgcss-k"&gt;pass&lt;/span&gt;

    &lt;span class="pgcss-nd"&gt;@classmethod&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;__field_descr_for&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;cls&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;attrs&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;bases&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;fname&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-n"&gt;cls&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;__replacement_for&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;cls&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;attrs&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;bases&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;fname&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;field_overrides&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

    &lt;span class="pgcss-nd"&gt;@classmethod&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;_override_custom_widgets&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;cls&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;bases&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;attrs&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;Meta&amp;#39;&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-n"&gt;attrs&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
            &lt;span class="pgcss-n"&gt;entire_dirty&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nb"&gt;set&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-n"&gt;section&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;field_overrides&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,]&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt; &lt;span class="pgcss-n"&gt;cls&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;__sections&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;keys&lt;/span&gt;&lt;span class="pgcss-p"&gt;():&lt;/span&gt;
                &lt;span class="pgcss-c"&gt;# .field_overrides together with .widgets, .labels&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;dirty&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nb"&gt;getattr&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;attrs&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;Meta&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;],&lt;/span&gt; &lt;span class="pgcss-n"&gt;section&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-p"&gt;{})&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;entire_dirty&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;update&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;dirty&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;iterkeys&lt;/span&gt;&lt;span class="pgcss-p"&gt;())&lt;/span&gt;

            &lt;span class="pgcss-n"&gt;dirty_fields&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-p"&gt;[]&lt;/span&gt;
            &lt;span class="pgcss-c"&gt;# it&amp;#39;s now without duplicates&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-n"&gt;fname&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-n"&gt;entire_dirty&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;descr&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;cls&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;__field_descr_for&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;attrs&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;bases&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;fname&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
                &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;descr&lt;/span&gt; &lt;span class="pgcss-ow"&gt;is&lt;/span&gt; &lt;span class="pgcss-ow"&gt;not&lt;/span&gt; &lt;span class="pgcss-bp"&gt;None&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
                    &lt;span class="pgcss-n"&gt;dirty_fields&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;append&lt;/span&gt;&lt;span class="pgcss-p"&gt;((&lt;/span&gt;&lt;span class="pgcss-n"&gt;fname&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;descr&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;

            &lt;span class="pgcss-c"&gt;# create fields for all dirty descriptors (local and parent)&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-n"&gt;fname&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ftype&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;kwargs&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-n"&gt;dirty_fields&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;options&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nb"&gt;dict&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;kwargs&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
                &lt;span class="pgcss-c"&gt;# process&lt;/span&gt;
                &lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-n"&gt;section&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;arg_name&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-n"&gt;cls&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;__sections&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;iteritems&lt;/span&gt;&lt;span class="pgcss-p"&gt;():&lt;/span&gt;
                    &lt;span class="pgcss-n"&gt;arg_value&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;cls&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;__replacement_for&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;attrs&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;bases&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;fname&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;section&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
                    &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;arg_value&lt;/span&gt; &lt;span class="pgcss-ow"&gt;is&lt;/span&gt; &lt;span class="pgcss-ow"&gt;not&lt;/span&gt; &lt;span class="pgcss-bp"&gt;None&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
                        &lt;span class="pgcss-n"&gt;options&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-n"&gt;arg_name&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;arg_value&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;attrs&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-n"&gt;fname&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;ftype&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-o"&gt;**&lt;/span&gt;&lt;span class="pgcss-n"&gt;options&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

&lt;span class="pgcss-k"&gt;class&lt;/span&gt; &lt;span class="pgcss-nc"&gt;ControlModelForm&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;forms&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;ModelForm&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;__metaclass__&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;ModelFormStyler&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
</summary><category term="Django"></category><category term="виджет"></category><category term="поле"></category><category term="перекрытие"></category><category term="перегрузка"></category><category term="modelform"></category><category term="форма"></category><category term="работа"></category><category term="программирование"></category></entry><entry><title>Удаление строки</title><link href="/posts/2014/02/18/udalenie-stroki/" rel="alternate"></link><updated>2014-02-18T03:28:08+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-02-18:posts/2014/02/18/udalenie-stroki/</id><summary type="html">&lt;p&gt;Функция удаление строки в Emacs без запоминания в kill ring буфер, а
то бывает нужно в своём плагине или конфиге удалить строчку, но не
запоминать её в буфер:&lt;/p&gt;
&lt;span class="cut"&gt;&lt;a class="h-link reference internal" href="#cut_61045648"data-toggle="collapse"&gt;посмотреть код&lt;/a&gt;&lt;/span&gt;&lt;div class="collapse" id="cut_61045648"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;defun&lt;/span&gt; &lt;span class="pgcss-nv"&gt;delete-line&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;&amp;amp;optional&lt;/span&gt; &lt;span class="pgcss-nv"&gt;arg&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;interactive&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;quot;P&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;flet&lt;/span&gt; &lt;span class="pgcss-p"&gt;((&lt;/span&gt;&lt;span class="pgcss-nv"&gt;kill-region&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;begin&lt;/span&gt; &lt;span class="pgcss-nv"&gt;end&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
                      &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;delete-region&lt;/span&gt; &lt;span class="pgcss-nv"&gt;begin&lt;/span&gt; &lt;span class="pgcss-nv"&gt;end&lt;/span&gt;&lt;span class="pgcss-p"&gt;)))&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;kill-line&lt;/span&gt; &lt;span class="pgcss-nv"&gt;arg&lt;/span&gt;&lt;span class="pgcss-p"&gt;)))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
</summary><category term="запоминание"></category><category term="функция"></category><category term="строка"></category><category term="emacs"></category><category term="ring"></category><category term="удаление"></category></entry><entry><title>Проблема с удалением множества объектов в polymorphic</title><link href="/posts/2014/02/13/problema-s-udaleniem-mnozhestva-obektov-v-polymorphic/" rel="alternate"></link><updated>2014-02-13T23:56:19+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-02-13:posts/2014/02/13/problema-s-udaleniem-mnozhestva-obektov-v-polymorphic/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Если есть некоторый класс A и в нём поле b, которое может описывать
множество объектов класса C, у которого есть потомки D и E, то при
попытке удалить все эти объекты разом может возникнуть проблема (у меня
возникает в админке). И суть ещё заключается в том, что в Django при
сборе всех зависимых объектов &lt;a class="reference external" href="https://github.com/django/django/blob/stable/1.6.x/django/db/models/deletion.py#L170"&gt;берут первый из
списка&lt;/a&gt;,
его класс и остальные обрабатывают из расчёта на его поля, хотя в этом
множестве могут быть немного другие по поведению объекты. Придётся
какой-то обходной путь строить, иначе не получается удалять в админке
пользователей, т.к. те у меня тащат за собой созданные ими документы,
которые имеют небольшие различия, что сразу отправляет обработчик
запроса в 502.&lt;/p&gt;
</summary><category term="ошибка"></category><category term="django-polymorphic"></category><category term="программирование"></category><category term="Django"></category><category term="запрос"></category><category term="удаление"></category><category term="работа"></category><category term="администрирование"></category></entry><entry><title>Ваня и Тотошка</title><link href="/posts/2014/02/11/vania-i-totoshka/" rel="alternate"></link><updated>2014-02-11T03:32:56+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-02-11:posts/2014/02/11/vania-i-totoshka/</id><summary type="html">&lt;p&gt;Посмотрел, в целом понравилось, только бездомных со свалки стоило было
как-то получше загримировать, видно, что не спитые и кожа достаточно
чистая.&lt;/p&gt;
</summary><category term="драма"></category><category term="фильм"></category><category term="жизнь"></category><category term="артхаус"></category></entry><entry><title>Sentry для Scrapy</title><link href="/posts/2014/02/10/sentry-dlia-scrapy/" rel="alternate"></link><updated>2014-02-10T23:00:30+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-02-10:posts/2014/02/10/sentry-dlia-scrapy/</id><summary type="html">&lt;p&gt;О, есть уже готовая связка для пауков на Scrapy с отправкой логов в
Sentry.&lt;/p&gt;
</summary><category term="sentry"></category><category term="логгирование"></category><category term="scrapy"></category></entry><entry><title>Список продуктов питания</title><link href="/posts/2014/02/09/spisok-produktov-pitaniia/" rel="alternate"></link><updated>2014-02-09T03:11:48+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-02-09:posts/2014/02/09/spisok-produktov-pitaniia/</id><summary type="html">&lt;p&gt;Ого, огромный список продуктов, где к каждому можно посмотреть,
витамины, липиды, углеводы, воду, клетчатку и др.&lt;/p&gt;
</summary><category term="база"></category><category term="продукты"></category><category term="информация"></category><category term="питание"></category><category term="список"></category></entry><entry><title></title><link href="/posts/2014/02/06/urn:ya.ru:post/22199227/1925/" rel="alternate"></link><updated>2014-02-06T12:00:45+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-02-06:posts/2014/02/06/urn:ya.ru:post/22199227/1925/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Сидел я как-то выбирал такую функцию, чтобы она в нуле была 0, а в 1
единица. А потом понял, что если формализовать то, что я хочу, решение
сразу само получается. Т.к. F(0) = 0, F(1) &amp;lt;&amp;gt; 0, G(x) = F(x)/F(1). И
сразу смог составить на основе арктангенса функцию, чтобы управлять
кривизной и пологостью. Разными коэффициентами можно задать линейную,
параболу и гиперболу, а также различные промежуточные комбинации. Я
выбирал такие функции, чтобы отображать [0; 1] в [0; 1].&lt;/p&gt;
</summary><category term="функция"></category><category term="отображение"></category><category term="отрезок"></category><category term="выбор"></category></entry><entry><title>Пропорциональная сетка в gnuplot</title><link href="/posts/2014/02/06/proportsionalnaia-setka-v-gnuplot/" rel="alternate"></link><updated>2014-02-06T11:36:33+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-02-06:posts/2014/02/06/proportsionalnaia-setka-v-gnuplot/</id><summary type="html">&lt;p&gt;Всё время не доходили руки поискать, как заставить gnuplot отображать
квадратные ячейки в сетке при построении графиков, чтобы всё было
пропорционально.
set size square и вуаля.&lt;/p&gt;
</summary><category term="пропорция"></category><category term="построение"></category><category term="gnuplot"></category><category term="график"></category></entry><entry><title></title><link href="/posts/2014/01/29/urn:ya.ru:post/22199227/1923/" rel="alternate"></link><updated>2014-01-29T14:34:47+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-01-29:posts/2014/01/29/urn:ya.ru:post/22199227/1923/</id><summary type="html">&lt;p&gt;Вот так и доверяй «безопасности», которую «обеспечивают» PayPal и
GoDaddy для своих клиентов.&lt;/p&gt;
</summary><category term="godaddy"></category><category term="paypal"></category><category term="безопасность"></category></entry><entry><title>Celery, нити и обновление прогресса</title><link href="/posts/2014/01/26/celery-niti-i-obnovlenie-progressa/" rel="alternate"></link><updated>2014-01-26T23:50:23+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-01-26:posts/2014/01/26/celery-niti-i-obnovlenie-progressa/</id><summary type="html">&lt;p&gt;Похоже, что celery.current_task.update_state не дружит с вызовом
из области другой нити. Если создать нити и обернуть вызов обновления
состояния в Lock, чтобы не было параллельного обращения, то всё равно
рабочий процесс от Celery останавливается и не больше отзывается и чтобы
сделать restart нужно сначала его сбить. Не изучал вопрос почему, но
скорее всего из-за того, что я использую Celery “в связке для ленивых”,
т.е. с MySQL; а вот уже его драйверу возможно и не нравится, когда я
дёргаю его из одной нити, а создавал в другой. Произвёл вызов обновления
состояния в основном потоке в цикле по ожиданию события (плюс по
истечению интервала времени) и всё заработало как хотелось, а прогресс
обновления стал передавать по событию от дочерних нитей.&lt;/p&gt;
</summary><category term="Celery"></category><category term="нить"></category><category term="обработка"></category><category term="обновление"></category><category term="дочерний"></category><category term="прогресс"></category></entry><entry><title></title><link href="/posts/2014/01/23/urn:ya.ru:post/22199227/1921/" rel="alternate"></link><updated>2014-01-23T03:51:45+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-01-23:posts/2014/01/23/urn:ya.ru:post/22199227/1921/</id><summary type="html">&lt;p&gt;Разобрался как в django-xadmin добавить свои кнопки к тем, что есть.
Придётся перекрывать шаблон &lt;code class="code"&gt;
includes/submit _line.html&lt;/code&gt;
, т.к. там зашиты
базовые кнопки. И нужно будет перехватывать &lt;code class="code"&gt;
post _response&lt;/code&gt;
 и производить
свой набор действий.&lt;/p&gt;
</summary><category term="python"></category><category term="django-xadmin"></category><category term="кнопки"></category></entry><entry><title></title><link href="/posts/2014/01/14/urn:ya.ru:post/22199227/1920/" rel="alternate"></link><updated>2014-01-14T02:55:13+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-01-14:posts/2014/01/14/urn:ya.ru:post/22199227/1920/</id><summary type="html">&lt;p&gt;Нашёл
как&amp;nbsp;&lt;a class="reference external" href="http://orgmode.org/manual/Working-With-Source-Code.html#Working-With-Source-Code"&gt;управлять&lt;/a&gt;
режимом экспорта блоков кода в org-babel. Оказывается там много всего:
можно исполнить блок и отправить его результат на экспорт, можно
отправить сам блок, а можно
&lt;a class="reference external" href="http://orgmode.org/manual/Extracting-source-code.html"&gt;экспортировать&lt;/a&gt;
блок в отдельный файл или исключить его из этого процесса. В общем,
раздолье для литературного программирования (Дональд Кнут на этой
строчке радостно улыбается во сне) и всяких штук, где нужно иметь что-то
типа документации неотрывно от блоков кода и при этом, чтобы всё
управлялось как журнал, дневник, с таблицами и калькулятором.&lt;/p&gt;
</summary><category term="экспорт"></category><category term="фильтрация"></category><category term="tangle"></category><category term="org-babel"></category></entry><entry><title>Прошлогодний огонёк</title><link href="/posts/2014/01/14/proshlogodnii-ogoniok/" rel="alternate"></link><updated>2014-01-14T01:40:19+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-01-14:posts/2014/01/14/proshlogodnii-ogoniok/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/618553"&gt;&lt;img alt="ALIM3434.JPG" src="http://img-fotki.yandex.ru/get/9061/22199227.b/0_97039_39569d29_L" title="ALIM3434.JPG"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Версия собранная на плате.&lt;/p&gt;</summary><category term="напряжение"></category><category term="сборка"></category><category term="генератор"></category><category term="Маркс"></category><category term="электроника"></category></entry><entry><title>Тюнинг конфига для моего редактора</title><link href="/posts/2014/01/14/tiuning-konfiga-dlia-moego-redaktora/" rel="alternate"></link><updated>2014-01-14T01:20:42+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-01-14:posts/2014/01/14/tiuning-konfiga-dlia-moego-redaktora/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; В след за изменениями в основной ветке конфига, а точнее,
группировкой всех настроек в единый .org-файл с описанием и
иерархической структурой; я решил, что пора довести это всё дело до ума
и влить часть моих правок в &lt;a class="reference external" href="https://github.com/IMDagger/dot-emacs"&gt;русло основных
настроек&lt;/a&gt;. Естественно я
выключил evil mode, добавил tabbar, и безопасное закрытие фреймов.
Пришлось изменить часть настроек из-за того, что меня не устраивает TeX,
как второй язык по умолчанию, исправить некоторые опечатки и
усовершенствовать удаление строки для случая со скобками (об этом я
отписал автору оригинального конфига в его репозиторий).&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Единственное, что меня пока немного удручает это скорость экспорта
из org-babel в настоящий конфиг для загрузки, но будет время (надеюсь не
опять во время болезни, как в этот раз) и я гляну, что там оно так часто
синхронизирует буфер с винчестером (удивительно было бы, если оно быстро
экспортировало бы да ещё и на обычный HDD с пониженными оборотами).&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; А так я вообще приобрёр кучу всего: и geiser для racket с
автодополнением, и python с flycheck режимом и jedi сервером, хотя стоит
добавить какую-то фишку, чтобы можно было отключить часть настроек. Т.к.
мне не особо нужны настройки для Clojure, Scala, Ruby и Haskell. Но
Chris Barret они нужны, т.к. видимо это его сфера интересов. Хотя и я
просто выбрасывать не собираюсь эти настройки, просто пока не хочу
тратить время загрузки на них.&lt;/p&gt;
</summary><category term="org-mode"></category><category term="emacs"></category><category term="жизнь"></category><category term="настройки"></category><category term="улучшение"></category></entry><entry><title>Проверка SSL-отпечатка</title><link href="/posts/2014/01/11/proverka-ssl-otpechatka/" rel="alternate"></link><updated>2014-01-11T18:02:57+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-01-11:posts/2014/01/11/proverka-ssl-otpechatka/</id><summary type="html">&lt;p&gt;Что-то сертификат на xmpp.ya.ru:5223 поменялся, вот решил перепроверить
его fingerprint.&lt;/p&gt;
</summary><category term="fingerprint"></category><category term="сертификат"></category><category term="проверка"></category><category term="отпечаток"></category><category term="ssl"></category></entry><entry><title>Передвижка домов в Москве</title><link href="/posts/2014/01/10/peredvizhka-domov-v-moskve/" rel="alternate"></link><updated>2014-01-10T01:05:30+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-01-10:posts/2014/01/10/peredvizhka-domov-v-moskve/</id><summary type="html">&lt;p&gt;Интересные исторические события по перемещению домов в десятки тысяч
тонн с одного места в другое. Особенно меня удивляют/пугают случаи без
выселения жильцов в момент переезда.&lt;/p&gt;
</summary><category term="дом"></category><category term="переезд"></category><category term="Москва"></category></entry><entry><title></title><link href="/posts/2014/01/07/urn:ya.ru:post/22199227/1915/" rel="alternate"></link><updated>2014-01-07T02:19:14+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-01-07:posts/2014/01/07/urn:ya.ru:post/22199227/1915/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/617919"&gt;&lt;img alt="ALIM3341.JPG" src="http://img-fotki.yandex.ru/get/9058/22199227.b/0_96dbf_85f580c2_L" title="ALIM3341.JPG"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Из неудачной версии генератора Маркса. Потом пришлось всё равно
перенести на плату.&lt;/p&gt;</summary><category term="конденсатор"></category><category term="жизнь"></category><category term="пайка"></category></entry><entry><title>Куб Эшера</title><link href="/posts/2014/01/05/kub-eshera/" rel="alternate"></link><updated>2014-01-05T04:16:59+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-01-05:posts/2014/01/05/kub-eshera/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/617783"&gt;&lt;img alt="Куб Эшера" src="http://img-fotki.yandex.ru/get/9257/22199227.b/0_96d37_68c8f266_L" title="Куб Эшера"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Моя проба смоделировать нереальную фигуру куб Эшера.&lt;/p&gt;</summary><category term="нереальный"></category><category term="фигура"></category><category term="куб"></category><category term="Эшер"></category><category term="иллюзия"></category></entry><entry><title></title><link href="/posts/2014/01/03/urn:ya.ru:post/22199227/1911/" rel="alternate"></link><updated>2014-01-03T03:59:27+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-01-03:posts/2014/01/03/urn:ya.ru:post/22199227/1911/</id><summary type="html">&lt;p&gt;всем лучей Бобра в 2014&lt;/p&gt;
</summary></entry><entry><title>Менеджер по умолчанию и исключение в .save()</title><link href="/posts/2014/01/03/menedzher-po-umolchaniiu-i-iskliuchenie-v-save/" rel="alternate"></link><updated>2014-01-03T03:58:41+03:00</updated><author><name>IMDagger</name></author><id>tag:,2014-01-03:posts/2014/01/03/menedzher-po-umolchaniiu-i-iskliuchenie-v-save/</id><summary type="html">&lt;p&gt;Если при использовании модели из django-polymorphic возникает ошибка
подобного вида при вызове &lt;code class="code"&gt;
.save&lt;/code&gt;
:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-x"&gt;(8 additional frame(s) were not displayed)&lt;/span&gt;
&lt;span class="pgcss-x"&gt;...&lt;/span&gt;
  File &lt;span class="pgcss-nb"&gt;&amp;quot;staff/views.py&amp;quot;&lt;/span&gt;, line &lt;span class="pgcss-m"&gt;236&lt;/span&gt;, in &lt;span class="pgcss-n"&gt;edit_result&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;result&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;save&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
  File &lt;span class="pgcss-nb"&gt;&amp;quot;polymorphic/polymorphic_model.py&amp;quot;&lt;/span&gt;, line &lt;span class="pgcss-m"&gt;89&lt;/span&gt;, in &lt;span class="pgcss-n"&gt;save&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-nb"&gt;super&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;PolymorphicModel&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;save&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-o"&gt;*&lt;/span&gt;&lt;span class="pgcss-n"&gt;args&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-o"&gt;**&lt;/span&gt;&lt;span class="pgcss-n"&gt;kwargs&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;


&lt;span class="pgcss-gr"&gt;IntegrityError&lt;/span&gt;: &lt;span class="pgcss-n"&gt;(1062, &amp;quot;Duplicate entry &amp;#39;72&amp;#39; for key &amp;#39;PRIMARY&amp;#39;&amp;quot;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Причём, после всех проверок видно, что дубликата, ну никак, не может
быть. То высока вероятность, что просто, пропущено явное указание
менеджера objects по умолчанию и подхватился какой-то другой из
менеджеров (конечно, если используется пропатченная версия
polymorphic-django). Тогда достаточно объявить недостающий обработчик:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-k"&gt;class&lt;/span&gt; &lt;span class="pgcss-err"&gt;...&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;...&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;objects&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;CommonManager&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt; &lt;span class="pgcss-c"&gt;# простая надстройка над PolymorphicManager&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;ready_articles&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;FinalsManager&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt; &lt;span class="pgcss-c"&gt;# свой особенный менеджер&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</summary><category term="django-polymorphic"></category><category term="IntegrityError"></category><category term="дубликат"></category><category term="исключение"></category><category term="модель"></category><category term="менеджер"></category></entry><entry><title>django-polymorphic и bulk_create</title><link href="/posts/2013/12/28/django-polymorphic-i-bulk_create/" rel="alternate"></link><updated>2013-12-28T02:39:49+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-12-28:posts/2013/12/28/django-polymorphic-i-bulk_create/</id><summary type="html">&lt;p&gt;Если модель объявлена как полиморфная (к сожалению, не может быть
наследником другой полиморфной модели, на данный момент, из-за
накладываемых библиотекой ограничений), то django-polymorphic не очень
хорошо обходится с bulk_create запросом. Оно добавляет документы, но
при попытке их извлечь выбрасывает ошибку:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;  File &lt;span class="pgcss-nb"&gt;&amp;quot;.../site-packages/django/db/models/query.py&amp;quot;&lt;/span&gt;, line &lt;span class="pgcss-m"&gt;366&lt;/span&gt;, in &lt;span class="pgcss-n"&gt;get&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;%&lt;/span&gt; &lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;model&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;_meta&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;object_name&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-gr"&gt;DoesNotExist&lt;/span&gt;: &lt;span class="pgcss-n"&gt;ContentType matching query does not exist.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Всё из-за того, что в таблице polymorphic_ctype_id равен NULL. Мне
пришла идея в голову, как это обойти (скорее всего, есть более красивые
варианты, хотя бы просто сделать фикс для библиотеки и отправить в
мэйнстрим):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;django.contrib.contenttypes.models&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;ContentType&lt;/span&gt;
&lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;materials&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;models&lt;/span&gt; &lt;span class="pgcss-k"&gt;as&lt;/span&gt; &lt;span class="pgcss-n"&gt;mt_models&lt;/span&gt; &lt;span class="pgcss-c"&gt;# мои модели&lt;/span&gt;
&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;span class="pgcss-n"&gt;tag_ctype&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;ContentType&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;objects&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;get_for_model&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;mt_models&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;Tag&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-n"&gt;new_tag&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-k"&gt;lambda&lt;/span&gt; &lt;span class="pgcss-n"&gt;tag_name&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-n"&gt;mt_models&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;Tag&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;polymorphic_ctype&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-n"&gt;tag_ctype&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
                                         &lt;span class="pgcss-n"&gt;document&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-n"&gt;final_doc&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;text&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-n"&gt;tag_name&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;weight&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-mf"&gt;0.0&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-n"&gt;mt_models&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;Tag&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;objects&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;bulk_create&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;new_tag&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;tag_name&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-n"&gt;tag_name&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-n"&gt;all_tags&lt;/span&gt; &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;tag_name&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Самое важное, это получить tag_ctype объект типа контента для моего
полиморфного класса Tag. Django сохраняет это добро в таблицу
django_contenttypes. А затем для каждого объекта, предназначенного для
bulk_create, явно передать в качестве именованного параметра значение
tag_ctype.&lt;/p&gt;
</summary><category term="django-polymorphic"></category><category term="тип"></category><category term="запрос"></category><category term="polymorphic_ctype"></category><category term="bulk_create"></category><category term="модель"></category><category term="особенность"></category></entry><entry><title>ЛОР 2007</title><link href="/posts/2013/12/27/lor-2007/" rel="alternate"></link><updated>2013-12-27T01:59:20+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-12-27:posts/2013/12/27/lor-2007/</id><summary type="html">&lt;p&gt;Я тут случайно решил почитать свои комменты на ЛОРе … я какой-то
толстый тролль :D если бы не прочитал, что они принадлежат моему аккаунту,
то запросто мог бы подумать, что не моё. Я явно в тот момент был в
каком-то странном настроении, но в тантрум гарантированно не впадал!&lt;/p&gt;
</summary><category term="жизнь"></category><category term="аккаунт"></category><category term="лор"></category><category term="комментарии"></category><category term="2007"></category><category term="бредни"></category></entry><entry><title>Переносы слов, UTF-8 и XeLaTeX</title><link href="/posts/2013/12/26/perenosy-slov-utf-8-i-xelatex/" rel="alternate"></link><updated>2013-12-26T03:41:21+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-12-26:posts/2013/12/26/perenosy-slov-utf-8-i-xelatex/</id><summary type="html">&lt;p&gt;Заметка о том, как подружить babel с UTF-8 или использовать вместо него
polyglossia. Я выбрал второй вариант.&lt;/p&gt;
</summary><category term="polyglossia"></category><category term="UTF-8"></category><category term="русский"></category><category term="babel"></category><category term="xelatex"></category></entry><entry><title>Красота LaTeX</title><link href="/posts/2013/12/26/krasota-latex/" rel="alternate"></link><updated>2013-12-26T03:37:38+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-12-26:posts/2013/12/26/krasota-latex/</id><summary type="html">&lt;p&gt;Красоту Лэйтэх можно увидеть в правильном кернинге, лигатурах и
начертаниях. Хотя для меня красота этого пакета заключается скорее в
том, что можно сделать один раз стилевой файл, а потом писать всё
остальное время только текст и не думать об отображении.&lt;/p&gt;
</summary><category term="красота"></category><category term="latex"></category></entry><entry><title>django-polymorphic</title><link href="/posts/2013/12/25/django-polymorphic/" rel="alternate"></link><updated>2013-12-25T01:42:09+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-12-25:posts/2013/12/25/django-polymorphic/</id><summary type="html">&lt;p&gt;Обнаружилась проблема в библиотеке полиморфных моделей. При чём в
документации приведён пример, что всё должно быть хорошо, но на деле
выходит по-другому.
Даже&amp;nbsp;&lt;a class="reference external" href="https://github.com/chrisglass/django_polymorphic/issues/64"&gt;багрепорт&lt;/a&gt;
есть на GitHub, при чём свеженький. Проблема заключается в том, что код
пропускает менеджеры, которые являются в чистом виде экземплярами
PolymorphicManager, при чём &lt;a class="reference external" href="https://github.com/chrisglass/django_polymorphic/commit/78253bfe1238b5e46fed2597838427204666b5de#diff-dfb26a32320efe61614aaf8a602afd9bR152"&gt;так
задумано&lt;/a&gt;,
почему так? Точно не знаю. Ну да ладно, мы простых путей не ищем, и
объявляем наследника:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-k"&gt;class&lt;/span&gt; &lt;span class="pgcss-nc"&gt;TimeOrderedManager&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;PolymorphicManager&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;...&lt;/span&gt;

&lt;span class="pgcss-k"&gt;class&lt;/span&gt; &lt;span class="pgcss-nc"&gt;CustomPolymorphicManager&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;PolymorphicManager&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;pass&lt;/span&gt;
&lt;span class="pgcss-k"&gt;class&lt;/span&gt; &lt;span class="pgcss-nc"&gt;Project&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;PolymorphicModel&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;objects&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;CustomPolymorphicManager&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt; &lt;span class="pgcss-c"&gt;# рассчитываем, что это менеджер по умолчанию&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;objects_ordered&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;TimeOrderedManager&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;       &lt;span class="pgcss-c"&gt;# а это дополнительный&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;После этого кажется, что всё работает как и требуется:
&lt;code class="code"&gt;
Project. _default _manager&lt;/code&gt;
 указывает на экземпляр
&lt;code class="code"&gt;
CustomPolymorphicManager&lt;/code&gt;
. Но достаточно унаследовать хотя бы одну модель
от Project и всё ломается:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-go"&gt;class ProjectChild(Project):&lt;/span&gt;
&lt;span class="pgcss-go"&gt;    pass&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-k"&gt;print&lt;/span&gt; &lt;span class="pgcss-n"&gt;ProjectChild&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;_default_manager&lt;/span&gt; &lt;span class="pgcss-c"&gt;# а вот это уже не порядок&lt;/span&gt;
&lt;span class="pgcss-go"&gt;&amp;lt;TimeOrderedManager object at 0x28d4990&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Получается, что в потомке менеджером по умолчанию стал другой
менеджер, не тот, что был в objects. Хотя ничего дополнительного не
объявлялось. И даже если снова указать принудительно objects в
ProjectChild — это &lt;strong&gt;не поможет&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;А всё вероятно потому, что в django-polymorphic есть баг с
обработкой менеджеров, которые пришли от потомка. Я обнаружил, что он их
сортирует опираясь на имя, что не хорошо без учёта &lt;code class="code"&gt;
creation _counter&lt;/code&gt;

параметра. После вот такой правки в base.py код выздоровел:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-o"&gt;&amp;gt;&lt;/span&gt;         &lt;span class="pgcss-n"&gt;add_managers&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nb"&gt;sorted&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;add_managers&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;key&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-k"&gt;lambda&lt;/span&gt; &lt;span class="pgcss-n"&gt;item&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;item&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;startswith&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;_&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;),&lt;/span&gt; &lt;span class="pgcss-n"&gt;item&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-p"&gt;]))&lt;/span&gt;
&lt;span class="pgcss-o"&gt;---&lt;/span&gt;
&lt;span class="pgcss-o"&gt;&amp;lt;&lt;/span&gt;         &lt;span class="pgcss-n"&gt;add_managers&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nb"&gt;sorted&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;add_managers&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;key&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-k"&gt;lambda&lt;/span&gt; &lt;span class="pgcss-n"&gt;item&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;item&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;startswith&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;_&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;),&lt;/span&gt; &lt;span class="pgcss-n"&gt;item&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-mi"&gt;2&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;creation_counter&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;item&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-p"&gt;]))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Попробую её продвинуть в мэйнстрим. Хотя может это и не полное
решение, но как мне кажется, необходимо при сортировке сначала отправить
в конец всё, что начинается с нижнего подчёркивания, ну а на следующем
уровне ориентироваться уже на индекс менеджера.&lt;/p&gt;
</summary><category term="менеджер"></category><category term="ошибка"></category><category term="библиотека"></category><category term="django-polymorphic"></category><category term="модель"></category></entry><entry><title>Дополнительное место на Я.Диске</title><link href="/posts/2013/12/23/dopolnitelnoe-mesto-na-iadiske/" rel="alternate"></link><updated>2013-12-23T11:52:45+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-12-23:posts/2013/12/23/dopolnitelnoe-mesto-na-iadiske/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Неплохо, 7 лет почте и мне подарили 7ГБ на Яндекс.Диске. Теперь у
меня там побольше места, чтобы развернуться, а то я 90% успел заполнить
и синхронизировать туда документы средней важности. Важные я всё равно
сначала шифрую до синхронизации.&lt;/p&gt;
</summary><category term="место"></category><category term="почта"></category><category term="жизнь"></category><category term="я.диск"></category><category term="подарок"></category></entry><entry><title>Моему ящику в Яндекс.Почте 7 лет ;)</title><link href="/posts/2013/12/21/moemu-iashchiku-v-iandekspochte-7-let/" rel="alternate"></link><updated>2013-12-21T01:19:49+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-12-21:posts/2013/12/21/moemu-iashchiku-v-iandekspochte-7-let/</id><summary type="html">&lt;p&gt;О как время летит&lt;/p&gt;
</summary><category term="почта"></category><category term="Яндекс"></category><category term="возраст"></category></entry><entry><title>dict-set vs hash-set</title><link href="/posts/2013/12/16/dict-set-vs-hash-set/" rel="alternate"></link><updated>2013-12-16T14:46:15+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-12-16:posts/2013/12/16/dict-set-vs-hash-set/</id><summary type="html">&lt;p&gt;Или я не умею варить generics структуры, которые надстроены над
базовыми типами или они не достаточно оптимально
написаны/оптимизируются. Т.к. разрыв по времени довольно большой:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-nv"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;define &lt;/span&gt;&lt;span class="pgcss-nv"&gt;x&lt;/span&gt; &lt;span class="pgcss-o"&gt;#&lt;/span&gt;&lt;span class="pgcss-nv"&gt;hash&lt;/span&gt;&lt;span class="pgcss-p"&gt;())&lt;/span&gt;

&lt;span class="pgcss-nv"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;time &lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;for&lt;/span&gt; &lt;span class="pgcss-p"&gt;([&lt;/span&gt;&lt;span class="pgcss-nf"&gt;i&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;in-range&lt;/span&gt; &lt;span class="pgcss-mi"&gt;1000000&lt;/span&gt;&lt;span class="pgcss-p"&gt;)])&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;dict-set&lt;/span&gt; &lt;span class="pgcss-nv"&gt;x&lt;/span&gt; &lt;span class="pgcss-nv"&gt;i&lt;/span&gt; &lt;span class="pgcss-nv"&gt;i&lt;/span&gt;&lt;span class="pgcss-p"&gt;)))&lt;/span&gt;
&lt;span class="pgcss-nv"&gt;cpu&lt;/span&gt; &lt;span class="pgcss-nv"&gt;time:&lt;/span&gt; &lt;span class="pgcss-mi"&gt;13728&lt;/span&gt; &lt;span class="pgcss-nv"&gt;real&lt;/span&gt; &lt;span class="pgcss-nv"&gt;time:&lt;/span&gt; &lt;span class="pgcss-mi"&gt;13695&lt;/span&gt; &lt;span class="pgcss-nv"&gt;gc&lt;/span&gt; &lt;span class="pgcss-nv"&gt;time:&lt;/span&gt; &lt;span class="pgcss-mi"&gt;128&lt;/span&gt;

&lt;span class="pgcss-nv"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;time &lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;for&lt;/span&gt; &lt;span class="pgcss-p"&gt;([&lt;/span&gt;&lt;span class="pgcss-nf"&gt;i&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;in-range&lt;/span&gt; &lt;span class="pgcss-mi"&gt;1000000&lt;/span&gt;&lt;span class="pgcss-p"&gt;)])&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;hash-set&lt;/span&gt; &lt;span class="pgcss-nv"&gt;x&lt;/span&gt; &lt;span class="pgcss-nv"&gt;i&lt;/span&gt; &lt;span class="pgcss-nv"&gt;i&lt;/span&gt;&lt;span class="pgcss-p"&gt;)))&lt;/span&gt;
&lt;span class="pgcss-nv"&gt;cpu&lt;/span&gt; &lt;span class="pgcss-nv"&gt;time:&lt;/span&gt; &lt;span class="pgcss-mi"&gt;376&lt;/span&gt; &lt;span class="pgcss-nv"&gt;real&lt;/span&gt; &lt;span class="pgcss-nv"&gt;time:&lt;/span&gt; &lt;span class="pgcss-mi"&gt;375&lt;/span&gt; &lt;span class="pgcss-nv"&gt;gc&lt;/span&gt; &lt;span class="pgcss-nv"&gt;time:&lt;/span&gt; &lt;span class="pgcss-mi"&gt;8&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Всё таки, различие почти 40x. И аналогичная ситуация для
мутабельного словаря. Я конечно понимаю, что dict-set никак не может
отработать также быстро как hash-set, ибо у него есть дополнительный
функционал и проверки связанные с его универсальностью, но всё же
отличие в 40 раз это для меня слишком, я бы спокойно отнёсся, если бы
было 375 и 500, но не 13695мс. Поэтому пока в критических местах, где
мне не нужна гибкость, буду использовать напрямую hash-set и др.&lt;/p&gt;
</summary><category term="hash"></category><category term="проблема"></category><category term="производительность"></category><category term="сравнение"></category><category term="dict"></category><category term="racket"></category><category term="generics"></category><category term="словарь"></category></entry><entry><title>Обновление</title><link href="/posts/2013/12/09/obnovlenie/" rel="alternate"></link><updated>2013-12-09T02:18:57+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-12-09:posts/2013/12/09/obnovlenie/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; С обновлением Racket с версии 5.3.5.1 до 6.0.0.1 полечилась проблема
с demod, который в старой версии сжирал ~4Гб оперативной памяти и за ним
приходил OOM-killer. Новая версия отъела 400-500Мб отработала минут 7 на
1 ядре и выдала монолитный модуль без деления, что и требовалось от
него.&lt;/p&gt;
</summary><category term="ошибка"></category><category term="программирование"></category><category term="demodularize"></category><category term="racket"></category><category term="обновление"></category><category term="demod"></category></entry><entry><title>struct*</title><link href="/posts/2013/11/30/struct/" rel="alternate"></link><updated>2013-11-30T15:15:18+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-11-30:posts/2013/11/30/struct/</id><summary type="html">&lt;p&gt;Было приятно то, что в Racket в библиотеке пэттерн мэтчинга ко всему
множеству, что там есть, присутствует возможность задать шаблон
&lt;a class="reference external" href="http://docs.racket-lang.org/reference/match.html#%28form._%28%28lib._racket/match..rkt%29._struct*%29%29"&gt;частичной
структурой&lt;/a&gt;,
т.е. не требуя от структуры наличия всех полей, а только тех, что
необходимы:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;struct&lt;/span&gt; &lt;span class="pgcss-nv"&gt;s&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;a&lt;/span&gt; &lt;span class="pgcss-nv"&gt;b&lt;/span&gt; &lt;span class="pgcss-nv"&gt;c&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;
&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;define &lt;/span&gt;&lt;span class="pgcss-nv"&gt;data&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;list &lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;s&lt;/span&gt; &lt;span class="pgcss-mi"&gt;1&lt;/span&gt; &lt;span class="pgcss-mi"&gt;2&lt;/span&gt; &lt;span class="pgcss-mi"&gt;3&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-mi"&gt;4&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;
&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;match-define&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;list &lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;struct*&lt;/span&gt; &lt;span class="pgcss-nv"&gt;s&lt;/span&gt; &lt;span class="pgcss-p"&gt;{[&lt;/span&gt;&lt;span class="pgcss-nf"&gt;a&lt;/span&gt; &lt;span class="pgcss-nv"&gt;av&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt; &lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-nf"&gt;b&lt;/span&gt; &lt;span class="pgcss-nv"&gt;bv&lt;/span&gt;&lt;span class="pgcss-p"&gt;]})&lt;/span&gt; &lt;span class="pgcss-nv"&gt;_&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
                &lt;span class="pgcss-nv"&gt;data&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-c1"&gt;;; теперь в av и bv соответственно 1 и 2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</summary><category term="struct*"></category><category term="pattern"></category><category term="программирование"></category><category term="matching"></category><category term="racket"></category><category term="структура"></category><category term="шаблон"></category></entry><entry><title></title><link href="/posts/2013/11/27/urn:ya.ru:post/22199227/1889/" rel="alternate"></link><updated>2013-11-27T14:05:54+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-11-27:posts/2013/11/27/urn:ya.ru:post/22199227/1889/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Зима на носу. Я смотрю по городу начали усерднее укладывать асфальт
и менять трубы с горячей водой. Ну что ж… всё верно, всё по фэн-шуй.&lt;/p&gt;
</summary><category term="dura lex"></category><category term="жизнь"></category><category term="бредни"></category></entry><entry><title>Из детства</title><link href="/posts/2013/11/22/iz-detstva/" rel="alternate"></link><updated>2013-11-22T00:33:17+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-11-22:posts/2013/11/22/iz-detstva/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Смешно вспоминать, но когда-то, когда мне было 11 лет; не осилив в
книге по Pascal часть в ООП и Turbo Vision (да, та самая клёвая книжка
от Фаронова, у меня и вторая часть есть), я думал, что ООП это нечто,
что позволит мне отрисовывать быстрее графику на EC1842 через библиотеку
Graph. Ну да.. наивно, но что ж поделаешь, если там пример для ООП был
нескучный с графикой и отрисовкой НЛО. Это потом уже, после прочтения
второй книги стало ясно, что по-любому нужен прямой доступ к контроллеру
и управление VGA контроллером, чтобы добиться максимума скорости.&lt;/p&gt;
</summary><category term="воспоминание"></category><category term="жизнь"></category><category term="детство"></category><category term="ооп"></category></entry><entry><title></title><link href="/posts/2013/11/19/urn:ya.ru:post/22199227/1887/" rel="alternate"></link><updated>2013-11-19T02:57:23+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-11-19:posts/2013/11/19/urn:ya.ru:post/22199227/1887/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; В следующий раз не буду тратить время на написание своего граббера,
а возьму сразу
&lt;a class="reference external" href="http://doc.scrapy.org/en/latest/intro/overview.html"&gt;Scrapy&lt;/a&gt;, т.к.
всё равно пришёл к нему. Ибо расширяется он легко, куча всяких опций и
рычагов управления, и свистелок из коробки.&lt;/p&gt;
</summary><category term="python"></category><category term="краулер"></category><category term="программирование"></category><category term="сайт"></category><category term="scrapy"></category></entry><entry><title>Посылка</title><link href="/posts/2013/11/12/post-pi2/" rel="alternate"></link><updated>2013-11-12T00:38:41+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-11-12:posts/2013/11/12/post-pi2/</id><summary type="html">&lt;p&gt;Наконец-то я вижу посылку в терминале PI 2. Почти целый месяц
пролежала в Бельгии на международном сортировочном центре.&lt;/p&gt;
</summary><category term="радость"></category><category term="посылка"></category></entry><entry><title></title><link href="/posts/2013/11/11/urn:ya.ru:post/22199227/1885/" rel="alternate"></link><updated>2013-11-11T00:01:29+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-11-11:posts/2013/11/11/urn:ya.ru:post/22199227/1885/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Случайно увидел по телеку передачу «Куб», получил глубокое
повреждение мозга. Это что за треш, угар и содомия? Ну, просто, рука
лицо и ещё раз, рука лицо.&lt;/p&gt;
</summary><category term="ужас"></category><category term="жизнь"></category><category term="бредни"></category></entry><entry><title></title><link href="/posts/2013/11/07/urn:ya.ru:post/22199227/1883/" rel="alternate"></link><updated>2013-11-07T03:35:00+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-11-07:posts/2013/11/07/urn:ya.ru:post/22199227/1883/</id><summary type="html">&lt;p&gt;Если Python 2.6 (хотя он уже двумя ногами покоится с миром, ибо 2.7
одной ногой там уже тоже, но всё же) выдаёт нечто вот такое &lt;code class="code"&gt;
KeyError:
' \x00'&lt;/code&gt;
 при &lt;code class="code"&gt;
pickle.loads&lt;/code&gt;
. То видимо в loads попала unicode строка,
например, если строка взята из результата запроса библиотеки requests.
Стоит тогда сконвертировать в str эту строку и всё будет хорошо, либо
сервису, который отдаёт данные стоит завернуть всё это дело в base64.&lt;/p&gt;
</summary><category term="2.6"></category><category term="python"></category><category term="десереализация"></category><category term="pickle"></category><category term="ошибка"></category></entry><entry><title></title><link href="/posts/2013/11/06/urn:ya.ru:post/22199227/1881/" rel="alternate"></link><updated>2013-11-06T03:41:11+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-11-06:posts/2013/11/06/urn:ya.ru:post/22199227/1881/</id><summary type="html">&lt;p&gt;Забавно наблюдать, как моя посылка идёт из Китая через Бельгию Лишь бы
не потеряли.&lt;/p&gt;
</summary><category term="почта"></category><category term="жизнь"></category><category term="посылка"></category></entry><entry><title></title><link href="/posts/2013/11/01/urn:ya.ru:post/22199227/1880/" rel="alternate"></link><updated>2013-11-01T13:17:54+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-11-01:posts/2013/11/01/urn:ya.ru:post/22199227/1880/</id><summary type="html">&lt;p&gt;Dwarf Fortress это сила!&lt;/p&gt;
</summary></entry><entry><title>Сборка информации о КОП</title><link href="/posts/2013/10/21/sborka-informatsii-o-kop/" rel="alternate"></link><updated>2013-10-21T00:22:44+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-10-21:posts/2013/10/21/sborka-informatsii-o-kop/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; В частности в сфере гейм девелопмента.&lt;/p&gt;
</summary><category term="компонента"></category><category term="ориентированный"></category><category term="программирование"></category><category term="метод"></category><category term="разработка"></category></entry><entry><title>Авторизация для нескольких сайтов на Django</title><link href="/posts/2013/10/20/avtorizatsiia-dlia-neskolkikh-saitov-na-django/" rel="alternate"></link><updated>2013-10-20T01:02:48+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-10-20:posts/2013/10/20/avtorizatsiia-dlia-neskolkikh-saitov-na-django/</id><summary type="html">&lt;p&gt;Обдумав разные варианты общей авторизации для разрабатываемых и
поддерживаемых мной сервисов, я решил, что оптимальнее всего будет
использовать OAuth2 для этих целей. Ибо вариант с синхронизацией
пользователей для двух сервисом может и подходит, но когда их количество
увеличивается и будет увеличиваться, при чём разного формата, то
синхронизация начнёт приносить всё больше боли. И в течение нескольких
дней я воплотил общую авторизацию на основе OAuth2 в жизнь для двух
сервисов (благо для django есть и provider модуль и social auth модули).
При чём, старый способ авторизации для основного сервиса пока продолжает
работать, а новый в режиме испытания. Пришлось только немного пошаманить
над&amp;nbsp;&lt;a class="reference external" href="http://django-oauth2-provider.readthedocs.org/"&gt;django-oauth2-provider&lt;/a&gt;
и подсмотреть как сделать клиента на основе
&lt;a class="reference external" href="http://django-social-auth.readthedocs.org/"&gt;django-social-auth&lt;/a&gt;. Для
провайдера особых телодвижений не нужно, почти всё из коробки (только в
моём случае есть свои особенности связанные с поддоменами):&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;strong&gt;req.txt:&lt;/strong&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;span class="pgcss-n"&gt;django&lt;/span&gt;&lt;span class="pgcss-o"&gt;-&lt;/span&gt;&lt;span class="pgcss-n"&gt;oauth2&lt;/span&gt;&lt;span class="pgcss-o"&gt;-&lt;/span&gt;&lt;span class="pgcss-n"&gt;provider&lt;/span&gt;
&lt;span class="pgcss-n"&gt;django&lt;/span&gt;&lt;span class="pgcss-o"&gt;-&lt;/span&gt;&lt;span class="pgcss-n"&gt;social&lt;/span&gt;&lt;span class="pgcss-o"&gt;-&lt;/span&gt;&lt;span class="pgcss-n"&gt;auth&lt;/span&gt; &lt;span class="pgcss-c"&gt;# если требуется связывать свою авторизацию со сторонней&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;strong&gt;settings.py:&lt;/strong&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-n"&gt;INSTALLED_APPS&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;...&lt;/span&gt;
    &lt;span class="pgcss-s"&gt;&amp;#39;provider&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
    &lt;span class="pgcss-s"&gt;&amp;#39;provider.oauth2&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
    &lt;span class="pgcss-s"&gt;&amp;#39;social_auth&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-c"&gt;# а это для того, чтобы провайдер умел&lt;/span&gt;
    &lt;span class="pgcss-c"&gt;# подключать к своей авторизации другие сети (ВК, Я.ру&lt;/span&gt;
    &lt;span class="pgcss-c"&gt;# и Facebook и т.д.), всё из коробки и даже больше&lt;/span&gt;
&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;strong&gt;mainauth/urls.py:&lt;/strong&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;span class="cut"&gt;&lt;a class="h-link reference internal" href="#cut_50299792"data-toggle="collapse"&gt;исходник сниппета urls.py&lt;/a&gt;&lt;/span&gt;&lt;div class="collapse" id="cut_50299792"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;django.conf.urls&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;patterns&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;include&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;url&lt;/span&gt;
&lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;django.conf&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;settings&lt;/span&gt;
&lt;span class="pgcss-o"&gt;...&lt;/span&gt;

&lt;span class="pgcss-n"&gt;urlpatterns&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;patterns&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;url&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;r&amp;#39;^accounts/profile/$&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;mainauth.views.index&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;name&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;show_profile&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;),&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;url&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;r&amp;#39;^$&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;django.contrib.auth.views.login&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
        &lt;span class="pgcss-p"&gt;{&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;template_name&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;auth_service/login.html&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;},&lt;/span&gt; &lt;span class="pgcss-n"&gt;name&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;login&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;),&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;url&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;r&amp;#39;^logout/$&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;django.contrib.auth.views.logout&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
        &lt;span class="pgcss-p"&gt;{&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;next_page&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;/&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;},&lt;/span&gt; &lt;span class="pgcss-n"&gt;name&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;logout&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;),&lt;/span&gt;

    &lt;span class="pgcss-n"&gt;url&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;r&amp;#39;^api/me$&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;mainauth.views.describe_me&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;name&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;api_me&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;),&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;url&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;r&amp;#39;^oauth2/&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;include&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;provider.oauth2.urls&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;namespace&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;oauth2&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)),&lt;/span&gt;
&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;strong&gt;mainauth/views.py:&lt;/strong&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;span class="cut"&gt;&lt;a class="h-link reference internal" href="#cut_55306768"data-toggle="collapse"&gt;исходник сниппета views.py&lt;/a&gt;&lt;/span&gt;&lt;div class="collapse" id="cut_55306768"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;annoying.decorators&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;render_to&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;ajax_request&lt;/span&gt;
&lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;django.views.decorators.csrf&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;csrf_exempt&lt;/span&gt;
&lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;provider.oauth2&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;models&lt;/span&gt; &lt;span class="pgcss-k"&gt;as&lt;/span&gt; &lt;span class="pgcss-n"&gt;oauth_models&lt;/span&gt;
&lt;span class="pgcss-o"&gt;...&lt;/span&gt;

&lt;span class="pgcss-nd"&gt;@ajax_request&lt;/span&gt;
&lt;span class="pgcss-nd"&gt;@csrf_exempt&lt;/span&gt;
&lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;describe_me&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;request&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;token_str&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;request&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;GET&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;get&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;oauth_token&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;try&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;token&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;oauth_models&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;AccessToken&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;objects&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;get_token&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;token_str&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;except&lt;/span&gt; &lt;span class="pgcss-n"&gt;oauth_models&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;AccessToken&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;DoesNotExist&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-p"&gt;{&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;rc&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;msg&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;Wrong access token&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;}&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;user&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;token&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;user&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-p"&gt;{&lt;/span&gt;
        &lt;span class="pgcss-s"&gt;&amp;#39;rc&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-mi"&gt;0&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
        &lt;span class="pgcss-s"&gt;&amp;#39;user&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-p"&gt;{&lt;/span&gt;
            &lt;span class="pgcss-c"&gt;# естественно mydomain.com это просто пример&lt;/span&gt;
            &lt;span class="pgcss-c"&gt;# как и генерация уникального хеша для user.profile&lt;/span&gt;
            &lt;span class="pgcss-s"&gt;&amp;#39;id&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;urn:mydomain.com:{0}&amp;#39;&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;format&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;user&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;profile&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;hashcode&lt;/span&gt;&lt;span class="pgcss-p"&gt;),&lt;/span&gt;
            &lt;span class="pgcss-s"&gt;&amp;#39;username&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-n"&gt;user&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;username&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
            &lt;span class="pgcss-s"&gt;&amp;#39;first_name&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-n"&gt;user&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;first_name&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
            &lt;span class="pgcss-s"&gt;&amp;#39;last_name&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-n"&gt;user&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;last_name&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
            &lt;span class="pgcss-s"&gt;&amp;#39;email&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-n"&gt;user&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;email&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
            &lt;span class="pgcss-s"&gt;&amp;#39;staff&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-n"&gt;user&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;is_staff&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
            &lt;span class="pgcss-s"&gt;&amp;#39;super&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-n"&gt;user&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;is_superuser&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
            &lt;span class="pgcss-o"&gt;...&lt;/span&gt;
        &lt;span class="pgcss-p"&gt;}&lt;/span&gt;
    &lt;span class="pgcss-p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;В админке провайдера нужно будет создать экземпляр модели Client из
раздела OAuth2. Для каждого сайта свой, коллбэк (или URI
перенаправления) будет формата
&lt;a class="reference external" href="http://"&gt;http://&lt;/a&gt;&lt;em&gt;наш-домен&lt;/em&gt;/auth/complete/&lt;em&gt;mymegaconn&lt;/em&gt;/. Где &lt;em&gt;наш-домен&lt;/em&gt; и
&lt;em&gt;mymegaconn&lt;/em&gt; (про него будет понятно далее по тексту) нужно заменить на
своё.&lt;/p&gt;
&lt;p&gt;А для всех сервисов, которые будут использовать авторизацию
корневого сервиса, нужно также сделать классы для обработки OAuth2
новоиспечённого провайдера и получение данных через его API. В
настройках settings.py (или в компоненте настройки, если вдруг
используется
&lt;a class="reference external" href="https://github.com/2general/django-split-settings/"&gt;django-split-settings&lt;/a&gt;,
как делаю я) нужно указать параметры клиента (которые были сгенерированы
ранее в админке):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;span class="pgcss-n"&gt;INSTALLED_APPS&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;...&lt;/span&gt;
    &lt;span class="pgcss-s"&gt;&amp;#39;social_auth&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-c"&gt;# и не забыть добавить django-social-auth в зависимости&lt;/span&gt;
&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;span class="pgcss-n"&gt;AUTHENTICATION_BACKENDS&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;
    &lt;span class="pgcss-s"&gt;&amp;#39;приложение.MyMegaConnAuthBackend&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-c"&gt;# наш специальный класс для авторизации по OAuth2&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;span class="pgcss-c"&gt;# конечно же MYMEGACONN нужно заменить на своё осмысленное&lt;/span&gt;
&lt;span class="pgcss-n"&gt;MYMEGACONN_AUTH_DOMAIN&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;наш-домен&amp;#39;&lt;/span&gt;
&lt;span class="pgcss-n"&gt;MYMEGACONN_APP_ID&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;5bcdda....&amp;#39;&lt;/span&gt;                  &lt;span class="pgcss-c"&gt;# fill this in the local settings&lt;/span&gt;
&lt;span class="pgcss-n"&gt;MYMEGACONN_API_SECRET&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;a3fef...&amp;#39;&lt;/span&gt;
&lt;span class="pgcss-n"&gt;MYMEGACONN_AUTH_USERNAME_IS_FULL_EMAIL&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-bp"&gt;True&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Чтобы URL-ы работали как требуется, не забываем добавить по views.py
приложения строку с включением из social_auth:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;span class="pgcss-n"&gt;url&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;r&amp;#39;^auth/&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;include&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;social_auth.urls&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)),&lt;/span&gt;
&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ну и конечно же сам класс MyMegaConnAuthBackend и его помощники (по
образу и подобию social_auth.backends.contrib.yandex.YaruAuth):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-nn"&gt;requests&lt;/span&gt;
&lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;django.conf&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;settings&lt;/span&gt;
&lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;social_auth&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;utils&lt;/span&gt; &lt;span class="pgcss-k"&gt;as&lt;/span&gt; &lt;span class="pgcss-n"&gt;auth_utils&lt;/span&gt;
&lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;social_auth&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;backends&lt;/span&gt;
&lt;span class="pgcss-o"&gt;...&lt;/span&gt;

&lt;span class="pgcss-k"&gt;class&lt;/span&gt; &lt;span class="pgcss-nc"&gt;MyMegaConnAuthBackend&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;backends&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;OAuthBackend&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;name&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;mymegaconn&amp;#39;&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;EXTRA_DATA&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-p"&gt;[&lt;/span&gt;
        &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;id&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;id&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;),&lt;/span&gt;
        &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;expires&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;auth_utils&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;setting&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;SOCIAL_AUTH_EXPIRATION&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;expires&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;
    &lt;span class="pgcss-p"&gt;]&lt;/span&gt;

    &lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;get_user_details&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;response&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-p"&gt;{&lt;/span&gt;
            &lt;span class="pgcss-s"&gt;&amp;#39;username&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-n"&gt;response&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;get&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;username&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;),&lt;/span&gt;
            &lt;span class="pgcss-s"&gt;&amp;#39;email&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-n"&gt;response&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;get&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;email&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;),&lt;/span&gt;
            &lt;span class="pgcss-s"&gt;&amp;#39;first_name&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-n"&gt;response&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;get&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;first_name&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;),&lt;/span&gt;
            &lt;span class="pgcss-s"&gt;&amp;#39;last_name&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-n"&gt;response&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;get&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;last_name&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;),&lt;/span&gt;
            &lt;span class="pgcss-s"&gt;&amp;#39;is_superuser&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-n"&gt;response&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;get&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;super&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;),&lt;/span&gt;
            &lt;span class="pgcss-s"&gt;&amp;#39;is_staff&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-n"&gt;response&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;get&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;staff&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;),&lt;/span&gt;
        &lt;span class="pgcss-p"&gt;}&lt;/span&gt;

&lt;span class="pgcss-k"&gt;class&lt;/span&gt; &lt;span class="pgcss-nc"&gt;MyMegaConnAuth&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;backends&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;BaseOAuth2&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;AUTHORIZATION_URL&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;http://{0}/oauth2/authorize&amp;#39;&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;format&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;settings&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;MYMEGACONN_AUTH_DOMAIN&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;ACCESS_TOKEN_URL&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;http://{0}/oauth2/access_token&amp;#39;&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;format&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;settings&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;MYMEGACONN_AUTH_DOMAIN&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;AUTH_BACKEND&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;MyMegaConnAuthBackend&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;SETTINGS_KEY_NAME&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;MYMEGACONN_APP_ID&amp;#39;&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;SETTINGS_SECRET_NAME&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;MYMEGACONN_API_SECRET&amp;#39;&lt;/span&gt;
    &lt;span class="pgcss-c"&gt;# довольно важный параметр&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;REDIRECT_STATE&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-bp"&gt;False&lt;/span&gt; &lt;span class="pgcss-c"&gt;# т.к. наш oauth2 провайдер не ожидает дополнительных параметров&lt;/span&gt;

    &lt;span class="pgcss-nd"&gt;@property&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;get_api_url&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;http://{0}/api/me&amp;#39;&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;format&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;settings&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;MYMEGACONN_AUTH_DOMAIN&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

    &lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;user_data&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;access_token&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;response&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-o"&gt;*&lt;/span&gt;&lt;span class="pgcss-n"&gt;args&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-o"&gt;**&lt;/span&gt;&lt;span class="pgcss-n"&gt;kwargs&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;answer&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;requests&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;post&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;get_api_url&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;params&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-p"&gt;{&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;oauth_token&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-n"&gt;access_token&lt;/span&gt;&lt;span class="pgcss-p"&gt;})&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-n"&gt;answer&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;json&lt;/span&gt;&lt;span class="pgcss-p"&gt;()[&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;user&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;

&lt;span class="pgcss-n"&gt;BACKENDS&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-p"&gt;{&lt;/span&gt;
    &lt;span class="pgcss-s"&gt;&amp;#39;mymegaconn&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-n"&gt;MyMegaConnAuth&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
&lt;span class="pgcss-p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Чтобы использовать всё это счастье в шаблонах достаточно
воспользоваться стандарным набором, который предоставляет
django-social-auth. Т.к. только что был показан бэкенд для него и он
будет импортирован и зарегистрирован в social_auth под именем
&lt;em&gt;mymegacon&lt;/em&gt;. Ведь он был добавлен в settings.py в
AUTHENTICATION_BACKENDS. Библиотека рекомендует использовать вот такую
конструкцию для получения ссылки, по которой начнётся подключение,
используя OAuth2, с указанным в бэкенде сервером, по заданному адресу:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;некий.html:&lt;/div&gt;
&lt;/div&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;lt;нужный-тег его-аттрибут=&amp;quot;&lt;strong&gt;{% url 'socialauth_begin' 'mymegaconn' %}&lt;/strong&gt;&amp;quot; …&amp;gt;…&amp;lt;/нужный-тег&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Всё это довольно легко и работает на ура. На каждом сайте есть свой
User, который привязан к UserSocialAuth. Нужно только не забыть все
шаблоны, которые не устраивают и коробки (их вид, текст), переопределить
на свои. Информация с центрального сервера авторизации обновляется на
клиентах. Можно регулировать время выдачи тикетов, прав доступа, на
каждом сайте у пользователя доступны свои специфические профили.&lt;/p&gt;
</summary><category term="сервис"></category><category term="Django"></category><category term="сайт"></category><category term="авторизация"></category><category term="python"></category><category term="разделение"></category><category term="django-oauth2-provider"></category><category term="django-social-auth"></category><category term="OAuth2"></category><category term="пользователь"></category></entry><entry><title>Полёт тела вдоль двух окружностей и отрезка</title><link href="/posts/2013/10/12/poliot-tela-vdol-dvukh-okruzhnostei-i-otrezka/" rel="alternate"></link><updated>2013-10-12T02:27:54+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-10-12:posts/2013/10/12/poliot-tela-vdol-dvukh-okruzhnostei-i-otrezka/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/607144"&gt;&lt;img alt="[0;0],110,[7;7],-30.png" src="http://img-fotki.yandex.ru/get/9516/22199227.b/0_943a8_5fee51e1_L" title="[0;0],110,[7;7],-30.png"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/607145"&gt;&lt;img alt="[0;0],240,[3;-5],260.png" src="http://img-fotki.yandex.ru/get/9349/22199227.b/0_943a9_6db0a451_L" title="[0;0],240,[3;-5],260.png"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/607146"&gt;&lt;img alt="[0;0],240,[9;-5],260.png" src="http://img-fotki.yandex.ru/get/6703/22199227.b/0_943aa_9d7878a1_L" title="[0;0],240,[9;-5],260.png"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Подправил ошибку в инвертировании диапазона в ranges.rkt. Теперь
вроде полёт стал вычисляться без проблем, по крайней мере для всех
комбинаций от 0° до 360° алгоритм находит хотя бы один путь (я проверил
это экспериментально). Использовать стандартный plot-file с parametric
рендером очень приятно :).&lt;/p&gt;</summary><category term="программирование"></category><category term="окружность"></category><category term="вычисление"></category><category term="отрезок"></category><category term="путь"></category><category term="racket"></category><category term="полёт"></category></entry><entry><title></title><link href="/posts/2013/10/11/urn:ya.ru:post/22199227/1875/" rel="alternate"></link><updated>2013-10-11T02:28:34+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-10-11:posts/2013/10/11/urn:ya.ru:post/22199227/1875/</id><summary type="html">&lt;p&gt;один глаз на код один на хабр&lt;/p&gt;
</summary></entry><entry><title></title><link href="/posts/2013/10/11/urn:ya.ru:post/22199227/1874/" rel="alternate"></link><updated>2013-10-11T02:27:09+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-10-11:posts/2013/10/11/urn:ya.ru:post/22199227/1874/</id><summary type="html">&lt;p&gt;Если есть по наследству Django 1.4 (как у меня), то лучше не забыть
и перепроверить, а указан ли параметр STORAGE_ENGINE для MySQL. Иначе
вдруг окажется, что работаем с MySQL версии 5.1 под CentOS (как в моём
случае) и там по умолчанию движок MyISAM, который не поддерживает
транзакции. Что может оказаться сюрпризом, когда &lt;code class="code"&gt;
with
transaction.commit _on _success()&lt;/code&gt;
 не срабатывает ожидаемым образом.
Поэтому пришлось прописать &lt;code class="code"&gt;
'STORAGE _ENGINE': 'INNODB'&lt;/code&gt;
 и сконвертировать
старые таблицы используя &lt;code class="code"&gt;
ALTER TABLE  `таблица ` ENGINE = InnoDB;&lt;/code&gt;
 Можно
было и настройки MySQL поменять, но лучше конечно же перестраховаться, и
в коде тоже выставить требование по движку базы.&lt;/p&gt;
</summary><category term="проблема"></category><category term="Django"></category><category term="транзакция"></category><category term="1.4"></category><category term="MyISAM"></category><category term="python"></category><category term="MySQL"></category><category term="InnoDB"></category></entry><entry><title></title><link href="/posts/2013/10/03/urn:ya.ru:post/22199227/1873/" rel="alternate"></link><updated>2013-10-03T04:34:59+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-10-03:posts/2013/10/03/urn:ya.ru:post/22199227/1873/</id><summary type="html">&lt;p&gt;Наткнулся на криво настроенный сайт, но я думаю он не единственный
такой и с него мне тоже нужно тащить страницы. Он возвращает заголовок
Content-Encoding равный gzip, а сами данные не ужимает, а оставляет как
есть. Естественно библиотеке requests от этого сносит башню с ошибкой:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;  File &lt;span class="pgcss-nb"&gt;&amp;quot;.../requests/packages/urllib3/response.py&amp;quot;&lt;/span&gt;, line &lt;span class="pgcss-m"&gt;225&lt;/span&gt;, in &lt;span class="pgcss-n"&gt;stream&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;data&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;read&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;amt&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-n"&gt;amt&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;decode_content&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-n"&gt;decode_content&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
  File &lt;span class="pgcss-nb"&gt;&amp;quot;.../requests/packages/urllib3/response.py&amp;quot;&lt;/span&gt;, line &lt;span class="pgcss-m"&gt;193&lt;/span&gt;, in &lt;span class="pgcss-n"&gt;read&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;e&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-gr"&gt;requests.packages.urllib3.exceptions.DecodeError&lt;/span&gt;: &lt;span class="pgcss-n"&gt;(&amp;#39;Received response with&lt;/span&gt;
&lt;span class="pgcss-x"&gt;            content-encoding: , but failed to decode it.&amp;#39;, error(&amp;#39;Error -3&lt;/span&gt;
&lt;span class="pgcss-x"&gt;            while decompressing: incorrect header check&amp;#39;,))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Но, т.к. я делаю обычный GET запрос и оставляю заговоловки на
усмотрение &lt;em&gt;requests&lt;/em&gt;, то он не требует от сайта принудительного
text/html. Поэтому я добавил принудительный Accept-Encoding, что дало
положительный результат. Забываю всё время про него, т.к. без параметра
headers короче писать запрос.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-n"&gt;page&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;requests&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;get&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;resource&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;url&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;stream&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-bp"&gt;True&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;headers&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-p"&gt;{&lt;/span&gt;
    &lt;span class="pgcss-s"&gt;&amp;#39;User-Agent&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;Some bot&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
    &lt;span class="pgcss-s"&gt;&amp;#39;Accept-Encoding&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;identity&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
    &lt;span class="pgcss-s"&gt;&amp;#39;Accept&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;text/*&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
&lt;span class="pgcss-p"&gt;})&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;С указанием identity стало полегче, но на всякий случай есть ещё
&lt;code class="code"&gt;
page.raw.stream(decode _content=False)&lt;/code&gt;
, для тех, кому вообще
декодирование противопоказанно и точно нужны сырые данные. Только в
таком случае &lt;code class="code"&gt;
stream=True&lt;/code&gt;
 для запроса обязателен.&lt;/p&gt;
</summary><category term="encoding"></category><category term="сайт"></category><category term="gzip"></category><category term="identity"></category><category term="requests"></category><category term="HTTP"></category><category term="python"></category><category term="особенность"></category></entry><entry><title>Бананы</title><link href="/posts/2013/10/03/banany/" rel="alternate"></link><updated>2013-10-03T00:38:56+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-10-03:posts/2013/10/03/banany/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/605263"&gt;&lt;img alt="ALIM3247.JPG" src="http://img-fotki.yandex.ru/get/9499/22199227.b/0_93c4f_2b5827ec_L" title="ALIM3247.JPG"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Если это мама негра, то кто же папа? :/&lt;/p&gt;</summary><category term="бананы"></category><category term="еда"></category></entry><entry><title>Электроника</title><link href="/posts/2013/09/28/elektronika/" rel="alternate"></link><updated>2013-09-28T13:54:01+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-09-28:posts/2013/09/28/elektronika/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Отличный продавец электроники и радиодеталей! Мне нравится покупать
у него детали, т.к. не сильно далеко и плюс он всегда всё распишет,
посчитает и каждый заказ упакует в пакетик, и каждый набор снова в свой
мелкий пакетик. И добавляет бонус к покупке в виде дополнительных
деталей.&lt;/p&gt;
</summary><category term="электроника"></category><category term="детали"></category><category term="продавец"></category></entry><entry><title></title><link href="/posts/2013/09/27/urn:ya.ru:post/22199227/1870/" rel="alternate"></link><updated>2013-09-27T16:22:01+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-09-27:posts/2013/09/27/urn:ya.ru:post/22199227/1870/</id><summary type="html">&lt;p&gt;При использовании чистого Gunicorn для работы с формой из тела
запроса не стоит забывать указывать отдельно параметр файлового
указателя данных &lt;code class="code"&gt;
env['wsgi.input']&lt;/code&gt;
, даже не смотря на то, что
переменные среды передаются в этот же класс. Т.к. по умолчанию параметр
fp равен sys.stdin, т.е. чтение из стандартного потока ввода (в моём
случае терминала).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-nn"&gt;cgi&lt;/span&gt;
&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;application&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;environ&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;start_response&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;status&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;200 OK&amp;#39;&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;fields&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;cgi&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;FieldStorage&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;fp&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-n"&gt;environ&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;wsgi.input&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;],&lt;/span&gt; &lt;span class="pgcss-n"&gt;environ&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-n"&gt;environ&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;...&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-n"&gt;output&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</summary><category term="параметры"></category><category term="python"></category><category term="gunicorn"></category><category term="форма"></category><category term="CGI"></category></entry><entry><title>Ошибка обработки фильтрации отправителя сигнала в Celery</title><link href="/posts/2013/09/25/oshibka-obrabotki-filtratsii-otpravitelia-signala-v-celery/" rel="alternate"></link><updated>2013-09-25T23:38:34+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-09-25:posts/2013/09/25/oshibka-obrabotki-filtratsii-otpravitelia-signala-v-celery/</id><summary type="html">&lt;p&gt;Похоже на то, что в обработчике сигналов в Celery есть проблемное
место. Код для сигналов &lt;code class="code"&gt;
celery.utils.dispatch.signals&lt;/code&gt;
 взят из Django,
но в Django в роли sender выступает обычно класс, при чём этот класс в
единственном экземпляре. Т.к. веб сервер довольно таки самодостаточный
процесс. А вот в Celery явно выделяется обработчик запроса и
отправитель. При чём это могут быть два разных процесса, которые
естественно не разделяют интерпретатор, память и могут быть на разных
узлах.&lt;/p&gt;
&lt;p&gt;Так вот обработчик для сигналов &lt;code class="code"&gt;
task _sent&lt;/code&gt;
 вызывается на стороне
отправителя, а некоторые другие сигналы на принимающей стороне. Видимо
это стало причиной, что &lt;em&gt;sender&lt;/em&gt; в Celery содержит строку — название
отправителя. Только вот две одинаковые строки не обязаны иметь
одинаковый &lt;strong&gt;id&lt;/strong&gt;, особенно если они из разных модулей или получены
разными путями, ведь это два разных объекта. Но в документации к Celery
есть смутное
&lt;a class="reference external" href="http://docs.celeryproject.org/en/latest/userguide/signals.html#basics"&gt;упоминание&lt;/a&gt;,
что можно включить фильтр по sender при регистрации обработчика сигнала,
что в принципе не работает:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Some signals also have a sender which you can filter by. For example
the
&lt;a class="reference external" href="http://docs.celeryproject.org/en/latest/userguide/signals.html#std:signal-task_sent"&gt;task_sent&lt;/a&gt;
signal uses the task name as a sender, so you can connect your
handler to be called only when tasks with name “tasks.add” has been
sent by providing the sender argument to
&lt;a class="reference external" href="http://docs.celeryproject.org/en/latest/internals/reference/celery.utils.dispatch.signal.html#celery.utils.dispatch.signal.Signal.connect"&gt;connect&lt;/a&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-nd"&gt;@task_sent.connect&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;sender&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;tasks.add&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;task_sent_handler&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;sender&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-bp"&gt;None&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;task_id&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-bp"&gt;None&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;task&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-bp"&gt;None&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;args&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-bp"&gt;None&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
                      &lt;span class="pgcss-n"&gt;kwargs&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-bp"&gt;None&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-o"&gt;**&lt;/span&gt;&lt;span class="pgcss-n"&gt;kwds&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;print&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;Got signal task_sent for task id &lt;/span&gt;&lt;span class="pgcss-si"&gt;%s&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;&lt;/span&gt; &lt;span class="pgcss-o"&gt;%&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;task_id&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;А не работает потому, что код диспетчера преобразует отправителя в
идентификатор, который затем и сравнивает:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;_make_id&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;target&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;  &lt;span class="pgcss-c"&gt;# pragma: no cover&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-nb"&gt;hasattr&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;target&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;im_func&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;id&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;target&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;im_self&lt;/span&gt;&lt;span class="pgcss-p"&gt;),&lt;/span&gt; &lt;span class="pgcss-nb"&gt;id&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;target&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;im_func&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-nb"&gt;id&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;target&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Эта функция используется для трансляции вида: отправитель →
уникальное число; только вот так нельзя делать из-за того, что для строк
это не очень работает. Для классов да, неплохо работает. Но Celery всё
же отправляет строку. Поэтому до решения проблемы лучше писать
обработчик вида:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-nd"&gt;@task_success.connect&lt;/span&gt;
&lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-err"&gt;...&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;sender&lt;/span&gt; &lt;span class="pgcss-o"&gt;==&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;...&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
        &lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Или похакать модуль и добавить туда hash вместо id, но это только
если тип хешируемый.&lt;/p&gt;
</summary><category term="Celery"></category><category term="ошибка"></category><category term="обработчик"></category><category term="отправка"></category><category term="python"></category><category term="сигнал"></category></entry><entry><title>Хэнд мэйд пицца</title><link href="/posts/2013/09/14/khend-meid-pitstsa/" rel="alternate"></link><updated>2013-09-14T02:22:49+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-09-14:posts/2013/09/14/khend-meid-pitstsa/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/600801"&gt;&lt;img alt="Хэнд мэйд пицца" src="http://img-fotki.yandex.ru/get/9355/22199227.b/0_92ae1_324c5273_L" title="Хэнд мэйд пицца"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Точнее уже половина, вторую я съел. Моцарелла, оливки, чуть зелени и
кусочек огурца для меня, колбасы немножко. Тонкая, правда начинки
положил как для себя любимого :)&lt;/p&gt;</summary><category term="готовлю"></category><category term="жизнь"></category><category term="еда"></category><category term="пицца"></category></entry><entry><title></title><link href="/posts/2013/09/05/urn:ya.ru:post/22199227/1863/" rel="alternate"></link><updated>2013-09-05T01:52:32+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-09-05:posts/2013/09/05/urn:ya.ru:post/22199227/1863/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Возможно ли совершить правильное разрезание арбуза такое, что все
косточки каждого куска окажутся на переферии одной стороны, позволяя их
удалить одним движением руки?&lt;/p&gt;
</summary><category term="Я"></category><category term="жизнь"></category><category term="еда"></category><category term="мысль"></category></entry><entry><title>Творожные завитушки</title><link href="/posts/2013/09/04/tvorozhnye-zavitushki/" rel="alternate"></link><updated>2013-09-04T01:07:59+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-09-04:posts/2013/09/04/tvorozhnye-zavitushki/</id><summary type="html">&lt;blockquote&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/sarachai/view/714095/"&gt;&lt;img alt="Завитушки" src="http://img-fotki.yandex.ru/get/9356/99673415.39/0_ae56f_69ae5840_L" title="Завитушки"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Понадобится:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;400 гр творога&lt;/li&gt;
&lt;li&gt;4 ст.л. сахара&lt;/li&gt;
&lt;li&gt;1 стакан муки (можно чуть больше )&lt;/li&gt;
&lt;li&gt;3/4 ч.л. соды&lt;/li&gt;
&lt;li&gt;4 желтка&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Творог растереть с желтками добавить соду (творог сам погасит её ) и оставить
на 5 минут. Добавить муку и сахар, замесить тесто. Убрать его в холодильник 1.5 часа.
Раскатать, свернуть в рулет, нарезать кружочками толщиной в 1 см. Выпекать при температуре
200 градусов 15-20 минут.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Выглядит аппетитно&lt;/p&gt;</summary><category term="еда"></category></entry><entry><title>Хочу..хочу..очень хочу себе такой горизонтальный ключ!</title><link href="/posts/2013/09/03/khochukhochuochen-khochu-sebe-takoi-gorizontalnyi-kliuch/" rel="alternate"></link><updated>2013-09-03T01:38:07+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-09-03:posts/2013/09/03/khochukhochuochen-khochu-sebe-takoi-gorizontalnyi-kliuch/</id><summary type="html">&lt;div class="youtube" align="left"&gt;&lt;iframe width="450" height="370" src="https://www.youtube.com/embed/WClo1G962po" frameborder="0"&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;p&gt;Ностальгия, сильная ностальгия. У меня был простой советский ключ,
накатывает слеза, а этот ключ такой мимимими…!&lt;/p&gt;
</summary><category term="ключ"></category><category term="радиоспорт"></category><category term="морзе"></category><category term="передача"></category><category term="скоростная"></category><category term="телеграфия"></category></entry><entry><title>Пауки возвращаются</title><link href="/posts/2013/09/02/pauki-vozvrashchaiutsia/" rel="alternate"></link><updated>2013-09-02T17:02:56+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-09-02:posts/2013/09/02/pauki-vozvrashchaiutsia/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/597606"&gt;&lt;img alt="Пауки возвращаются" src="http://img-fotki.yandex.ru/get/6715/22199227.b/0_91e66_f605a3c5_L" title="Пауки возвращаются"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/597607"&gt;&lt;img alt="Пауки возвращаются" src="http://img-fotki.yandex.ru/get/6718/22199227.b/0_91e67_d49d7d64_L" title="Пауки возвращаются"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;    В добавок к паукам-осам вернулись в деревне на наш участок старые
соседи пауки-крестовики.&lt;/p&gt;</summary><category term="арахниды"></category><category term="природа"></category><category term="крестовик"></category><category term="паук"></category><category term="деревня"></category></entry><entry><title>Обслуживание</title><link href="/posts/2013/09/02/obsluzhivanie/" rel="alternate"></link><updated>2013-09-02T15:28:20+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-09-02:posts/2013/09/02/obsluzhivanie/</id><summary type="html">&lt;p&gt;Ого… в центральном отделении (филиал №300, что на Фрунзе)
Беларусбанка оказывается… Автоматизированная очередь. А я колхозник чуть
в кабинку не зашёл по привычке :D Хорошо, что заподозрил неладное, ведь
другие люди сидят, а кабинки пустые. Через пару минут я услышал
роботизированный голос, который назвал номер билета и номер кабины, куда
отправился человек. После этого мне быстренько пришлось поискать, где же
они берут эти билеты. Клёво то, что их тоже выдаёт автомат. Вот бы везде
в городе так очереди обрабатывались.&lt;/p&gt;
</summary><category term="жизнь"></category><category term="банк"></category><category term="радость"></category><category term="любопытно"></category><category term="обслуживание"></category><category term="автоматизация"></category></entry><entry><title></title><link href="/posts/2013/08/29/urn:ya.ru:post/22199227/1856/" rel="alternate"></link><updated>2013-08-29T02:52:16+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-08-29:posts/2013/08/29/urn:ya.ru:post/22199227/1856/</id><summary type="html">&lt;p&gt;Опять лето быстро улетело&lt;/p&gt;
</summary></entry><entry><title></title><link href="/posts/2013/08/28/urn:ya.ru:post/22199227/1855/" rel="alternate"></link><updated>2013-08-28T02:06:37+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-08-28:posts/2013/08/28/urn:ya.ru:post/22199227/1855/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Поставил Yandex-Disk консольную версию, просто и удобно
использовать. Можно будет билды синхронизировать в него и часть
некритических, но важных для меня документов. У меня и Dropbox есть, им
тоже пользуюсь, Яндекс.Диск пока пробую.&lt;/p&gt;
</summary><category term="Яндекс"></category><category term="облако"></category><category term="linux"></category><category term="хранилище"></category><category term="клиент"></category><category term="диск"></category><category term="консоль"></category></entry><entry><title>Покрытие БелТелеКом ??</title><link href="/posts/2013/08/22/pokrytie-beltelekom/" rel="alternate"></link><updated>2013-08-22T15:50:51+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-08-22:posts/2013/08/22/pokrytie-beltelekom/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Я думал, что у БелТелеКома покрытие только в областных городах
слабое. Но вот я в Минске, и истоптав ноги я не нашёл ничего
подходящего, чтобы можно было посидеть и использовать их соединение.
Приходится сидеть в подземке, где ловит их WiFi&lt;/p&gt;
</summary><category term="белтелеком"></category><category term="wifi"></category><category term="покрытие"></category><category term="плохо"></category><category term="грусть"></category></entry><entry><title>Обновление Emacs до 24.3.50.2 и пакет melpa.el</title><link href="/posts/2013/08/16/obnovlenie-emacs-do-243502-i-paket-melpael/" rel="alternate"></link><updated>2013-08-16T02:27:16+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-08-16:posts/2013/08/16/obnovlenie-emacs-do-243502-i-paket-melpael/</id><summary type="html">&lt;p&gt;Т.к. я пользуюсь development версией Emacs, то в ней появляются
самые свежие новинки постоянно, и они иногда ломают внутренний API так,
что плагины ещё к нему не готовы, ибо плагины ориентируются на
стабильную версию. Пакет melpa довольно давно не обновлялся и прекрасно
работал до версии Emacs 24.3.50.2, а вот уже в ней функцию
&lt;code class="code"&gt;
package-desc-vers&lt;/code&gt;
 разбили на &lt;code class="code"&gt;
package-desc-version&lt;/code&gt;
 и
&lt;code class="code"&gt;
package--ac-desc-version&lt;/code&gt;
 (до этого были только предупреждения от
редактора). И это вызвало ошибку при загрузке melpa, что повлекло ошибки
при попытке обновить пакеты. Поэтому пришлось немного подправить руками
код melpa, как
например&amp;nbsp;&lt;a class="reference external" href="https://github.com/LiaoPengyu/emacs.d/commit/fc7a6fedb5c496c613d6d19a4fcdab18b36a8d87"&gt;сделал&lt;/a&gt;
другой человек для своей функции:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;funcall&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;fboundp&lt;/span&gt; &lt;span class="pgcss-ss"&gt;&amp;#39;package-desc-version&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
            &lt;span class="pgcss-ss"&gt;&amp;#39;package--ac-desc-version&lt;/span&gt;
           &lt;span class="pgcss-ss"&gt;&amp;#39;package-desc-vers&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
         &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;cdr&lt;/span&gt; &lt;span class="pgcss-nc"&gt;package&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Если &lt;code class="code"&gt;
package-desc-version&lt;/code&gt;
 объявлена, то используем
&lt;code class="code"&gt;
package--ac-desc-version&lt;/code&gt;
 (т.к. это unstable версия Emacs), а если нет, то
по старинке.&lt;/p&gt;
</summary><category term="ошибка"></category><category term="emacs"></category><category term="melpa"></category><category term="новый"></category><category term="версия"></category></entry><entry><title></title><link href="/posts/2013/08/15/urn:ya.ru:post/22199227/1849/" rel="alternate"></link><updated>2013-08-15T02:15:33+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-08-15:posts/2013/08/15/urn:ya.ru:post/22199227/1849/</id><summary type="html">&lt;p&gt;Хм.. базовый комплект Avira подорожал на 4 евро, хотя ещё в мае был
15.95, а сейчас продают уже его по 19.95.&lt;/p&gt;
</summary><category term="avira"></category><category term="лицензия"></category><category term="подорожание"></category></entry><entry><title></title><link href="/posts/2013/08/12/urn:ya.ru:post/22199227/1848/" rel="alternate"></link><updated>2013-08-12T03:04:53+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-08-12:posts/2013/08/12/urn:ya.ru:post/22199227/1848/</id><summary type="html">&lt;p&gt;Закончился ICFP Programming Contest 2013. В этот раз я даже смог
чего-то нарешать :) Только жалко, что ступил и не запустил мой решатель для
больших параметров, я боялся, что он по времени задачи крупные не
поднимет, а он всё же некоторые поднимал. Но я это поздно заметил. В
общем в этот раз я первый раз выступил так, что сам доволен :)&lt;/p&gt;
</summary><category term="соревнование"></category><category term="радость"></category><category term="программирование"></category><category term="icfpc"></category></entry><entry><title>Закончился лайт раунд</title><link href="/posts/2013/08/10/zakonchilsia-lait-raund/" rel="alternate"></link><updated>2013-08-10T03:12:31+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-08-10:posts/2013/08/10/zakonchilsia-lait-raund/</id><summary type="html">&lt;p&gt;В принципе мысли у меня появились только спустя часов 16 от начала
контеста, поэтому я код быстренько набросал в Racket, и когда
почувствовал, что не влажу в лайт раунд, а прога у меня частично
работает, но требует ручного вмешательства, то я быстренько с ней
скооперировался и наклепал сколько смог очков для себя. Хотя бы буду не
последним в лайт раунде (надеюсь) :), а то вон есть ребята даже
спрашивают, и им не понятен tfold из условия, а там вроде всё достаточно
чётко сказано. С первого раза обратил на него внимание. Плохо только,
что у меня нет опыта работы с HTTP из Racket, но благо дока есть
встроенная.&lt;/p&gt;
</summary><category term="программирование"></category><category term="соревнование"></category><category term="радость"></category><category term="racket"></category><category term="icfpc"></category><category term="Я"></category><category term="устал"></category></entry><entry><title>Начало ICFPC 2013</title><link href="/posts/2013/08/06/nachalo-icfpc-2013/" rel="alternate"></link><updated>2013-08-06T17:26:15+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-08-06:posts/2013/08/06/nachalo-icfpc-2013/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Осталось всего чуть-чуть до начала ICFP Programming Contest 2013. И
до конца регистрации тоже, но я уже давно зарегистрировался (надеюсь,
что я ничего не напутал при регистрации).&lt;/p&gt;
</summary><category term="программирование"></category><category term="соревнование"></category><category term="2013"></category><category term="фунциональный"></category><category term="icfpc"></category><category term="конкурс"></category></entry><entry><title></title><link href="/posts/2013/08/05/urn:ya.ru:post/22199227/1845/" rel="alternate"></link><updated>2013-08-05T01:22:42+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-08-05:posts/2013/08/05/urn:ya.ru:post/22199227/1845/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; С этими переименованиями в советское время так намудрили, что под
Гомелем, где ни плюнь, что-нибудь Красное. И приходится запоминать, что
Красный Богатырь это рядом с Красным, но совсем далеко от Красного
Маяка, хотя не очень далеко от Красного Октября. А ещё я вечно забываю,
Большевик он Красный или нет?! Нет, выходит большевик у нас простой. А
вот Красных Маяков аж целых два. Так и запутаться недолго.&lt;/p&gt;
</summary><category term="город"></category><category term="район"></category><category term="название"></category><category term="переименование"></category><category term="Гомель"></category></entry><entry><title></title><link href="/posts/2013/08/02/urn:ya.ru:post/22199227/1844/" rel="alternate"></link><updated>2013-08-02T16:16:22+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-08-02:posts/2013/08/02/urn:ya.ru:post/22199227/1844/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Люблю небольшие отделения банков, где небольшой поток людей. Там и
персонал добрый и всё по-домашнему. Пошёл получать в этот раз свой
Virtuon в отделении на пр. Октября, в этот раз мне и позвонили заранее,
сказали про карточку и разъяснили, когда у них обед и выходные.
Обслужили быстро и без проблем. А вот, когда я в центральном на
Советской забирал, то позвонили только, когда уже прошёл месяц, так ещё
и оказалось, что платить нужно в одном месте, а получать в другом, а это
было два разных этажа.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp; Буду теперь всё время забирать на пр. Октября, тут ближе (можно
пешком дойти от дома) и приятнее.&lt;/p&gt;
</summary><category term="жизнь"></category><category term="банк"></category><category term="получение"></category><category term="карта"></category><category term="virtuon"></category><category term="visa"></category></entry><entry><title>Падение Redis 2.4.10</title><link href="/posts/2013/08/02/padenie-redis-2410/" rel="alternate"></link><updated>2013-08-02T16:07:57+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-08-02:posts/2013/08/02/padenie-redis-2410/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Redis 2.4.10 почему-то стал просто умирать через некоторое время под
нагрузкой из Sentry. Я нашёл, что это возможно проблема при обработке
ключей и решил сильно много времени не тратить, а обновить уже до 2.6.13
его. Но т.к. на сервере стоит CentOS 5, то пришлось добавить репозиторий
Remi, чтобы установить версию посвежее. Пока полёт нормальный, посмотрим
дальше, т.к. раньше всё случалось где-то в момент когда база становилась
размером в 800-900 мегабайт.&lt;/p&gt;
</summary><category term="redis"></category><category term="ошибка"></category><category term="sentry"></category></entry><entry><title></title><link href="/posts/2013/08/01/urn:ya.ru:post/22199227/1842/" rel="alternate"></link><updated>2013-08-01T03:01:00+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-08-01:posts/2013/08/01/urn:ya.ru:post/22199227/1842/</id><summary type="html">&lt;p&gt;Срок действия карты от БПС Сбербанка уже истёк, а он мне всё
продолжает присылать клиентские отчёты по почте… указывая, что у меня не
было никаких операций по карте, забавно :)&lt;/p&gt;
</summary><category term="почта"></category><category term="карта"></category><category term="банк"></category><category term="отчёт"></category></entry><entry><title>ASUS Eeepc 1215N в разобранном состоянии</title><link href="/posts/2013/07/27/asus-eeepc-1215n-v-razobrannom-sostoianii/" rel="alternate"></link><updated>2013-07-27T15:27:20+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-07-27:posts/2013/07/27/asus-eeepc-1215n-v-razobrannom-sostoianii/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/590543"&gt;&lt;img alt="ALIM3225.JPG" src="http://img-fotki.yandex.ru/get/9480/22199227.b/0_902cf_1c35827c_L" title="ALIM3225.JPG"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/590544"&gt;&lt;img alt="ALIM3226.JPG" src="http://img-fotki.yandex.ru/get/9554/22199227.b/0_902d0_6d691371_L" title="ALIM3226.JPG"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/590545"&gt;&lt;img alt="Заголовок" src="http://img-fotki.yandex.ru/get/6715/22199227.b/0_902d1_ff7cf429_L" title="Заголовок"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;    Не знаю как большой кусочек пыли смог попасть между экраном
(фильтром) и ЖК-матрицей, но чтобы его достать пришлось разобрать
множество деталей, чтобы снять дисплей, разобрать его камеру и отделить
поверхностный фильтр от собственно ЖК-дисплея. Только снимать
алюминиевую нужно оправу нужно осторожно, а не как я, что чуть не
разорвал алюминиевый корпус, соединяющий матрицу и фильтр. Да, вот “то
серое” и есть ЖК-матрица, а не “то, что чёрное”.&lt;/p&gt;</summary><category term="чистка"></category><category term="asus"></category><category term="разбор"></category><category term="eeepc"></category></entry><entry><title>mate-maximus</title><link href="/posts/2013/07/26/mate-maximus/" rel="alternate"></link><updated>2013-07-26T01:17:50+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-07-26:posts/2013/07/26/mate-maximus/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; О, оказывает mate-maximus всё же настраивается. Только делать нужно
это через dconf-editor. А то мне не всегда удобно, что все окна
автоматически разворачиваются по максимуму, я привык их сам по
необходимости увеличивать. При этом я не хотел бы лишаться возможности,
чтобы заголовок окна пропадал, т.к. у на нетбуке это очень полезная
возможность. Есть опция &lt;strong&gt;org.mate.maximus.no-maximize&lt;/strong&gt;, её нужно
включить. Тогда заголовок будет пропадать у окон только при
максимизации, там же есть ещё несколько полезных параметров.&lt;/p&gt;
</summary><category term="mate"></category><category term="удобство"></category><category term="окно"></category><category term="mate-maximus"></category></entry><entry><title>Bootstrap кнопка ON/OFF</title><link href="/posts/2013/07/24/bootstrap-knopka-onoff/" rel="alternate"></link><updated>2013-07-25T22:18:15+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-07-24:posts/2013/07/24/bootstrap-knopka-onoff/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Настраиваемый слайдер с двумя состояниями, основан на Bootstrap,
удобный, расширяемый.&lt;/p&gt;
</summary><category term="кнопка"></category><category term="слайдер"></category><category term="переключатель"></category><category term="bootstrap"></category></entry><entry><title></title><link href="/posts/2013/07/19/urn:ya.ru:post/22199227/1835/" rel="alternate"></link><updated>2013-07-19T23:23:36+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-07-19:posts/2013/07/19/urn:ya.ru:post/22199227/1835/</id><summary type="html">&lt;p&gt;Мёртвый Анархист&lt;/p&gt;
</summary></entry><entry><title></title><link href="/posts/2013/07/19/urn:ya.ru:post/22199227/1834/" rel="alternate"></link><updated>2013-07-19T01:57:52+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-07-19:posts/2013/07/19/urn:ya.ru:post/22199227/1834/</id><summary type="html">&lt;p&gt;При попытке установить из Marmalade (в MELPA репозитории его не
было) репозитория пакет ido-yes-or-no столкнулся с проблемой, что он в
Emacs 24.3.50.2 отказался почему-то нормально установится. Высказав мне
своё фи, плагин лишь отписал про то, что ему нужен пакет ido-0, но Emacs
такой не знает и я такой не знаю, а знаю лишь только пакет ido без
версии (по-умолчанию).&lt;/p&gt;
&lt;p&gt;Пришлось
скачать&amp;nbsp;&lt;a class="reference external" href="http://marmalade-repo.org/packages/ido-yes-or-no-1.1.el"&gt;файл&lt;/a&gt;
вручную из
&lt;a class="reference external" href="http://marmalade-repo.org/packages/ido-yes-or-no"&gt;репозитория&lt;/a&gt;. И
там была прописана зависимость: &lt;code class="code"&gt;
((ido &amp;quot;0&amp;quot;))&lt;/code&gt;
&lt;/p&gt;
&lt;p&gt;Я решил, что ничего страшного не случится, если я уберу её, т.к. на
ido-yes-or-no у меня опирается часть конфига и зависит от него через
use-package (а сам ido-yes-or-no достаточно маленький и безобидный).
Затем я просто установил пакет из файла при помощи &lt;kbd class="kbd"&gt;
M-x
package-install-file&lt;/kbd&gt;
. Десять минут, полёт нормальный.&lt;/p&gt;
</summary><category term="проблема"></category><category term="emacs"></category><category term="установка"></category><category term="ido"></category><category term="ido-yes-or-no"></category><category term="пакет"></category></entry><entry><title></title><link href="/posts/2013/07/16/urn:ya.ru:post/22199227/1833/" rel="alternate"></link><updated>2013-07-16T03:28:58+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-07-16:posts/2013/07/16/urn:ya.ru:post/22199227/1833/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Проверил почти 500 разнородных сайтов с Apache и PHP, нигде нет
доступа на запись в корень для веб сервера. Это хорошо…&lt;/p&gt;
</summary><category term="apache"></category><category term="запись"></category><category term="права"></category><category term="корень"></category></entry><entry><title>Новый конфиг</title><link href="/posts/2013/07/10/novyi-konfig/" rel="alternate"></link><updated>2013-07-10T03:23:29+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-07-10:posts/2013/07/10/novyi-konfig/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Решил побороть лень и за 6,5 лет всё же переделать конфиг в Emacs.
Вроде всё работает как надо, но и от некоторых новых плюшек я не
отказался бы, да и 24-ая версия позволяет намного более гибко
производить загрузку дополнений. Я взял за основу один уже готовый
&lt;a class="reference external" href="https://github.com/IMDagger/dot-emacs"&gt;конфиг&lt;/a&gt;, который постепенно
переработаю под себя. Он неплохо обслуживает Python и Scheme, как раз
то, что мне нужно. Нужно будет там ещё сделать возможность деления
настроек по машинам, т.к. мне было бы удобно чтобы он сразу работал на
всех моих компьютерах.&lt;/p&gt;
</summary><category term="emacs"></category><category term="конфигурация"></category><category term="настройки"></category><category term="улучшение"></category></entry><entry><title></title><link href="/posts/2013/07/08/urn:ya.ru:post/22199227/1831/" rel="alternate"></link><updated>2013-07-08T01:40:19+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-07-08:posts/2013/07/08/urn:ya.ru:post/22199227/1831/</id><summary type="html">&lt;p&gt;скоро отдых&lt;/p&gt;
</summary></entry><entry><title>Прибывшая посылка</title><link href="/posts/2013/07/08/pribyvshaia-posylka/" rel="alternate"></link><updated>2013-07-08T01:39:01+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-07-08:posts/2013/07/08/pribyvshaia-posylka/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/588284"&gt;&lt;img alt="ALIM3213.JPG" src="http://img-fotki.yandex.ru/get/9168/22199227.b/0_8f9fc_e3a908d5_L" title="ALIM3213.JPG"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/588285"&gt;&lt;img alt="Прибывшая посылка" src="http://img-fotki.yandex.ru/get/6716/22199227.b/0_8f9fd_aeed3a85_L" title="Прибывшая посылка"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/588286"&gt;&lt;img alt="Прибывшая посылка" src="http://img-fotki.yandex.ru/get/9066/22199227.b/0_8f9fe_af777a0a_L" title="Прибывшая посылка"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;    Прибыл на прошлой неделе мой USB-фонарик. Работает хорошо, пока
провод держится жёстко, только правда в моём USB он немного проседает,
поэтому я подкладываю что-нибудь под фонарик, чтобы не брал порт на
излом. Во время доставки он выжил Не пострадал, китайцы постарались
запаковать, хотя видно по коробке, что он месяц морем и поездами шёл.
Хорошо, что БелПочта поддерживает трекинг.&lt;/p&gt;</summary><category term="почта"></category><category term="USB"></category><category term="китай"></category><category term="посылка"></category><category term="фонарик"></category><category term="радость"></category></entry><entry><title></title><link href="/posts/2013/06/30/urn:ya.ru:post/22199227/1829/" rel="alternate"></link><updated>2013-06-30T03:05:35+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-06-30:posts/2013/06/30/urn:ya.ru:post/22199227/1829/</id><summary type="html">&lt;p&gt;неужели?&lt;/p&gt;
</summary></entry><entry><title>Переход из точки в точку</title><link href="/posts/2013/06/30/perekhod-iz-tochki-v-tochku/" rel="alternate"></link><updated>2013-06-30T03:03:37+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-06-30:posts/2013/06/30/perekhod-iz-tochki-v-tochku/</id><summary type="html">&lt;p&gt;Если задано две точки (p&lt;sub&gt;1x&lt;/sub&gt;; p&lt;sub&gt;1y&lt;/sub&gt;) с начальным
единичным вектором (t&lt;sub&gt;1x&lt;/sub&gt;; t&lt;sub&gt;1y&lt;/sub&gt;) и конечная точка
(p&lt;sub&gt;2x&lt;/sub&gt;; p&lt;sub&gt;2y&lt;/sub&gt;) с единичным вектором (t&lt;sub&gt;2x&lt;/sub&gt;;
t&lt;sub&gt;2y&lt;/sub&gt;), то возможен набор переходов при помощи двух окружностей и
отрезка из начальной точки в конечную. Отрезок расположен коллинеарно
конечному единичному вектору и заканчивается в точке (p&lt;sub&gt;2x&lt;/sub&gt;;
p&lt;sub&gt;2y&lt;/sub&gt;). Нужно вычислить его длину и ограничения для радиусов
окружностей R&lt;sub&gt;1&lt;/sub&gt; и R&lt;sub&gt;2&lt;/sub&gt; таких, что единичные вектора в
заданных точках касаются полученных окружностей. Касание может
происходить слева от вектора и справа, поэтому есть два параметра
k&lt;sub&gt;1&lt;/sub&gt; и k&lt;sub&gt;2&lt;/sub&gt;, которые могут принимать значения k&lt;sub&gt;i&lt;/sub&gt;
∈ {-1, 1}. В Maxima я смог свести поиск и решение уравнения к такой
последовательности:&lt;/p&gt;
&lt;span class="cut"&gt;&lt;a class="h-link reference internal" href="#cut_59324944"data-toggle="collapse"&gt;Можно увидеть всю формулу, но не просите потом развидеть её&lt;/a&gt;&lt;/span&gt;&lt;div class="collapse" id="cut_59324944"&gt;
&lt;pre class="literal-block"&gt;
(%i1) p1: [p1x, p1y];
(%o1)                             [p1x, p1y]
(%i2) p2: [p2x, p2y];
(%o2)                             [p2x, p2y]
(%i3) t1: [t1x, t1y];
(%o3)                             [t1x, t1y]
(%i4) t2: [t2x, t2y];
(%o4)                             [t2x, t2y]
(%i5) load(&amp;quot;vect&amp;quot;);

(%o5)           /usr/share/maxima/5.24.0/share/vector/vect.mac
(%i6)
Tt1: [-t1y, t1x];
(%o6)                            [- t1y, t1x]
(%i7) Tt2: [-t2y, t2x];
(%o7)                            [- t2y, t2x]
(%i8)
f: p2 - delta * t1 + k1 * R2 * Tt2 - p1 - k2 * R1 * Tt1;
(%o8) [- k1 t2y R2 + k2 t1y R1 - delta t1x + p2x - p1x,
                                 k1 t2x R2 - k2 t1x R1 - delta t1y + p2y - p1y]
(%i9) res: solve([(f . f) = (R1 + R2)^2], R2), ratsimp;
                        2     2   2    2     2
(%o9) [R2 = - (sqrt(((k1  - k1  k2  t1x ) t2y
        2   2                                     2     2   2    2     2
 + (2 k1  k2  t1x t1y t2x + 2 k1 k2 t1y) t2y + (k1  - k1  k2  t1y ) t2x
                       2    2     2    2    2
 + 2 k1 k2 t1x t2x + k2  t1y  + k2  t1x ) R1
          2              2                         2                2
 + (((2 k1  k2 p2y - 2 k1  k2 p1y) t1x - 2 delta k1  k2 t1x t1y) t2y
               2       2        2              2
 + ((2 delta k1  k2 t1y  + (2 k1  k2 p1y - 2 k1  k2 p2y) t1y
             2       2        2              2
 - 2 delta k1  k2 t1x  + (2 k1  k2 p2x - 2 k1  k2 p1x) t1x) t2x
 - 2 delta k1 t1x + 2 k1 p2x - 2 k1 p1x) t2y
              2              2              2                2
 + (2 delta k1  k2 t1x - 2 k1  k2 p2x + 2 k1  k2 p1x) t1y t2x
 + (2 delta k1 t1y - 2 k1 p2y + 2 k1 p1y) t2x + (2 k2 p2x - 2 k2 p1x) t1y
                                           2   2    2
 + (2 k2 p1y - 2 k2 p2y) t1x) R1 + (- delta  k1  t1y
              2                 2              2    2       2
 + (2 delta k1  p2y - 2 delta k1  p1y) t1y - k1  p2y  + 2 k1  p1y p2y
     2    2     2              2   2                 2                 2
 - k1  p1y ) t2y  + ((- 2 delta  k1  t1x + 2 delta k1  p2x - 2 delta k1  p1x)
                  2                 2                 2           2
 t1y + (2 delta k1  p2y - 2 delta k1  p1y) t1x + (2 k1  p1x - 2 k1  p2x) p2y
       2               2
 + 2 k1  p1y p2x - 2 k1  p1x p1y) t2x t2y
           2   2    2              2                 2              2    2
 + (- delta  k1  t1x  + (2 delta k1  p2x - 2 delta k1  p1x) t1x - k1  p2x
       2             2    2     2        2    2
 + 2 k1  p1x p2x - k1  p1x ) t2x  + delta  t1y
                                          2    2
 + (2 delta p1y - 2 delta p2y) t1y + delta  t1x
                                        2                  2                  2
 + (2 delta p1x - 2 delta p2x) t1x + p2y  - 2 p1y p2y + p2x  - 2 p1x p2x + p1y
      2
 + p1x ) + (- k1 k2 t1y t2y - k1 k2 t1x t2x - 1) R1
 + (delta k1 t1x - k1 p2x + k1 p1x) t2y
                                              2    2     2    2
 + (- delta k1 t1y + k1 p2y - k1 p1y) t2x)/(k1  t2y  + k1  t2x  - 1),
               2     2   2    2     2        2   2
R2 = (sqrt(((k1  - k1  k2  t1x ) t2y  + (2 k1  k2  t1x t1y t2x + 2 k1 k2 t1y)
          2     2   2    2     2                       2    2     2    2    2
 t2y + (k1  - k1  k2  t1y ) t2x  + 2 k1 k2 t1x t2x + k2  t1y  + k2  t1x ) R1
          2              2                         2                2
 + (((2 k1  k2 p2y - 2 k1  k2 p1y) t1x - 2 delta k1  k2 t1x t1y) t2y
               2       2        2              2
 + ((2 delta k1  k2 t1y  + (2 k1  k2 p1y - 2 k1  k2 p2y) t1y
             2       2        2              2
 - 2 delta k1  k2 t1x  + (2 k1  k2 p2x - 2 k1  k2 p1x) t1x) t2x
 - 2 delta k1 t1x + 2 k1 p2x - 2 k1 p1x) t2y
              2              2              2                2
 + (2 delta k1  k2 t1x - 2 k1  k2 p2x + 2 k1  k2 p1x) t1y t2x
 + (2 delta k1 t1y - 2 k1 p2y + 2 k1 p1y) t2x + (2 k2 p2x - 2 k2 p1x) t1y
                                           2   2    2
 + (2 k2 p1y - 2 k2 p2y) t1x) R1 + (- delta  k1  t1y
              2                 2              2    2       2
 + (2 delta k1  p2y - 2 delta k1  p1y) t1y - k1  p2y  + 2 k1  p1y p2y
     2    2     2              2   2                 2                 2
 - k1  p1y ) t2y  + ((- 2 delta  k1  t1x + 2 delta k1  p2x - 2 delta k1  p1x)
                  2                 2                 2           2
 t1y + (2 delta k1  p2y - 2 delta k1  p1y) t1x + (2 k1  p1x - 2 k1  p2x) p2y
       2               2
 + 2 k1  p1y p2x - 2 k1  p1x p1y) t2x t2y
           2   2    2              2                 2              2    2
 + (- delta  k1  t1x  + (2 delta k1  p2x - 2 delta k1  p1x) t1x - k1  p2x
       2             2    2     2        2    2
 + 2 k1  p1x p2x - k1  p1x ) t2x  + delta  t1y
                                          2    2
 + (2 delta p1y - 2 delta p2y) t1y + delta  t1x
                                        2                  2                  2
 + (2 delta p1x - 2 delta p2x) t1x + p2y  - 2 p1y p2y + p2x  - 2 p1x p2x + p1y
      2
 + p1x ) + (k1 k2 t1y t2y + k1 k2 t1x t2x + 1) R1
 + (- delta k1 t1x + k1 p2x - k1 p1x) t2y
                                            2    2     2    2
 + (delta k1 t1y - k1 p2y + k1 p1y) t2x)/(k1  t2y  + k1  t2x  - 1)]
(%i10) factor(ev(res, [k1^2=1, k2^2=1, 1 - t1x^2 = t1y^2,
 1 - t1y^2 = t1x^2, 1 - t2x^2=t2y^2, 1 - t2y^2 = t2x^2,
 t1y^2 + t1x^2 = 1, t2y^2 + t2x^2 = 1]));
                         2    2                                          2    2
(%o10) [R2 = - (sqrt((t1y  t2y  + (2 t1x t1y t2x + 2 k1 k2 t1y) t2y + t1x  t2x
                        2      2    2
 + 2 k1 k2 t1x t2x + t1y  + t1x ) R1  + (((2 k2 p2y - 2 k2 p1y) t1x
                          2                   2
 - 2 delta k2 t1x t1y) t2y  + ((2 delta k2 t1y  + (2 k2 p1y - 2 k2 p2y) t1y
                 2
 - 2 delta k2 t1x  + (2 k2 p2x - 2 k2 p1x) t1x) t2x - 2 delta k1 t1x + 2 k1 p2x
                                                                 2
 - 2 k1 p1x) t2y + (2 delta k2 t1x - 2 k2 p2x + 2 k2 p1x) t1y t2x
 + (2 delta k1 t1y - 2 k1 p2y + 2 k1 p1y) t2x + (2 k2 p2x - 2 k2 p1x) t1y
                                           2    2
 + (2 k2 p1y - 2 k2 p2y) t1x) R1 + (- delta  t1y
                                        2                  2     2
 + (2 delta p2y - 2 delta p1y) t1y - p2y  + 2 p1y p2y - p1y ) t2y
              2
 + ((- 2 delta  t1x + 2 delta p2x - 2 delta p1x) t1y
 + (2 delta p2y - 2 delta p1y) t1x + (2 p1x - 2 p2x) p2y + 2 p1y p2x
                                2    2                                        2
 - 2 p1x p1y) t2x t2y + (- delta  t1x  + (2 delta p2x - 2 delta p1x) t1x - p2x
                  2     2        2    2
 + 2 p1x p2x - p1x ) t2x  + delta  t1y  + (2 delta p1y - 2 delta p2y) t1y
        2    2                                        2                  2
 + delta  t1x  + (2 delta p1x - 2 delta p2x) t1x + p2y  - 2 p1y p2y + p2x
                  2      2
 - 2 p1x p2x + p1y  + p1x ) - k1 k2 t1y t2y R1 - k1 k2 t1x t2x R1 - R1
 + delta k1 t1x t2y - k1 p2x t2y + k1 p1x t2y - delta k1 t1y t2x + k1 p2y t2x
                   2      2
 - k1 p1y t2x)/(t2y  + t2x  - 1), R2 =
          2    2                                          2    2
(sqrt((t1y  t2y  + (2 t1x t1y t2x + 2 k1 k2 t1y) t2y + t1x  t2x
                        2      2    2
 + 2 k1 k2 t1x t2x + t1y  + t1x ) R1  + (((2 k2 p2y - 2 k2 p1y) t1x
                          2                   2
 - 2 delta k2 t1x t1y) t2y  + ((2 delta k2 t1y  + (2 k2 p1y - 2 k2 p2y) t1y
                 2
 - 2 delta k2 t1x  + (2 k2 p2x - 2 k2 p1x) t1x) t2x - 2 delta k1 t1x + 2 k1 p2x
                                                                 2
 - 2 k1 p1x) t2y + (2 delta k2 t1x - 2 k2 p2x + 2 k2 p1x) t1y t2x
 + (2 delta k1 t1y - 2 k1 p2y + 2 k1 p1y) t2x + (2 k2 p2x - 2 k2 p1x) t1y
                                           2    2
 + (2 k2 p1y - 2 k2 p2y) t1x) R1 + (- delta  t1y
                                        2                  2     2
 + (2 delta p2y - 2 delta p1y) t1y - p2y  + 2 p1y p2y - p1y ) t2y
              2
 + ((- 2 delta  t1x + 2 delta p2x - 2 delta p1x) t1y
 + (2 delta p2y - 2 delta p1y) t1x + (2 p1x - 2 p2x) p2y + 2 p1y p2x
                                2    2                                        2
 - 2 p1x p1y) t2x t2y + (- delta  t1x  + (2 delta p2x - 2 delta p1x) t1x - p2x
                  2     2        2    2
 + 2 p1x p2x - p1x ) t2x  + delta  t1y  + (2 delta p1y - 2 delta p2y) t1y
        2    2                                        2                  2
 + delta  t1x  + (2 delta p1x - 2 delta p2x) t1x + p2y  - 2 p1y p2y + p2x
                  2      2
 - 2 p1x p2x + p1y  + p1x ) + k1 k2 t1y t2y R1 + k1 k2 t1x t2x R1 + R1
 - delta k1 t1x t2y + k1 p2x t2y - k1 p1x t2y + delta k1 t1y t2x - k1 p2y t2x
                   2      2
 + k1 p1y t2x)/(t2y  + t2x  - 1)]
&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Затем я немного пошаманил руками и смог упростить уравнения до
скалярных и векторных произведений и других более удобноваримых
операций, чем работа с векторами в сыром виде:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;St: t1y * t2y + t1x * t2x;&lt;/div&gt;
&lt;div class="line"&gt;Vt: t1x * t2y-t1y * t2x;&lt;/div&gt;
&lt;div class="line"&gt;Vpt: (p2x - p1x) * t1y - (p2y - p1y) * t1x;&lt;/div&gt;
&lt;div class="line"&gt;Spt: (p2y - p1y) * t1y + (p2x - p1x) * t1x;&lt;/div&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;div class="line"&gt;L: (1 - St^2) * R2^2 + 2 * R2 * (R1 * (k1 * k2 * St + 1) + k1 * Vpt * St) -2 *k2 * Vpt * R1 - Vpt^2;&lt;/div&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;div class="line"&gt;delta1: sqrt(L) + k1 * R2 * Vt + Spt;&lt;/div&gt;
&lt;div class="line"&gt;delta2: k1 * R2 * Vt + Spt - sqrt(L);&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Кажется всё посчитано верно (два варианта решения delta1 и delta2),
я исхожу из того, что к начальной точке можно подвести одну окружность
некоторого заданного радиуса R1, а затем уже нужно построить другую
радиуса R2 так, чтобы касалась она луча исходящего в противонаправленно
конечному вектору.&lt;/p&gt;
&lt;p&gt;Я смогу вывести ограничения на R1, R2, но об этом уже потом.&lt;/p&gt;
</summary><category term="окружность"></category><category term="вычисление"></category><category term="би-дуги"></category><category term="переход"></category><category term="точка"></category><category term="математика"></category></entry><entry><title>USB-фонарик с dx.com</title><link href="/posts/2013/06/25/usb-fonarik-s-dxcom/" rel="alternate"></link><updated>2013-06-25T00:45:42+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-06-25:posts/2013/06/25/usb-fonarik-s-dxcom/</id><summary type="html">&lt;p&gt;Наконец-то мой фонарик добрался из Гонконга до Минска. 23 числа
поступил в почтовое «MINSK PI 2» отделение и скоро будет проходить
таможенный контроль. А то я уже разволновался, т.к. заказал его ещё 1
числа, а отправился он на корабле 7 числа. А потом ни слуху ни духу.
Теперь главное – дождаться его в Гомеле :)&lt;/p&gt;
</summary><category term="dx.com"></category><category term="USB"></category><category term="покупка"></category><category term="фонарик"></category></entry><entry><title></title><link href="/posts/2013/06/21/urn:ya.ru:post/22199227/1821/" rel="alternate"></link><updated>2013-06-21T02:29:29+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-06-21:posts/2013/06/21/urn:ya.ru:post/22199227/1821/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Кажется, что любую статью о собеседовании в Google можно превратить
в срач лишь упомянув крышку люка.&lt;/p&gt;
</summary><category term="собеседование"></category><category term="мысли"></category><category term="жизнь"></category><category term="google"></category></entry><entry><title>Маленькая пантера :)</title><link href="/posts/2013/06/19/malenkaia-pantera/" rel="alternate"></link><updated>2013-06-19T17:05:51+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-06-19:posts/2013/06/19/malenkaia-pantera/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/586132"&gt;&lt;img alt="ALIM3180.JPG" src="http://img-fotki.yandex.ru/get/9228/22199227.b/0_8f194_926161c4_L" title="ALIM3180.JPG"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="трава"></category><category term="природа"></category><category term="котёнок"></category></entry><entry><title></title><link href="/posts/2013/06/18/urn:ya.ru:post/22199227/1817/" rel="alternate"></link><updated>2013-06-18T17:54:14+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-06-18:posts/2013/06/18/urn:ya.ru:post/22199227/1817/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/585939"&gt;&lt;img alt="ALIM3194.JPG" src="http://img-fotki.yandex.ru/get/9311/22199227.b/0_8f0d3_caae2b36_L" title="ALIM3194.JPG"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="Гомель"></category><category term="здание"></category><category term="озеро"></category><category term="конюшни"></category><category term="небо"></category><category term="старый"></category></entry><entry><title>Noty</title><link href="/posts/2013/06/14/noty/" rel="alternate"></link><updated>2013-06-14T14:40:32+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-06-14:posts/2013/06/14/noty/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Отличный плагин для jQuery для показа всплывающих сообщений.
Приятно, что легко расширяется, и часто используемый функционал сразу
вынесен в опции: т.е. всякие таймауты, обработчики по показу, закрытию,
способ закрытия сообщения, показ в своём контейнере, кнопки и многое
другое.&lt;/p&gt;
</summary><category term="jquery"></category><category term="сообщение"></category><category term="noty"></category><category term="всплывающий"></category><category term="javascript"></category><category term="показ"></category><category term="плагин"></category></entry><entry><title>Генератор названий планет: возвращение</title><link href="/posts/2013/06/12/generator-nazvanii-planet-vozvrashchenie/" rel="alternate"></link><updated>2013-06-12T02:45:52+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-06-12:posts/2013/06/12/generator-nazvanii-planet-vozvrashchenie/</id><summary type="html">&lt;p&gt;В этот раз я решил немного переписать &lt;a class="reference external" href="/posts/2010/09/05/generator-nazvanii/"&gt;мой старый
генератор&lt;/a&gt; названий
планет (который написан на Python, заодно я нашёл там небольшую ошибку и
исправил). На этот раз генератор &lt;strong&gt;не требует ничего кроме&lt;/strong&gt; браузера,
т.к. написан на JavaScript. И в этот раз я даже
его &lt;a class="reference external" href="https://gist.github.com/IMDagger/5761809"&gt;положил&lt;/a&gt; на GitHub
Gist, чтобы было удобнее править и загружать.
Вот &lt;a class="reference external" href="https://gist.github.com/IMDagger/5761809/download"&gt;тут&lt;/a&gt; можно
его скачать. Достаточно загрузить архив, распаковать, открыть вложенный
HTML и понажимать кнопку “Сгенерировать новую!”. Получаются забавные
варианты:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;Kut&lt;/div&gt;
&lt;div class="line"&gt;Perr&lt;/div&gt;
&lt;div class="line"&gt;Koai L3&lt;/div&gt;
&lt;div class="line"&gt;Vet&lt;/div&gt;
&lt;div class="line"&gt;Baonda&lt;/div&gt;
&lt;div class="line"&gt;Kee&lt;/div&gt;
&lt;div class="line"&gt;Pea&lt;/div&gt;
&lt;div class="line"&gt;Cris&lt;/div&gt;
&lt;div class="line"&gt;Cenyal&lt;/div&gt;
&lt;div class="line"&gt;Koaolia&lt;/div&gt;
&lt;div class="line"&gt;Melanal&lt;/div&gt;
&lt;div class="line"&gt;Vaviet K4&lt;/div&gt;
&lt;/div&gt;
&lt;span class="cut"&gt;&lt;a class="h-link reference internal" data-toggle="collapse" href="#cut_56541648"&gt;хочу ещё&lt;/a&gt;&lt;/span&gt;&lt;div class="collapse" id="cut_56541648"&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;Badabana K&lt;/div&gt;
&lt;div class="line"&gt;Beboha 1I&lt;/div&gt;
&lt;div class="line"&gt;Keate IV&lt;/div&gt;
&lt;div class="line"&gt;Oniian&lt;/div&gt;
&lt;div class="line"&gt;Bebancolia&lt;/div&gt;
&lt;div class="line"&gt;Fractirion&lt;/div&gt;
&lt;div class="line"&gt;Gaean&lt;/div&gt;
&lt;div class="line"&gt;Bebomvian&lt;/div&gt;
&lt;div class="line"&gt;Monera KI&lt;/div&gt;
&lt;div class="line"&gt;Jacoanet AR7&lt;/div&gt;
&lt;div class="line"&gt;Eacomodate&lt;/div&gt;
&lt;div class="line"&gt;Luiic&lt;/div&gt;
&lt;div class="line"&gt;Oniancolia VII&lt;/div&gt;
&lt;div class="line"&gt;Crematoth&lt;/div&gt;
&lt;div class="line"&gt;Odvolar K&lt;/div&gt;
&lt;div class="line"&gt;Kon&lt;/div&gt;
&lt;div class="line"&gt;Onivilon VIIILA&lt;/div&gt;
&lt;div class="line"&gt;Colar&lt;/div&gt;
&lt;div class="line"&gt;Cremcumber X&lt;/div&gt;
&lt;div class="line"&gt;Deat Crypto&lt;/div&gt;
&lt;div class="line"&gt;Cucun&lt;/div&gt;
&lt;div class="line"&gt;Vive VIII&lt;/div&gt;
&lt;div class="line"&gt;Crematooro&lt;/div&gt;
&lt;div class="line"&gt;Bic III&lt;/div&gt;
&lt;div class="line"&gt;Vivcytal L3&lt;/div&gt;
&lt;div class="line"&gt;Beh IVP&lt;/div&gt;
&lt;div class="line"&gt;Cucut K4&lt;/div&gt;
&lt;div class="line"&gt;Asesar IIII&lt;/div&gt;
&lt;div class="line"&gt;Yaer X&lt;/div&gt;
&lt;div class="line"&gt;Con&lt;/div&gt;
&lt;div class="line"&gt;Fracek&lt;/div&gt;
&lt;div class="line"&gt;Aca&lt;/div&gt;
&lt;div class="line"&gt;Centut&lt;/div&gt;
&lt;div class="line"&gt;Odactal&lt;/div&gt;
&lt;div class="line"&gt;Oolia&lt;/div&gt;
&lt;div class="line"&gt;Venera 7&lt;/div&gt;
&lt;div class="line"&gt;Ortyh&lt;/div&gt;
&lt;div class="line"&gt;Embarrala VII&lt;/div&gt;
&lt;div class="line"&gt;Jacal&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="https://gist.github.com/IMDagger/5761809/download"&gt;скачать&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="https://gist.github.com/IMDagger/5761809/download"&gt;&lt;img alt="Код генератора" src="http://img-fotki.yandex.ru/get/9155/22199227.b/0_8e033_e8d9bd5d_L" title="Код генератора"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="браузер"></category><category term="новый"></category><category term="планета"></category><category term="название"></category><category term="javascript"></category><category term="скрипт"></category><category term="генератор"></category><category term="пример"></category></entry><entry><title>Аппроксимация би-дугами</title><link href="/posts/2013/06/11/approksimatsiia-bi-dugami/" rel="alternate"></link><updated>2013-06-11T02:05:08+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-06-11:posts/2013/06/11/approksimatsiia-bi-dugami/</id><summary type="html">&lt;p&gt;Формула и реализация построение дуги между двумя точками, из которых
выходит два вектора задающих касательные к дуге.&lt;/p&gt;
</summary><category term="дуга"></category><category term="би-дуги"></category><category term="дву-дуги"></category><category term="biarc"></category><category term="аппроксимация"></category></entry><entry><title>What's the difference between "under", "below", "beneath", and "underneath"?</title><link href="/posts/2013/06/10/whats-the-difference-between-under-below-beneath-and-underneath/" rel="alternate"></link><updated>2013-06-10T02:42:09+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-06-10:posts/2013/06/10/whats-the-difference-between-under-below-beneath-and-underneath/</id><summary type="html">&lt;p&gt;Отличие under от below, beneath и underneath.&lt;/p&gt;
</summary><category term="слова"></category><category term="английский"></category></entry><entry><title></title><link href="/posts/2013/06/09/urn:ya.ru:post/22199227/1811/" rel="alternate"></link><updated>2013-06-09T02:59:14+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-06-09:posts/2013/06/09/urn:ya.ru:post/22199227/1811/</id><summary type="html">&lt;p&gt;Нашёл как попросить FFI загрузить таблицу из текущего процесса.
Достаточно просто передать #f вместо названия библиотеки:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;define &lt;/span&gt;&lt;span class="pgcss-nv"&gt;libc&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;ffi-lib&lt;/span&gt; &lt;span class="pgcss-no"&gt;#f&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</summary><category term="racket"></category><category term="процесс"></category><category term="ffi"></category><category term="текущий"></category></entry><entry><title>Шпаргалка по дисциплине "Пластическая анатомия"</title><link href="/posts/2013/06/06/shpargalka-po-distsipline-plasticheskaia-anatomiia/" rel="alternate"></link><updated>2013-06-06T03:33:38+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-06-06:posts/2013/06/06/shpargalka-po-distsipline-plasticheskaia-anatomiia/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Может кому-то пригодится. Собирал информацию из разных источников,
вопросы к билетам в архиве (картинкой). Внутри архива шпаргалка в 3-ёх
форматах: OpenDocument, DOC и PDF. Пластическая анатомия для художников.
Можно использовать на свой страх и риск.&lt;/p&gt;
</summary><category term="пластическая"></category><category term="анатомия"></category><category term="шпаргалка"></category><category term="ответ"></category><category term="экзамен"></category></entry><entry><title></title><link href="/posts/2013/06/03/urn:ya.ru:post/22199227/1809/" rel="alternate"></link><updated>2013-06-03T04:26:12+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-06-03:posts/2013/06/03/urn:ya.ru:post/22199227/1809/</id><summary type="html">&lt;p&gt;Нужно было тут распознать пачку текстов в изображениях с 300 DPI.
Качество картинок неплохое, хоть кое-где и встречается пыль в сканах.
Мне нужны были только куски из текста. Сначала я подумал набрать руками,
но проделав так пяток раз, я передумал. И стал вспоминать, что у меня
есть. А оказалось, что я уже ставил себе раньше: gocr и tesseract.
Первый русский текст естественно у меня не понял. А вот второй подхватил
всё на ура (только я поставил его пакет с поддержкой русского языка из
репозитория) и распознал тексты с минимумом проблем. Только пришлось в
мануал заглянуть, как указать язык этой консольной утилите:&lt;/p&gt;
&lt;blockquote&gt;
tesseract -l rus имя_файла.jpg файл_для_текста # оно само добавит
расширение .txt по умолчанию&lt;/blockquote&gt;
&lt;p&gt;Значит я его не зря ставил когда-то с учётом перспективы :)&lt;/p&gt;
</summary><category term="текст"></category><category term="сканирование"></category><category term="tesseract"></category></entry><entry><title></title><link href="/posts/2013/06/02/urn:ya.ru:post/22199227/1808/" rel="alternate"></link><updated>2013-06-02T01:30:27+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-06-02:posts/2013/06/02/urn:ya.ru:post/22199227/1808/</id><summary type="html"></summary></entry><entry><title>JIRA и автостарт</title><link href="/posts/2013/06/02/jira-i-avtostart/" rel="alternate"></link><updated>2013-06-02T01:25:36+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-06-02:posts/2013/06/02/jira-i-avtostart/</id><summary type="html">&lt;p&gt;Добавил в скрипт для запуска JIRA зависимости от MySQL и Nginx. Т.к.
похоже, что у меня JIRA сервис часто успевает запуститься раньше, чем
база данных и от этого просто драйвер БД не может подключиться и вся
трэкинговая система тихо валится при загрузке:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-c"&gt;### BEGIN INIT INFO&lt;/span&gt;
&lt;span class="pgcss-c"&gt;# Provides:          jira&lt;/span&gt;
&lt;span class="pgcss-c"&gt;# Required-Start:    $local_fs $remote_fs $network $syslog nginx mysql&lt;/span&gt;
&lt;span class="pgcss-c"&gt;# Required-Stop:     $local_fs $remote_fs $network $syslog nginx mysql&lt;/span&gt;
…
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Надеюсь, что копаю в правильном направлении :/&lt;/p&gt;
</summary><category term="linux"></category><category term="скрипт"></category><category term="старт"></category><category term="запуск"></category><category term="MySQL"></category><category term="jira"></category><category term="автозагрузка"></category></entry><entry><title></title><link href="/posts/2013/05/30/urn:ya.ru:post/22199227/1806/" rel="alternate"></link><updated>2013-05-30T01:54:06+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-05-30:posts/2013/05/30/urn:ya.ru:post/22199227/1806/</id><summary type="html">&lt;p&gt;4 года микроблогу. Нынче я пишу уже не так часто отчасти из-за того, что
работа сильно выжимает, а с другой стороны нельзя писать про
внутренности того, над чем работаю, иначе нарушу конфиденциальность
проекта. А так как работа отнимает как минимум треть всего времени (а
мне ещё и спать нужно), то поэтому новостей в месяц от меня стало
намного меньше, чем раньше.&lt;/p&gt;
</summary><category term="блог"></category><category term="радость"></category><category term="юбилей"></category><category term="жизнь"></category><category term="грусть"></category></entry><entry><title>Android, SDL2 и Racket</title><link href="/posts/2013/05/28/android-sdl2-i-racket/" rel="alternate"></link><updated>2013-05-28T03:59:27+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-05-28:posts/2013/05/28/android-sdl2-i-racket/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Получилось вывести изображение через SDL2 из Racket, который запущен
из JNI. Работает шустро, правда пока загрузка модулей идёт не быстро,
т.к. я их храню для удобства на SD-карте, а Racket грузит все свои
зависимости файл за файлом, а модулей у него много. У меня на PC выдаёт,
что он выполнил несколько тысяч IO-операций (для проверки файла с
исходником, для проверки скомпиленой версии и тд), что естественно
замедляет всё.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; А так вообще забавно подключаться через Geiser прямо в рабочий
процесс Racket на телефоне и управлять поведением прямо находу.&lt;/p&gt;
</summary><category term="Scheme"></category><category term="geiser"></category><category term="Android"></category><category term="racket"></category><category term="радость"></category><category term="SDL"></category></entry><entry><title>Весеннее настроение</title><link href="/posts/2013/05/27/vesennee-nastroenie/" rel="alternate"></link><updated>2013-05-27T02:07:02+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-05-27:posts/2013/05/27/vesennee-nastroenie/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/578495"&gt;&lt;img alt="Весеннее настроение" src="http://img-fotki.yandex.ru/get/9231/22199227.b/0_8d3bf_339f6acc_L" title="Весеннее настроение"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/578496"&gt;&lt;img alt="Весеннее настроение" src="http://img-fotki.yandex.ru/get/9225/22199227.b/0_8d3c0_dfbff33e_L" title="Весеннее настроение"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/578497"&gt;&lt;img alt="Весеннее настроение" src="http://img-fotki.yandex.ru/get/9224/22199227.b/0_8d3c1_fe02e89b_L" title="Весеннее настроение"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Что-то похолодало, но я выложу немножечко этой весны, правда, больше
похожей на жаркое лето.&lt;/p&gt;</summary><category term="цветы"></category><category term="красота"></category><category term="радость"></category><category term="одуванчик"></category><category term="дерево"></category><category term="весна"></category></entry><entry><title>Недочёт в обёртке для DAWG библиотеки</title><link href="/posts/2013/05/25/nedochiot-v-obiortke-dlia-dawg-biblioteki/" rel="alternate"></link><updated>2013-05-25T03:37:32+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-05-25:posts/2013/05/25/nedochiot-v-obiortke-dlia-dawg-biblioteki/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Отправил&amp;nbsp;&lt;a class="reference external" href="https://github.com/kmike/DAWG/pull/10"&gt;pull-запрос&lt;/a&gt; с
исправлением небольшой неточности при открытии файлов в библиотеке DAWG
для Python. Сначала естественно написал и закоммитил тест, а потом уже
проверил свои мысли и исправления на нём. Заодно немного почитал про
Cython, т.к. не понял сходу почему он не принял мой bool (а оказалось,
что их два вида и нужно импортировать необходимый). Заодно и из курса по
C++ освежил в памяти, как проверять поток на ошибки, что есть флаги,
есть ещё удобные методы для проверки флагов: .fail(), .bad(), .good().
Вот и добавил, перед попыткой прочитать данные из потока при помощи
внутренней библиотеки, проверку на состояние с выбросом исключения.&lt;/p&gt;
</summary><category term="ошибка"></category><category term="исправление"></category><category term="библиотека"></category><category term="python"></category><category term="обёртка"></category><category term="DAWG"></category><category term="cython"></category></entry><entry><title></title><link href="/posts/2013/05/22/urn:ya.ru:post/22199227/1800/" rel="alternate"></link><updated>2013-05-22T03:06:34+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-05-22:posts/2013/05/22/urn:ya.ru:post/22199227/1800/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Смог запустить приложение с использованием SDL2 и одновременно
обращаться к нему через Geiser прямо с доступом в телефон. Правда пока
какие-то проблемы с выводом самих изображений, но это я решу попозже.
Смог ещё сделать так, чтобы Racket и SDL2 писали все свои ошибки в
лог-файл, просто при помощи dup2 перенаправил stderr в открытый файл.&lt;/p&gt;
</summary><category term="вывод"></category><category term="SDL"></category><category term="geiser"></category><category term="перенаправление"></category><category term="racket"></category><category term="SDL2"></category></entry><entry><title></title><link href="/posts/2013/05/20/urn:ya.ru:post/22199227/1799/" rel="alternate"></link><updated>2013-05-20T23:14:15+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-05-20:posts/2013/05/20/urn:ya.ru:post/22199227/1799/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Поставил на сервачке nginx-extras. Т.к. мне потребуется
&lt;a class="reference external" href="http://wiki.nginx.org/HttpLuaModule"&gt;HttpLuaModule&lt;/a&gt;, чтобы разобрать
по частям User-Agent и на его основании отдавать определённые файлы или
отдавать некоторое значение по умолчанию. Можно и простыми регулярными
выражениями такое сделать в nginx, но придётся делать очень много..
ооочень много их, т.к. параметры в User-Agent могут прийти разные, в
разном порядке и их комбинации могут требовать разных принимаемых
решений по отдаваемому контенту.&lt;/p&gt;
</summary><category term="обработка"></category><category term="lua"></category><category term="модуль"></category><category term="nginx"></category><category term="ubuntu"></category></entry><entry><title></title><link href="/posts/2013/05/18/urn:ya.ru:post/22199227/1798/" rel="alternate"></link><updated>2013-05-18T02:12:34+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-05-18:posts/2013/05/18/urn:ya.ru:post/22199227/1798/</id><summary type="html">&lt;p&gt;пора вернуть нормальный график сна обратно&lt;/p&gt;
</summary></entry><entry><title></title><link href="/posts/2013/05/18/urn:ya.ru:post/22199227/1797/" rel="alternate"></link><updated>2013-05-18T02:11:07+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-05-18:posts/2013/05/18/urn:ya.ru:post/22199227/1797/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/577219"&gt;&lt;img alt="ALIM3027.JPG" src="http://img-fotki.yandex.ru/get/6802/22199227.b/0_8cec3_a7c8e5be_L" title="ALIM3027.JPG"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="солнце"></category><category term="чай"></category><category term="свет"></category><category term="лимон"></category><category term="ложка"></category></entry><entry><title>Ubuntu и wl.ko</title><link href="/posts/2013/05/09/ubuntu-i-wlko/" rel="alternate"></link><updated>2013-05-09T23:41:51+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-05-09:posts/2013/05/09/ubuntu-i-wlko/</id><summary type="html">&lt;p&gt;Появилось время разобраться почему на ядре 3.2.0-41 у меня не
подхватился Broadcom WiFi. Плюс ещё на младшей версии ядра не возможно
было подключить NVidia из-за того, что я обновлялся и драйверы
поставились под последнюю версию ядра. Но это было всё не столь
критично, скорее меня тревожил более сильный выдув куллера на 3.2.0-39
(видимо тоже из-за какого-то частичного обновления). Я сравнил вывод
lsmod при запуске на обоих ядрах, и естественно была видна разница на
глаз. Не хватало 3-ёх мегабайтного блоба от Broadcom (тьфу-тьфу на них)
под названием &lt;strong&gt;wl&lt;/strong&gt; (модуль wl.ko). Во всех версиях до 41 у себя я
обнаружил в &lt;code class="code"&gt;
/lib/modules/3.2.0-xx-generic/updates/dkms/&lt;/code&gt;
 модуль
&lt;strong&gt;wl.ko&lt;/strong&gt;. А вот в &lt;code class="code"&gt;
/lib/modules/3.2.0-41-generic/updates/dkms/&lt;/code&gt;
 его не
было.&lt;/p&gt;
&lt;p&gt;Но благо я помню про то, что такое DKMS и с чем его едят. Он
оказался даже собран у меня, видимо не поставился от того, что когда я
обновлялся я делал тяжеловесные задачи и инсталлятор просто немного
прибило по памяти. Поэтому:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-gp"&gt;imdagger@thug-machine:~$&lt;/span&gt; sudo dkms build -m bcmwl -v 6.20.155.1+bdcom
&lt;span class="pgcss-go"&gt;Module bcmwl/6.20.155.1+bdcom already built for kernel 3.2.0-41-generic/4&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;imdagger@thug-machine:~$&lt;/span&gt; sudo dkms install -m bcmwl -v 6.20.155.1+bdcom

&lt;span class="pgcss-go"&gt;wl:&lt;/span&gt;
&lt;span class="pgcss-go"&gt;Running module version sanity check.&lt;/span&gt;

&lt;span class="pgcss-go"&gt;Good news! Module version  for wl.ko&lt;/span&gt;
&lt;span class="pgcss-go"&gt;exactly matches what is already found in kernel 3.2.0-41-generic.&lt;/span&gt;
&lt;span class="pgcss-go"&gt;DKMS will not replace this module.&lt;/span&gt;
&lt;span class="pgcss-go"&gt;You may override by specifying --force.&lt;/span&gt;

&lt;span class="pgcss-go"&gt;depmod...........&lt;/span&gt;

&lt;span class="pgcss-go"&gt;DKMS: install completed.&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;imdagger@thug-machine:~$&lt;/span&gt; sudo modprobe wl
&lt;span class="pgcss-gp"&gt;#&lt;/span&gt; Счастье. Сразу подхватился и подключился мгновенно WiFi после этой строчки.
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;У утилиты dkms опция -m это указание названия модуля, а -v его
версия. Т.к. я собирал из исходников, которые есть прямо в директории
/var/lib/dkms, то ничего скачивать не пришлось, ибо у меня уже стоит
пакет bcmwl-kernel-source.&lt;/p&gt;
</summary><category term="сеть"></category><category term="ошибка"></category><category term="беспроводная"></category><category term="ubuntu"></category><category term="broadcom"></category><category term="модуль"></category><category term="linux"></category><category term="DKMS"></category><category term="wl.ko"></category></entry><entry><title>Лучи радости</title><link href="/posts/2013/05/09/luchi-radosti/" rel="alternate"></link><updated>2013-05-09T16:00:44+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-05-09:posts/2013/05/09/luchi-radosti/</id><summary type="html">&lt;p&gt;Сколько лет пользуюсь server-mode, а чувства всё теже, что я обожаю
серверный режим Emacs, что позволяет открывать сколько угодно окон
редактора (а держать только одну копию в фоновом режиме) и даже на
других компьютерах, а буфферы все общие. Можно редактировать текст хоть
в 4-ом, хотя обычно я держу его только для себя :) И главное, что всё из
коробки, просто нужно запустить редактор с опцией --daemon специальной.&lt;/p&gt;
</summary><category term="радость"></category><category term="emacs"></category><category term="server"></category><category term="жизнь"></category><category term="сервер"></category></entry><entry><title></title><link href="/posts/2013/05/05/urn:ya.ru:post/22199227/1790/" rel="alternate"></link><updated>2013-05-05T23:05:15+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-05-05:posts/2013/05/05/urn:ya.ru:post/22199227/1790/</id><summary type="html">&lt;p&gt;Что-то последнее обновление сломало WiFi для Broadcom чипов (хотя
драйверы броадкомовцы ещё те глюкавые пишут, так что может это просто
драйверу изменения не понравились, но… увы какой стоит):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-gp"&gt;#&lt;/span&gt; lspci
&lt;span class="pgcss-go"&gt;...&lt;/span&gt;
&lt;span class="pgcss-go"&gt;03:00.0 Network controller: Broadcom Corporation BCM4313 802.11b/g/n Wireless LAN Controller (rev 01)&lt;/span&gt;
&lt;span class="pgcss-go"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Пришлось при загрузке вызвать GRUB и выбрать более старое ядро (с
предыдущего обновления, благо Ubuntu их всех оставляет):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-gp"&gt;$&lt;/span&gt; cat /proc/version
&lt;span class="pgcss-go"&gt;Linux version 3.2.0-38-generic (buildd@akateko) (gcc version 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5) ) #61-Ubuntu SMP Tue Feb 19 12:18:21 UTC 2013&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;На 3.2.0-38 всё работает отлично, на 39 вроде тоже, а вот на сборке
3.2.0-40 что-то не так с WiFi. Попробую разобраться попозже, если это
имеет смысл :) Т.к. может придёт скоро новое обновление, ведь 3.2.x это уже
довольно старая ветка.&lt;/p&gt;
</summary><category term="broadcom"></category><category term="wifi"></category><category term="проблема"></category><category term="ubuntu"></category><category term="linux"></category></entry><entry><title></title><link href="/posts/2013/05/05/urn:ya.ru:post/22199227/1789/" rel="alternate"></link><updated>2013-05-05T03:09:59+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-05-05:posts/2013/05/05/urn:ya.ru:post/22199227/1789/</id><summary type="html">&lt;p&gt;сборка завершена&lt;/p&gt;
</summary></entry><entry><title>Взаимодействие Racket и JVM</title><link href="/posts/2013/05/05/vzaimodeistvie-racket-i-jvm/" rel="alternate"></link><updated>2013-05-05T03:08:58+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-05-05:posts/2013/05/05/vzaimodeistvie-racket-i-jvm/</id><summary type="html">&lt;p&gt;При сборке Racket в качестве расширения через интерфейс JNI лучше
всего на данный момент в sconfig. выключить опцию
LINUX_FIND_STACK_BASE для Linux/Android (если расширение будет
создано в отдельном потоке). Т.к. это создаёт проблему неверного
определения нижней границы стека, попытки Racket вызвать stack overflow
обработчик и естественно ошибку, т.к. переполнения в реальности не было
и структуры для переполнения не заготовлены. А всё из-за того, что для
Linux используется вызов функции adjust_stack_base, которая считывает
/proc/self/maps и ищет [stack] строку вида:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;...&lt;/div&gt;
&lt;div class="line"&gt;beeb5000-beed6000 rw-p 00000000 00:00 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; [stack]&lt;/div&gt;
&lt;div class="line"&gt;...&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Но в случае с JNI стек основной части приложения будет отличаться от
стека native части кода, если тот создан в отдельной нити. Можно
попробовать определить границы стека через pthread, но возникает
проблема, что делать, если человек хочет собрать библиотеку без
pthreads, … хотя может для случая без pthreads можно идти как и раньше,
используя procfs.&lt;/p&gt;
</summary><category term="JVM"></category><category term="racket"></category><category term="procfs"></category><category term="JNI"></category><category term="стек"></category><category term="pthreads"></category><category term="нить"></category></entry><entry><title>Живые бабочки</title><link href="/posts/2013/05/04/zhivye-babochki/" rel="alternate"></link><updated>2013-05-04T23:41:05+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-05-04:posts/2013/05/04/zhivye-babochki/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/573732"&gt;&lt;img alt="Живые бабочки" src="http://img-fotki.yandex.ru/get/6426/22199227.a/0_8c124_fef7a_L" title="Живые бабочки"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/573733"&gt;&lt;img alt="Живые бабочки" src="http://img-fotki.yandex.ru/get/5647/22199227.b/0_8c125_444e86b9_L" title="Живые бабочки"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/573734"&gt;&lt;img alt="Живые бабочки" src="http://img-fotki.yandex.ru/get/6439/22199227.b/0_8c126_1a19cf6f_L" title="Живые бабочки"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Пару фоток с выставки живых бабочек, которую сегодня посещали. Бабочки
достаточно большие, заморские Они прямо там едят, живут и размножаются.
Если повезёт, то можно прямо увидеть как бабочка рождается из куколки
или кокона.&lt;/p&gt;</summary><category term="красота"></category><category term="бабочка"></category><category term="живой"></category><category term="живность"></category></entry><entry><title>ВТ3</title><link href="/posts/2013/04/28/vt3/" rel="alternate"></link><updated>2013-04-28T01:12:38+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-04-28:posts/2013/04/28/vt3/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp; Смог разобрать маркировку с гильзы. Это ВТ3 толи 36, толи 38.
Оказывается это стреляная гильза от югославского патрона для маузера,
ВТ3 означает &lt;strong&gt;Воjнотех. Завод Крагуjевац.&lt;/strong&gt; 7.92 x 57mm. Вот на
этом&amp;nbsp;&lt;a class="reference external" href="http://www.municion.org"&gt;сайте&lt;/a&gt; смог найти по маркировке
производителя.&lt;/p&gt;
</summary><category term="находка"></category><category term="гильза"></category></entry><entry><title>Пару находок</title><link href="/posts/2013/04/27/paru-nakhodok/" rel="alternate"></link><updated>2013-04-27T23:21:24+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-04-27:posts/2013/04/27/paru-nakhodok/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/571574"&gt;&lt;img alt="Пару находок" src="http://img-fotki.yandex.ru/get/5645/22199227.a/0_8b8b6_535a73fc_L" title="Пару находок"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/571575"&gt;&lt;img alt="Пару находок" src="http://img-fotki.yandex.ru/get/5627/22199227.a/0_8b8b7_26281209_L" title="Пару находок"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Такого добра на огороде валом, просто это уже почти последнее, что
осталось, большую часть за годы вычистили.&lt;/p&gt;</summary><category term="кости"></category><category term="жизнь"></category><category term="огород"></category><category term="деревня"></category></entry><entry><title>Миндальное печенье</title><link href="/posts/2013/04/25/mindalnoe-pechene/" rel="alternate"></link><updated>2013-04-25T03:18:06+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-04-25:posts/2013/04/25/mindalnoe-pechene/</id><summary type="html">&lt;blockquote&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/foxycook/view/808106/"&gt;&lt;img alt="Печенье" src="http://img-fotki.yandex.ru/get/5638/175843626.3/0_c54aa_b9b6862a_L" title="Печенье"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Миндальное печенье очень популярно в разных странах. Замечательное сопровождение к утренней чашечке кофе.
Аромат миндаля придает печенью необычайный вкус. В составе печенья совсем нет привычной
муки — только миндальная или молотый миндаль. Молочных продуктов в нем тоже нет,
как и глютена.&lt;/p&gt;
&lt;p&gt;Состав продуктов:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Миндальная мука — 200 г&lt;/li&gt;
&lt;li&gt;Сахар коричневый — полстакана&lt;/li&gt;
&lt;li&gt;Сахар ванильный — 10 г&lt;/li&gt;
&lt;li&gt;Яйцо — 1-2 штуки&lt;/li&gt;
&lt;li&gt;Миндаль для украшения&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Приготовление кратко:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Смешать все компоненты&lt;/li&gt;
&lt;li&gt;Вымесить тесто&lt;/li&gt;
&lt;li&gt;Сформировать печенье&lt;/li&gt;
&lt;li&gt;Украсить миндалем&lt;/li&gt;
&lt;li&gt;Выпекать на промасленной бумаге&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a class="reference external" href="http://edalegko.ru/izbrannoe/mindalnoe-pechene/"&gt;подробное приготовление по шагам с фото&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Выглядит вкусно! Нужно будет попробовать сделать миндальную муку и таких
достаточно диетических печенок.&lt;/p&gt;</summary><category term="печенье"></category><category term="миндаль"></category><category term="еда"></category></entry><entry><title>Geiser и Emacs</title><link href="/posts/2013/04/25/geiser-i-emacs/" rel="alternate"></link><updated>2013-04-25T03:01:13+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-04-25:posts/2013/04/25/geiser-i-emacs/</id><summary type="html">&lt;p&gt;Наткнулся сегодня случайно
на&amp;nbsp;&lt;a class="reference external" href="http://www.nongnu.org/geiser/"&gt;Geiser&lt;/a&gt;
(&lt;a class="reference external" href="https://github.com/jaor/geiser/"&gt;репозиторий&lt;/a&gt; на GitHub) из-под
которого удобно работать с Racket и Guile. Мне в принципе только работа
с Racket интересовала. Очень понравился режим &lt;kbd class="kbd"&gt;
geiser-connect&lt;/kbd&gt;
, где можно
указать куда подключиться по TCP к Geiser серверу. В своём приложении
достаточно добавить &lt;code class="code"&gt;
(require geiser/server)&lt;/code&gt;
 и где-нибудь сделать
&lt;code class="code"&gt;
(start-geiser)&lt;/code&gt;
 и будет счастье. Можно сразу писать программу и вызывать
горячую заменю рабочего кода модулей или получить доступ прямо в
работающее приложение, чтобы поправить что-нибудь или посмотреть. Так
ещё оно в Emacs в REPL режиме умеет показывать картинки для объектов
графиков и изображений (прямо как DrRacket). Крутая штука, очень
понравилось.&lt;/p&gt;
</summary><category term="сервер"></category><category term="TCP"></category><category term="emacs"></category><category term="racket"></category><category term="remote"></category><category term="geiser"></category><category term="удалённый"></category></entry><entry><title>ICFP Programming Contest 2013</title><link href="/posts/2013/04/23/icfp-programming-contest-2013/" rel="alternate"></link><updated>2013-04-23T01:40:39+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-04-23:posts/2013/04/23/icfp-programming-contest-2013/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Если сайт Microsoft Research не обманывает, то соревнование будет с
8 августа (видимо в ночь с 8 на 9, т.к. соревнование всегда проходит 3
дня: пт, сб, вс) по 11 августа.&lt;/p&gt;
</summary><category term="соревнование"></category><category term="радость"></category><category term="2013"></category><category term="программирование"></category><category term="icfpc"></category></entry><entry><title></title><link href="/posts/2013/04/23/urn:ya.ru:post/22199227/1777/" rel="alternate"></link><updated>2013-04-23T00:58:50+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-04-23:posts/2013/04/23/urn:ya.ru:post/22199227/1777/</id><summary type="html">&lt;p&gt;Забавно, что дворовую игру на догонялки в восточной части Беларуси
называют: кэн, кич, а в западной части: бэрик, бэрак. Я обычно
использовал два варианта: играть в бэрика и в кича. Хотя всегда было не
понятно происхождение названия “кэн”. С бэриком и кичом всё понятно,
т.к. первое связано с нашим родным языком и является синонимом слову
ловить, а второе, наверное, от слова кичить (хотя не ясно как они
связаны). Но вот кэн, почему именно кэн? :/&lt;/p&gt;
</summary><category term="мысли"></category><category term="жизнь"></category><category term="кич"></category><category term="кэн"></category><category term="бэрик"></category><category term="игра"></category></entry><entry><title>Racket и Android NDK r8e</title><link href="/posts/2013/04/18/racket-i-android-ndk-r8e/" rel="alternate"></link><updated>2013-04-18T04:03:37+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-04-18:posts/2013/04/18/racket-i-android-ndk-r8e/</id><summary type="html">&lt;p&gt;Удалось собрать динамическую (dynamic) версию Racket при помощи
arm-linux-androideabi из поставки Android NDK. Заодно увидел, что
оказывается есть Android и под MIPS, как-то я пропустил эту новость в
прошлом году, только по набору компиляторов обнаружил. Предыдущий
вариант со статической (static) сборкой работал, но т.к. он был собран с
библиотеками из GNU, то возникла проблема с libdl, которая в NDK
отличается. Из-за чего статическая версия не могла нормально обработать
ffi загрузку .so библиотеки и падала с SIGSEGV.&lt;/p&gt;
&lt;p&gt;Над сборкой из поставки NDK пришлось поколдовать немного, т.к.
CGC-сборщик не хотел компилироваться в нескольких местах. Сначала я
пытался собрать Racket с улучшенным точным (precise) сборщиком мусора,
но эта версия падала с ошибкой, которую мне не удалось отладить. Тогда я
попробовал такой вариант (перед этим конечно при помощи
build/tools/make-standalone-toolchain.sh создал все необходимые
директории для сборки):&lt;/p&gt;
&lt;blockquote&gt;
./configure --host=arm-linux-androideabi
--target=arm-linux-androideabi --enable-cgcdefault&lt;/blockquote&gt;
&lt;p&gt;И (ура!!) он заработал как надо без падения при вызове ffi-lib (хотя
я опустил описание того, как долго я искал разные пути и решения, с
ручной линковкой и прописыванием линкера, с попыткой совместить NDK и
GNU и много другое):&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;a class="reference external" href="mailto:shell&amp;#64;android"&gt;shell&amp;#64;android&lt;/a&gt;:/data/data/**.****.**** $ ./racket -I racket/base
--collects=/sdcard/racket/.racket/5.3.4.3/collects/&lt;/div&gt;
&lt;div class="line"&gt;&lt;strong&gt;Welcome to Racket v5.3.4.3 [cgc].&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;&amp;gt; (require ffi/unsafe)&lt;/div&gt;
&lt;div class="line"&gt;&amp;gt; (ffi-lib “libGLESv2”)&lt;/div&gt;
&lt;div class="line"&gt;&lt;strong&gt;#&amp;lt;ffi-lib&amp;gt;&lt;/strong&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Коллекции я поместил на SD-карту (всё как в прошлый раз, когда
собирал статическую версию). Забыл только сказать, что возникла
небольшая проблема с тем, что в busybox в android shell не установлена
никакая локаль, поэтому пришлось исправить вот этот кусок с ошибкой:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-gh"&gt;diff --git a/src/racket/src/string.c b/src/racket/src/string.c&lt;/span&gt;
&lt;span class="pgcss-gh"&gt;index 63b5898..dc27372 100644&lt;/span&gt;
&lt;span class="pgcss-gd"&gt;--- a/src/racket/src/string.c&lt;/span&gt;
&lt;span class="pgcss-gi"&gt;+++ b/src/racket/src/string.c&lt;/span&gt;
&lt;span class="pgcss-gu"&gt;@@ -3841,7 +3841,7 @@ char *scheme_push_c_numeric_locale()&lt;/span&gt;
 #ifndef DONT_USE_LOCALE
   GC_CAN_IGNORE char *prev;
   prev = setlocale(LC_NUMERIC, NULL);
&lt;span class="pgcss-gd"&gt;-  if (!strcmp(prev, &amp;quot;C&amp;quot;))&lt;/span&gt;
&lt;span class="pgcss-gi"&gt;+  if (prev &amp;amp;&amp;amp; !strcmp(prev, &amp;quot;C&amp;quot;))&lt;/span&gt;
     return NULL;
   else
     return setlocale(LC_NUMERIC, &amp;quot;C&amp;quot;);
&lt;/pre&gt;&lt;/div&gt;
</summary><category term="libdl"></category><category term="arm-linux-androideabi"></category><category term="NDK"></category><category term="ARM"></category><category term="ffi"></category><category term="CGC"></category><category term="dynamic"></category><category term="racket"></category><category term="Android"></category></entry><entry><title>Chain assignment</title><link href="/posts/2013/04/16/chain-assignment/" rel="alternate"></link><updated>2013-04-16T00:32:40+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-04-16:posts/2013/04/16/chain-assignment/</id><summary type="html">&lt;p&gt;Попался на одном месте в Python, хотя быстро нашёл. Я почему-то на
автомате написал выражение для множественного присваивания исходя из
мысли, что присваивание будет идти справа-налево:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;a = {}&lt;/div&gt;
&lt;div class="line"&gt;x = 7&lt;/div&gt;
&lt;div class="line"&gt;x = a[x] = 3&lt;/div&gt;
&lt;div class="line"&gt;# увы, тут a это &lt;strong&gt;{3: 3}&lt;/strong&gt;, а не {7: 3} как могло показаться, если
глянуть мельком&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Ибо присваивание цепочки происходит слева-направо (да это
документировано, да и вообще есть ли в Python что-то что выполняется
справа-налево?), сначала вычисляется самое правое выражение, а затем
распространяется по очереди в выражения начиная слева:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;# вот так выглядит a = b = c = 7 в инструкциях VM&lt;/div&gt;
&lt;div class="line"&gt;LOAD_CONST&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1 (7)&lt;/div&gt;
&lt;div class="line"&gt;DUP_TOP&lt;/div&gt;
&lt;div class="line"&gt;STORE_FAST&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 0 (&lt;strong&gt;a&lt;/strong&gt;)&lt;/div&gt;
&lt;div class="line"&gt;DUP_TOP&lt;/div&gt;
&lt;div class="line"&gt;STORE_FAST&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1 (&lt;strong&gt;b&lt;/strong&gt;)&lt;/div&gt;
&lt;div class="line"&gt;STORE_FAST&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 2 (&lt;strong&gt;c&lt;/strong&gt;)&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Думаю тут порядок сохранения в переменных пояснять не нужно и так
видно глазом.&lt;/p&gt;
</summary><category term="программирование"></category><category term="знания"></category><category term="присваивание"></category><category term="хитрость"></category><category term="python"></category><category term="стандарт"></category><category term="особенность"></category><category term="пробел"></category></entry><entry><title>Racket на Android</title><link href="/posts/2013/04/14/racket-na-android/" rel="alternate"></link><updated>2013-04-14T04:30:28+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-04-14:posts/2013/04/14/racket-na-android/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Я тоже смог произвести кросс-компиляцию (просто ради интереса)
Racket Scheme, прочитав, что делал человек по ссылке. Только я делал
чуть по-другому, т.к. у меня уже установлен racket в системе. Если
собрать .zo файлы и выставить на них правильное время, то стартует
достаточно быстро, а работает racket вообще быстро (собирал с jit).&lt;/p&gt;
</summary><category term="racket"></category><category term="Android"></category><category term="компиляция"></category></entry><entry><title>Небольшая проблема с MyPaint</title><link href="/posts/2013/04/12/nebolshaia-problema-s-mypaint/" rel="alternate"></link><updated>2013-04-12T05:20:12+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-04-12:posts/2013/04/12/nebolshaia-problema-s-mypaint/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Если в последней master сборке в MyPaint 1.1.0 выбрать отладку
устройства ввода, чтобы посмотреть, например, степень нажатия кисти, то
после возврата на канвас с этим устройством приключится беда. Линия за
пером будет выводится с большой задержкой, даже если перо вести
медленно, что не даст вообще никак нормально работать. Поэтому лучше
отдельно отладить перо, затем перезапустить программу и можно продолжить
рисовать уже без проблем. Не знаю как себя ведут в таком случае другие
сборки и другие планшеты.&lt;/p&gt;
</summary><category term="отладка"></category><category term="master"></category><category term="mypaint"></category><category term="отставание"></category></entry><entry><title>Genius EasyPen M406XE</title><link href="/posts/2013/04/12/genius-easypen-m406xe/" rel="alternate"></link><updated>2013-04-12T05:05:03+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-04-12:posts/2013/04/12/genius-easypen-m406xe/</id><summary type="html">&lt;p&gt;Теперь у меня есть чем рисовать и делать наброски. Достаточно
компактный планшет, мне нравится. Думаю в большем я не нуждаюсь, т.к.
мои навыки рисования очень далеки от идеала. Чтобы завести данный девайс
под Ubuntu Linux 12.04 пришлось немного полазать в интернете, а вот,
чтобы заставить не на самом топовом ядре обрабатывать силу нажатия
пришлось хорошо поискать решение. Но на ЛОРе много чего полезного и вот
этот&amp;nbsp;&lt;a class="reference external" href="http://www.linux.org.ru/forum/linux-hardware/6929804#comment-7624274"&gt;комментарий&lt;/a&gt;
решил все вопросы. Только нужно не забыть установить перед этим драйвер
&lt;a class="reference external" href="https://launchpad.net/wizardpen"&gt;Wizardpen&lt;/a&gt;.
Утилиту&amp;nbsp;&lt;a class="reference external" href="https://github.com/Marisa-Chan/init-tablet"&gt;init-tablet&lt;/a&gt;
пришлось чуть подправить, чтобы она собралась без проблем, но зато её
магическая последовательность байт &lt;code class="code"&gt;
0x5,0x12,0x10,0x11,0x12,0,0,0&lt;/code&gt;

отправленная в устройство планшета сразу же включает отправку силы
нажатия:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;$ xinput list&lt;/div&gt;
&lt;div class="line"&gt;⎡ Virtual core pointer&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; id=2&amp;nbsp;&amp;nbsp;&amp;nbsp; [master&lt;/div&gt;
&lt;div class="line"&gt;pointer&amp;nbsp; (3)]&lt;/div&gt;
&lt;div class="line"&gt;⎜&amp;nbsp;&amp;nbsp; ↳ Virtual core XTEST pointer&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; id=4&amp;nbsp;&amp;nbsp;&amp;nbsp; [slave&lt;/div&gt;
&lt;div class="line"&gt;pointer&amp;nbsp; (2)]&lt;/div&gt;
&lt;div class="line"&gt;⎜&amp;nbsp;&amp;nbsp; ↳ A4Tech PS/2+USB Mouse&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; id=11&amp;nbsp;&amp;nbsp;&amp;nbsp; [slave&lt;/div&gt;
&lt;div class="line"&gt;pointer&amp;nbsp; (2)]&lt;/div&gt;
&lt;div class="line"&gt;⎜&amp;nbsp;&amp;nbsp; ↳ SynPS/2 Synaptics TouchPad&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; id=15&amp;nbsp;&amp;nbsp;&amp;nbsp; [slave&lt;/div&gt;
&lt;div class="line"&gt;pointer&amp;nbsp; (2)]&lt;/div&gt;
&lt;div class="line"&gt;⎜&amp;nbsp;&amp;nbsp; ↳ &lt;strong&gt;Genius Tablet&lt;/strong&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; id=16&lt;/div&gt;
&lt;div class="line"&gt;[slave&amp;nbsp; pointer&amp;nbsp; (2)]&lt;/div&gt;
&lt;div class="line"&gt;...&lt;/div&gt;
&lt;div class="line"&gt;$ xinput test ‘Genius Tablet’&lt;/div&gt;
&lt;div class="line"&gt;...&lt;/div&gt;
&lt;div class="line"&gt;motion a[0]=6439 a[1]=4816 &lt;strong&gt;a[2]=905&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;$ lsusb&lt;/div&gt;
&lt;div class="line"&gt;...&lt;/div&gt;
&lt;div class="line"&gt;Bus 006 Device 003: ID 0458:5019 KYE Systems Corp. (Mouse Systems)&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Потребовалось ещё создать
&lt;strong&gt;/usr/share/X11/xorg.conf.d/70-wizardpen.conf&lt;/strong&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;Section “InputClass”&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp;&amp;nbsp; Identifier “wizardpen”&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp;&amp;nbsp; MatchIsTablet “on”&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp;&amp;nbsp; MatchDevicePath “/dev/input/event*”&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp;&amp;nbsp; MatchProduct “KYE Systems|Genius|M460XE”&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp;&amp;nbsp; Driver “wizardpen”&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp;&amp;nbsp; Option&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;“TopX”&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;“0”&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp;&amp;nbsp; Option&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;“TopY”&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;“0”&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp;&amp;nbsp; Option&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;“BottomX”&amp;nbsp;&amp;nbsp; &amp;nbsp;“15360” # нужно откалибровать при&lt;/div&gt;
&lt;div class="line"&gt;помощи &lt;strong&gt;wizardpen-calibrate&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp;&amp;nbsp; Option&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;“BottomY”&amp;nbsp;&amp;nbsp; &amp;nbsp;“10240”&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp;&amp;nbsp; Option&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;“TopZ”&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;“1”&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp;&amp;nbsp; Option&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;“BottomZ”&amp;nbsp;&amp;nbsp; &amp;nbsp;“400” # можно прописать и 1023&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp;&amp;nbsp; Option&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;“TPCButton”&amp;nbsp;&amp;nbsp; &amp;nbsp;“off” # даже если не касаться&lt;/div&gt;
&lt;div class="line"&gt;планшета, то работают кнопки на пере&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp;&amp;nbsp; #Option&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;“DebugLevel”&amp;nbsp;&amp;nbsp; &amp;nbsp;“10”&lt;/div&gt;
&lt;div class="line"&gt;EndSection&lt;/div&gt;
&lt;div class="line"&gt;Section “InputClass”&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp;&amp;nbsp; Identifier “wizardpen ignore mouse dev”&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp;&amp;nbsp; MatchIsTablet “on”&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp;&amp;nbsp; MatchDevicePath “/dev/input/mouse*”&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp;&amp;nbsp; MatchProduct “KYE Systems|Genius|M460XE”&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp;&amp;nbsp; Driver “”&lt;/div&gt;
&lt;div class="line"&gt;EndSection&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;И для udevd я добавил ещё автоматический запуск инициализации
планшета, чтобы глубина всегда работала после подключения (в созданном
файле /etc/udev/rules.d/68-xorg-wizardpen.rules):&lt;/p&gt;
&lt;blockquote&gt;
ENV{ID_VENDOR_ID}==“0458”,&amp;nbsp; ENV{ID_MODEL_ID}==“5019”,
RUN+=“/usr/local/bin/init-tablets”&lt;/blockquote&gt;
&lt;p&gt;А в /etc/udev/rules.d/67-xorg-wizardpen.rules ещё добавил:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;# KYE Systems Corp (Genius M406XE)&lt;/div&gt;
&lt;div class="line"&gt;ENV{ID_VENDOR_ID}==“0458”,&amp;nbsp; ENV{ID_MODEL_ID}==“5019”,
ENV{x11_driver}=“wizardpen”&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Но это всё общеизвестная информация. В основном много сил ушло на
определение силы нажатия.&lt;/p&gt;
</summary><category term="графика"></category><category term="сила"></category><category term="перо"></category><category term="udev"></category><category term="genius"></category><category term="нажатие"></category><category term="планшет"></category><category term="m406xe"></category><category term="Xorg"></category><category term="давление"></category></entry><entry><title>Сюрприз с replace</title><link href="/posts/2013/04/10/siurpriz-s-replace/" rel="alternate"></link><updated>2013-04-10T04:23:36+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-04-10:posts/2013/04/10/siurpriz-s-replace/</id><summary type="html">&lt;p&gt;После семи лет Python я на автомате сделал и в JavaScript (я не
силён в азах js) замену строки через .replace, но обнаружил, что оно
ведёт себя не так как я ожидал. Т.е. 'test text test'.replace('test',
'text') даст результат: 'text text &lt;strong&gt;test&lt;/strong&gt;'. Т.е. заменило оно не
всё. Оказывается оно так и задумано, а если я хочу заменить всё, то в
JavaScript я не нашёл другого человеческого решения указать флаг
глобальности, кроме как явно прописать регулярное выражение
&lt;strong&gt;/test/g&lt;/strong&gt;. И вроде Интернет со мной согласен. Хотя меня такое
решение вопроса немного коробит. Я всё же привык, что если в replace
передал строку, то оно не пробует её автоматом преобразовать в regexp.&lt;/p&gt;
</summary><category term="проблема"></category><category term="замена"></category><category term="строка"></category><category term="javascript"></category><category term="python"></category><category term="регулярное"></category><category term="выражение"></category><category term="replace"></category></entry><entry><title></title><link href="/posts/2013/04/04/urn:ya.ru:post/22199227/1770/" rel="alternate"></link><updated>2013-04-04T22:37:10+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-04-04:posts/2013/04/04/urn:ya.ru:post/22199227/1770/</id><summary type="html">&lt;p&gt;реверс-инжиниринг бумажной пластики&lt;/p&gt;
</summary></entry><entry><title></title><link href="/posts/2013/04/02/urn:ya.ru:post/22199227/1769/" rel="alternate"></link><updated>2013-04-02T14:00:46+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-04-02:posts/2013/04/02/urn:ya.ru:post/22199227/1769/</id><summary type="html">&lt;p&gt;Добавили
мой &lt;a class="reference external" href="http://demotivators.to/p/750214/magazin-dlya-odinokih-lyudej.htm"&gt;демотиватор&lt;/a&gt;
:) Сделал фотку у нас в городе. Забавное название у магазина.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://demotivators.to/p/750214/magazin-dlya-odinokih-lyudej.htm"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/6437/22199227.a/0_8a37d_715a5afc_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="демотиватор"></category></entry><entry><title></title><link href="/posts/2013/04/01/urn:ya.ru:post/22199227/1764/" rel="alternate"></link><updated>2013-04-01T01:05:00+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-04-01:posts/2013/04/01/urn:ya.ru:post/22199227/1764/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Ну когда?! Когда уже назначат даты ICFP Programming Contest 2013? Я
уже с нетерпением жду этого мероприятия и не хочу прозевать.&lt;/p&gt;
</summary><category term="соревнование"></category><category term="программирование"></category></entry><entry><title>КПК</title><link href="/posts/2013/03/31/kpk/" rel="alternate"></link><updated>2013-03-31T15:13:03+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-03-31:posts/2013/03/31/kpk/</id><summary type="html">&lt;p&gt;Неделю назад продал почти непользованный КПК в отличном состоянии.
Отправлял обычным наложенным платежом по Беларуси. Без каких-либо особых
пометок. Был приятно удивлён, что почта из Гомеля в Минск дошла всего
где-то за 1,5 дня. Я думал, что будет как в России: 1 день идти, а потом
две недели лежать на сортировке :) Но всё же у нас работает почта на
порядок лучше.&lt;/p&gt;
</summary><category term="почта"></category><category term="платёж"></category><category term="наложенный"></category><category term="посылка"></category><category term="радость"></category><category term="кпк"></category><category term="hp"></category><category term="отправление"></category></entry><entry><title></title><link href="/posts/2013/03/30/urn:ya.ru:post/22199227/1762/" rel="alternate"></link><updated>2013-03-30T01:48:29+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-03-30:posts/2013/03/30/urn:ya.ru:post/22199227/1762/</id><summary type="html">&lt;p&gt;Попробовал пакет
&lt;a class="reference external" href="https://github.com/rfk/django-supervisor"&gt;django-supervisor&lt;/a&gt;. Мне
понравилось то, что можно в конфигурацию Supervisor вставлять &lt;code class="code"&gt;
{{
переменные }}&lt;/code&gt;
 из настроек проекта, а также &lt;code class="code"&gt;
{% использовать %}&lt;/code&gt;
 все
конструкции шаблонов Django прямо в файле конфиругации Supervisor. Одно
только не знаю: как себя поведёт данный пакет, если в конфигурационном
файле используется include. Теперь достаточно легко запустить и
задеплоить всю необходимую связку сервисов для проекта:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-go"&gt;./manage.py supervisor -d&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;#&lt;/span&gt; и Supervisord запущен
&lt;span class="pgcss-go"&gt;./manage.py supervisor shell&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;#&lt;/span&gt; и мы уже в консоли управление supervisor-процессами
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Запуск консоли по управлению процессами я добавил в fabric, теперь я
могу просто сделать локально “fab processes” и попадаю в консоль на
удалённом сервере и могу управлять его сервисами, т.к. это fabric, то
если потребуется, то я смогу легко провернуть такую же схему даже для N
серверов. Просто добавлю пару команд, которые будут рассылаться в
управляющие элементы Supervisor. А вообще мой fabric.py сейчас выглядит
вот так:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;fabric.api&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-o"&gt;*&lt;/span&gt;
&lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;fabric.colors&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-o"&gt;*&lt;/span&gt;

&lt;span class="pgcss-n"&gt;env&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;hosts&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;myhost:12345&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;
&lt;span class="pgcss-n"&gt;env&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;directory&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;/service/path&amp;#39;&lt;/span&gt;

&lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;virtualenv&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;command&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;with&lt;/span&gt; &lt;span class="pgcss-n"&gt;cd&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;env&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;directory&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;sudo&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;source /service/path/virtualenv/bin/activate&amp;#39;&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39; &amp;amp;&amp;amp; &amp;#39;&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt; &lt;span class="pgcss-n"&gt;command&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;user&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;username&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

&lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;processes&lt;/span&gt;&lt;span class="pgcss-p"&gt;():&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;virtualenv&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;./manage.py supervisor shell&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

&lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;restart&lt;/span&gt;&lt;span class="pgcss-p"&gt;():&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;print&lt;/span&gt; &lt;span class="pgcss-n"&gt;yellow&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;Reloading ...&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;sudo&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;touch /etc/uwsgi.d/project.ini&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;   &lt;span class="pgcss-c"&gt;# reload uwsgi as root&lt;/span&gt;

&lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;deps&lt;/span&gt;&lt;span class="pgcss-p"&gt;():&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;virtualenv&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;pip install -r req.txt&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

&lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;push&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;should_restart&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;yes&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;update_deps&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;no&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;print&lt;/span&gt; &lt;span class="pgcss-n"&gt;green&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;Pushing live ...&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;local&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;git push origin master&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;with&lt;/span&gt; &lt;span class="pgcss-n"&gt;cd&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;env&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;directory&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;with&lt;/span&gt; &lt;span class="pgcss-n"&gt;settings&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;sudo_user&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;username&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
            &lt;span class="pgcss-n"&gt;sudo&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;git pull&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;update_deps&lt;/span&gt; &lt;span class="pgcss-o"&gt;==&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;yes&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;deps&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
            &lt;span class="pgcss-n"&gt;virtualenv&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;./manage.py syncdb&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;should_restart&lt;/span&gt; &lt;span class="pgcss-o"&gt;==&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;yes&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
            &lt;span class="pgcss-n"&gt;restart&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Под надзор супервизора я отдал небольшой (который будет большим
попозже) RPC-сервис на основе фреймворка
&lt;a class="reference external" href="https://github.com/tomerfiliba/rpyc"&gt;rpyc&lt;/a&gt;. Хорошая, простая,
достаточно безопасная библиотека RPC с бинарным протоколом. Всё отлично
передаётся, по умолчанию разрешены только методы, атрибуты и классы с
префиксом &lt;code class="code"&gt;
exposed_&lt;/code&gt;
, но есть возможность указать в конфигурации
соединения, что разрешены все public поля. Указывается отдельно как для
сервера, так и для клиента. Всё передаётся на клиент прозрачно, создать
объект соединяющийся с сервером легко. Есть возможность авторизации по
SSL-ключу. Я использую не режим по умолчанию, а режим с запуском с
указанием конкретного класса в качестве сервиса.&lt;/p&gt;
</summary><category term="supervisor"></category><category term="сервис"></category><category term="django-supervisor"></category><category term="RPC"></category><category term="supervisord"></category><category term="rpyc"></category><category term="fabric"></category><category term="запуск"></category></entry><entry><title>Баг в Spyne</title><link href="/posts/2013/03/29/bag-v-spyne/" rel="alternate"></link><updated>2013-03-29T03:23:48+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-03-29:posts/2013/03/29/bag-v-spyne/</id><summary type="html">&lt;p&gt;Нашёл неприятную ошибку в последней версии
&lt;a class="reference external" href="https://github.com/arskom/spyne"&gt;spyne&lt;/a&gt;, из-за которой все протоколы
опирающиеся на HierDictDocument класс, а это: JSON, YAML, MessagePack
неправильно трактуют как десериализовать результат выполнения функции,
если использовать внутренний клиентский модуль из пакета spryne:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-nn"&gt;spyne.client.http&lt;/span&gt;
&lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;services&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;main&lt;/span&gt;
&lt;span class="pgcss-n"&gt;x&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;spyne&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;client&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;http&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;HttpClient&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;http://localhost:7789&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;main&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;server&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-k"&gt;print&lt;/span&gt; &lt;span class="pgcss-n"&gt;x&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;service&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;say_hello&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;Word&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-mi"&gt;5&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

&lt;span class="pgcss-c"&gt;# ...&lt;/span&gt;
&lt;span class="pgcss-c"&gt;# где main.server это объект приложения с описанием сервисов:&lt;/span&gt;

&lt;span class="pgcss-n"&gt;server&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;Application&lt;/span&gt;&lt;span class="pgcss-p"&gt;([&lt;/span&gt;&lt;span class="pgcss-n"&gt;HelloServiceClass&lt;/span&gt;&lt;span class="pgcss-p"&gt;],&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;tns&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;example.hello&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;in_protocol&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-n"&gt;JSONDocument&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;validator&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;soft&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;),&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;out_protocol&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-n"&gt;JSONDocument&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;В случае JSON print выведет просто None, хотя должен был вывести
объект генератора. А всё потому, что библиотека пробует десериализовать
свой собственный ответ тем же способом, что и входящие сообщения
разбирает, а это не совсем корректно или там не дописан код. А вот
протокол XMLDocument опирается на другой класс и не имеет такой
проблемы. Поэтому пока буду использовать его, а позже попробую исправить
ошибки библиотеки.&lt;/p&gt;
</summary><category term="python"></category><category term="spyne"></category><category term="JSON"></category><category term="работа"></category><category term="ошибка"></category></entry><entry><title>Закат</title><link href="/posts/2013/03/26/sundown-prudok/" rel="alternate"></link><updated>2013-03-26T20:39:28+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-03-26:posts/2013/03/26/sundown-prudok/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/565206"&gt;&lt;img alt="ALIM2646.JPG" src="http://img-fotki.yandex.ru/get/4135/22199227.a/0_89fd6_89978746_L" title="ALIM2646.JPG"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/565209"&gt;&lt;img alt="Заголовок" src="http://img-fotki.yandex.ru/get/6433/22199227.a/0_89fd9_74dff457_L" title="Заголовок"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Вид в сторону старинных конюшен и заводов.&lt;/p&gt;</summary><category term="солнце"></category><category term="панорама"></category><category term="закат"></category><category term="небо"></category><category term="Гомель"></category></entry><entry><title></title><link href="/posts/2013/03/22/urn:ya.ru:post/22199227/1759/" rel="alternate"></link><updated>2013-03-22T00:06:06+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-03-22:posts/2013/03/22/urn:ya.ru:post/22199227/1759/</id><summary type="html">&lt;p&gt;коворкинг на кухне&lt;/p&gt;
</summary></entry><entry><title>Нередактируемое содержимое</title><link href="/posts/2013/03/20/neredaktiruemoe-soderzhimoe/" rel="alternate"></link><updated>2013-03-20T01:42:43+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-03-20:posts/2013/03/20/neredaktiruemoe-soderzhimoe/</id><summary type="html">&lt;p&gt;Всё же нашёл как можно сделать нормально блокировку редактирования в
TinyMCE. И так, чтобы можно было включать/выключать такой режим для
редактора:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-c1"&gt;// включаем блокировку, some_var_editor -- переменная содержащая TinyMCE-объект редактора&lt;/span&gt;
&lt;span class="pgcss-nx"&gt;some_var_editor&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;getBody&lt;/span&gt;&lt;span class="pgcss-p"&gt;().&lt;/span&gt;&lt;span class="pgcss-nx"&gt;setAttribute&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s1"&gt;&amp;#39;contenteditable&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-kc"&gt;true&lt;/span&gt;&lt;span class="pgcss-p"&gt;);&lt;/span&gt;
&lt;span class="pgcss-c1"&gt;// выключаем&lt;/span&gt;
&lt;span class="pgcss-nx"&gt;some_var_editor&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;getBody&lt;/span&gt;&lt;span class="pgcss-p"&gt;().&lt;/span&gt;&lt;span class="pgcss-nx"&gt;setAttribute&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s1"&gt;&amp;#39;contenteditable&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-kc"&gt;true&lt;/span&gt;&lt;span class="pgcss-p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</summary><category term="редактор"></category><category term="чтение"></category><category term="режим"></category><category term="переключение"></category><category term="только"></category><category term="редактирование"></category><category term="tinymce"></category></entry><entry><title>Восстановление операций по матрице Левенштейна</title><link href="/posts/2013/03/14/vosstanovlenie-operatsii-po-matritse-levenshteina/" rel="alternate"></link><updated>2013-03-14T16:41:04+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-03-14:posts/2013/03/14/vosstanovlenie-operatsii-po-matritse-levenshteina/</id><summary type="html">&lt;p&gt;Хорошо с примером разъяснено в ответе по ссылке, как это сделать.&lt;/p&gt;
</summary><category term="последовательность"></category><category term="дистанция"></category><category term="Левеншнейн"></category><category term="преобразование"></category><category term="операции"></category><category term="модификация"></category></entry><entry><title>Расширение базовых классов в CPython</title><link href="/posts/2013/03/13/rasshirenie-bazovykh-klassov-v-cpython/" rel="alternate"></link><updated>2013-03-13T02:36:22+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-03-13:posts/2013/03/13/rasshirenie-bazovykh-klassov-v-cpython/</id><summary type="html">&lt;p&gt;В Python, в классической реализации CPython не предусмотрено расширение
базовых классов типа: &lt;code class="code"&gt;
type&lt;/code&gt;
, &lt;code class="code"&gt;
int&lt;/code&gt;
, &lt;code class="code"&gt;
str&lt;/code&gt;
, &lt;code class="code"&gt;
dict&lt;/code&gt;
 и т.д., из соображений
производительности и засорения базовых классов. Но если очень хочется,
то пару хаков и можно за счёт модификации структуры в рабочем
python-процессе разрешить такой функционал (так сделал хакер Lincoln de
Sousa &lt;a class="reference external" href="https://github.com/clarete/"&gt;https://github.com/clarete/&lt;/a&gt; ), достаточно посредством ctypes, и
доступного pythonapi в нём, вызвать внутренний метод и пропатчить
базовый класс налету. И тогда можно делать такие штуки (пример из
библиотеки &lt;a class="reference external" href="https://github.com/gabrielfalcao/sure"&gt;https://github.com/gabrielfalcao/sure&lt;/a&gt; для тестов):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-p"&gt;{&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;foo&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-p"&gt;}&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;does&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;have&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;key&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;foo&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;being&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;with_value&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;equal&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Вообще такое расширение будет работать на страх и риск того, кто
использует. Не знаю как на такие трюки отреарировал бы gevent, uwsgi или
ещё какие библиотеки, которые работают непосредственно с интерпретатором
на низком уровне.&lt;/p&gt;
</summary><category term="патч"></category><category term="type"></category><category term="python"></category><category term="класс"></category><category term="int"></category><category term="базовый"></category><category term="str"></category><category term="модификация"></category></entry><entry><title></title><link href="/posts/2013/03/12/urn:ya.ru:post/22199227/1753/" rel="alternate"></link><updated>2013-03-12T01:57:54+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-03-12:posts/2013/03/12/urn:ya.ru:post/22199227/1753/</id><summary type="html">&lt;p&gt;новый ритм&lt;/p&gt;
</summary></entry><entry><title>Множество файлов в Zip архиве</title><link href="/posts/2013/03/12/mnozhestvo-failov-v-zip-arkhive/" rel="alternate"></link><updated>2013-03-12T01:56:35+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-03-12:posts/2013/03/12/mnozhestvo-failov-v-zip-arkhive/</id><summary type="html">&lt;p&gt;Как скопировать 100, 200, 500 файлов из небольшого архива (и
заархивировать нужные) не секрет, можно распаковать, выбрать файлы,
например, по расширению, а затем запаковать выбранные.&lt;/p&gt;
&lt;p&gt;А что если у нас 400000 мелких файлов? Хотя это &lt;strong&gt;тоже не секрет&lt;/strong&gt;,
в стандартном мануале по утилите zip есть и для этого решение:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-gp"&gt;#&lt;/span&gt; выбираем только html файлы в старом и копируем их в новый архив
&lt;span class="pgcss-gp"&gt;imdagger@thug-machine$&lt;/span&gt; zip БольшойФайл.zip &lt;span class="pgcss-s2"&gt;&amp;quot;*.html&amp;quot;&lt;/span&gt; --copy --out ТолькоВыбранные.zip
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;На моём нетбуке копирование файлов и архива в 1,5GiB заняло не
дольше нескольких минут, а их там было сотни тысяч.&lt;/p&gt;
</summary><category term="много"></category><category term="zip"></category><category term="архив"></category><category term="файлы"></category><category term="копирование"></category></entry><entry><title>Game Closure DevKit</title><link href="/posts/2013/03/09/game-closure-devkit/" rel="alternate"></link><updated>2013-03-09T23:56:26+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-03-09:posts/2013/03/09/game-closure-devkit/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Интересная штука, и на JavaScript + HTML5, на компе бегает шустро,
на телефоне не пробовал, но говорят, что тоже будет быстро. И в примере
их собственная игра на Android имеет порядка 7 тыс. отличных оценок и
сотни тысяч закачек, видимо не лагает. Хотя для меня немного
удивительно, т.к. я опирался в своих ожиданиях на статистику поддержки
WebGL в мобильных устройствах на 2012 год.&lt;/p&gt;
</summary><category term="программирование"></category><category term="javascript"></category><category term="создание"></category><category term="HTML5"></category><category term="игры"></category><category term="движок"></category></entry><entry><title>Провозился с nginx</title><link href="/posts/2013/03/07/provozilsia-s-nginx/" rel="alternate"></link><updated>2013-03-07T01:47:12+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-03-07:posts/2013/03/07/provozilsia-s-nginx/</id><summary type="html">&lt;p&gt;Хотя провозился это мягко сказано, плясал как мог, пытался понять
почему загрузка файлов не идёт дальше ~1.7 мегабайт, причём Firefox
отрапортовал, что он 2 раза пытался что-то загрузить (даже байты
передавал), но потом соединение пропало. Вот curl благо прояснил
ситуацию, там на самом деле была просто ошибка 413, а браузеры на ней
тупят. А она гласила, что я лью слишком большой файл.&lt;/p&gt;
&lt;p&gt;И тут поехали, я прописываю всякие опции, и max_client_body_size и
время соединений поднимаю. А нет, не прокатывает ничего. Обновил nginx
до 1.2.7, ситуация повторяется, но… потом я решил глянуть, что на этот
раз curl ответил детальнее, а там nginx 1.0.15.&lt;/p&gt;
&lt;p&gt;А тут я вспоминаю, что я в openvz контейнере и надо мной ещё один
nginx проксирует :) И доступа у меня туда нет. Нужно было сразу подумать
над этим вариантом, но я его почему-то отметал, а он самый очевидный, и
потратил часа 4,5 на всё про всё.&lt;/p&gt;
</summary><category term="проблема"></category><category term="невнимательность"></category><category term="файл"></category><category term="заливка"></category><category term="Я"></category><category term="nginx"></category></entry><entry><title>Бюджетный VPS</title><link href="/posts/2013/03/03/biudzhetnyi-vps/" rel="alternate"></link><updated>2013-03-03T02:42:04+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-03-03:posts/2013/03/03/biudzhetnyi-vps/</id><summary type="html">&lt;p&gt;Обзавёлся тут для своих целей машинкой с 128Mib RAM всего за $15 в год.
Там можно взять и 1Gib за $5 месяц, что неплохо, если требуется держать
несколько средних сервисов для внутренних нужд.&lt;/p&gt;
</summary><category term="дёшево"></category><category term="vps"></category></entry><entry><title>Запуск celery для нескольких очередей</title><link href="/posts/2013/03/01/zapusk-celery-dlia-neskolkikh-ocheredei/" rel="alternate"></link><updated>2013-03-01T03:57:59+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-03-01:posts/2013/03/01/zapusk-celery-dlia-neskolkikh-ocheredei/</id><summary type="html">&lt;p&gt;Оказывается можно запустить удобным способом различные celery узлы
всего одной командой и с указанием очередей и конкуренции воркеров для
этой очереди:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;celeryd_multi start &lt;strong&gt;global&lt;/strong&gt; &lt;strong&gt;single&lt;/strong&gt; -Q:&lt;strong&gt;global&lt;/strong&gt; default
-Q:&lt;strong&gt;single&lt;/strong&gt; import -c:&lt;strong&gt;single&lt;/strong&gt; 1 --loglevel=INFO
--pidfile=/var/run/celery/${USER}-%n.pid
--logfile=/var/log/celery/${USER}-%n.log&lt;/div&gt;
&lt;/div&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;и вариант для Django:&lt;/div&gt;
&lt;/div&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;strong&gt;./manage.py&lt;/strong&gt; celeryd_multi start global single -Q:global default
-Q:single import -c:single 1 --loglevel=INFO
--pidfile=/var/run/celery/${USER}-%n.pid
--logfile=/var/log/celery/${USER}-%n.log&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;start global single указывает, что мне нужны два узла Celery с
именами &lt;em&gt;global&lt;/em&gt; и &lt;em&gt;single&lt;/em&gt; (Celery сам добавит доменную часть, эти
имена лишь поддомены). Затем &lt;em&gt;-Q:global default&lt;/em&gt; указывает, что global
узел будет обрабатывать все события по умолчанию (т.е. для которых не
была указана очередь явно). А вот для узла &lt;em&gt;single&lt;/em&gt; прописано &lt;em&gt;-Q:single
import -c:single 1&lt;/em&gt;, и это значит, что очередь будет для него
специфическая (у меня она называется &lt;em&gt;import&lt;/em&gt;, но можно любое имя
использовать) и что самое важное: уровень конкуренции для этого узла
всего 1, т.е. никакие 2 комманды не будут выполняться параллельно, что
мне и требовалось для заданий импорта в базу данных.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Всё честно взято и адаптировано под мои нужды
&lt;a class="reference external" href="http://stackoverflow.com/a/5477095"&gt;отсюда&lt;/a&gt;.&lt;/p&gt;
</summary><category term="Celery"></category><category term="удобство"></category><category term="запуск"></category><category term="один"></category><category term="конкуренция"></category><category term="очереди"></category></entry><entry><title>djkombu и MySQL</title><link href="/posts/2013/02/27/djkombu-i-mysql/" rel="alternate"></link><updated>2013-02-27T01:56:21+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-02-27:posts/2013/02/27/djkombu-i-mysql/</id><summary type="html">&lt;p&gt;Чтобы Celery нормально обрабатывал задачи из MySQL (да я знаю, что
лучше использовать другой брокер для этой задачи и держать, например, их
хотя бы в Redis) пришлось добавить пару строчек для инициализации MySQL:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-n"&gt;DATABASES&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-p"&gt;{&lt;/span&gt;
    &lt;span class="pgcss-s"&gt;&amp;#39;default&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-p"&gt;{&lt;/span&gt;
        &lt;span class="pgcss-err"&gt;…&lt;/span&gt;
        &lt;span class="pgcss-s"&gt;&amp;#39;OPTIONS&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-p"&gt;{&lt;/span&gt;
            &lt;span class="pgcss-s"&gt;&amp;#39;init_command&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED;&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-c"&gt;# for the Celery&lt;/span&gt;
        &lt;span class="pgcss-p"&gt;},&lt;/span&gt;
    &lt;span class="pgcss-p"&gt;}&lt;/span&gt;
&lt;span class="pgcss-p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;После этого он стал получать задачи как положено, а не только после
каждого перезапуска worker’а.&lt;/p&gt;
</summary><category term="Celery"></category><category term="python"></category><category term="задача"></category><category term="djkombu"></category><category term="зависает"></category><category term="MySQL"></category><category term="не работает"></category><category term="брокер"></category></entry><entry><title>Pip и установка из git-репозитория</title><link href="/posts/2013/02/27/pip-i-ustanovka-iz-git-repozitoriia/" rel="alternate"></link><updated>2013-02-27T01:48:54+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-02-27:posts/2013/02/27/pip-i-ustanovka-iz-git-repozitoriia/</id><summary type="html">&lt;p&gt;Утилита pip позволяет легко установить конкретную ревизию из
git-репозитория, достаточно добавить к ссылке &amp;#64;sha1-номер-коммита:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-go"&gt;pip install git+git://github.com/jtauber/django-mailer.git@840d25bb9db9fbc80&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</summary><category term="pip"></category><category term="python"></category><category term="ревизия"></category><category term="установка"></category><category term="git"></category></entry><entry><title></title><link href="/posts/2013/02/27/urn:ya.ru:post/22199227/1744/" rel="alternate"></link><updated>2013-02-27T01:45:34+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-02-27:posts/2013/02/27/urn:ya.ru:post/22199227/1744/</id><summary type="html">&lt;p&gt;нездоровится что-то :/&lt;/p&gt;
</summary></entry><entry><title>Разбиение текста на слова</title><link href="/posts/2013/02/22/razbienie-teksta-na-slova/" rel="alternate"></link><updated>2013-02-22T03:59:40+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-02-22:posts/2013/02/22/razbienie-teksta-na-slova/</id><summary type="html">&lt;p&gt;Сначала я реализовал черновой вариант с использованием стандартной
библиотеки unicodedata и прохода по символам текста:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-nn"&gt;unicodedata&lt;/span&gt;
&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;clean_and_split&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;stop_words&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;words&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;u&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-n"&gt;letter&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;text&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;lower&lt;/span&gt;&lt;span class="pgcss-p"&gt;():&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;cname&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;unicodedata&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;category&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;letter&lt;/span&gt;&lt;span class="pgcss-p"&gt;)[&lt;/span&gt;&lt;span class="pgcss-mi"&gt;0&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;cname&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;Z&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;C&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;P&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-ow"&gt;and&lt;/span&gt; &lt;span class="pgcss-n"&gt;letter&lt;/span&gt; &lt;span class="pgcss-o"&gt;!=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;-&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-nb"&gt;len&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;words&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-o"&gt;-&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-p"&gt;])&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pgcss-mi"&gt;0&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;words&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;append&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;u&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;elif&lt;/span&gt; &lt;span class="pgcss-n"&gt;cname&lt;/span&gt; &lt;span class="pgcss-o"&gt;==&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;L&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
            &lt;span class="pgcss-c"&gt;# don&amp;#39;t distinguish letter E and E-with-dots&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;letter&lt;/span&gt; &lt;span class="pgcss-o"&gt;==&lt;/span&gt; &lt;span class="pgcss-s"&gt;u&amp;#39;ё&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;letter&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;u&amp;#39;е&amp;#39;&lt;/span&gt;
            &lt;span class="pgcss-n"&gt;words&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-o"&gt;-&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt; &lt;span class="pgcss-o"&gt;+=&lt;/span&gt; &lt;span class="pgcss-n"&gt;letter&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Но профайлер показывал, что это вторая функция по ресурсам после
базы данных в коде. Поэтому пришлось подумать и переделать это всё в
более короткий алгоритм. Я чувствовал, что всё это стоит записать
каким-нибудь регулярным выражением, т.к. регулярные выражения
преобразуются в конечный автомат, который будет работать быстро.
Оказалось, что стандартная библиотека &lt;strong&gt;re&lt;/strong&gt; дружит с Unicode, но
немного не тем боком, что мне нужно. Т.к. я хочу выделить в тексте
только слова из букв (с запасом того, что мне может потребоваться
расширить это условие), выбросив все знаки препинания, цифры и т.д.
Оказалось, что библиотека regex из PyPi как раз то, что нужно:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-nn"&gt;regex&lt;/span&gt;
&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;span class="pgcss-c"&gt;# minimal word length is 3 (last letter of word can&amp;#39;t be dash)&lt;/span&gt;
&lt;span class="pgcss-n"&gt;SPLITTER&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;regex&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;compile&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;ur&amp;#39;[\p{L}-]{2,}[\p{L}]&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

    &lt;span class="pgcss-o"&gt;...&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;clean_and_split&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;stop_words&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
        &lt;span class="pgcss-c"&gt;# тут ещё не хватает проверки stop_words, но добавить её не сложно&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-n"&gt;SPLITTER&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;findall&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;text&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;lower&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;replace&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;u&amp;#39;ё&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;u&amp;#39;е&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Главное не забыть указать префиксы строки &lt;strong&gt;ur&lt;/strong&gt; для регулярного
выражения. Т.е. важно не забыть прописать перфикс юникода, иначе \p{…}
не будет работать как следует. В результате этот участок кода ускорился
от 8 до 10 раз.&lt;/p&gt;
&lt;p&gt;Потом мне ещё потребовалось узнать в каких позициях стояли слова, но
это было уже без особых проблем, достаточно использовать finditer метод
объекта скомпилированного регулярного выражения:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-n"&gt;match&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-n"&gt;SPLITTER&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;finditer&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;some_text&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;print&lt;/span&gt; &lt;span class="pgcss-n"&gt;match&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;group&lt;/span&gt;&lt;span class="pgcss-p"&gt;(),&lt;/span&gt; &lt;span class="pgcss-n"&gt;match&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;start&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Вообще это всё нужно, чтобы разделить текст, выбросить лишние слова
и затем можно уже строить шинглы по нему.&lt;/p&gt;
</summary><category term="программирование"></category><category term="текст"></category><category term="слово"></category><category term="python"></category><category term="разбиение"></category><category term="русский"></category><category term="unicode"></category><category term="regex"></category><category term="шинглы"></category></entry><entry><title>Steam и Linux</title><link href="/posts/2013/02/17/steam-i-linux/" rel="alternate"></link><updated>2013-02-17T03:13:56+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-02-17:posts/2013/02/17/steam-i-linux/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Пришлось для сабжа даже WebMoney завести, т.к. мой PayPal прописан
на другую страну, а Visa Virtuon почему-то отказывался Steam принимать.
Обзавёлся я World of Goo и Counter-Strike: Source, последний правда с
моим пингом немного подлагивал на том сервере куда я подключился и
настройки графики ещё пришлось чуть снизить, т.к. мой Ion всё же не
такой монстр (это же нетбук для работы, а не шпилить днями). Завелось
всё замечательно, спасибо Valve. Убрал Ironhide и поставил Bumblebee +
primus. Из-за Ironhide я думал, что Steam-у нужно положить симлинк на
32-битную графическую библиотеку GL, но оказалось, что он только мешал +
Steam думал, что у меня OpenGL только 1.4 и карточка Intel. А уже после
старта “primusrun steam” и обновления дравера NVidia до 304, у Steam
сомнения отпали и он признал мою вторую видеокарту.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Особо я не играю, но World of Goo игра клёвая и мне хотелось
поддержать их, а CS это всё же какая-никакая дань моим воспоминаниям из
прошлого. Заодно и самой Valve помог, тем что повёлся установить их
систему цифровой дистрибуции.&lt;/p&gt;
</summary><category term="primus"></category><category term="steam"></category><category term="linux"></category><category term="optimus"></category><category term="радость"></category><category term="игры"></category></entry><entry><title>Странное поведение lxml.html</title><link href="/posts/2013/02/09/strannoe-povedenie-lxmlhtml/" rel="alternate"></link><updated>2013-02-09T01:58:20+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-02-09:posts/2013/02/09/strannoe-povedenie-lxmlhtml/</id><summary type="html">&lt;p&gt;Столкнулся с тем, что не очень валидные с точки зрения стандарта и
логики кусочек HTML обрабатывается неоднозначно при помощи lxml.html.
Браузеры без проблем его переваривают, BeautifulSoup тоже, и некоторые
другие парсеры:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-nn"&gt;lxml.html&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-nn"&gt;lxml.html.soupparser&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-n"&gt;lxml&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;html&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;tostring&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;lxml&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;html&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;fromstring&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;/head&amp;gt;&amp;lt;body&amp;gt;&amp;lt;a href=&amp;quot;link&amp;quot;&amp;gt;&amp;#39;&lt;/span&gt; \
&lt;span class="pgcss-go"&gt;                         &amp;#39;&amp;lt;table&amp;gt;&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;Cell&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&amp;lt;/table&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;&amp;#39;))&lt;/span&gt;
&lt;span class="pgcss-go"&gt;&amp;#39;&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;/head&amp;gt;&amp;lt;body&amp;gt;&amp;lt;a href=&amp;quot;link&amp;quot;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;table&amp;gt;&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;Cell&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&amp;lt;/table&amp;gt;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;&amp;#39;&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-n"&gt;lxml&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;html&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;tostring&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;lxml&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;html&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;soupparser&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;fromstring&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;/head&amp;gt;&amp;lt;body&amp;gt;&amp;#39;&lt;/span&gt; \
&lt;span class="pgcss-go"&gt;           &amp;#39;&amp;lt;a href=&amp;quot;link&amp;quot;&amp;gt;&amp;lt;table&amp;gt;&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;Cell&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&amp;lt;/table&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;&amp;#39;))&lt;/span&gt;
&lt;span class="pgcss-go"&gt;&amp;#39;&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;/head&amp;gt;&amp;lt;body&amp;gt;&amp;lt;a href=&amp;quot;link&amp;quot;&amp;gt;&amp;lt;table&amp;gt;&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;Cell&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&amp;lt;/table&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Сразу видно, что lxml.html отделил &amp;lt;table&amp;gt; от &amp;lt;a&amp;gt;, оно то конечно и
правильно, если бы я не столкнулся с такой разметкой на одном реальном
сайте + для других похожих ситуаций оно себя тоже ведёт немного странно.
Всё бы ничего, в DTD же прописано, что в &amp;lt;a&amp;gt; не стоит пихать &amp;lt;table&amp;gt;, но
туда и &amp;lt;div&amp;gt; пихать не стоит, но:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-n"&gt;lxml&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;html&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;tostring&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;lxml&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;html&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;fromstring&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;/head&amp;gt;&amp;lt;body&amp;gt;&amp;#39;&lt;/span&gt; \
&lt;span class="pgcss-go"&gt;            &amp;#39;&amp;lt;a href=&amp;quot;link&amp;quot;&amp;gt;&amp;lt;div&amp;gt;Text&amp;lt;/div&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;&amp;#39;))&lt;/span&gt;
&lt;span class="pgcss-go"&gt;&amp;#39;&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;/head&amp;gt;&amp;lt;body&amp;gt;&amp;lt;a href=&amp;quot;link&amp;quot;&amp;gt;&amp;lt;div&amp;gt;Text&amp;lt;/div&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Всё же что-то не так, т.к. библиотеке нужно определиться: либо всё
выносить из тега ссылки, что не является разрешённым, либо обрабатывать
случай &lt;code class="code"&gt;
&amp;lt;table&amp;gt;&lt;/code&gt;
. Но не вести себя по разному.&lt;/p&gt;
</summary><category term="странное поведение"></category><category term="HTML"></category><category term="поведение"></category><category term="python"></category><category term="отклонение"></category><category term="lxml"></category></entry><entry><title>Бесконечная блокировка</title><link href="/posts/2013/02/05/beskonechnaia-blokirovka/" rel="alternate"></link><updated>2013-02-05T23:43:08+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-02-05:posts/2013/02/05/beskonechnaia-blokirovka/</id><summary type="html">&lt;p&gt;Как получить ситуацию, что gevent выдаст исключение о бесконечно
блокирующейся операции? Сделать бесконечный цикл? Нет. Достаточно, чтобы
операция сама себя ожидала, но как это сделать неявным образом, чтобы
пример не был высосан из пальца и был похож на настоящую ситуацию.
Достаточно просто.&lt;/p&gt;
&lt;p&gt;Допустим есть потребность выполнять какую-то операцию (например
краулинг и парсинг страниц) в ограниченном количестве параллельных
потоком. Мы берём для этого пул с ограниченным размером. Затем для
каждой страницы мы хотим порождать отдельный поток (т.к. микропотоки
достаточно дешёвые), мы пишем что-то типа такого:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-n"&gt;p&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;gevent&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;pool&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;Pool&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-mi"&gt;10&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-n"&gt;_&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-nb"&gt;xrange&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-mi"&gt;5&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;... &lt;/span&gt;      &lt;span class="pgcss-n"&gt;p&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;spawn&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;task&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-o"&gt;...&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;... &lt;/span&gt;&lt;span class="pgcss-n"&gt;p&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;join&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Затем реализуем задачу task, в ней будут выполняться какие-то
операции над полученными данными, например, извлекаться новые ссылки, и
будет происходить порождение новых микропотоков. Но мы же хотим, чтобы
конкуренция не разрасталась, поэтому решаем складывать задачи единый
пул.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;sub_task&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;i&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;p&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
&lt;span class="pgcss-go"&gt;        p.spawn(lambda: i)&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;task&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;i&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;p&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;... &lt;/span&gt;    &lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-n"&gt;_&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-nb"&gt;xrange&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-mi"&gt;4&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;... &lt;/span&gt;        &lt;span class="pgcss-n"&gt;p&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;spawn&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;sub_task&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;i&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt; &lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;p&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Таким образом каждый task создаёт ещё по 4 sub_task. Когда
структура программы не такая простая и голая, а напичкана различной
дополнительной логикой, то кажется, что всё хорошо. Но увы программа
начинает себя странно вести от раза к разу. И поведение меняется от
количества операция и размера пула.&lt;/p&gt;
&lt;p&gt;В версии gevent 0.13.8 всё просто замолкает, зависает и крутится в
цикле. Но благо 1.0dev умеет определять эту проблемную точку и выдавать
исключение:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-gt"&gt;Traceback (most recent call last):&lt;/span&gt;
&lt;span class="pgcss-gr"&gt;  File &amp;quot;test.py&amp;quot;, line 14, in&lt;/span&gt;
&lt;span class="pgcss-gr"&gt;    p.join()&lt;/span&gt;
&lt;span class="pgcss-gr"&gt;  File &amp;quot;/home/imdagger/Projects/bj-project/virtualenv/pg/local/lib/python2.7/site-packages/gevent/pool.py&amp;quot;, line 100, in join&lt;/span&gt;
&lt;span class="pgcss-gr"&gt;    self._empty_event.wait(timeout=timeout)&lt;/span&gt;
&lt;span class="pgcss-gr"&gt;  File &amp;quot;/home/imdagger/Projects/bj-project/virtualenv/pg/local/lib/python2.7/site-packages/gevent/event.py&amp;quot;, line 77, in wait&lt;/span&gt;
&lt;span class="pgcss-gr"&gt;    result = self.hub.switch()&lt;/span&gt;
&lt;span class="pgcss-gr"&gt;  File &amp;quot;/home/imdagger/Projects/bj-project/virtualenv/pg/local/lib/python2.7/site-packages/gevent/hub.py&amp;quot;, line 331, in switch&lt;/span&gt;
&lt;span class="pgcss-gr"&gt;    return greenlet.switch(self)&lt;/span&gt;
&lt;span class="pgcss-gr"&gt;gevent.hub.LoopExit&lt;/span&gt;: &lt;span class="pgcss-n"&gt;This operation would block forever&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;А всё потому, что некоторая задача task нуждается в добавлении в пул
подзадачи sub_task, которая тоже нуждается в пуле, а сам пул нуждается
в завершении задачи task, т.к. он достиг размера 10 и переполнен. и с
другими задачами аналогично, т.е. пул переполнен и ждёт освобождения, а
задачи, чтобы завершится пытаются в него затолкнуть ещё больше подзадач.&lt;/p&gt;
&lt;p&gt;Поэтому для выхода из такой ситуации лучше обойтись либо только task
без вызова ещё одной поздадачи со spawn, а лучше вообще закидывать
подзадачи в очередь, а другой поток (или несколько), будут забирать их,
обрабатывать данные и укладывать в пул.&lt;/p&gt;
</summary><category term="пул"></category><category term="неявный"></category><category term="pool"></category><category term="блокировка"></category><category term="gevent"></category><category term="python"></category></entry><entry><title>Странности MongoEngine</title><link href="/posts/2013/02/01/strannosti-mongoengine/" rel="alternate"></link><updated>2013-02-01T00:27:47+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-02-01:posts/2013/02/01/strannosti-mongoengine/</id><summary type="html">&lt;p&gt;Странно, но в Mongoengine MapField внутри другого MapField ведёт
себя немного неожиданно. Не знаю, так задумано или это ошибка (спрошу у
них попозже), но если сделать вот так:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-k"&gt;class&lt;/span&gt; &lt;span class="pgcss-nc"&gt;SomeModel&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;EmbeddedDocument&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;num&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;IntField&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;

&lt;span class="pgcss-k"&gt;class&lt;/span&gt; &lt;span class="pgcss-nc"&gt;SomeModel&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Document&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;my_field&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;MapField&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;MapField&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;EmbeddedDocumentField&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;SomeSubModel&lt;/span&gt;&lt;span class="pgcss-p"&gt;)))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;То всё будет работать, но как только мы захотим получить документ и
произвести правку в поле num начнётся самое интересное:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-n"&gt;some_obj&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;SomeModel&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;object&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-k"&gt;print&lt;/span&gt; &lt;span class="pgcss-n"&gt;some_obj&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;my_field&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;key1&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;][&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;key2&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;num&lt;/span&gt;
&lt;span class="pgcss-go"&gt;9&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-n"&gt;some_obj&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;my_field&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;key1&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;][&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;key2&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;num&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-mi"&gt;10&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-n"&gt;some_obj&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;save&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
&lt;span class="pgcss-go"&gt;# и снова&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-n"&gt;some_obj&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;SomeModel&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;object&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-k"&gt;print&lt;/span&gt; &lt;span class="pgcss-n"&gt;some_obj&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;my_field&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;key1&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;][&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;key2&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;num&lt;/span&gt;
&lt;span class="pgcss-go"&gt;9&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;И он ни в какую не хочет сохранять. Хотя можно провернуть трюк с
update, но это только для такой простой модели, а если там ещё уровень
вложенности, то уже и update не помогает. А всё почему?&lt;/p&gt;
&lt;p&gt;А потому, что это заложено в поведение &lt;code class="code"&gt;
 _get _changed _fields&lt;/code&gt;
 в
base.BaseDocument у библиотеки, ошибка это или нет, но:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
         &lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-n"&gt;field_name&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-n"&gt;field_list&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;

            &lt;span class="pgcss-n"&gt;db_field_name&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;_db_field_map&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;get&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;field_name&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;field_name&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
            &lt;span class="pgcss-n"&gt;key&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;&lt;/span&gt;&lt;span class="pgcss-si"&gt;%s&lt;/span&gt;&lt;span class="pgcss-s"&gt;.&amp;#39;&lt;/span&gt; &lt;span class="pgcss-o"&gt;%&lt;/span&gt; &lt;span class="pgcss-n"&gt;db_field_name&lt;/span&gt;
            &lt;span class="pgcss-n"&gt;field&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;_data&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;get&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;field_name&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-bp"&gt;None&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-nb"&gt;hasattr&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;field&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;id&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
                &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;field&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;id&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-n"&gt;inspected&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
                    &lt;span class="pgcss-k"&gt;continue&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;inspected&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;add&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;field&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;id&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

            &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;isinstance&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;field&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;EmbeddedDocument&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;DynamicEmbeddedDocument&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;
               &lt;span class="pgcss-ow"&gt;and&lt;/span&gt; &lt;span class="pgcss-n"&gt;db_field_name&lt;/span&gt; &lt;span class="pgcss-ow"&gt;not&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-n"&gt;_changed_fields&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
                 &lt;span class="pgcss-c"&gt;# Find all embedded fields that have been changed&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;changed&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;field&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;_get_changed_fields&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;key&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;inspected&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;_changed_fields&lt;/span&gt; &lt;span class="pgcss-o"&gt;+=&lt;/span&gt; &lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="pgcss-si"&gt;%s%s&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;&lt;/span&gt; &lt;span class="pgcss-o"&gt;%&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;key&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;k&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-n"&gt;k&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-n"&gt;changed&lt;/span&gt; &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;k&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;elif&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;isinstance&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;field&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;list&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-nb"&gt;tuple&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-nb"&gt;dict&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt; &lt;span class="pgcss-ow"&gt;and&lt;/span&gt;
                    &lt;span class="pgcss-n"&gt;db_field_name&lt;/span&gt; &lt;span class="pgcss-ow"&gt;not&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-n"&gt;_changed_fields&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
                &lt;span class="pgcss-c"&gt;# Loop list / dict fields as they contain documents&lt;/span&gt;
                &lt;span class="pgcss-c"&gt;# Determine the iterator to use&lt;/span&gt;
                &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-ow"&gt;not&lt;/span&gt; &lt;span class="pgcss-nb"&gt;hasattr&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;field&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;items&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
                    &lt;span class="pgcss-n"&gt;iterator&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nb"&gt;enumerate&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;field&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
                &lt;span class="pgcss-k"&gt;else&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
                    &lt;span class="pgcss-n"&gt;iterator&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;field&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;iteritems&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
                &lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-n"&gt;index&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;value&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-n"&gt;iterator&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
                    &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-ow"&gt;not&lt;/span&gt; &lt;span class="pgcss-nb"&gt;hasattr&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;value&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;_get_changed_fields&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
                        &lt;span class="pgcss-k"&gt;continue&lt;/span&gt;
                    &lt;span class="pgcss-n"&gt;list_key&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="pgcss-si"&gt;%s%s&lt;/span&gt;&lt;span class="pgcss-s"&gt;.&amp;quot;&lt;/span&gt; &lt;span class="pgcss-o"&gt;%&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;key&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;index&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
                    &lt;span class="pgcss-n"&gt;changed&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;value&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;_get_changed_fields&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;list_key&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;inspected&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
                    &lt;span class="pgcss-n"&gt;_changed_fields&lt;/span&gt; &lt;span class="pgcss-o"&gt;+=&lt;/span&gt; &lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="pgcss-si"&gt;%s%s&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;&lt;/span&gt; &lt;span class="pgcss-o"&gt;%&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;list_key&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;k&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
                                        &lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-n"&gt;k&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-n"&gt;changed&lt;/span&gt; &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;k&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Так вот в том месте, где метод проверяет являются ли данные
связанные с полем словарём или списком, есть некоторая неточность в
поведении. Для нашего случае получается словарь в словаре, если бы это
был просто встроенных документ в словаре, то всё было бы хорошо. Но нет,
у нас словарь в словаре, в котором документ, поэтому оно проверяет наш
словарик на наличие специального метода (именно такого, в котором мы
находимся):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-ow"&gt;not&lt;/span&gt; &lt;span class="pgcss-nb"&gt;hasattr&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;value&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;_get_changed_fields&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Естественно он его не находит, это же простой словарь! И
соответственно не подхватывает изменения из вложенного документа. Выход?
Переработать структуру и сделать поля фиксированные, а не два словаря,
или поправить код, чтобы он переварил такой случай и углублялся в
словарь или ещё один вариант: попробовать сделать имя полю
комбинированное через точку (вида 'key1.key2'). Хотя mongoengine стоило
бы предупредить про такие странности.&lt;/p&gt;
</summary><category term="ошибка"></category><category term="уровень"></category><category term="словарь"></category><category term="странное поведение"></category><category term="MongoEngine"></category><category term="документ"></category><category term="вложенный"></category><category term="поведение"></category><category term="поле"></category><category term="python"></category><category term="программирование"></category></entry><entry><title>Bootstrap кнопка отправки</title><link href="/posts/2013/01/18/bootstrap-knopka-otpravki/" rel="alternate"></link><updated>2013-01-18T23:23:02+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-01-18:posts/2013/01/18/bootstrap-knopka-otpravki/</id><summary type="html">&lt;p&gt;Как сделать кнопку отправки формы с использованием Bootstrap,
которая не позволит сработать ей дважды во время самой отправки? Можно
воспользоваться data-loading-text аттрибутом, и не стоит забывать про
&lt;code class="code"&gt;
autocomplete=&amp;quot;off&amp;quot;&lt;/code&gt;
, чтобы Firefox не запоминал состояние кнопки:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-nt"&gt;&amp;lt;button&lt;/span&gt; &lt;span class="pgcss-na"&gt;type=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;submit&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;class=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;btn btn-success&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;submit&amp;quot;&lt;/span&gt;
        &lt;span class="pgcss-na"&gt;data-loading-text=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;Выполнение...&amp;quot;&lt;/span&gt;
        &lt;span class="pgcss-na"&gt;onclick=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;$(this).button(&amp;#39;loading&amp;#39;); return true;&amp;quot;&lt;/span&gt;
        &lt;span class="pgcss-na"&gt;autocomplete=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;off&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;
        Подключить!
&lt;span class="pgcss-nt"&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;В обработчике onclick происходит переключение кнопки в состояние
loading, которое берёт текст из &lt;code class="code"&gt;
data-loading-text&lt;/code&gt;
 атрибута. Атрибуты с
префиксом &lt;code class="code"&gt;
data-&lt;/code&gt;
 современными браузерами (ибо положено по стандарту) не
считаются неправильными, а большинство старый браузеров должно их просто
проигнорировать и не выдавать ошибок.&lt;/p&gt;
</summary><category term="загрузка"></category><category term="HTML"></category><category term="программирование"></category><category term="отправка"></category><category term="кнопка"></category><category term="bootstrap"></category><category term="блокировка"></category></entry><entry><title>Удобная надстройка (и замена) для urllib2</title><link href="/posts/2013/01/17/udobnaia-nadstroika-i-zamena-dlia-urllib2/" rel="alternate"></link><updated>2013-01-17T03:11:51+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-01-17:posts/2013/01/17/udobnaia-nadstroika-i-zamena-dlia-urllib2/</id><summary type="html">&lt;p&gt;Если использовать библиотеку urllib2, то можно открыть соединение,
проверить заголовки, а затем начать считывать содержимое, которое
возвращает сервер. Но urllib2 не настолько удобная и наглядная как
библиотека requests:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-nn"&gt;requests&lt;/span&gt;
&lt;span class="pgcss-n"&gt;answer&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;requests&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;get&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;http://some...url&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;cookies&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-p"&gt;{&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;mycookie&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;value&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;},&lt;/span&gt;
                      &lt;span class="pgcss-n"&gt;headers&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-p"&gt;{&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;x-additional-header&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;value&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;})&lt;/span&gt;
&lt;span class="pgcss-k"&gt;print&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;answer&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;text&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Но как, допустим, проверить тип содержимого и если он не подходящий
сразу закрыть соединение? Достаточно передать параметр &lt;code class="code"&gt;
stream=True&lt;/code&gt;
:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-nn"&gt;requests&lt;/span&gt;
&lt;span class="pgcss-n"&gt;answer&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;requests&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;get&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;http://some...url&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;cookies&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-p"&gt;{&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;mycookie&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;value&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;},&lt;/span&gt;
                      &lt;span class="pgcss-n"&gt;stream&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-bp"&gt;True&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
                      &lt;span class="pgcss-n"&gt;headers&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-p"&gt;{&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;x-additional-header&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;value&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;})&lt;/span&gt;
&lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;answer&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;headers&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;get&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;content-type&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;startswith&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;text/html&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
   &lt;span class="pgcss-k"&gt;pass&lt;/span&gt; &lt;span class="pgcss-c"&gt;# в этот момент ещё не началось получение данных самой страницы&lt;/span&gt;
&lt;span class="pgcss-c"&gt;# а вот тут уже, после обращения к text, содержимое будет готово&lt;/span&gt;
&lt;span class="pgcss-k"&gt;print&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;answer&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;text&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-c"&gt;# .text обращается к .content, который производит считывание только 1 раз,&lt;/span&gt;
&lt;span class="pgcss-c"&gt;# так что всё хорошо даже второй раз&lt;/span&gt;
&lt;span class="pgcss-k"&gt;print&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;answer&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;text&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</summary><category term="программирование"></category><category term="чтение"></category><category term="библиотека"></category><category term="requests"></category><category term="HTTP"></category><category term="python"></category></entry><entry><title>Поиск ссылок на странице</title><link href="/posts/2013/01/16/poisk-ssylok-na-stranitse/" rel="alternate"></link><updated>2013-01-16T03:41:03+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-01-16:posts/2013/01/16/poisk-ssylok-na-stranitse/</id><summary type="html">&lt;p&gt;Выбрать все ссылки со страницы можно, например, вот так:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-nn"&gt;lxml.html&lt;/span&gt;
&lt;span class="pgcss-o"&gt;...&lt;/span&gt;

&lt;span class="pgcss-k"&gt;class&lt;/span&gt; &lt;span class="pgcss-nc"&gt;SomeClass&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;object&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;...&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;_parse_urls&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;content&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;document&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;lxml&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;html&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;fromstring&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;content&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;document&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;xpath&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;//meta[@content=&amp;quot;noindex&amp;quot;]&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
            &lt;span class="pgcss-c"&gt;# don&amp;#39;t parse links from this page&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;return&lt;/span&gt;

        &lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-n"&gt;atag&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-n"&gt;document&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;xpath&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;//a[not(starts-with(@href, &amp;quot;#&amp;quot;))]&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
            &lt;span class="pgcss-n"&gt;rel&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;atag&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;get&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;rel&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-nb"&gt;all&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;attr_value&lt;/span&gt; &lt;span class="pgcss-ow"&gt;not&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-n"&gt;rel&lt;/span&gt; &lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-n"&gt;attr_value&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;noindex&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;nofollow&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;]):&lt;/span&gt;
                &lt;span class="pgcss-k"&gt;yield&lt;/span&gt; &lt;span class="pgcss-n"&gt;atag&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;get&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;href&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Выражение &lt;code class="code"&gt;
//meta[&amp;#64;content=&amp;quot;noindex&amp;quot;]&lt;/code&gt;
 выбирает все теги meta, у
которых атрибут content указывает, что индексация страницы нежелательна
(равен строке noindex). Можно было указать, что meta находится в head в
html, но мне было лениво .&lt;/p&gt;
&lt;p&gt;А вот &lt;a class="reference external" href="http://ru.wikipedia.org/wiki/XPath"&gt;XPath&lt;/a&gt;-выражение
&lt;code class="code"&gt;
//a[not(starts-with(&amp;#64;href, &amp;quot;#&amp;quot;))]&lt;/code&gt;
 использует функции not и starts-with;
и выбирает только теги &lt;code class="code"&gt;
&amp;lt;a&amp;gt;&lt;/code&gt;
, у которых атрибут href не начинается на #.&lt;/p&gt;
</summary><category term="ссылки"></category><category term="HTML"></category><category term="XPath"></category><category term="программирование"></category><category term="страницы"></category><category term="разбор"></category></entry><entry><title>Венский завтрак</title><link href="/posts/2013/01/12/venskii-zavtrak/" rel="alternate"></link><updated>2013-01-12T02:50:19+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-01-12:posts/2013/01/12/venskii-zavtrak/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Купил недавно попробовать этот творожный
&lt;a class="reference external" href="http://www.belmilk.by/trademark/venskii_zavtrak"&gt;десерт&lt;/a&gt;. На вид
упаковка такая… не сильно яркая, но внутри просто чудесный вкус,
понравился даже больше чем аэро (хм.. давно его не встречал, куда он
подевался?). Особенно понравился вариант с грушей и шоколадом. У меня
теперь даже пластиковая ложка всегда с собой в кармане Жалко только, что
баночки не такие большие как хотелось бы.&lt;/p&gt;
</summary><category term="мысли"></category><category term="десерт"></category><category term="еда"></category></entry><entry><title></title><link href="/posts/2013/01/07/urn:ya.ru:post/22199227/1729/" rel="alternate"></link><updated>2013-01-07T01:41:05+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-01-07:posts/2013/01/07/urn:ya.ru:post/22199227/1729/</id><summary type="html">&lt;p&gt;старая техника тоже достойна жизни, если решает основные потребности&lt;/p&gt;
</summary></entry><entry><title>Эмуляция мышки</title><link href="/posts/2013/01/07/emuliatsiia-myshki/" rel="alternate"></link><updated>2013-01-07T01:39:04+03:00</updated><author><name>IMDagger</name></author><id>tag:,2013-01-07:posts/2013/01/07/emuliatsiia-myshki/</id><summary type="html">&lt;p&gt;У старого компа уже давно накрылось несколько мышек, последняя
вообще таинственно пропала (sic сбежала, наверное). А беспроводную не
всегда есть возможность подключить, т.к. она нужна на нетбуке. Поэтому
на случай, когда я оставил нетбук в одном месте с мышкой, но не дома (а
сегодня как раз такой случай), я решил вспомнить, как заставить X-ы
эмулировать мышь. Оказалось, что в последних сборках ArchLinux эту
возможность по умолчанию отключили и мне пришлось поискать и Интернет.
Минут 5 поисков (благо я не один такой), вуаля решение уже готово:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="https://bbs.archlinux.org/viewtopic.php?pid=904880#p904880"&gt;Вариант&lt;/a&gt;
с правкой настроек&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Там же
другой &lt;a class="reference external" href="https://bbs.archlinux.org/viewtopic.php?pid=1045229#p1045229"&gt;вариант&lt;/a&gt;
(сиюминутный и без перезагрузки X-ов и глобальной какой-то правки)&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;$ # вариант 2&lt;/div&gt;
&lt;div class="line"&gt;$ setxkbmap -option keypad:pointerkeys&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Второй вариант хорош, когда просто нужно проверить как оно рабтоает
вцелом. Жмём &lt;kbd class="kbd"&gt;
Shift+NumLock&lt;/kbd&gt;
 и наслаждаемся управлением мышкой через &lt;strong&gt;1,
2, 3, 4, 6, 7, 8, 9&lt;/strong&gt; стрелки и &lt;strong&gt;/ * -&lt;/strong&gt; переключение кнопок мыши, а
&lt;strong&gt;5&lt;/strong&gt; специальная, означающая нажатие выбранной кнопки.&lt;/p&gt;
&lt;p&gt;Если нужно выделить текст в браузере, чтобы скопировать, то жмём в
начале текста Shift, затем 5, затем двигаемся в другое место в тексте и
снова жмём 5, отпускаем Shift.&lt;/p&gt;
</summary><category term="клавиатура"></category><category term="мышь"></category><category term="Xorg"></category><category term="keypad"></category><category term="эмуляция"></category></entry><entry><title>Новый фильм</title><link href="/posts/2012/12/29/novyi-film/" rel="alternate"></link><updated>2012-12-29T02:33:11+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-12-29:posts/2012/12/29/novyi-film/</id><summary type="html">&lt;p&gt;Качаю Minecraft: The Story of Mojang. Купил за $8 на
&lt;a class="reference external" href="http://redux.com/minecraft-movie"&gt;redux.com&lt;/a&gt;. Надеюсь будет классный
фильм, люблю смотреть фильмы про indie-разработку и жизнь других
разработчиков. Правда, чтобы купить пришлось повозиться, т.к. они
принимают только PayPal, но благо есть onliner.by и очень
полезная&amp;nbsp;&lt;a class="reference external" href="http://forum.onliner.by/viewtopic.php?t=2891475&amp;amp;start=24000"&gt;ветка&lt;/a&gt;
(спасибо автору этой ветки и всему народу там). У меня есть Visa Virtuon
от БПС и Белинвест, первую я запорол ещё когда-то (хотел самостоятельно
пройти верификацию), а вот со второй прокатило, т.к. я прочитал как
нужно правильно пройти все круги ада; пришлось внимательно читать, чтобы
и её не запороть. И спасибо Яндексу, который предоставляет разные домены
для одного и того же ящика :) и &amp;#64;yandex.by и &amp;#64;narod.ru и &amp;#64;ya.ru. Ибо
пришлось регать новый аккаунт в PayPal (не знаю: на долго ли он, может и
заблочат, деньги там держать не буду), а очень не хотелось заводить
левый ящик из-за этого.&lt;/p&gt;
&lt;p&gt;Жалко, что нельзя было оплатить Google Wallet за фильм, т.к. к нему
обе карты подключаются без каких-либо проблем, с полпинка, лишь бы $1 на
карте был.&lt;/p&gt;
</summary><category term="фильм"></category><category term="minecraft"></category><category term="paypal"></category><category term="visa"></category><category term="indie"></category><category term="купил"></category><category term="оплата"></category></entry><entry><title>Получение информации о приложении</title><link href="/posts/2012/12/28/poluchenie-informatsii-o-prilozhenii/" rel="alternate"></link><updated>2012-12-28T20:23:13+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-12-28:posts/2012/12/28/poluchenie-informatsii-o-prilozhenii/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Как получить информацию о Facebook-приложении по user access_token?
Достаточно отправить запрос вида:
&lt;a class="reference external" href="https://graph.facebook.com/app/?access_token=[user_access_token]"&gt;https://graph.facebook.com/app/?access_token=[user_access_token]&lt;/a&gt;
&amp;nbsp; &amp;nbsp; А затем по id из словаря можно убедится, что токен принадлежит
нашему приложению, а из /me можно узнать какому пользователю конкретно.&lt;/p&gt;
</summary><category term="token"></category><category term="facebook"></category><category term="приложение"></category></entry><entry><title></title><link href="/posts/2012/12/27/urn:ya.ru:post/22199227/1724/" rel="alternate"></link><updated>2012-12-27T00:59:33+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-12-27:posts/2012/12/27/urn:ya.ru:post/22199227/1724/</id><summary type="html">&lt;p&gt;Чтобы при создание Unit-тестов и использовании стандартной
библиотеки unittests не возникало странных ситуаций при работе с
MongoDB, когда появляются внезапно провалившиеся тесты на ровном месте,
следует во время создания соединения через pymongo указать &lt;code class="code"&gt;
safe=True&lt;/code&gt;
,
чтобы каждое изменение разблокировало контекст только после ответа об
успешно применённой операции.&lt;/p&gt;
&lt;blockquote&gt;
pymongo.connection.Connection(port=config.contentserv.port,
&lt;strong&gt;safe=True&lt;/strong&gt;)&lt;/blockquote&gt;
&lt;p&gt;Иначе по-умолчанию изменения отправляются сразу в БД, и клиент не
ожидает подтверждения, что всё хорошо. Что может приводить к неполной
или несвоевременной очистке коллекций между разными тестами.&lt;/p&gt;
</summary><category term="pymongo"></category><category term="unittests"></category><category term="safe"></category></entry><entry><title>Яркость экрана на моём нетбуке</title><link href="/posts/2012/12/24/iarkost-ekrana-na-moiom-netbuke/" rel="alternate"></link><updated>2012-12-24T22:29:43+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-12-24:posts/2012/12/24/iarkost-ekrana-na-moiom-netbuke/</id><summary type="html">&lt;p&gt;После спящего режима экран не захотел возвращаться к максимальной
яркости на моём нетбуке. Я подумал, что накрылась подсветка. Но благо,
достаточно было сделать:&lt;/p&gt;
&lt;blockquote&gt;
sudo setpci -s 00:02.0 F4.B=99&lt;/blockquote&gt;
&lt;p&gt;Где 99 это коффициент максимальной яркости.&lt;/p&gt;
</summary><category term="setpci"></category><category term="яркость"></category><category term="экран"></category><category term="нетбук"></category></entry><entry><title></title><link href="/posts/2012/12/12/urn:ya.ru:post/22199227/1720/" rel="alternate"></link><updated>2012-12-12T15:01:32+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-12-12:posts/2012/12/12/urn:ya.ru:post/22199227/1720/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Поставил и на домашней и на рабочей машинке bash-completion, чтобы
быть счастливым человеком.&lt;/p&gt;
&lt;blockquote&gt;
sudo pacman -Sy &amp;amp;&amp;amp; sudo pacman -S bash-completion&lt;/blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Теперь и аргументы и параметры многих команд дополняются по TAB.&lt;/p&gt;
</summary><category term="дополнение"></category><category term="радость"></category><category term="bash"></category></entry><entry><title>Бот ботаня</title><link href="/posts/2012/11/30/bot-botania/" rel="alternate"></link><updated>2012-11-30T23:45:56+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-11-30:posts/2012/11/30/bot-botania/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Подготовил бота для игры, которую мы скоро релизнем. Можно будет
произвести рассылку от компании, что игра готова и некоторое количество
пользователей откликнется. Вот для них я и подготовил бота для игры в
специфическую версию морского боя, играет он достаточно не плохо, по
поведению похож на человека, что мне и требовалось. Это позволит
удержать на 5-10 пришедшего потенциального игрока, а это в свою очередь
даст возможность ему пересечься не только с ботами, но и с другими
игроками. При чём бот себя никак выдавать не будет, т.к. ему будет
предоставлен настоящий Facebook аккаунт, у него будет настоящий
владелец, фотография, имя и т.д.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Вкратце он работает так:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;смотрит все игры, которые нужно принять и отправляет в них accept&lt;/li&gt;
&lt;li&gt;просматривает игры, где его ход и пробует в ней сделать некоторые
операции, а именно:&lt;/li&gt;
&lt;li&gt;покупает защиты кораблей на все деньги&lt;/li&gt;
&lt;li&gt;защищает 1 точку с вероятностью 0.6 за ход&lt;/li&gt;
&lt;li&gt;пробует уничтожить найденную защиту с вероятностью 0.8&lt;/li&gt;
&lt;li&gt;если нет интересных клеток или просто с вероятностью 0.05 делает
случайных ход, но только в предсказанную свободную клетку (таковыми
точно &lt;strong&gt;не&lt;/strong&gt; являются клетки под кораблями, вокруг них и вокруг
выбитых клеток, которые имеют два прострелянных соседа)&lt;/li&gt;
&lt;li&gt;ищет клетки, которые имеют только одного прострелянного соседа, но
точно не известно есть ли продолжение корабля на противоположной
стороне от соседа&lt;/li&gt;
&lt;li&gt;из полученного списка интересных клеток производится осмотр вокруг
них&lt;/li&gt;
&lt;li&gt;случайно выбирается клетка из потенциально содержащих букву корабля
(ага это не простой морской бой), которые были определены ранее&lt;/li&gt;
&lt;li&gt;завершает сыгранные игры: проигранные или выигранные&lt;/li&gt;
&lt;/ul&gt;
</summary><category term="бот"></category><category term="бой"></category><category term="морской"></category></entry><entry><title></title><link href="/posts/2012/11/21/urn:ya.ru:post/22199227/1718/" rel="alternate"></link><updated>2012-11-21T21:45:46+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-11-21:posts/2012/11/21/urn:ya.ru:post/22199227/1718/</id><summary type="html">&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-nb"&gt;export &lt;/span&gt;&lt;span class="pgcss-nv"&gt;PYTHONIOENCODING&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;utf-8
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;То, что нужно чтобы UTF-8 вывод работал для Python 2.7.1+ даже, если к
пайпу подключён less.&lt;/p&gt;
</summary><category term="вывод"></category><category term="python"></category><category term="UTF-8"></category></entry><entry><title></title><link href="/posts/2012/11/17/urn:ya.ru:post/22199227/1715/" rel="alternate"></link><updated>2012-11-17T02:49:09+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-11-17:posts/2012/11/17/urn:ya.ru:post/22199227/1715/</id><summary type="html">&lt;p&gt;релизнулись, осталось недочёты допилить&lt;/p&gt;
</summary></entry><entry><title></title><link href="/posts/2012/11/14/urn:ya.ru:post/22199227/1713/" rel="alternate"></link><updated>2012-11-14T20:16:09+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-11-14:posts/2012/11/14/urn:ya.ru:post/22199227/1713/</id><summary type="html">&lt;p&gt;Недавно прошёл Machinarium, занятный квест и добрый, приятный стиль.
В нескольких местах сильно затупил, что пришлось пользоваться полной
подсказкой: не мог понять как заставить ворону упасть с висящего кабеля,
не догадался, что нужно повторить услышанную мелодию, чтобы лестница
разблокировалась и затупил с тем, как связать две батарейки вместе (не
обратил внимание, что робот-старик бросил бинт на землю). Может
как-нибудь, если будет время, то куплю ещё игру Botanicula от Amanita
Design (таже студия). Мне нравится их подход к созданию игр.&lt;/p&gt;
</summary><category term="игра"></category><category term="прошёл"></category><category term="впечатление"></category><category term="Machinarium"></category><category term="квест"></category></entry><entry><title></title><link href="/posts/2012/11/11/urn:ya.ru:post/22199227/1711/" rel="alternate"></link><updated>2012-11-11T13:50:14+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-11-11:posts/2012/11/11/urn:ya.ru:post/22199227/1711/</id><summary type="html">&lt;p&gt;Купил Indie Humble Bundle for Android 4. Теперь у меня есть
лицензионные, без какой-либо защиты игры (под любые платформы, я уже
поставил на телефон и под GNU/Linux):&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Machinarium&lt;/li&gt;
&lt;li&gt;Splice&lt;/li&gt;
&lt;li&gt;Superbrothers: Sword &amp;amp; Sworcery EP&lt;/li&gt;
&lt;li&gt;Waking Mars&lt;/li&gt;
&lt;li&gt;Eufloria (забавная игра про планетки и семена, и войны между ними)&lt;/li&gt;
&lt;li&gt;Crayon Physics Deluxe&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Машинариум не дал мне нормально поспать :) Всё обошлось мне в $10, я
дал почти в два раза больше среднего, а если бы покупал по 1 игре, то
вышло бы больше $100.&lt;/p&gt;
</summary><category term="bundle"></category><category term="игры"></category><category term="humble"></category><category term="покупка"></category><category term="indie"></category></entry><entry><title>Старый комп</title><link href="/posts/2012/11/02/staryi-komp/" rel="alternate"></link><updated>2012-11-02T16:56:36+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-11-02:posts/2012/11/02/staryi-komp/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Измерив (приблизительно) линейкой свой старый дисплей от моего
компьютера (с начала 2003 года) я понял, что: то ли DDC видеокарты
возвращает неверный DPI или, что более вероятно, драйвер Nouveau
возвращает или не может определить DPI монитора. Раньше был драйвер от
Nvidia, но они больше не поддерживают мой старый Geforce 4 MX440.
Поэтому пришлось сходить в богатое руководство ArchLinux и взглянуть,
как получить, что за DPI выставлен у меня:&lt;/p&gt;
&lt;blockquote&gt;
xdpyinfo | grep -B2 resolution&lt;/blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Оказалось, что 96. А по моим расчётам у меня где-то 86 точек на
дюйм. Поэтому после:&lt;/p&gt;
&lt;blockquote&gt;
xrandr –dpi 86&lt;/blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Приложения в libGDX на этом PC стали отображаться как положено и
задано в сантиметрах.&lt;/p&gt;
</summary><category term="nouveau"></category><category term="отображение"></category><category term="nvidia"></category><category term="компьютер"></category><category term="Xorg"></category><category term="dpi"></category><category term="видеокарта"></category><category term="старый"></category></entry><entry><title>TexturePacker и тайлы</title><link href="/posts/2012/10/28/texturepacker-i-taily/" rel="alternate"></link><updated>2012-10-28T01:22:46+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-10-28:posts/2012/10/28/texturepacker-i-taily/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; В старом TexturePacker, чтобы он нормально упаковывал тайловые
текстуры нужно кроме того, что добавить _x, _y или _xy суффикс к
названию исходного изображения, следует ещё и minWidth, minHeight тоже
сделать поменьше, а то только те, что больше 128 пойдут в атласы, а
остальные будут проигнорированы. Плюс в моей расширенной версии
упаковщика текстуры не обязаны находиться в одной директории, чтобы
попасть в один атлас, но для этого пришлось изменить немного addImage. А
вот TextureAtlas2 хоть и сделан уже получше, но с расширением его
возможности в сторону разных типов группировок изображений сильно
урезаны. Так ещё и название файла из addImage из нового пакера выпилили,
приходится использовать старый пакер, он тоже очень хорош.&lt;/p&gt;
</summary><category term="упаковка"></category><category term="текстура"></category><category term="libGDX"></category><category term="TexturePacker"></category><category term="тайлы"></category></entry><entry><title>Опциональная библиотека</title><link href="/posts/2012/10/25/optsionalnaia-biblioteka/" rel="alternate"></link><updated>2012-10-25T13:32:28+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-10-25:posts/2012/10/25/optsionalnaia-biblioteka/</id><summary type="html">&lt;p&gt;Для выборочного включения
&lt;a class="reference external" href="http://ant.apache.org/manual/Types/fileset.html"&gt;fileset&lt;/a&gt; в path
правиле можно воспользоваться параметром erroronmissingdir, это
позволяет объединить сборку под несколько платформ, когда всего на 1 из
платформ есть дополнительный набор библиотек. Например, при сборке под
PC и Android:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-nt"&gt;&amp;lt;path&lt;/span&gt; &lt;span class="pgcss-na"&gt;id=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;compiling-env&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;
    ...
    &lt;span class="pgcss-nt"&gt;&amp;lt;fileset&lt;/span&gt; &lt;span class="pgcss-na"&gt;id=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;path.internal.android-libs&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;dir=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;${sdk.dir}/platforms/${target}/&amp;quot;&lt;/span&gt;
            &lt;span class="pgcss-na"&gt;erroronmissingdir=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;false&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="pgcss-nt"&gt;&amp;lt;filename&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;android.jar&amp;quot;&lt;/span&gt; &lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class="pgcss-nt"&gt;&amp;lt;/fileset&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;/path&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</summary><category term="сборка"></category><category term="файл"></category><category term="Android"></category><category term="ant"></category><category term="выборочный"></category><category term="библиотека"></category></entry><entry><title>Ant, вывод XML</title><link href="/posts/2012/10/24/ant-vyvod-xml/" rel="alternate"></link><updated>2012-10-24T04:00:23+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-10-24:posts/2012/10/24/ant-vyvod-xml/</id><summary type="html">&lt;p&gt;При автоматической сборке есть необходимость генерировать
AndroidManifest.xml. Но &lt;code class="code"&gt;
&amp;amp;lt;&lt;/code&gt;
 и &lt;code class="code"&gt;
&amp;amp;gt;&lt;/code&gt;
 выглядят не так наглядно как &amp;lt; и &amp;gt;,
поэтому для echo правило лучше указать &lt;code class="code"&gt;
&amp;lt;!CDATA&amp;lt;[ … ]]&amp;gt;&lt;/code&gt;
, но стоит не
забывать, что это обычный вывод, а не &lt;strong&gt;echoxml&lt;/strong&gt; правило, и если
сделать лишний перевод строки перед &lt;code class="code"&gt;
&amp;lt;?xml&lt;/code&gt;
 тегом, то на выходе будет не
валидный XML.&lt;/p&gt;
&lt;p&gt;А вот задача &lt;strong&gt;echoxml&lt;/strong&gt; позволяет выводить вложенные теги в файл.
Хотя для AndroidManifest.xml она не применима с версией Ant 1.8.2, ибо
он не позволяет вложенному тегу иметь пространство имён (в данном случае
тег manifest с
&lt;code class="code"&gt;
xmlns:android=&amp;quot;http://schemas.android.com/apk/res/android&amp;quot;&lt;/code&gt;
). Но для
остального очень удобная плюшка, которая отформатирует XML добавит
заголовок самостоятельно.&lt;/p&gt;
</summary><category term="вывод"></category><category term="ant"></category><category term="сборка"></category><category term="xml"></category></entry><entry><title></title><link href="/posts/2012/10/24/urn:ya.ru:post/22199227/1703/" rel="alternate"></link><updated>2012-10-24T00:33:58+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-10-24:posts/2012/10/24/urn:ya.ru:post/22199227/1703/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Выходит, что в AndroidManifest.xml параметр versionName можно
указать как ссылку на ресурс, а versionCode нельзя. Если versionCode
указать, как ссылку на строку из ресурсов, то &lt;strong&gt;adb install&lt;/strong&gt; выдаёт
Failure [INSTALL_PARSE_FAILED_UNEXPECTED_EXCEPTION].&lt;/p&gt;
</summary><category term="versionCode"></category><category term="adb"></category><category term="Android"></category><category term="manifest"></category></entry><entry><title>Батарея моего телефона</title><link href="/posts/2012/10/20/batareia-moego-telefona/" rel="alternate"></link><updated>2012-10-20T02:22:34+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-10-20:posts/2012/10/20/batareia-moego-telefona/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; После обновления прошивки на сентябрьскую мой LG L7 P705 Optimus
стал намного менее прожорливым. Я решил проверить его батарею без
включённого Sleep as Android и она выдержала ~9 дней автономной работы
(раньше у меня при аналогичных настройках удавалось получить дня 3-5).
Меня это радует, это хороший показатель, т.к. я каждый день использовал
телефон для разговоров. С программой для сна выходит где-то 4 дня
работы, что тоже меня устраивает.&lt;/p&gt;
</summary><category term="время"></category><category term="радость"></category><category term="телефон"></category><category term="экономия"></category><category term="ёмкость"></category><category term="аккумулятор"></category></entry><entry><title></title><link href="/posts/2012/10/20/urn:ya.ru:post/22199227/1699/" rel="alternate"></link><updated>2012-10-19T23:27:57+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-10-20:posts/2012/10/20/urn:ya.ru:post/22199227/1699/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; О! В Ant есть макросы (задача
&lt;a class="reference external" href="http://ant.apache.org/manual/Tasks/macrodef.html"&gt;macrodef&lt;/a&gt;), значит
можно не копипастить одну и туже задачу, если в ней нужно изменить
немного поведение на основе некоторых параметров. Например упаковывать в
атласы изображения из hdpi, mdpi и ldpi директорий с указанием одних и
тех же настроек, но разных источников.&lt;/p&gt;
</summary><category term="ant"></category><category term="повторение"></category><category term="задача"></category><category term="макрос"></category></entry><entry><title>TexturePacker разбор полётов</title><link href="/posts/2012/10/12/texturepacker-razbor-poliotov/" rel="alternate"></link><updated>2012-10-12T01:26:53+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-10-12:posts/2012/10/12/texturepacker-razbor-poliotov/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Всё же TexturePacker (который уже успел устареть, т.к. недавно
появился, но ещё не релизнулся TexturePacker2) не настолько топорный,
как я подумал сначала. В нём осталось пару мест, где его можно расширить
и использовать по своему усмотрению. Это методы addImage и process
(который не статический). Можно составить свой список изображений,
сгруппировав их как хочется, затем передать в addImage буфер каждой
картинки (это легко почерпнуть из самих исходников класса), а в конце
вызывать process с указанием куда положить результат и суффиксом для
атласов.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Есть конечно и ложка дёгтя: нельзя простым способом изменить
indexPattern и поведение Filter. Но часть проблемы решается тем, что
addImage вторым параметром принимает название изображение и оно не
обязано быть каким-либо путём на диске. Поэтому в этой точке можно
трансформировать реальный путь к изображению в некоторый псевдоним,
который переварит регулярное выражение indexPattern из TexturePacker.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; P.S. Мне удалось построить на базе этого упаковщика расширенную
версию под собственные нужды на Kawa. Несколько дней размышлений, выбора
упаковщика, пару часов работы и вуаля — персональные нужды
удовлетворены.&lt;/p&gt;
</summary><category term="упаковка"></category><category term="текстура"></category><category term="libGDX"></category><category term="TexturePacker"></category></entry><entry><title></title><link href="/posts/2012/10/11/urn:ya.ru:post/22199227/1697/" rel="alternate"></link><updated>2012-10-11T11:25:01+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-10-11:posts/2012/10/11/urn:ya.ru:post/22199227/1697/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Вот и сели батарейки у моей мышки, их хватило приблизительно на 10
месяцев активного использования каждый день, напряжение на них упало с
3В до 1,2В. После пересечения границы в 1,3В мышка просто перестала
резко отзываться и погасла. Нужно будет пойти купить снова две AAA
батарейки или аккумулятора.&lt;/p&gt;
</summary><category term="мышь"></category><category term="элемент"></category><category term="беспроводная"></category><category term="заряд"></category><category term="батарейка"></category></entry><entry><title>SpriteMapper</title><link href="/posts/2012/10/07/spritemapper/" rel="alternate"></link><updated>2012-10-07T02:31:14+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-10-07:posts/2012/10/07/spritemapper/</id><summary type="html">&lt;p&gt;Неплохой пакер изображений в атлас, даже есть Ant-задача из коробки.
Один недостаток, что можно регулировать только максимальную ширину
атласа, а высоту нельзя.&lt;/p&gt;
</summary><category term="упаковка"></category><category term="атлас"></category><category term="изображение"></category><category term="CEGO"></category></entry><entry><title></title><link href="/posts/2012/10/07/urn:ya.ru:post/22199227/1691/" rel="alternate"></link><updated>2012-10-07T00:57:47+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-10-07:posts/2012/10/07/urn:ya.ru:post/22199227/1691/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Если есть желание прописать Google DNS или OpenDNS сервера перед
DNS, который получен по DHCP от провайдера или модема, то удобно создать
файлик /etc/resolve.conf.head со списком серверов, из него dhcpd будет
брать информацию при регенерации основного resolv.conf.&lt;/p&gt;
</summary><category term="DNS"></category><category term="удобство"></category><category term="DHCP"></category></entry><entry><title></title><link href="/posts/2012/10/05/urn:ya.ru:post/22199227/1686/" rel="alternate"></link><updated>2012-10-05T00:03:43+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-10-05:posts/2012/10/05/urn:ya.ru:post/22199227/1686/</id><summary type="html">&lt;p&gt;раз sweater от sweat?.. лучше тогда думать, что sweat это тяжело
трудиться, чем потеть :)&lt;/p&gt;
</summary></entry><entry><title></title><link href="/posts/2012/10/04/urn:ya.ru:post/22199227/1683/" rel="alternate"></link><updated>2012-10-04T23:56:48+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-10-04:posts/2012/10/04/urn:ya.ru:post/22199227/1683/</id><summary type="html">&lt;p&gt;Что-то не похоже, что разработчики
&lt;code class="code"&gt;
com.badlogic.gdx.tools.imagepacker.TexturePacker&lt;/code&gt;
 предусмотрели вариант
расширения этой утилиты, т.к. чтобы унаследоваться от этого класса
придётся переопределить большущий статический монолитный метод process
всего лишь из-за явного использования собственного класса в нём. Проще
подправить сами исходники и протолкнуть в мэйнстрим, чем расширить его.&lt;/p&gt;
</summary><category term="упаковка"></category><category term="текстура"></category><category term="java"></category><category term="libGDX"></category><category term="атлас"></category></entry><entry><title>Автоматическая версия сборки</title><link href="/posts/2012/10/02/avtomaticheskaia-versiia-sborki/" rel="alternate"></link><updated>2012-10-02T01:16:09+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-10-02:posts/2012/10/02/avtomaticheskaia-versiia-sborki/</id><summary type="html">&lt;p&gt;Хм.. оказывается в Ant есть такая задача, как
&lt;a class="reference external" href="http://ant.apache.org/manual/Tasks/script.html"&gt;script&lt;/a&gt;. Очень
удобно для обработки информации, которая пришла из других источников или
непосредственно из свойств в Ant. Можно запросто вызвать Rhino для
исполнения JavaScript:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-nt"&gt;&amp;lt;script &lt;/span&gt;&lt;span class="pgcss-na"&gt;language=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;javascript&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;src=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;some_file.js&amp;quot;&lt;/span&gt; &lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-c"&gt;&amp;lt;!--&lt;/span&gt; &lt;span class="pgcss-err"&gt;естественно&lt;/span&gt; &lt;span class="pgcss-err"&gt;можно&lt;/span&gt; &lt;span class="pgcss-err"&gt;и&lt;/span&gt; &lt;span class="pgcss-err"&gt;непосредственно&lt;/span&gt; &lt;span class="pgcss-err"&gt;в&lt;/span&gt; &lt;span class="pgcss-nx"&gt;Ant&lt;/span&gt; &lt;span class="pgcss-nx"&gt;build&lt;/span&gt;&lt;span class="pgcss-o"&gt;-&lt;/span&gt;&lt;span class="pgcss-err"&gt;файле&lt;/span&gt; &lt;span class="pgcss-err"&gt;писать&lt;/span&gt; &lt;span class="pgcss-err"&gt;этот&lt;/span&gt; &lt;span class="pgcss-err"&gt;код&lt;/span&gt; &lt;span class="pgcss-o"&gt;--&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="pgcss-nx"&gt;script&lt;/span&gt; &lt;span class="pgcss-nx"&gt;language&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s2"&gt;&amp;quot;javascript&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="pgcss-p"&gt;...&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Существует возможность исполнять и другие языки, например: такие как
Jython, но &lt;strong&gt;Rhino&lt;/strong&gt; поставляется вместе с JRE. А при
помощи &lt;a class="reference external" href="http://ant.apache.org/manual/Tasks/exec.html"&gt;exec&lt;/a&gt; можно
запустить (с указанием свойства для результата), например, git и
получить последний тег вместе с количеством коммитов до него:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-nt"&gt;&amp;lt;exec&lt;/span&gt; &lt;span class="pgcss-na"&gt;executable=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;git&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;outputproperty=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;build.version&amp;quot;&lt;/span&gt;
        &lt;span class="pgcss-na"&gt;failifexecutionfails=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;false&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;failonerror=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;true&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="pgcss-nt"&gt;&amp;lt;arg&lt;/span&gt; &lt;span class="pgcss-na"&gt;value=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;describe&amp;quot;&lt;/span&gt; &lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class="pgcss-nt"&gt;&amp;lt;arg&lt;/span&gt; &lt;span class="pgcss-na"&gt;value=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;--tags&amp;quot;&lt;/span&gt; &lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class="pgcss-nt"&gt;&amp;lt;arg&lt;/span&gt; &lt;span class="pgcss-na"&gt;value=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;--always&amp;quot;&lt;/span&gt; &lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class="pgcss-nt"&gt;&amp;lt;arg&lt;/span&gt; &lt;span class="pgcss-na"&gt;value=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;--abbrev=8&amp;quot;&lt;/span&gt; &lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class="pgcss-nt"&gt;&amp;lt;arg&lt;/span&gt; &lt;span class="pgcss-na"&gt;value=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;--dirty=+&amp;quot;&lt;/span&gt; &lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;/exec&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;В свойство build.version попадает значение вида
&lt;strong&gt;&amp;lt;tagname&amp;gt;&lt;/strong&gt;-&lt;strong&gt;&amp;lt;commits&amp;gt;&lt;/strong&gt;-&lt;strong&gt;&amp;lt;sha1&amp;gt;&lt;/strong&gt;, например: &lt;em&gt;1.3-34-cbde6f15&lt;/em&gt;. Я
отключил прерывание сборки, если исполнение git прошло неудачно, т.к. в
дальнейшем скрипт выставит ему значение по умолчанию (для неудачного
свойства).&lt;/p&gt;
&lt;p&gt;Например можно вот так превратить описание от git describe в формат,
который можно сохранить в versionCode для AndroidManifest.xml:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;tag&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nx"&gt;project&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;getProperty&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s2"&gt;&amp;quot;build.version&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;);&lt;/span&gt;
&lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;separated&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nx"&gt;tag&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;split&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s1"&gt;&amp;#39;\\.|-&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;);&lt;/span&gt;

&lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;separated&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;length&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pgcss-mi"&gt;3&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-p"&gt;{&lt;/span&gt;
    &lt;span class="pgcss-nx"&gt;project&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;setProperty&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s2"&gt;&amp;quot;build.code&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
        &lt;span class="pgcss-nb"&gt;parseInt&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;separated&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-mi"&gt;0&lt;/span&gt;&lt;span class="pgcss-p"&gt;])&lt;/span&gt; &lt;span class="pgcss-o"&gt;*&lt;/span&gt; &lt;span class="pgcss-mi"&gt;100&lt;/span&gt; &lt;span class="pgcss-o"&gt;*&lt;/span&gt; &lt;span class="pgcss-mi"&gt;100&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt; &lt;span class="pgcss-nb"&gt;parseInt&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;separated&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-p"&gt;])&lt;/span&gt; &lt;span class="pgcss-o"&gt;*&lt;/span&gt; &lt;span class="pgcss-mi"&gt;100&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt;
        &lt;span class="pgcss-nb"&gt;parseInt&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;separated&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-mi"&gt;2&lt;/span&gt;&lt;span class="pgcss-p"&gt;])&lt;/span&gt;
    &lt;span class="pgcss-p"&gt;);&lt;/span&gt;
&lt;span class="pgcss-p"&gt;}&lt;/span&gt; &lt;span class="pgcss-k"&gt;else&lt;/span&gt; &lt;span class="pgcss-p"&gt;{&lt;/span&gt;
    &lt;span class="pgcss-nx"&gt;project&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;setProperty&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s2"&gt;&amp;quot;build.code&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-o"&gt;-&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-p"&gt;);&lt;/span&gt;
&lt;span class="pgcss-p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Для случая &lt;em&gt;1.3-34-cbde6f15&lt;/em&gt; получится 10334. Если планируется
больше 100 изменений без создания нового тега, то лучше число 100
увеличить в скрипте. В Rhino метод строки &lt;em&gt;split&lt;/em&gt; имеет особенность
заключающуюся в строковом аргументе, который на самом деле описывает
регулярное выражение. Поэтому строка &lt;code class="code"&gt;
 \ \.|-&lt;/code&gt;
 означает, что
разделителем является либо точка либо знак минуса.&lt;/p&gt;
</summary><category term="rhino"></category><category term="нумерация"></category><category term="сборка"></category><category term="тег"></category><category term="Android"></category><category term="ant"></category><category term="версия"></category><category term="контроль"></category></entry><entry><title></title><link href="/posts/2012/09/26/urn:ya.ru:post/22199227/1680/" rel="alternate"></link><updated>2012-09-26T03:09:47+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-09-26:posts/2012/09/26/urn:ya.ru:post/22199227/1680/</id><summary type="html">&lt;p&gt;Почему-то в ночном бреду вспомнилось личное достижение: как я смог
донести до работы &lt;strong&gt;суп&lt;/strong&gt; в ланч-боксе не разлив его в рюкзаке :) Пойду уже
спать.&lt;/p&gt;
</summary><category term="жизнь"></category><category term="еда"></category><category term="бредни"></category></entry><entry><title>Jinja2</title><link href="/posts/2012/09/24/jinja2/" rel="alternate"></link><updated>2012-09-24T14:43:19+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-09-24:posts/2012/09/24/jinja2/</id><summary type="html">&lt;p&gt;Сел вчера и за полдня переделал в проекте все шаблоны и подсистему,
которая вызывает шаблонизатор, а также инфраструктуру по компиляции и
деплоингу под Jinja2 (вот как-то так: &lt;em&gt;109 files changed, 934
insertions(+), 1373 deletions(-)&lt;/em&gt;). А до этого было Cheetah. Во-первых
стало компилироваться намного быстрее, во-вторых есть множество разных
вариантов загрузки и компиляции шаблонов. Я выбрал складывать всё в один
zip-архив без сжатия. Так же радует автоматическая загрузка шаблонов (в
случае модификации), поддержка &lt;code class="code"&gt;
{{ super() }}&lt;/code&gt;
, наличие макросов с
возможностью обращения к вызывающему контексту. Достаточное количество
фильтров и лёгкость написания своих. В общем очень доволен выбором и
синтаксисом Jinja2 (а также тем, что его легко можно настраивать),
особенно из-за решения нетривиальных проблем с наследованием для
Cheetah.&lt;/p&gt;
&lt;p&gt;Жалко только, что поздно вчера взялся за дело, только около 16:00,
поэтому лёг ночью и поспал всего 3 часа. Но будильник меня разбудил в
нормальном состоянии, я не оказался сильно сонным (помогает то, что он
даёт мне подремать 10 минут).&lt;/p&gt;
</summary><category term="шаблон"></category><category term="Jinja2"></category><category term="программирование"></category><category term="Cheetah"></category><category term="работа"></category></entry><entry><title>Прилетело на офисе</title><link href="/posts/2012/09/15/priletelo-na-ofise/" rel="alternate"></link><updated>2012-09-15T15:15:04+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-09-15:posts/2012/09/15/priletelo-na-ofise/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/521730"&gt;&lt;img alt="ALIM2444.JPG" src="http://img-fotki.yandex.ru/get/6613/22199227.a/0_7f602_c7b7e48e_L" title="ALIM2444.JPG"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/521731"&gt;&lt;img alt="ALIM2445.JPG" src="http://img-fotki.yandex.ru/get/6412/22199227.a/0_7f603_49e3034a_L" title="ALIM2445.JPG"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/521732"&gt;&lt;img alt="ALIM2447.JPG" src="http://img-fotki.yandex.ru/get/6410/22199227.a/0_7f604_1b3e8cd1_L" title="ALIM2447.JPG"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Чистенькая, красивая стрекоза. Залетела случайно в комнату на офисе, я
её сфоткал и отпустил.&lt;/p&gt;</summary><category term="стрекоза"></category><category term="насекомое"></category><category term="офис"></category></entry><entry><title>Вот это, я понимаю, урожай</title><link href="/posts/2012/09/15/vot-eto-ia-ponimaiu-urozhai/" rel="alternate"></link><updated>2012-09-15T14:55:48+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-09-15:posts/2012/09/15/vot-eto-ia-ponimaiu-urozhai/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/521729"&gt;&lt;img alt="Вот это, я понимаю, урожай" src="http://img-fotki.yandex.ru/get/6513/22199227.a/0_7f601_4023d61e_-1-L" title="Вот это, я понимаю, урожай"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Ничем не поливалась, не удобрялась, хорошо прореживалась; почти все
морковки в этом году такие, наверное, из-за тёплого лета.&lt;/p&gt;</summary><category term="урожай"></category><category term="морковь"></category></entry><entry><title></title><link href="/posts/2012/09/08/urn:ya.ru:post/22199227/1673/" rel="alternate"></link><updated>2012-09-08T02:48:32+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-09-08:posts/2012/09/08/urn:ya.ru:post/22199227/1673/</id><summary type="html">&lt;p&gt;Второй раз уже обнаруживаю по результату вывода Jad, что я
прокололся и снова вызвал свойство. В Kawa «:»-нотация позволяет
прозрачно обрабатывать геттеры и сеттеры. Но я иногда забываю, что
оперировать нужно с этим полем просто как со свойством, и вызываю как
функцию. Jad показывает странность уже до запуска самого приложения,
которая проявляется в дополнительных конструкциях в духе Float.valueOf +
floatValue + force + конечно же apply1 для всего этого счастья.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;let* &lt;/span&gt;&lt;span class="pgcss-p"&gt;((&lt;/span&gt;&lt;span class="pgcss-nf"&gt;finished&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;media:update&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;
       &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;new-progress-state&lt;/span&gt; &lt;span class="pgcss-nv"&gt;media:manager:progress&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt; &lt;span class="pgcss-c1"&gt;;; вот тут media:manager:progress это&lt;/span&gt;
                                                    &lt;span class="pgcss-c1"&gt;;; на самом деле&lt;/span&gt;
                                                    &lt;span class="pgcss-c1"&gt;;;     media.getManager().getProgress()&lt;/span&gt;
                                                    &lt;span class="pgcss-c1"&gt;;; в терминологии Java&lt;/span&gt;
 &lt;span class="pgcss-o"&gt;....&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</summary><category term="column"></category><category term="свойства"></category><category term="нотация"></category><category term="getter"></category><category term="kawa"></category><category term="вызов"></category></entry><entry><title></title><link href="/posts/2012/09/05/urn:ya.ru:post/22199227/1672/" rel="alternate"></link><updated>2012-09-05T14:21:41+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-09-05:posts/2012/09/05/urn:ya.ru:post/22199227/1672/</id><summary type="html">&lt;p&gt;Чтобы породить в Emacs некий процесс и, когда он завершится, то
вызвать обработчик, нужно сделать так:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;defun&lt;/span&gt; &lt;span class="pgcss-nv"&gt;some-restart-service&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;service&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;set-process-sentinel&lt;/span&gt;
   &lt;span class="pgcss-c1"&gt;;; название процесса может быть любым, оно для именованного доступа&lt;/span&gt;
   &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;start-process-shell-command&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;quot;название-процесса&amp;quot;&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;quot;*имя-буффера-вывода*&amp;quot;&lt;/span&gt;
                                &lt;span class="pgcss-s"&gt;&amp;quot;произвользая-комманда-для-оболочки&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
   &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;lambda&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;service-tool&lt;/span&gt; &lt;span class="pgcss-nv"&gt;event&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
     &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;when&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;eq&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;process-status&lt;/span&gt; &lt;span class="pgcss-nv"&gt;service-tool&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-ss"&gt;&amp;#39;exit&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
       &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;zerop&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;process-exit-status&lt;/span&gt; &lt;span class="pgcss-nv"&gt;xsf-tool&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;
           &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;message&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;quot;All is done.&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
         &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;message&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;quot;Something went wrong.&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;))))))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Вешаем наш &lt;strong&gt;some-restart-service&lt;/strong&gt; на какую-нибудь клавишу или
просто вызываем. Подсмотрел идею в
&lt;a class="reference external" href="http://xwl.appspot.com/ref/gmail-notifier.el"&gt;http://xwl.appspot.com/ref/gmail-notifier.el&lt;/a&gt;
(макрос &lt;code class="code"&gt;
gmail-notifier-shell-command-asynchronously-with-callback&lt;/code&gt;
).&lt;/p&gt;
</summary><category term="emacs"></category><category term="процесс"></category><category term="обработчик"></category><category term="завершение"></category></entry><entry><title>Истина где-то рядом</title><link href="/posts/2012/09/05/istina-gde-to-riadom/" rel="alternate"></link><updated>2012-09-05T00:28:59+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-09-05:posts/2012/09/05/istina-gde-to-riadom/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Затратив почти 2,5 часа на поиск, почему не работает звук на новой
машинке, я перебрал всевозможные варианты (а всё от того, что у меня
HDMI от NVidia и я почему-то упорно верил, что проблема где-то в
драйверах и настройках): останавливал pulseaudio и выводил звук через
alsa, прописывал жёсткие настройки для устройств /etc/asound.conf,
мьютил всё подряд, но проблема оказалась ближе, чем я думал. Намного
ближе, … прямо во мне. Помогла осознать
это&amp;nbsp;&lt;a class="reference external" href="ftp://download.nvidia.com/XFree86/gpu-hdmi-audio-document/gpu-hdmi-audio.html"&gt;статья&lt;/a&gt;
с сайта NVidia, где упоминалась утилита&lt;/p&gt;
&lt;blockquote&gt;
sudo speaker-test -c 2 -r 48000 -D hw:0,0&lt;/blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Она смогла выдать шум в наушники и я заподозрил неладное. Я решил
проверить проигрывается ли музыка от &lt;em&gt;root&lt;/em&gt;. И.. бинго! проблема была в
том, что мой пользователь не был в группе &lt;strong&gt;audio&lt;/strong&gt;. &lt;em&gt;Хотя я это должен
был проверить первым делом&lt;/em&gt;, сделать ls -l /dev/snd/&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Без достаточных прав pulseaudio конфигуратор выдавал только то, что
у меня нет output devices.&lt;/p&gt;
</summary><category term="audio"></category><category term="hdmi"></category><category term="nvidia"></category><category term="pulseaudio"></category><category term="звук"></category></entry><entry><title></title><link href="/posts/2012/09/05/urn:ya.ru:post/22199227/1670/" rel="alternate"></link><updated>2012-09-05T00:18:18+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-09-05:posts/2012/09/05/urn:ya.ru:post/22199227/1670/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Пожертвовал сегодня $5 в пользу проекта ArchLinux.&lt;/p&gt;
</summary><category term="arch"></category><category term="дистрибутив"></category><category term="пожертвование"></category><category term="linux"></category></entry><entry><title></title><link href="/posts/2012/08/29/urn:ya.ru:post/22199227/1669/" rel="alternate"></link><updated>2012-08-29T01:56:08+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-08-29:posts/2012/08/29/urn:ya.ru:post/22199227/1669/</id><summary type="html">&lt;p&gt;Странно, но у меня, кажется, воспроизводится в новой Kawa баг семилетней
давности =/&lt;/p&gt;
</summary><category term="ellipsis"></category><category term="ошибка"></category><category term="kawa"></category><category term="вложенный"></category></entry><entry><title></title><link href="/posts/2012/08/26/urn:ya.ru:post/22199227/1668/" rel="alternate"></link><updated>2012-08-26T03:44:35+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-08-26:posts/2012/08/26/urn:ya.ru:post/22199227/1668/</id><summary type="html">&lt;p&gt;При построении макросов, которые генерируют классы сталкиваешься с
проблемой, что имя объекта является переменной или метод является
переменной. Для первого случая всё решается стандартной column-нотацией,
а вот для второго нельзя так просто взять и написать:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;some-object:&lt;/span&gt;&lt;span class="pgcss-o"&gt;#,&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;generated-method&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;...&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Лучше делать это с использованием &lt;strong&gt;$lookup$&lt;/strong&gt;, с ним проще и понятнее:
каким образом конструкцию обработает компилятор:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;span class="pgcss-p"&gt;((&lt;/span&gt;&lt;span class="pgcss-nf"&gt;$lookup$&lt;/span&gt; &lt;span class="pgcss-nv"&gt;some-object&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;#39;#,&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;generated-method&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt; &lt;span class="pgcss-o"&gt;...&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</summary><category term="Scheme"></category><category term="kawa"></category><category term="макрос"></category><category term="объект"></category><category term="поле"></category></entry><entry><title></title><link href="/posts/2012/08/24/urn:ya.ru:post/22199227/1667/" rel="alternate"></link><updated>2014-07-15T03:00:00+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-08-24:posts/2012/08/24/urn:ya.ru:post/22199227/1667/</id><summary type="html">&lt;p&gt;Не до конца ясно для меня почему так, но скорее всего это связано
как-то с рефлексией. Создание переменной типа procedure и присваивание в
неё ссылки на метод класса приводит к тому, что дальнейшие её вызовы
медленнее, чем аналогичная переменная, которая содержит lambda выражение
с явным вызовом требуемого метода. Т.е. вот такой код (скомпилированный
компилятором Kawa под целевую платформу JVM) исполняется на моём Intel
Atom D525 с 1.8 GHz где-то не более 0.8 секунды:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;module-export&lt;/span&gt; &lt;span class="pgcss-nv"&gt;Test&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;define-simple-class&lt;/span&gt; &lt;span class="pgcss-nv"&gt;Test&lt;/span&gt; &lt;span class="pgcss-p"&gt;()&lt;/span&gt;
    &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;internal-field&lt;/span&gt; &lt;span class="pgcss-nv"&gt;::procedure&lt;/span&gt; &lt;span class="pgcss-nv"&gt;init:&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;lambda &lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt; &lt;span class="pgcss-p"&gt;((&lt;/span&gt;&lt;span class="pgcss-nf"&gt;this&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;&lt;span class="pgcss-nv"&gt;:real-method&lt;/span&gt;&lt;span class="pgcss-p"&gt;)))&lt;/span&gt;
    &lt;span class="pgcss-c1"&gt;;(internal-field ::procedure init: (this):real-method)&lt;/span&gt;
    &lt;span class="pgcss-p"&gt;((&lt;/span&gt;&lt;span class="pgcss-nf"&gt;real-method&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-nv"&gt;::int&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;+ &lt;/span&gt;&lt;span class="pgcss-mi"&gt;1&lt;/span&gt; &lt;span class="pgcss-mi"&gt;2&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;
    &lt;span class="pgcss-p"&gt;((&lt;/span&gt;&lt;span class="pgcss-nf"&gt;iter&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;MAX&lt;/span&gt; &lt;span class="pgcss-nv"&gt;::int&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt; &lt;span class="pgcss-nv"&gt;::&lt;/span&gt; &lt;span class="pgcss-nv"&gt;void&lt;/span&gt;
        &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;let &lt;/span&gt;&lt;span class="pgcss-nv"&gt;loop&lt;/span&gt; &lt;span class="pgcss-p"&gt;((&lt;/span&gt;&lt;span class="pgcss-nf"&gt;i&lt;/span&gt; &lt;span class="pgcss-nv"&gt;::int&lt;/span&gt; &lt;span class="pgcss-mi"&gt;0&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;
                &lt;span class="pgcss-p"&gt;((&lt;/span&gt;&lt;span class="pgcss-nf"&gt;this&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;&lt;span class="pgcss-nv"&gt;:internal-field&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
                &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;when&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;&amp;lt; &lt;/span&gt;&lt;span class="pgcss-nv"&gt;i&lt;/span&gt; &lt;span class="pgcss-nv"&gt;MAX&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;loop&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;+ &lt;/span&gt;&lt;span class="pgcss-nv"&gt;i&lt;/span&gt; &lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-p"&gt;))))))&lt;/span&gt;

&lt;span class="pgcss-p"&gt;((&lt;/span&gt;&lt;span class="pgcss-nf"&gt;Test&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;&lt;span class="pgcss-nv"&gt;:iter&lt;/span&gt; &lt;span class="pgcss-mi"&gt;10000000&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;А вот такой код исполняется уже около &lt;strong&gt;8 секунд&lt;/strong&gt;: (вариант с set!
внутри конструктора работает аналогично)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;module-export&lt;/span&gt; &lt;span class="pgcss-nv"&gt;Test&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;define-simple-class&lt;/span&gt; &lt;span class="pgcss-nv"&gt;Test&lt;/span&gt; &lt;span class="pgcss-p"&gt;()&lt;/span&gt;
    &lt;span class="pgcss-c1"&gt;;(internal-field ::procedure init: (lambda () ((this):real-method)))&lt;/span&gt;
    &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;internal-field&lt;/span&gt; &lt;span class="pgcss-nv"&gt;::procedure&lt;/span&gt; &lt;span class="pgcss-nv"&gt;init:&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;this&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;&lt;span class="pgcss-nv"&gt;:real-method&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-p"&gt;((&lt;/span&gt;&lt;span class="pgcss-nf"&gt;real-method&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-nv"&gt;::int&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;+ &lt;/span&gt;&lt;span class="pgcss-mi"&gt;1&lt;/span&gt; &lt;span class="pgcss-mi"&gt;2&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;
    &lt;span class="pgcss-p"&gt;((&lt;/span&gt;&lt;span class="pgcss-nf"&gt;iter&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;MAX&lt;/span&gt; &lt;span class="pgcss-nv"&gt;::int&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt; &lt;span class="pgcss-nv"&gt;::&lt;/span&gt; &lt;span class="pgcss-nv"&gt;void&lt;/span&gt;
        &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;let &lt;/span&gt;&lt;span class="pgcss-nv"&gt;loop&lt;/span&gt; &lt;span class="pgcss-p"&gt;((&lt;/span&gt;&lt;span class="pgcss-nf"&gt;i&lt;/span&gt; &lt;span class="pgcss-nv"&gt;::int&lt;/span&gt; &lt;span class="pgcss-mi"&gt;0&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;
                &lt;span class="pgcss-p"&gt;((&lt;/span&gt;&lt;span class="pgcss-nf"&gt;this&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;&lt;span class="pgcss-nv"&gt;:internal-field&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
                &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;when&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;&amp;lt; &lt;/span&gt;&lt;span class="pgcss-nv"&gt;i&lt;/span&gt; &lt;span class="pgcss-nv"&gt;MAX&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;loop&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;+ &lt;/span&gt;&lt;span class="pgcss-nv"&gt;i&lt;/span&gt; &lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-p"&gt;))))))&lt;/span&gt;

&lt;span class="pgcss-p"&gt;((&lt;/span&gt;&lt;span class="pgcss-nf"&gt;Test&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;&lt;span class="pgcss-nv"&gt;:iter&lt;/span&gt; &lt;span class="pgcss-mi"&gt;10000000&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</summary><category term="проблема"></category><category term="производительность"></category><category term="kawa"></category><category term="динамический"></category><category term="поведение"></category><category term="класс"></category><category term="процедура"></category></entry><entry><title></title><link href="/posts/2012/08/22/urn:ya.ru:post/22199227/1666/" rel="alternate"></link><updated>2012-08-22T01:15:51+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-08-22:posts/2012/08/22/urn:ya.ru:post/22199227/1666/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/509098"&gt;&lt;img alt="ALIM2424.JPG" src="http://img-fotki.yandex.ru/get/6604/22199227.a/0_7c4aa_e9e40408_L" title="ALIM2424.JPG"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/509099"&gt;&lt;img alt="ALIM2425.JPG" src="http://img-fotki.yandex.ru/get/6408/22199227.a/0_7c4ab_3c879561_L" title="ALIM2425.JPG"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/509100"&gt;&lt;img alt="ALIM2426.JPG" src="http://img-fotki.yandex.ru/get/6408/22199227.a/0_7c4ac_4e61462_L" title="ALIM2426.JPG"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Несколько фотографий (случайных, сделанных на скорую руку) из Минска,
когда ездил отдавать нетбук в ремонт. Забыл их выложить сразу по
приезду, т.к. тогда приболел достаточно сильно и работы ещё привалило.&lt;/p&gt;</summary><category term="Минск"></category><category term="нетбук"></category><category term="ремонт"></category></entry><entry><title></title><link href="/posts/2012/08/17/urn:ya.ru:post/22199227/1661/" rel="alternate"></link><updated>2012-08-17T01:17:45+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-08-17:posts/2012/08/17/urn:ya.ru:post/22199227/1661/</id><summary type="html">&lt;p&gt;раньше просили винду переставить (раз ты “компьютерщик”), а теперь
просят прошить 4 андроид на телефон&lt;/p&gt;
</summary></entry><entry><title></title><link href="/posts/2012/08/13/urn:ya.ru:post/22199227/1658/" rel="alternate"></link><updated>2012-08-13T09:59:51+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-08-13:posts/2012/08/13/urn:ya.ru:post/22199227/1658/</id><summary type="html">&lt;p&gt;ура! нашелся!&lt;/p&gt;
</summary></entry><entry><title>Bigloo и Kawa</title><link href="/posts/2012/08/09/bigloo-i-kawa/" rel="alternate"></link><updated>2012-08-09T12:04:21+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-08-09:posts/2012/08/09/bigloo-i-kawa/</id><summary type="html">&lt;p&gt;Почему же я решил променять Bigloo на Kawa? Я очень доволен Bigloo,
он работает достаточно стабильно, ошибки выводит внятные и трэйсы
программ и под Native и под JVM понятные. В нём можно использовать Java
классы и интерфейсы, но… но нельзя экспортировать свой класс как JVM
класс.&lt;/p&gt;
&lt;p&gt;Я смог дописать этот функционал (хотя он скорее в состоянии хака),
но он у меня работает не так как я хотел бы, да и куча подводных камней.
Поэтому я решил пока не тратить драгоценное время на ковыряние самого
компилятора (хотя код в нём оказался достаточно понятный для меня и весь
написан на Scheme).&lt;/p&gt;
&lt;p&gt;С другой стороны Kawa имеет кучу плюшек на платформе JVM, она для
неё родная. А мне как раз сейчас и нужна только JVM. Для нэйтив я буду
юзать Bigloo если что. Kawa на мой взгляд по качеству самого компилятора
чуть более сырая, чем Bigloo и написана по большей части на Java.
Поэтому поправить код Kawa для меня намного труднее, ибо Java мне даётся
сложнее, чем Scheme.&lt;/p&gt;
&lt;p&gt;Так вот пару дней назад наткнулся, что Kawa просто выпадает на моём
коде, вот выжимка из него:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;define-class&lt;/span&gt; &lt;span class="pgcss-nv"&gt;FailClass&lt;/span&gt; &lt;span class="pgcss-p"&gt;()&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;x&lt;/span&gt; &lt;span class="pgcss-nv"&gt;::float&lt;/span&gt; &lt;span class="pgcss-nv"&gt;access:&lt;/span&gt; &lt;span class="pgcss-ss"&gt;&amp;#39;private&lt;/span&gt; &lt;span class="pgcss-nv"&gt;init:&lt;/span&gt; &lt;span class="pgcss-mf"&gt;0.0&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

&lt;span class="pgcss-p"&gt;((&lt;/span&gt;&lt;span class="pgcss-nf"&gt;wrap-x&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;lambda &lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt; &lt;span class="pgcss-nv"&gt;x&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;
&lt;span class="pgcss-p"&gt;((&lt;/span&gt;&lt;span class="pgcss-nf"&gt;calculate-position&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;letrec &lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;wrap-func&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;lambda &lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;wrap-x&lt;/span&gt;&lt;span class="pgcss-p"&gt;)))&lt;/span&gt; &lt;span class="pgcss-p"&gt;)&lt;/span&gt;
     &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;wrap-func&lt;/span&gt;&lt;span class="pgcss-p"&gt;))))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;При чём, если заменить &lt;strong&gt;x&lt;/strong&gt; на &lt;strong&gt;(this):x&lt;/strong&gt;, то всё отлично
срабатывает. Kawa 1.12.1 (revision 7282) и стабильная 1.12 просто падали
с ошибкой NullPointerException:&lt;/p&gt;
&lt;p class="cut"&gt;&lt;a class="h-link reference internal" href="#cut_29293136"data-toggle="collapse"&gt;показать стэк-трейс&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_29293136"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;compiling&lt;/span&gt; &lt;span class="pgcss-n"&gt;test&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;scm&lt;/span&gt; &lt;span class="pgcss-n"&gt;to&lt;/span&gt; &lt;span class="pgcss-n"&gt;test&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
&lt;span class="pgcss-n"&gt;test&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;scm&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;4&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt; &lt;span class="pgcss-n"&gt;internal&lt;/span&gt; &lt;span class="pgcss-n"&gt;error&lt;/span&gt; &lt;span class="pgcss-k"&gt;while&lt;/span&gt; &lt;span class="pgcss-n"&gt;compiling&lt;/span&gt; &lt;span class="pgcss-n"&gt;test&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;scm&lt;/span&gt;
&lt;span class="pgcss-n"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;lang&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;NullPointerException&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;LambdaExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;setCallersNeedStaticLink&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;LambdaExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;209&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;LambdaExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;setNeedsStaticLink&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;LambdaExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;199&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;capture&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;419&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;capture&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;509&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitReferenceExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;484&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitReferenceExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;11&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ReferenceExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visit&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ReferenceExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;183&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visit&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;53&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;LambdaExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitChildrenOnly&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;LambdaExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1716&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;LambdaExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitChildren&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;LambdaExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1703&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitExpression&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;29&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitScopeExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;98&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitLambdaExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;102&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitLambdaExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;297&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitLambdaExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;11&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;LambdaExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visit&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;LambdaExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1692&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visit&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;53&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;LambdaExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitChildrenOnly&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;LambdaExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1716&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;LambdaExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitChildren&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;LambdaExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1703&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitExpression&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;29&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitScopeExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;98&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitLambdaExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;102&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitLambdaExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;297&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitLambdaExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;11&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ClassExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitChildren&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ClassExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;787&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitExpression&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;29&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitScopeExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;98&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitLambdaExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;102&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitLambdaExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;297&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitLambdaExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;11&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitClassExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;103&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitClassExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;125&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitClassExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;11&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ClassExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visit&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ClassExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;762&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visit&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;57&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitAndUpdate&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;143&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitSetExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;109&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitSetExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;541&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitSetExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;11&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;SetExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visit&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;SetExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;432&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visit&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;53&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;LambdaExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitChildrenOnly&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;LambdaExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1716&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;LambdaExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitChildren&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;LambdaExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1703&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitExpression&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;29&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitScopeExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;98&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitLambdaExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ExpVisitor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;102&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitLambdaExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;297&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitModuleExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;152&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visitModuleExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;11&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ModuleExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;visit&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ModuleExp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;472&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;findCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;FindCapturedVars&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;17&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;Compilation&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;process&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Compilation&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1940&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ModuleInfo&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;loadByStages&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ModuleInfo&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;305&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ModuleInfo&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;loadByStages&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ModuleInfo&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;290&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;gnu&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;expr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ModuleInfo&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;loadByStages&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ModuleInfo&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;290&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;kawa&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;repl&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;compileFiles&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;repl&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;824&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;kawa&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;repl&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;processArgs&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;repl&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;444&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;kawa&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;repl&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;main&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;repl&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;870&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Я решил не ковыряться и не тратить время, а попытать счастья и
написать в список рассылки о проблеме, т.к. сообщество выглядит живым и
активным. И о чудо через пару часов основной разработчик откликнулся, а
уже спустя меньше, чем 24 часа баг был исправлен и я смог продолжить.
Так что теперь больше такой проблемы нет. Хотя по ощущениям, ещё раз
повторюсь, Kawa выглядит чуть более сырой, чем Bigloo.&lt;/p&gt;
</summary><category term="ошибка"></category><category term="программирование"></category><category term="Scheme"></category><category term="kawa"></category><category term="компилятор"></category><category term="улучшение"></category><category term="разработка"></category><category term="размышления"></category><category term="bigloo"></category></entry><entry><title>Дудлы гугла</title><link href="/posts/2012/08/08/dudly-gugla/" rel="alternate"></link><updated>2012-08-08T17:11:47+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-08-08:posts/2012/08/08/dudly-gugla/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Уже второй раз забыл, что хотел найти, после того как сыграл в дудл
гугла =/.&lt;/p&gt;
</summary><category term="дудл"></category><category term="doodle"></category><category term="поиск"></category><category term="google"></category></entry><entry><title>Sleep as Android</title><link href="/posts/2012/07/31/sleep-as-android/" rel="alternate"></link><updated>2012-07-31T00:17:41+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-07-31:posts/2012/07/31/sleep-as-android/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Купил недавно себе приложение за $1.46, очень полезное для меня.
Называется &lt;a class="reference external" href="https://play.google.com/store/apps/details?id=com.urbandroid.sleep&amp;amp;hl=ru"&gt;Sleep as
Android&lt;/a&gt;.
Там даётся для начала триальная версия на 14 дней, я попробовал немного
и после того как убедился, что оно работает, то купил. И не жалею,
теперь стал просыпаться бодрым, смог сократить свой ненормальный сон на
4 часа и теперь просыпаюсь под приятный будильник.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Хорошо, что мой телефон может регистрировать показания акселерометра
даже в заблокированном состоянии. Это позволяет мне отключить дисплей и
не тратить на него энергию. Класть телефон рядом с собой я не рискнул,
т.к. запросто его сброшу с постели, положил его под матрас (у меня
специальная секция есть в раскладной кровати, куда его удалось
положить). Теперь он оттуда регистрирует мои все повороты во сне.&lt;/p&gt;
</summary><category term="доволен"></category><category term="программа"></category><category term="пробуждение"></category><category term="покупка"></category><category term="Android"></category><category term="сон"></category></entry><entry><title></title><link href="/posts/2012/07/22/urn:ya.ru:post/22199227/1650/" rel="alternate"></link><updated>2012-07-22T04:20:12+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-07-22:posts/2012/07/22/urn:ya.ru:post/22199227/1650/</id><summary type="html">&lt;p&gt;набираю обороты&lt;/p&gt;
</summary></entry><entry><title>Экспорт Java-классов в Bigloo</title><link href="/posts/2012/07/22/eksport-java-klassov-v-bigloo/" rel="alternate"></link><updated>2012-07-22T04:19:34+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-07-22:posts/2012/07/22/eksport-java-klassov-v-bigloo/</id><summary type="html">&lt;p&gt;Bigloo Scheme прекрасно умеет импортировать Java-классы, но если
требуется унаследоваться от какого-либо Java-класса, то встаёт небольшая
проблема – нужно писать на Java обёртку, которая дёргает процедуры из
модуля. Это не очень удобно, т.к. приходится постоянно писать такие
обёртки, а хотелось бы, чтобы код был сгенерирован автоматически. После
отдыха на природе я смог собраться с силами и сделать это. Я смог
заставить (пока с кучей грязно-кода и хаков) Bigloo Scheme переварить
нечто такое:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;module&lt;/span&gt; &lt;span class="pgcss-nv"&gt;some-name&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;....&lt;/span&gt;
    &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;java&lt;/span&gt;
        &lt;span class="pgcss-o"&gt;.....&lt;/span&gt;
        &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;export&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;class&lt;/span&gt; &lt;span class="pgcss-nv"&gt;name::parent&lt;/span&gt;
                  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;field&lt;/span&gt; &lt;span class="pgcss-nv"&gt;x::int&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;quot;xname&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
                  &lt;span class="pgcss-o"&gt;...&lt;/span&gt;
                  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nf"&gt;method&lt;/span&gt; &lt;span class="pgcss-nv"&gt;test::void&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt; &lt;span class="pgcss-nv"&gt;::name&lt;/span&gt; &lt;span class="pgcss-p"&gt;))))&lt;/span&gt; &lt;span class="pgcss-o"&gt;...&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;...&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;И оно даже сгенерировало классы для экспортируемых сущностей и
тестовый образец заработал после нескольких допиливаний в JVM-as коде и
сборкой при помощи утилиты &lt;em&gt;bgljas&lt;/em&gt;.&lt;/p&gt;
</summary><category term="JVM"></category><category term="генерация"></category><category term="Scheme"></category><category term="java"></category><category term="автоматический"></category><category term="улучшение"></category><category term="bigloo"></category><category term="класс"></category><category term="экспорт"></category></entry><entry><title>Сварка</title><link href="/posts/2012/07/21/svarka/" rel="alternate"></link><updated>2012-07-21T19:59:32+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-07-21:posts/2012/07/21/svarka/</id><summary type="html">&lt;p&gt;Сегодня попробовал себя в роли сварщика. У отца есть свой сварочный
аппарат, поэтому я решил попробовать увидеть как оно выглядит: через специальный
защитный шлем смотреть на дуговую искру от электрода к поверхности.
Вобщем первая сварка у меня комом :) Вижу я плоховато без очков, а от
этого ещё и плохо чувствую дистанцию между поверхностью и электродом,
поэтому получилась сварка каплями, или как говорят: «соплей навешал». И
вначале я электрон пытался приложить под прямым углом, оказалось это не
правильно, от этого у меня либо дуга не возникала вообще, либо электрод
прилипал к объекту. Но потом я чуть наловчился, но всё равно было трудно
держать плазму и при этом не воткнуться в металл, чтобы электрод не
прилип снова. Мне понравилось.&lt;/p&gt;
</summary><category term="первый"></category><category term="сварка"></category><category term="жизнь"></category><category term="опыт"></category></entry><entry><title>Indie Game: The Movie</title><link href="/posts/2012/07/19/indie-game-the-movie/" rel="alternate"></link><updated>2012-07-19T03:00:30+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-07-19:posts/2012/07/19/indie-game-the-movie/</id><summary type="html">&lt;p&gt;Посмотрел этот документальный фильм. Очень воодушевляет, очень
эмоционально. Посмотрел всё на одном дыхании. В общем отличнейший
мотиватор, чтобы делать игры.&lt;/p&gt;
&lt;p&gt;P.S. Денег не пожалел и&amp;nbsp;&lt;a class="reference external" href="http://indiegamethemovie.com"&gt;купил&lt;/a&gt; этот
фильм, тем более, что требовалось всего $4.99, т.к. сейчас распродажа;
но и без неё он стоит дёшево.&lt;/p&gt;
&lt;p&gt;P.S.S. Думаю ещё раза 3 как минимум его пересмотрю. И музыка в нём тоже
атмосферная.&lt;/p&gt;
</summary><category term="фильм"></category><category term="жизнь"></category><category term="программирование"></category><category term="документальный"></category><category term="дизайн"></category><category term="мотиватор"></category><category term="indie"></category><category term="атмосферное"></category><category term="игры"></category></entry><entry><title>Через пару минут</title><link href="/posts/2012/07/16/cherez-paru-minut/" rel="alternate"></link><updated>2012-07-16T15:02:23+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-07-16:posts/2012/07/16/cherez-paru-minut/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Вот и подходит к концу ICFP Contest 2012. Я успел отправить нашего
бота на соревнование, правда он больше странная эвристика и поиск в
глубину с ограничением глубины, которая тоже вычисляется эвристически.
Добавить больше возможностей и отладить его я уже не успевал, решил
побольше поспать, иначе какой фан от соревнования, если себя выживать
ради этого. Жаль, что в этом году задача была больше классической, но
немного порадовал (и одновременно создавал раздражение и ажиотаж) формат
конкурса, в этот раз задача постепенно расширялась по мере продвижения
конкурса. Добавлялись новые непротиворечивые условия и правила. В целом
очень доволен, хорошо отдохнул и провёл время. Мы будем участвовать
командой в следующем году снова.&lt;/p&gt;
</summary><category term="соревнование"></category><category term="завершение"></category><category term="2012"></category><category term="icfpc"></category></entry><entry><title>Вот почему у меня борода</title><link href="/posts/2012/07/15/vot-pochemu-u-menia-boroda/" rel="alternate"></link><updated>2012-07-15T14:24:05+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-07-15:posts/2012/07/15/vot-pochemu-u-menia-boroda/</id><summary type="html">&lt;div class="youtube" align="left"&gt;&lt;iframe width="450" height="370" src="https://www.youtube.com/embed/JOVBA3QI_rY" frameborder="0"&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;p&gt;На аватарке я для приличия выбрит Если кто не знает английского, то
beard [биэрд] это борода.&lt;/p&gt;
</summary><category term="борода"></category><category term="ролик"></category><category term="смешно"></category><category term="beard"></category></entry><entry><title>Визуализатор для карты</title><link href="/posts/2012/07/14/vizualizator-dlia-karty/" rel="alternate"></link><updated>2012-07-14T14:39:52+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-07-14:posts/2012/07/14/vizualizator-dlia-karty/</id><summary type="html">&lt;p&gt;Сделал вчера визуализацию для карты и робота из задачи с ICFPC 2012.
Теперь немного проще размышлять и смотреть на небольших картах, что
стоит делать роботу и какие есть трюки. А также перепроверять
оптимальность будущего решения визуально и смотреть, где у него
проблемы.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/491821/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/5706/22199227.a/0_7812d_977fadc1_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="2012"></category><category term="визуализация"></category><category term="карта"></category><category term="icfpc"></category></entry><entry><title>Осталось менее 30 минут до начала</title><link href="/posts/2012/07/13/ostalos-menee-30-minut-do-nachala/" rel="alternate"></link><updated>2012-07-13T14:38:44+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-07-13:posts/2012/07/13/ostalos-menee-30-minut-do-nachala/</id><summary type="html">&lt;p&gt;Подготавливаюсь морально к ICFPC 2012. Интересно всё, что до этого
они писали было ли подсказками. И трамплин этот и карта. Хм.. ну скоро
узнаю :)&lt;/p&gt;
</summary><category term="соревнование"></category><category term="начало"></category><category term="2012"></category><category term="конкурс"></category><category term="icfpc"></category></entry><entry><title>Упрощение использование Java классов в Bigloo</title><link href="/posts/2012/07/13/uproshchenie-ispolzovanie-java-klassov-v-bigloo/" rel="alternate"></link><updated>2012-07-13T03:02:42+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-07-13:posts/2012/07/13/uproshchenie-ispolzovanie-java-klassov-v-bigloo/</id><summary type="html">&lt;p&gt;Уфф… нашёл то место, где можно начать расширять этот компилятор
Scheme. Вот оно: &lt;code class="code"&gt;
comptime/Module/java.scm&lt;/code&gt;
. Тут объявлены внутренние
класс &lt;code class="code"&gt;
jklass&lt;/code&gt;
 (да, именно с буквой &lt;strong&gt;k&lt;/strong&gt;, т.к. есть и &lt;code class="code"&gt;
jclass&lt;/code&gt;
) и &lt;code class="code"&gt;
jmethod&lt;/code&gt;
.
Планирую добавить поле по умолчанию для jmethod, которое будет указывать
на функции, которые в свою очередь нужно будет добавить прямо в
сгенерированный класс. Может ещё какой define-java-method объявлю. Вроде
дело сдвинулось с мёртвой точки.&lt;/p&gt;
</summary><category term="Scheme"></category><category term="класс"></category><category term="bigloo"></category><category term="программирование"></category><category term="улучшение"></category></entry><entry><title>Человек, которого знают в нашем городе все</title><link href="/posts/2012/07/12/chelovek-kotorogo-znaiut-v-nashem-gorode-vse/" rel="alternate"></link><updated>2012-07-12T02:06:31+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-07-12:posts/2012/07/12/chelovek-kotorogo-znaiut-v-nashem-gorode-vse/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Когда-то мне удалось немного с Валерием Ляшкевичем пообщаться. Я был
тогда мальчишкой, мы шли на обед, и решили немного его порасспрашивать
про работы. Я уже почти ничего не помню из разговора, но помню, что он
показался очень энергичным человеком, рассказывал что-то про стили,
символику, очень эмоционально всё повествовал. Оказывается он отправился
в Питер (а я думал это слухи), это же отличная новость! Человек нашёл
себя, и главное, что жив здоров и может творить дальше.&lt;/p&gt;
</summary><category term="художник"></category><category term="знают"></category><category term="все"></category><category term="Гомель"></category><category term="уехал"></category></entry><entry><title>Циклические структуры</title><link href="/posts/2012/07/12/tsiklicheskie-struktury/" rel="alternate"></link><updated>2012-07-12T01:51:12+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-07-12:posts/2012/07/12/tsiklicheskie-struktury/</id><summary type="html">&lt;p&gt;Python при выводе циклической структуры выкручивается вот так:&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre class="doctest-block"&gt;
&amp;gt;&amp;gt;&amp;gt; a = {1 : 2}
&amp;gt;&amp;gt;&amp;gt; a['2'] = a
&amp;gt;&amp;gt;&amp;gt; a
{1: 2, '2': {...}}
&amp;gt;&amp;gt;&amp;gt; print (a)
{1: 2, '2': {...}}
&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p&gt;А вот в Bigloo Scheme стандартные display, print и pp не умеют такое
обрабатывать. Но благо нашёлся в документации рядом с display метод
display-circle. Вот он очень хорошо справляется с такой задачей. В
отличии от предыдущих функций, которые просто зацикливаются:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
------------------------------------------------------------------------------
Bigloo (3.8c)                                                            ,--^,
`a practical Scheme compiler'                                      _ ___/ /|/
Сб. июня 9 01:57:24 FET 2012                             ,;'( )__, ) '
Inria -- Sophia Antipolis                                     ;;  //   L__.
email: bigloo&amp;#64;lists-sop.inria.fr                              '   \    /  '
url: http://www-sop.inria.fr/indes/fp/Bigloo                       ^   ^
------------------------------------------------------------------------------
1:=&amp;gt; (define x '(1))
x1:=&amp;gt; (append! x x)
#0=(1 . #0#)
1:=&amp;gt; (display-circle x)
#0=(1 . #0#)
&lt;/pre&gt;
&lt;p&gt;Чего это я вдруг наткнулся на это и вспомнил? Да вот нужно было
вывести класс, а там была ссылка на структуру, которая ссылалась опять
на класс. А я без особых размышлений сделал (print x) и зациклился,
пришлось прервать.&lt;/p&gt;
</summary><category term="программирование"></category><category term="Scheme"></category><category term="python"></category><category term="bigloo"></category><category term="структура"></category><category term="циклический"></category></entry><entry><title>Википедия против цензуры!</title><link href="/posts/2012/07/10/vikipediia-protiv-tsenzury/" rel="alternate"></link><updated>2012-07-10T03:04:19+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-07-10:posts/2012/07/10/vikipediia-protiv-tsenzury/</id><summary type="html"></summary><category term="цензура"></category><category term="забастовка"></category><category term="интернет"></category></entry><entry><title></title><link href="/posts/2012/07/05/urn:ya.ru:post/22199227/1624/" rel="alternate"></link><updated>2012-07-05T01:40:23+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-07-05:posts/2012/07/05/urn:ya.ru:post/22199227/1624/</id><summary type="html">&lt;p&gt;перестраиваю мозг&lt;/p&gt;
</summary></entry><entry><title>Подсветка скобочек</title><link href="/posts/2012/07/05/podsvetka-skobochek/" rel="alternate"></link><updated>2012-07-05T01:39:33+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-07-05:posts/2012/07/05/podsvetka-skobochek/</id><summary type="html">&lt;p&gt;В режиме работы со Scheme (в частности bee-mode из поставки Bigloo)
мне не хватало функции подсветки скобочек, чтобы видеть области кода. В
начале я даже думал писать свой режим, т.к. не получалось найти то, что
хочу. Но повременив с этим и более тщательно поискав, нашёлся минорный
режим, который отлично ладит с моим основным режимом редактирования
Scheme. Вот он —
&lt;a class="reference external" href="http://www.emacswiki.org/HighlightParentheses"&gt;highlight-parentheses-mode&lt;/a&gt;.
Правда я думал, что он будет выделять цветом и код внутри скобок; но всё
же, наверное, это меня раздражало и надоело бы, поэтому оно и так
чудесно всё из коробки.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/489580/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/5210/22199227.a/0_7786c_9aadda4f_M" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="цвет"></category><category term="Scheme"></category><category term="emacs"></category><category term="режим"></category><category term="скобки"></category><category term="удобство"></category><category term="parentheses"></category><category term="highlight"></category></entry><entry><title>Golden Axe</title><link href="/posts/2012/07/04/golden-axe/" rel="alternate"></link><updated>2012-07-04T00:30:21+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-07-04:posts/2012/07/04/golden-axe/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Эх… и меня пираты в детстве обманули и выдали Astyanax за картридж
Golden Axe. Я долгое время верил, что Golden Axe существовал для моего
Dendy (клона NES). Только недавно, решив порыскать, какие там дальше
босы были после зависания узнал, что это была совсем другая хакнутая
игра.&lt;/p&gt;
</summary><category term="играл"></category><category term="жизнь"></category><category term="забавно"></category><category term="детство"></category></entry><entry><title>Amazon EC2</title><link href="/posts/2012/06/28/amazon-ec2/" rel="alternate"></link><updated>2012-06-28T16:21:20+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-06-28:posts/2012/06/28/amazon-ec2/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Благодаря Visa Virtuon карточке, смог завести себе Amazon аккаунт.
Правда верификация аккаунта у них проходит немного странно и несколько
часов для страны, где я живу. Взяли с меня всю инфу, кто, что, адрес и
т.д. Затем попросили номер телефона и позвонили мне на него, там был
бот, который рассказывал, что я должен набрать ему номер, который вижу
на экране. Со второй попытки я понял, что нужно делать на моём телефоне
(благо они перезванивают). После я смог возспользоваться их годовой
льготой, т.е. бесплатным Micro Instance, по мне так очень неплохой
инстанс для моих задач, 2Ghz процессор, 600MiB оперативной памяти и 8GiB
винчестер. И всё это за $0 в месяц.&lt;/p&gt;
</summary><category term="ec2"></category><category term="aws"></category><category term="amazon"></category><category term="micro"></category><category term="instance"></category></entry><entry><title>И ещё одно небольшое пожертвование</title><link href="/posts/2012/06/15/i-eshchio-odno-nebolshoe-pozhertvovanie/" rel="alternate"></link><updated>2012-06-15T18:33:34+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-06-15:posts/2012/06/15/i-eshchio-odno-nebolshoe-pozhertvovanie/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; На этот раз $1 в фонд FSF, я потом ещё пожертвую, как переведу на
карточку немного больше денег.&lt;/p&gt;
</summary><category term="небольшое"></category><category term="пожертвование"></category><category term="FSF"></category></entry><entry><title>Visa Virtuon</title><link href="/posts/2012/06/15/visa-virtuon/" rel="alternate"></link><updated>2012-06-15T18:20:13+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-06-15:posts/2012/06/15/visa-virtuon/</id><summary type="html">&lt;p&gt;Сегодня дошли руки до моей карточки и я решил положить туда
немного денег. Но т.к. БПС банк уже не выдаёт пластиковые карточки для
Visa Virtuon (экономят пластик), то у меня был просто записанный номер
карточки, а срок окончания действия я забыл переписать. Я ошибся с датой
окончания и пытался в банке зачислить деньги от чего пришлось там
провозится 30 минут без результата. Но потом коллега по работе перевёл
мне немного денег на карточку и я смог проверить другую дату окончания:
которая на месяц раньше. И всё нормально прошло, завтра ещё положу денег
на карточку.&lt;/p&gt;
&lt;p&gt;А пока я потратил с неё первый евро. 1 евро я пожертвовал в фонд
Викимедиа:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Здравствуйте, Alexander!&lt;/p&gt;
&lt;p&gt;Хочу выразить вам своё восхищение и огромную благодарность за
пожертвование в Фонд Викимедиа!&lt;/p&gt;
&lt;p&gt;...&lt;/p&gt;
&lt;p&gt;Для вашего архива: ваш взнос от 2012-06-15 составил EUR 1.00.&lt;/p&gt;
&lt;/blockquote&gt;
</summary><category term="жизнь"></category><category term="БПС"></category><category term="virtuon"></category><category term="visa"></category><category term="wikimedia"></category><category term="wikipedia"></category></entry><entry><title>Ошибка при установке через checkinstall</title><link href="/posts/2012/06/07/oshibka-pri-ustanovke-cherez-checkinstall/" rel="alternate"></link><updated>2012-06-07T02:25:36+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-06-07:posts/2012/06/07/oshibka-pri-ustanovke-cherez-checkinstall/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; При установке некоторых пакетов через checkinstall бывает выпадает
вот такая ошибка:&lt;/p&gt;
&lt;blockquote&gt;
ranlib: could not create temporary file whilst writing archive: No
more archived files&lt;/blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Её удаётся победить, если перед этим сделать sudo make install,
тогда последующий sudo checkinstall отработает без проблем.&lt;/p&gt;
</summary><category term="ошибка"></category><category term="checkinstall"></category><category term="установка"></category><category term="решение"></category></entry><entry><title>В поисках воды</title><link href="/posts/2012/06/05/v-poiskakh-vody/" rel="alternate"></link><updated>2012-06-05T01:06:25+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-06-05:posts/2012/06/05/v-poiskakh-vody/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Из множества фирм, которые мы обзвонили только 2 согласились
пробурить нам скважину для воды на даче. Остальные все, как узнаю, где
нужно бурить, то отказываются. Т.к. у соседей и на 25 метров воду не
наши и так по всей деревне. Они даже машину заказывали с буром, но мало
кому повезло.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Но родителям повезло, хотя они вначале сильно были удивлены, что: а)
бурить будет негр английского гражданства; б) бурить будут вручную. Как
оказалось они принципиально не используют машину, чтобы не проскочить
водный слой. Плюс человек этот очень хорошо разбирается в поиске воды,
посмотрел землю, камни, растения, попробовал на вкус, понюхал. Много
всего расспрашивал и выбрал место для бурения.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; И о чудо, они нашли воду на 12 метре! Это при том, что верховодку
они проходили, и с 12 метра пошла хорошая и чистая вода. Тот человек
сказал, чтобы если бы они проскочили этот слой, то следующий слой уже на
32 метрах глубины у нас. Это объяснило почему машины, которые заказывали
не находили воду на 25 метров, они просто проскакивали первый слой, а до
второго уже у них не хватало сил бурить и особенно желания, т.к. платят
только за метры, если нашли воду. А если ничего не находят, то и можно
не платить, только бензин для машину на дорогу.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Вобщем, теперь у нас есть вода на даче и спасибо тому умельцу —
негру из Англии, который любит искать воду. Что ещё примечательно — он
очень аккуратно работает и очень скрупулёзный.&lt;/p&gt;
</summary><category term="жизнь"></category><category term="деревня"></category><category term="радость"></category><category term="скважина"></category><category term="Соколка"></category><category term="бурение"></category></entry><entry><title></title><link href="/posts/2012/06/03/urn:ya.ru:post/22199227/1608/" rel="alternate"></link><updated>2012-06-03T03:36:16+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-06-03:posts/2012/06/03/urn:ya.ru:post/22199227/1608/</id><summary type="html">&lt;p&gt;hardworking&lt;/p&gt;
</summary></entry><entry><title></title><link href="/posts/2012/05/30/urn:ya.ru:post/22199227/1601/" rel="alternate"></link><updated>2012-05-30T00:38:32+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-05-30:posts/2012/05/30/urn:ya.ru:post/22199227/1601/</id><summary type="html">&lt;p&gt;уже скоро релиз, нужно приложить максимум усилий&lt;/p&gt;
</summary></entry><entry><title>3 года моему блогу</title><link href="/posts/2012/05/30/3-goda-moemu-blogu/" rel="alternate"></link><updated>2012-05-30T00:34:37+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-05-30:posts/2012/05/30/3-goda-moemu-blogu/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; В принципе за 3 года сервис подрос и стал лучше, хотя есть вещи,
которые меня расстраивают, например, что теперь смайлики автоматически
находятся в тексте и распознаются. Я конечно понимаю, что некоторым это
удобно, но для меня (серьёзного человека): человека, который в основном
пишет нейтральные посты о жизни, без лишних эмоций либо чисто
технические мысли, — это очень не удобно, т.к. оно повсюду лепит свои
смайлики в моих примерах кода. Я же не могу всё засовывать в HTML!&lt;/p&gt;
</summary><category term="блог"></category><category term="мысли"></category><category term="годовщина"></category></entry><entry><title>Принудительный сброс кэша в RequireJS</title><link href="/posts/2012/05/29/prinuditelnyi-sbros-kesha-v-requirejs/" rel="alternate"></link><updated>2012-05-29T23:37:41+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-05-29:posts/2012/05/29/prinuditelnyi-sbros-kesha-v-requirejs/</id><summary type="html">&lt;p&gt;Нашёл в &lt;a class="reference external" href="http://requirejs.org/docs/api.html#config"&gt;доке по
RequireJS&lt;/a&gt;параметр
urlArgs, который позволяет после каждого загруженного
модуля добавлять некоторые параметры. Как сказано в документации это
можно применять для
принудительного сброса кэша (cache bust), например:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-nx"&gt;require&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;config&lt;/span&gt;&lt;span class="pgcss-p"&gt;({&lt;/span&gt;&lt;span class="pgcss-nx"&gt;urlArgs&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt; &lt;span class="pgcss-s2"&gt;&amp;quot;version=инкрементальная_версия&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;});&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</summary><category term="RequireJS"></category><category term="кэш"></category><category term="программирование"></category><category term="кеш"></category></entry><entry><title>Tweening</title><link href="/posts/2012/05/20/tweening/" rel="alternate"></link><updated>2012-05-20T02:31:25+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-05-20:posts/2012/05/20/tweening/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Кажется это как раз тот термин, который я искал в анимации, для
того, чтобы описать промежуточные достраиваемые кадры. Интересно
насколько часто используется эта техника в играх?&lt;/p&gt;
</summary><category term="мысли"></category><category term="tweening"></category><category term="анимация"></category><category term="игра"></category></entry><entry><title>Долго собирался Cycles</title><link href="/posts/2012/05/16/dolgo-sobiralsia-cycles/" rel="alternate"></link><updated>2012-05-16T04:49:42+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-05-16:posts/2012/05/16/dolgo-sobiralsia-cycles/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Из-за того, что у меня всего 2GiB RAM, а для компиляции самому nvcc
нужно аж 1.8GiB, то его сбросило в своп, ещё было плохой идеей
использовать -j2, лучше вообще в таком случае собирать в 1 поток. И
после 1,5 часа мучений компилятор родил 3 файла по ~400KiB с
расширениями cubin для Cycles. Вот только жаль, что Cycles теперь
поддерживает только CUDA начиная с версии 1.3, а у меня GT218
поддерживает только 1.2, поэтому Blender можно завести только в
Experimental режиме, да и не всё (как пишут) на 1.2 будет нормально
работать. Хотя пока прирост производительности по сравнению с моим
бюджетным atom-ом наблюдаю, но больше собирать сам ночью на этой машине
kernel_sm_13.cubin и т.д. не очень хочу, лучше бы я поспал. Всё равно
пришлось выковыривать ядро Cycles для 1.2 версии из другого
Blender-билда.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp; Одно радует, CUDA у меня работает, OpenCL тоже, всё это нормально
переключается через IronHide (optirun утилиту).&lt;/p&gt;
</summary><category term="CUDA"></category><category term="сборка"></category><category term="blender"></category><category term="1.2"></category><category term="nvidia"></category><category term="ironhide"></category></entry><entry><title>Установка nVidia CUDA Toolkit 4.0 на Ubuntu 11.04</title><link href="/posts/2012/05/15/ustanovka-nvidia-cuda-toolkit-40-na-ubuntu-1104/" rel="alternate"></link><updated>2012-05-15T20:56:42+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-05-15:posts/2012/05/15/ustanovka-nvidia-cuda-toolkit-40-na-ubuntu-1104/</id><summary type="html">&lt;p&gt;Пробую на своём нетбуке, надеюсь, чт ос optirun не будет коллизий.&lt;/p&gt;
</summary></entry><entry><title>Внутренние структуры Blender элементов управления</title><link href="/posts/2012/05/11/vnutrennie-struktury-blender-elementov-upravleniia/" rel="alternate"></link><updated>2012-05-11T02:57:07+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-05-11:posts/2012/05/11/vnutrennie-struktury-blender-elementov-upravleniia/</id><summary type="html">&lt;p&gt;Создание новых GUI элементов для самого пакета Blender стало теперь
получше и их новое решение выглядит с архитектурной точки зрения
корректнее, чем большая функция и груда uiDefBut-функций, которые
управляют одновременно и типами и диапазонами и разметкой. Теперь всё
что связано с типами, контролем и логическим описанием полей находится в
&lt;code class="code"&gt;
source/blender/makesrna/intern/rna _ *.c&lt;/code&gt;
, а всё что с разметкой в
&lt;code class="code"&gt;
source/blender/editors/space _ */ * _window.c&lt;/code&gt;
 файлах. В файлах разметки
можно управлять только рядами, колонками, резиновой вёрсткой через
uiLayoutRow, uiItemR и т.д. Может немного смутить старый код, они его
ещё не весь вычистили, особенно из space_logic, там есть код от вывода
актуаторов старым способом, не стоит обращать на него внимания, он не
используется.&lt;/p&gt;
&lt;p&gt;Больше не приходится писать магические конструкции типа таких:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;uiDefBut(block, TEX, 1, &amp;quot;Imageset: &amp;quot;, &lt;strong&gt;xco+10, yco-44,width-20,19,
&amp;amp;(guia-&amp;gt;layoutname),&lt;/strong&gt;
&lt;strong&gt;0, 63, 0, 0,&lt;/strong&gt; &amp;quot;Imageset name where cursor is present&amp;quot;);&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Где жёстко зашиваешь позицию элемента в блоке и его размеры.&lt;/p&gt;
</summary><category term="blender"></category><category term="bge"></category><category term="программирование"></category><category term="доработка"></category></entry><entry><title>Пришлось вытащить полное дерево</title><link href="/posts/2012/05/06/prishlos-vytashchit-polnoe-derevo/" rel="alternate"></link><updated>2012-05-06T03:55:14+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-05-06:posts/2012/05/06/prishlos-vytashchit-polnoe-derevo/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Желания переносить Blender 2.63 на новый FFmpeg мало, просто хочется
собрать его, а не переписывать, тем более, что я не сильно разбираюсь
как использовать библиотеки от FFmpeg, там множество функций. Поэтому
самым простым решением оказалось сделать git pull, подтянуть весь
репозиторий к себе, там посмотреть git tag, выбрать подходящую версию, я
пока остановился на n0.8.9 и сделать git checkout n0.8.9; а затем
сборка… и покатили!&lt;/p&gt;
</summary><category term="git"></category><category term="сборка"></category><category term="ffmpeg"></category></entry><entry><title>Новый FFmpeg</title><link href="/posts/2012/05/06/novyi-ffmpeg/" rel="alternate"></link><updated>2012-05-06T01:41:48+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-05-06:posts/2012/05/06/novyi-ffmpeg/</id><summary type="html">&lt;p&gt;Разобрался как в коде Blender 2.63 из trunk модифицировать ImBuf под
новую версию FFmpeg из trunk. Ибо функция av_set_parameters уже давно
устарела и была удалена. Теперь чтобы создать параметры и установить (а
затем передать в запись заголовка) необходимо проделать шаги с
использованием av_dict_set (данный пример для переменной типа int):&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;из &lt;strong&gt;source/blender/imbuf/intern/indexer.c&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;...&lt;/div&gt;
&lt;div class="line"&gt;int ffmpeg_quality;&lt;/div&gt;
&lt;div class="line"&gt;AVDictionary *opts = NULL;&lt;/div&gt;
&lt;div class="line"&gt;uint8_t buf[32];&lt;/div&gt;
&lt;div class="line"&gt;...&lt;/div&gt;
&lt;div class="line"&gt;ffmpeg_quality = (int)(1.0f + 30.0f * (1.0f - (float)quality / 100.0f) + 0.5f);&lt;/div&gt;
&lt;div class="line"&gt;&lt;strong&gt;snprintf(buf, sizeof(buf), “%d”, ffmpeg_quality);&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;&lt;strong&gt;av_dict_set&lt;/strong&gt;(&amp;amp;opts, “qmin”, buf, 0);&lt;/div&gt;
&lt;div class="line"&gt;&lt;strong&gt;av_dict_set&lt;/strong&gt;(&amp;amp;opts, “qmax”, buf, 0);&lt;/div&gt;
&lt;div class="line"&gt;...&lt;/div&gt;
&lt;div class="line"&gt;&lt;strong&gt;avformat_write_header&lt;/strong&gt;(rv-&amp;gt;of, &lt;strong&gt;&amp;amp;opts&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;&lt;strong&gt;av_dict_free&lt;/strong&gt;(&amp;amp;opts);&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
</summary><category term="blender"></category><category term="сборка"></category><category term="программирование"></category><category term="ffmpeg"></category><category term="компиляция"></category></entry><entry><title></title><link href="/posts/2012/05/06/urn:ya.ru:post/22199227/1590/" rel="alternate"></link><updated>2012-05-06T01:28:43+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-05-06:posts/2012/05/06/urn:ya.ru:post/22199227/1590/</id><summary type="html">&lt;p&gt;сплошная череда фальшивых пятниц!&lt;/p&gt;
</summary></entry><entry><title></title><link href="/posts/2012/04/28/urn:ya.ru:post/22199227/1588/" rel="alternate"></link><updated>2012-04-28T13:36:43+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-04-28:posts/2012/04/28/urn:ya.ru:post/22199227/1588/</id><summary type="html"></summary></entry><entry><title></title><link href="/posts/2012/04/28/urn:ya.ru:post/22199227/1585/" rel="alternate"></link><updated>2012-04-28T02:18:55+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-04-28:posts/2012/04/28/urn:ya.ru:post/22199227/1585/</id><summary type="html"></summary></entry><entry><title></title><link href="/posts/2012/04/28/urn:ya.ru:post/22199227/1584/" rel="alternate"></link><updated>2012-04-28T02:02:10+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-04-28:posts/2012/04/28/urn:ya.ru:post/22199227/1584/</id><summary type="html">&lt;p&gt;вот пятница была, а работать-то ещё 2 дня до установленных выходных =/&lt;/p&gt;
</summary></entry><entry><title>Фестиваль единоборств "Битва над сожем"</title><link href="/posts/2012/04/28/festival-edinoborstv-bitva-nad-sozhem/" rel="alternate"></link><updated>2012-04-28T13:35:26+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-04-28:posts/2012/04/28/festival-edinoborstv-bitva-nad-sozhem/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Сходил, доволен. Вначале немного было как-то вяло, да и публика ещё
не разогрелась, боксёрским поединком немного недоволен, т.к. работали
они вяло. А с результатами тайского бокса не совсем согласен, хотя
скорее всего я не уловил того, что видели боковые судьи. Каратэ между
девушками было зрелищным, получше, чем между парнями (особенно от того,
что у бойца не получалось хорошо работать ногами, а руками у него было
преимущество, но он не воспользовался им). Смешанные и система K1
прибавили адреналина.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Народу было очень много (по моим подсчётам 1000 человек), я столько
не ожидал, я вообще в &lt;strong&gt;ЦОРе&lt;/strong&gt; был первый раз (отдельное спасибо Славику
и его жене, что заранее заняли места).&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Звуковиков я бы поругал, им следовало поработать над расстановкой
колонок лучше, да и программу организаторам тоже стоило чуть лучше
подумать, а то последнее выступление поставили после зрелищного боя
тяжеловесов (второго раунда не было, т.к. боец сдался, насколько я видел
и понял из-за того, что он сильно получил по печени и решил, что деньги
всё равно и так заплатят, а здоровье бесценно, ему вроде Иван пробил
руками колесо, когда зажал в угол ринга), естественно после просмотра
боя все уже знали, что дальше не будет ничего особенного и стали быстро
расходится.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Закрытие получилось немного смазанным от этого, но с учётом, что я
ничего не потратил на мероприятие, смотрел 3,5 часа всё сидя и со
второго ряда с трибуны, я очень даже доволен. Переживал, что на
транспорт не сяду, но благо все разъехались быстро.&lt;/p&gt;
</summary><category term="Я"></category><category term="бои"></category><category term="жизнь"></category><category term="фестиваль"></category><category term="единоборства"></category></entry><entry><title>Фикс для PyAMF</title><link href="/posts/2012/04/28/fiks-dlia-pyamf/" rel="alternate"></link><updated>2012-04-28T01:34:21+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-04-28:posts/2012/04/28/fiks-dlia-pyamf/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Нашёл проблему в PyAMF, которая мешает нормально работать с
десериализованными из AMF объектами, которые содержат правило synonym в
__amf__, при сериализации оно работает нормально, а вот в обратную
сторону нет. Т.к. это касалось рабочего проекта и исправление нужно
здесь и сейчас, то не дожидаясь пока его исправят разработчики, я
поправил сам. Просто форкнул репозиторий проекта и исправил
&lt;a class="reference external" href="https://github.com/IMDagger/pyamf"&gt;тут&lt;/a&gt;. Чуть позже отправлю
pull-запрос разработчикам, надеюсь они примут мои исправления. Т.к. это
была явная ошибка в тесте и проблема с copy&amp;amp;paste в коде.&lt;/p&gt;
</summary><category term="__amf__"></category><category term="synonym"></category><category term="исправление"></category><category term="python"></category><category term="ошибка"></category><category term="pyamf"></category></entry><entry><title>Flash socket блокировался антивирусами</title><link href="/posts/2012/04/22/flash-socket-blokirovalsia-antivirusami/" rel="alternate"></link><updated>2012-04-22T10:02:40+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-04-22:posts/2012/04/22/flash-socket-blokirovalsia-antivirusami/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Неожиданная проблема с тем, что у некоторых игроков не отображались
обновления, разрешилась. Сузив круг виновных приложений и платформ,
выяснилось, что это антивирус. При чём Kaspersky и Avast себя вели
достаточно одинаково — блокировали запрос из Flash без каки-либо
собщений пользователю и отметов в журнале событий. Такое молчаливое
поведение достаточно странно. Но после продолжительных поисков
выяснилось, что достаточно сменить порт для соединения с 80-го. В nginx
было выставлено дополнительно слушать 81-ый порт. После этого проблема с
Flash и его socket соединением решилась.&lt;/p&gt;
</summary><category term="антивирус"></category><category term="flash"></category><category term="программирование"></category><category term="сокет"></category><category term="работа"></category></entry><entry><title></title><link href="/posts/2012/04/19/urn:ya.ru:post/22199227/1580/" rel="alternate"></link><updated>2012-04-19T00:09:29+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-04-19:posts/2012/04/19/urn:ya.ru:post/22199227/1580/</id><summary type="html">&lt;p&gt;надеюсь будут перемены&lt;/p&gt;
</summary></entry><entry><title>Celery для игрового мира</title><link href="/posts/2012/04/19/celery-dlia-igrovogo-mira/" rel="alternate"></link><updated>2012-04-19T00:08:06+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-04-19:posts/2012/04/19/celery-dlia-igrovogo-mira/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Надесь Celery в режиме gevent сможет выступить в роли менеджера
задач игровых миров, было бы неплохо из WEB-части порождать отдельную
задачу, которая обслуживает и обновляет состояние игрового мира в Redis.
Т.е. по небольшой группе микропотоков на игровой мир, где будут
существовать игроки и отправлять в него события. Эдакая модель акторов
на Python с супервизором Celery.&lt;/p&gt;
</summary><category term="Celery"></category><category term="игра"></category><category term="мультиплеер"></category><category term="gevent"></category><category term="микропоток"></category><category term="python"></category></entry><entry><title>Подружил TextureAtlas, AssetManager и мультизагрузку</title><link href="/posts/2012/04/14/podruzhil-textureatlas-assetmanager-i-multizagruzku/" rel="alternate"></link><updated>2012-04-14T01:49:28+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-04-14:posts/2012/04/14/podruzhil-textureatlas-assetmanager-i-multizagruzku/</id><summary type="html">&lt;p&gt;Одним из преимуществ libGDX является то, что реально писать
приложение на PC, отлаживать большую часть приложения на PC без
эмулятора смартфона. Но есть особенность в том, где ищет библиотека
ресурсы на PC платформе и на Android. &lt;code class="code"&gt;
Gdx.files.internal&lt;/code&gt;
 для PC ищет
данные начиная с корня приложения, а на платформе Android начиная с
директории assets.&lt;/p&gt;
&lt;p&gt;Это создаёт небольшие неудобства для унификации и отладки. Хотелось
бы свободно заливать, запускать и не думать сильно о платформе. А ещё
управлять удобно загруженными ресурсами, поддерживать связи между ними,
выгружать. Со всем этим помогает объект класса AssetManager.&lt;/p&gt;
&lt;p&gt;Поэтому удобно немного расширить его поведение и указать, где
искать необходимые файлы. Когда я попытался создать свой резолвер и
просто добавлять assets/ для случая PC-платформу, то наткнулся на
проблему с загрузкой TextureAtlas. Сам pack-файл загружался прекрасно, а
вот уже изображения указанные в нём загружались как assets/assets/*,
что было некорректно и не приемлемо. Поэтому пришла простая мысль
проверять начинается ли путь с assets/ и, если это так, то не добавлять
префикс ещё раз:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
    &lt;span class="pgcss-kd"&gt;protected&lt;/span&gt; &lt;span class="pgcss-kd"&gt;class&lt;/span&gt; &lt;span class="pgcss-nc"&gt;MultiResolver&lt;/span&gt; &lt;span class="pgcss-kd"&gt;extends&lt;/span&gt; &lt;span class="pgcss-n"&gt;InternalFileHandleResolver&lt;/span&gt;
&lt;span class="pgcss-o"&gt;{&lt;/span&gt;
        &lt;span class="pgcss-kd"&gt;public&lt;/span&gt; &lt;span class="pgcss-n"&gt;FileHandle&lt;/span&gt; &lt;span class="pgcss-nf"&gt;resolve&lt;/span&gt; &lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;String&lt;/span&gt; &lt;span class="pgcss-n"&gt;fileName&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Gdx&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;app&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;getType&lt;/span&gt;&lt;span class="pgcss-o"&gt;()&lt;/span&gt; &lt;span class="pgcss-o"&gt;!=&lt;/span&gt; &lt;span class="pgcss-n"&gt;Application&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ApplicationType&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;Android&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;
                &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-o"&gt;(!&lt;/span&gt;&lt;span class="pgcss-n"&gt;fileName&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;startsWith&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;assets/&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;))&lt;/span&gt;
                    &lt;span class="pgcss-n"&gt;fileName&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;quot;assets/&amp;quot;&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt; &lt;span class="pgcss-n"&gt;fileName&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
            &lt;span class="pgcss-o"&gt;}&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-kd"&gt;super&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;resolve&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;fileName&lt;/span&gt;&lt;span class="pgcss-o"&gt;);&lt;/span&gt;
        &lt;span class="pgcss-o"&gt;}&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;}&lt;/span&gt;

    &lt;span class="pgcss-kd"&gt;public&lt;/span&gt; &lt;span class="pgcss-kt"&gt;void&lt;/span&gt; &lt;span class="pgcss-nf"&gt;error&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;String&lt;/span&gt; &lt;span class="pgcss-n"&gt;fileName&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;Class&lt;/span&gt; &lt;span class="pgcss-n"&gt;type&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;Throwable&lt;/span&gt; &lt;span class="pgcss-n"&gt;throwable&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;Gdx&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;app&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;error&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;RESOURCE&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;quot;Problem with file &amp;quot;&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt; &lt;span class="pgcss-n"&gt;fileName&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;quot; class &amp;quot;&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt; &lt;span class="pgcss-n"&gt;type&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;quot; &amp;quot;&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt; &lt;span class="pgcss-n"&gt;throwable&lt;/span&gt;&lt;span class="pgcss-o"&gt;);&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;}&lt;/span&gt;

    &lt;span class="pgcss-kd"&gt;public&lt;/span&gt; &lt;span class="pgcss-nf"&gt;MediaLoader&lt;/span&gt;&lt;span class="pgcss-o"&gt;()&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;manager&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-k"&gt;new&lt;/span&gt; &lt;span class="pgcss-n"&gt;AssetManager&lt;/span&gt;&lt;span class="pgcss-o"&gt;();&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;manager&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;setErrorListener&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;this&lt;/span&gt;&lt;span class="pgcss-o"&gt;);&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;manager&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;setLoader&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;BitmapFont&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;class&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-k"&gt;new&lt;/span&gt; &lt;span class="pgcss-n"&gt;BitmapFontLoader&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;new&lt;/span&gt; &lt;span class="pgcss-n"&gt;MultiResolver&lt;/span&gt;&lt;span class="pgcss-o"&gt;())&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;manager&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;setLoader&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Music&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;class&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-k"&gt;new&lt;/span&gt; &lt;span class="pgcss-n"&gt;MusicLoader&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;new&lt;/span&gt; &lt;span class="pgcss-n"&gt;MultiResolver&lt;/span&gt;&lt;span class="pgcss-o"&gt;())&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;manager&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;setLoader&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Pixmap&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;class&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-k"&gt;new&lt;/span&gt; &lt;span class="pgcss-n"&gt;PixmapLoader&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;new&lt;/span&gt; &lt;span class="pgcss-n"&gt;MultiResolver&lt;/span&gt;&lt;span class="pgcss-o"&gt;())&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;manager&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;setLoader&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Sound&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;class&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-k"&gt;new&lt;/span&gt; &lt;span class="pgcss-n"&gt;SoundLoader&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;new&lt;/span&gt; &lt;span class="pgcss-n"&gt;MultiResolver&lt;/span&gt;&lt;span class="pgcss-o"&gt;())&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;manager&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;setLoader&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;TextureAtlas&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;class&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-k"&gt;new&lt;/span&gt; &lt;span class="pgcss-n"&gt;TextureAtlasLoader&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;new&lt;/span&gt; &lt;span class="pgcss-n"&gt;MultiResolver&lt;/span&gt;&lt;span class="pgcss-o"&gt;())&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;manager&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;setLoader&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Texture&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;class&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-k"&gt;new&lt;/span&gt; &lt;span class="pgcss-n"&gt;TextureLoader&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;new&lt;/span&gt; &lt;span class="pgcss-n"&gt;MultiResolver&lt;/span&gt;&lt;span class="pgcss-o"&gt;())&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;manager&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;setLoader&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Skin&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;class&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-k"&gt;new&lt;/span&gt; &lt;span class="pgcss-n"&gt;SkinLoader&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;new&lt;/span&gt; &lt;span class="pgcss-n"&gt;MultiResolver&lt;/span&gt;&lt;span class="pgcss-o"&gt;())&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;manager&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;setLoader&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;TileMapRenderer&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;class&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-k"&gt;new&lt;/span&gt; &lt;span class="pgcss-n"&gt;TileMapRendererLoader&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;new&lt;/span&gt; &lt;span class="pgcss-n"&gt;MultiResolver&lt;/span&gt;&lt;span class="pgcss-o"&gt;())&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;}&lt;/span&gt;
&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Возможно есть более красивые и грамотные решения, но меня и это
вполне устраивает. Тем более, что я не собираюсь создавать вложенные
assets директории. В примерах от libGDX перед pack-файлом принудительно
указывают требование на загрузку изображения от этого pack-файла, но
видимо там это сделано лишь для примера, т.к. реальной необходимости в
этом нет.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-n"&gt;manager&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;load&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;planet/pack&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;TextureAtlas&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;class&lt;/span&gt;&lt;span class="pgcss-o"&gt;);&lt;/span&gt;
&lt;span class="pgcss-c1"&gt;// ... когда всё загрузилось и готово&lt;/span&gt;
&lt;span class="pgcss-n"&gt;atlas&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;manager&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;get&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;planet/pack&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;TextureAtlas&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;class&lt;/span&gt;&lt;span class="pgcss-o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</summary><category term="программирование"></category><category term="libGDX"></category><category term="менеджер"></category><category term="ресурсы"></category><category term="платформы"></category><category term="унификация"></category><category term="атлас"></category></entry><entry><title></title><link href="/posts/2012/04/14/urn:ya.ru:post/22199227/1576/" rel="alternate"></link><updated>2012-04-14T01:30:08+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-04-14:posts/2012/04/14/urn:ya.ru:post/22199227/1576/</id><summary type="html">&lt;p&gt;достигнута точка кипения мозга&lt;/p&gt;
</summary></entry><entry><title>Небольшие загвоздки с сокетом</title><link href="/posts/2012/04/09/nebolshie-zagvozdki-s-soketom/" rel="alternate"></link><updated>2012-04-09T01:26:32+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-04-09:posts/2012/04/09/nebolshie-zagvozdki-s-soketom/</id><summary type="html">&lt;p&gt;Придётся ещё на сервере открыть 843 порт и отдавать там файл
crossdomain.xml, т.к. того требует Flash socket policy, эх… а я думал,
что подводных камней вообще не будет :) Нашёл вот
&lt;a class="reference external" href="http://www.adobe.com/devnet/flashplayer/articles/socket_policy_files.html"&gt;тут&lt;/a&gt;,
что и к чему и почему.&lt;/p&gt;
</summary><category term="flash"></category><category term="трудность"></category><category term="программирование"></category><category term="сокет"></category><category term="порт"></category></entry><entry><title>ICFPC 2012</title><link href="/posts/2012/04/04/icfpc-2012/" rel="alternate"></link><updated>2012-04-04T01:32:20+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-04-04:posts/2012/04/04/icfpc-2012/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Ура! Организаторы ICFP Programming Contest определились с датой
проведения, надеюсь, что с 13 по 16 июля я смогу принять участие в
соревновании, нужно будет ещё подготовиться к этому мероприятию, как
только появится более подробная информация по требованиям.
The ICFP Programming Contest dates have been announced. The contest will
run from Friday 13 July 12:00 GMT to Monday 16 July 12:00 GMT.&lt;/p&gt;
</summary><category term="соревнование"></category><category term="радость"></category><category term="жизнь"></category><category term="программирование"></category><category term="icfpc"></category></entry><entry><title>Эксперимент прошёл успешно</title><link href="/posts/2012/03/31/eksperiment-proshiol-uspeshno/" rel="alternate"></link><updated>2012-03-31T02:43:37+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-03-31:posts/2012/03/31/eksperiment-proshiol-uspeshno/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Очень большой поток сообщений через chunked канал мы не проверяли,
но всё работает отлично. События передаются, только, т.к. Flash часть
без Flex, то нужно чтобы списки не передавались как
flex.messaging.io.ArrayCollection, т.к. они только во Flex есть. Поэтому
нужно, чтобы &lt;strong&gt;pyamf.amf3.use_proxies_default&lt;/strong&gt; был равен &lt;strong&gt;False&lt;/strong&gt;.
Так же стоит выставить заголовки, чтобы промежуточные прокси-сервера,
если таковые имеются не изменяли содержимое и не кэшировали его, т.к.
это всё таки события из игровой системы. И не очень бы хотелось, чтобы
игрок вошёл в игру и случилось дежавю.&lt;/p&gt;
&lt;blockquote&gt;
…
Cache-Control: no-cache, no-transform
…&lt;/blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Ещё забавно, когда из браузера обращается к обработчику, то
начинается скачиванием бинарного файла с AMF-объектами, и он может
скачиваться бесконечно.&lt;/p&gt;
</summary><category term="программирование"></category><category term="радость"></category><category term="HTTP"></category><category term="python"></category><category term="сериализация"></category><category term="pyamf"></category><category term="flash"></category><category term="работа"></category><category term="flex"></category></entry><entry><title>Соединение Flash &lt;-&gt; Python, AMF и другие товарищи</title><link href="/posts/2012/03/30/soedinenie-flash-python-amf-i-drugie-tovarishchi/" rel="alternate"></link><updated>2012-03-30T00:26:26+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-03-30:posts/2012/03/30/soedinenie-flash-python-amf-i-drugie-tovarishchi/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Дабы не строить свой TCP-сервер и не разрабатывать свой протокол для
того, чтобы обмениваться с Flash в &lt;strong&gt;двустороннем порядке&lt;/strong&gt; при помощи
AMF-пакетов, мы сошлись на варианте с двумя соединениями. Одно
соединение для получения событий из системы (1), а второй канал (2)
используется через NetConnection и создан для отправки call из Flash. Из
игры отправляется некоторый запрос по каналу (2), который является
HTTP-запросом, соединение удерживается и в рамках одного соединения
происходит много HTTP-запросов. Затем call обрабатывается на сервере и
происходят проверки корректности, событие заносится в очередь или
исполняется сразу же (в зависимости от необходимого времени для
события), ответ возвращается в AMF-формате обратно клиенту.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Затем в системе происходят события, и необходимо оповестить игрока
об этом. Обработчик обслуживающий (2) канал начинает отдавать события по
HTTP клиенту в режиме &lt;em&gt;Transfer-Encoding: chunked&lt;/em&gt;, каждый пакет это
одно событие системы. Flash их обрабатывает и отображает игроку.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Такой подход позволил использовать стандартный pywsgi.WSGIHandler из
gevent, при этом получить быстрый канал оповещения с минимальными
накладными расходами. Chunked режим всего требует несколько байт для
отделения длины от пакета и немного символов для описания самой длины в
HEX. Требуется из Flash подключаться при помощи обычного сокета и
пересылать немного HTTP-заголовков для инициализации сессии. Посмотрим
насколько оправдает себя такой подход, чем то напоминает спутниковый
интернет.&lt;/p&gt;
</summary><category term="HTTP"></category><category term="python"></category><category term="flash"></category><category term="работа"></category><category term="chunked"></category><category term="wsgi"></category></entry><entry><title></title><link href="/posts/2012/03/09/urn:ya.ru:post/22199227/1566/" rel="alternate"></link><updated>2012-03-09T02:23:51+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-03-09:posts/2012/03/09/urn:ya.ru:post/22199227/1566/</id><summary type="html">&lt;p&gt;небольшая перегрузка&lt;/p&gt;
</summary></entry><entry><title>Facebook и scrolling="yes"</title><link href="/posts/2012/02/25/facebook-i-scrollingyes/" rel="alternate"></link><updated>2012-02-25T00:05:10+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-02-25:posts/2012/02/25/facebook-i-scrollingyes/</id><summary type="html">&lt;p&gt;Старые приложения, которые были зарегистрированы до 2011 года на
Facebook отображаются в iframe нормально. А вот в новых в Opera и
Firefox появляется горизонтальный скролл, причём в нём нет необходимости
и он выключен. Долгие рысканья по интернету не дали точного ответа,
везде указывалось, что нужно прописать в CSS для случая переполнения
отсекание содержимого. Не помогали и setAutoSize и новый setAutoGrow.
Смущало то, что старые и новые приложения имели похожий код стилей.&lt;/p&gt;
&lt;p&gt;Было явно видно, что не в стилях проблема, т.к. для старых
приложений код приходил от Facebook для iframe с scrolling=“no”, а для
новых с yes. Поиски ничего не давали. Сравнив опции, на первый взгляд,
нескольких приложений существенных различий я не обнаружил.&lt;/p&gt;
&lt;p&gt;Но вот какой-то момент потребовалось для шаблона включить Width в
режим Fluid, что было благополучно сделано. Естественно на
горизонтальный скролл это никак не повлияло (я это и ранее проверял). Но
вдруг я заметил, что для старого приложения высота фиксированная, а для
нового нет. Закралось чувство, что вот она проблема.&lt;/p&gt;
&lt;p&gt;И действительно, переключив высоту Height c Fluid на Fixed,
&lt;strong&gt;горизонтальный&lt;/strong&gt; скролл исчез. И Facebook перестал выдавать
scrolling=“yes”, похоже, что плавающая высота работает у Facebook как-то
странно.&lt;/p&gt;
</summary><category term="скролл"></category><category term="проблема"></category><category term="facebook"></category><category term="решение"></category><category term="fluid"></category><category term="scrolling"></category><category term="высота"></category><category term="браузеры"></category><category term="горизонтальный"></category><category term="iframe"></category></entry><entry><title>Наследование блоков в Cheetah</title><link href="/posts/2012/02/17/nasledovanie-blokov-v-cheetah/" rel="alternate"></link><updated>2012-02-17T18:59:15+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-02-17:posts/2012/02/17/nasledovanie-blokov-v-cheetah/</id><summary type="html">&lt;p&gt;Столкнулся с проблемой, что есть блок &lt;code class="code"&gt;
#block … #end block&lt;/code&gt;
 и
шаблон &lt;em&gt;base&lt;/em&gt;, его расширяет шаблон &lt;em&gt;base_ex&lt;/em&gt;t при помощи
&lt;code class="code"&gt;
#extends&lt;/code&gt;
, а его в свою очередь расширяет шаблон &lt;em&gt;application&lt;/em&gt;. Я
хотел в &lt;em&gt;base_ext&lt;/em&gt; добавить обрамляющий &lt;code class="code"&gt;
&amp;lt;div&amp;gt;&lt;/code&gt;
 для блока из &lt;em&gt;base&lt;/em&gt;, но
не трогать базовый шаблон. Т.е. просто унаследовать метод и вызывать
метод предка. Помогла вот
такая &lt;a class="reference external" href="http://base-art.net/Articles/44/"&gt;техника&lt;/a&gt; с &lt;code class="code"&gt;
$self&lt;/code&gt;
 (хотя
там в примере используется &lt;code class="code"&gt;
#def&lt;/code&gt;
, но это не влияет на подход к
решению проблемы).&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;base.tmpl:&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-x"&gt;...&lt;/span&gt;
&lt;span class="pgcss-cp"&gt;#block&lt;/span&gt; &lt;span class="pgcss-n"&gt;external_block&lt;/span&gt;&lt;span class="pgcss-x"&gt;&lt;/span&gt;
&lt;span class="pgcss-x"&gt;    ...&lt;/span&gt;
&lt;span class="pgcss-cp"&gt;#end block&lt;/span&gt;&lt;span class="pgcss-x"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;base_ext.tmpl:&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-cp"&gt;#import&lt;/span&gt; &lt;span class="pgcss-n"&gt;templates&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;base&lt;/span&gt;&lt;span class="pgcss-x"&gt;&lt;/span&gt;
&lt;span class="pgcss-cp"&gt;#extends&lt;/span&gt; &lt;span class="pgcss-n"&gt;templates&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;base&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;base&lt;/span&gt;&lt;span class="pgcss-x"&gt;&lt;/span&gt;
&lt;span class="pgcss-cp"&gt;#block&lt;/span&gt; &lt;span class="pgcss-n"&gt;external_block&lt;/span&gt;&lt;span class="pgcss-x"&gt;&lt;/span&gt;
&lt;span class="pgcss-x"&gt;    &amp;lt;div&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-x"&gt;        templates.base_ext.base(&lt;/span&gt;&lt;span class="pgcss-cp"&gt;$&lt;/span&gt;&lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-x"&gt;)&lt;/span&gt;
&lt;span class="pgcss-x"&gt;    &amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-cp"&gt;#end block&lt;/span&gt;&lt;span class="pgcss-x"&gt;&lt;/span&gt;
&lt;span class="pgcss-x"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/blockquote&gt;
</summary><category term="проблема"></category><category term="наследование"></category><category term="решение"></category><category term="python"></category><category term="расширение"></category><category term="шаблон"></category><category term="Cheetah"></category></entry><entry><title>Unit-тесты для libGDX</title><link href="/posts/2012/02/17/unit-testy-dlia-libgdx/" rel="alternate"></link><updated>2012-02-17T16:11:02+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-02-17:posts/2012/02/17/unit-testy-dlia-libgdx/</id><summary type="html">&lt;p&gt;Порой тесты поясняют суть библиотеки даже лучше, чем любая документация
и туториалы.&lt;/p&gt;
</summary><category term="код"></category><category term="ссылка"></category><category term="libGDX"></category><category term="программирование"></category><category term="тестирование"></category></entry><entry><title>Странная кнопка</title><link href="/posts/2012/02/16/strannaia-knopka/" rel="alternate"></link><updated>2012-02-16T01:29:16+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-02-16:posts/2012/02/16/strannaia-knopka/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; У меня беспроводная мышь &lt;strong&gt;esperanza EM106&lt;/strong&gt;, сегодня случайно
обнаружил на стороне, где расположен оптический элемент рядом с
переключателем включения/выключения мыши ещё одну кнопку. Она круглая и
средних размеров, но немного утоплена в корпус, чтобы случайно не нажать
и во время работы не мешала. Эта кнопка точно не для замены батареек,
т.к. такая уже есть и она больше и жёстче. Включение и выключение тоже
ясно где, да и подписано. А что это за кнопка не ясно, круглая чёрная,
неприметная.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Экспериментально я смог выяснить, что при нажатии на данную кнопку
мышь отключается приблизительно на 10 секунд и больше не реагирует на
внешние раздражители. Затем снова происходит инициализация, как при
включении. Вердикт: &lt;strong&gt;*возможно*&lt;/strong&gt; это кнопка перезапуска внутреннего
контроллера (хотя неужели они сделали такую мышь, что она может
зависнуть?).&lt;/p&gt;
</summary><category term="беспроводная"></category><category term="выключение"></category><category term="мышь"></category><category term="странно"></category><category term="кнопка"></category><category term="интересно"></category></entry><entry><title>Неуловимый Опечатко</title><link href="/posts/2012/02/14/neulovimyi-opechatko/" rel="alternate"></link><updated>2012-02-14T02:14:13+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-02-14:posts/2012/02/14/neulovimyi-opechatko/</id><summary type="html">&lt;p&gt;Минут 25 (может даже больше, если считать, что я проблему увидел
раньше, но решил исправить более приоритетные и понятные) потратил на
поиски, почему один java-файл не компилируется. Смотрю в название класса
в libGDX написано название, смотрю в класс, который его использует вроде
тоже самое. А начинаю компилировать, выпадает ошибка:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
[javac] MailBox.java:22: cannot find symbol
[javac] symbol  : class IndentityMap
[javac] location: class by.sweetpair.longtrip.notifications.MailBox
[javac]         qSlots = new IndentityMap&amp;lt;String, AtomicQueue&amp;lt;Object&amp;gt;&amp;gt;();
[javac]                      ^
&lt;/pre&gt;
&lt;p&gt;Сижу туплю, туплю, пытаюсь найти более сложное объяснение, почему
оно не компилируется. Не могу поверить, что тут может быть опечатка,
ведь разве я мог опечататься в слове IdentityMap? I..den..tity, что?
Ооопс, а у меня закралась незаметная буква N после буквы I Наверное пара
identity и indentity одна из частых неуловимых опечаток Хотя я помню,
что идентификация пишется без буквы эн после и, но часто на автомате
пишу это слово как отступ (indent).&lt;/p&gt;
</summary><category term="программирование"></category><category term="IdentityMap"></category><category term="java"></category><category term="название"></category><category term="libGDX"></category><category term="опечатка"></category><category term="класс"></category><category term="забавно"></category></entry><entry><title>Проблема с "," опять преследует</title><link href="/posts/2012/02/13/problema-s-opiat-presleduet/" rel="alternate"></link><updated>2012-02-13T21:18:33+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-02-13:posts/2012/02/13/problema-s-opiat-presleduet/</id><summary type="html">&lt;p&gt;В JavaScript не следует в словарях после описания последнего
элемента ставить лишнюю запятую. Особенно плохо от этого становится IE.
Пришлось проверить код при помощи небольшого выражения для grep:&lt;/p&gt;
&lt;blockquote&gt;
$ grep -Przo &amp;quot;(?s),\s*}&amp;quot; --include=&amp;quot;*.js&amp;quot; htdocs/&lt;/blockquote&gt;
&lt;p&gt;Оно не учитывает, что между запятой и последующей скобкой может быть
комментарий, но это и не сильно важно для быстрой грязной проверки. А
вообще следует использовать jslint, что я теперь и буду делать.&lt;/p&gt;
</summary><category term="ошибка"></category><category term="issue"></category><category term="comma"></category><category term="словарь"></category><category term="запятая"></category><category term="grep"></category><category term="поиск"></category><category term="javascript"></category><category term="IE"></category></entry><entry><title>Покрываюсь инеем</title><link href="/posts/2012/02/11/pokryvaius-ineem/" rel="alternate"></link><updated>2012-02-11T00:16:35+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-02-11:posts/2012/02/11/pokryvaius-ineem/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/446512"&gt;&lt;img alt="Покрываюсь инеем" src="http://img-fotki.yandex.ru/get/4510/22199227.a/0_6d030_ce8a88c5_-1-L" title="Покрываюсь инеем"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Всего 15 минут на улице и я уже начинаю покрываться инеем&lt;/p&gt;</summary><category term="иней"></category><category term="мороз"></category><category term="борода"></category><category term="жизнь"></category><category term="улица"></category></entry><entry><title></title><link href="/posts/2012/02/06/urn:ya.ru:post/22199227/1546/" rel="alternate"></link><updated>2012-02-06T01:58:06+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-02-06:posts/2012/02/06/urn:ya.ru:post/22199227/1546/</id><summary type="html">&lt;p&gt;нужно улучшать иммунную систему&lt;/p&gt;
</summary></entry><entry><title>Как бы сложилось?</title><link href="/posts/2012/02/06/kak-by-slozhilos/" rel="alternate"></link><updated>2012-02-06T01:55:59+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-02-06:posts/2012/02/06/kak-by-slozhilos/</id><summary type="html">&lt;p&gt;Интересно, чтобы случилось и как бы сложилась моя карьера и личная
жизнь, если бы не стал программировать на Python. Помню я на него
посмотрел ещё в 2005 году, всё что у меня было — стандартная
документация поставляемая с пакетом из дистрибутива. Тогда я взглянул на
него и он мне показался каким-то сложноватым :) Хотя про сам язык я слышал
и раньше он старших ребят, я тогда ещё учился в школе. В 2006 году мне
попался на глаза Lua, и очень понравился. Так прошёл год разработки на
нём, а может чуть больше или меньше. Язык мне понравился, прототипная
модель тоже, до него я с такой не сталкивался. Но не хватало «батареек».
И тут я ещё раз взглянул на Python, и понеслось. Он стал для меня
понятнее и приятнее, роднее, чем раньше сразу в 2005. Оказалось, что в
комплекте с ним идёт очень много удобных библиотек, а главное интуитивно
понятных, как и сам язык. Так он меня и завёл на проекты Slide Inc., а
затем Google Slide Inc. после поглощения. А так же он повлиял на мою
личную жизнь, т.к. я бы не встретил тех людей, которых встретил,
вращаясь в этой области.&lt;/p&gt;
</summary><category term="Я"></category><category term="бредни"></category><category term="жизнь"></category><category term="программирование"></category><category term="python"></category></entry><entry><title></title><link href="/posts/2012/01/24/urn:ya.ru:post/22199227/1541/" rel="alternate"></link><updated>2012-01-24T23:35:33+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-01-24:posts/2012/01/24/urn:ya.ru:post/22199227/1541/</id><summary type="html">&lt;p&gt;нужно придерживаться режима сна&lt;/p&gt;
</summary></entry><entry><title>Opera, jQuery и POST</title><link href="/posts/2012/01/24/opera-jquery-i-post/" rel="alternate"></link><updated>2012-01-24T23:33:18+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-01-24:posts/2012/01/24/opera-jquery-i-post/</id><summary type="html">&lt;p&gt;Обнаружил сегодня, что запросы из jQuery с использованием метода
POST, если data является пустым словарём (т.е. никаких аргументов не
передаём), то Opera выставляет Content-Type: text/xml; encoding=utf-8, и
это негативно сказывается на cgi.py из стандартной библиотеки Python.
Стандартный библиотечный FieldStorage решает, что нужно попробовать
считать аргумент как есть, т.к. тип данных не ясен. Но данные реально
отсутствуют и последующие попытки проверки параметров при помощи
has_key проваливаются, т.к. внутри стоит специальная проверка на такие
None случаи неполной инициализации. Вот код из cgi.py из Python 2.7.2,
который проверяет тип содержимого:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-o"&gt;...&lt;/span&gt;

&lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;ctype&lt;/span&gt; &lt;span class="pgcss-o"&gt;==&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;application/x-www-form-urlencoded&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
    &lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;read_urlencoded&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
&lt;span class="pgcss-k"&gt;elif&lt;/span&gt; &lt;span class="pgcss-n"&gt;ctype&lt;/span&gt;&lt;span class="pgcss-p"&gt;[:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;10&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt; &lt;span class="pgcss-o"&gt;==&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;multipart/&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
    &lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;read_multi&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;environ&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;keep_blank_values&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;strict_parsing&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-k"&gt;else&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
    &lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;read_single&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;

&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Как лечится? В принципе есть несколько путей решения проблемы:
добавить фиктивный параметр равный null в POST запросе из jQuery (что
прекрасно решает проблему без дополнительных телодвижений), унаследовать
FieldStorage и расширить его функционал, чтобы он обрабатывал случай для
text/xml (что не особо хочется).&lt;/p&gt;
&lt;p&gt;Я выбрал первый вариант и мне стало получше, правда наверное нужно
для непонятных типов содержимого отвечать клиенту каким-нибудь особым
HTTP-кодом.&lt;/p&gt;
</summary><category term="ошибка"></category><category term="xml"></category><category term="jquery"></category><category term="opera"></category><category term="POST"></category><category term="python"></category><category term="CGI"></category></entry><entry><title></title><link href="/posts/2012/01/17/urn:ya.ru:post/22199227/1537/" rel="alternate"></link><updated>2012-01-17T10:53:29+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-01-17:posts/2012/01/17/urn:ya.ru:post/22199227/1537/</id><summary type="html">&lt;p&gt;Опять выходные болел :( Скорее всего отравление было&lt;/p&gt;
</summary></entry><entry><title>Ironhide и работа от батареи</title><link href="/posts/2012/01/17/ironhide-i-rabota-ot-batarei/" rel="alternate"></link><updated>2012-01-17T10:52:48+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-01-17:posts/2012/01/17/ironhide-i-rabota-ot-batarei/</id><summary type="html">&lt;p&gt;Вчера попытался запустить optirun на нетбуке, не подключённом к сети
в режиме работы от аккумулятора. glxinfo показал, что работает драйвер
от intel, т.е. не дискретная карта, а встроенная. Без запуска через
optirun аналогично. Я начал воевать с этим :) Уже активировал,
переконфигурировал, и всё не помогало. А затем мне пришла мысль в
голову, что так всё и задумано, что Optimus включится, когда я переведу
нетбук на более продолжительный источник энергии.&lt;/p&gt;
&lt;p&gt;После подключения блока питания к нетбуку optirun glxinfo резко стал
показывать уже информацию о драйверах для Ion2. В принципе меня такой
режим устраивает, главное, что я теперь знаю, когда какая из карт
используется и что будет поедать мой заряд.&lt;/p&gt;
</summary><category term="asus"></category><category term="intel"></category><category term="карта"></category><category term="linux"></category><category term="optirun"></category><category term="optimus"></category><category term="nvidia"></category><category term="ironhide"></category><category term="eeepc"></category></entry><entry><title>PPPoE и byfly</title><link href="/posts/2012/01/12/pppoe-i-byfly/" rel="alternate"></link><updated>2012-01-12T23:24:02+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-01-12:posts/2012/01/12/pppoe-i-byfly/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; При подключении через pppd со стороны byfly выдавалась ошибка
подключения с Access denied и что-то говорилось про неверный логин или
пароль. Множество раз перепроверив пароль и их логин, который
заканчивается на &amp;#64;beltel.by, наши мозги утверждали, что всё правильно.
Звонок с запросом баланса и подключили ли они нам всё, дал положительный
ответ. Но сервер продолжал упорно отказываться подключиться, хотя с
модема удалось поднять соединение, но нас такой вариант не устраивал,
т.к. тогда сложнее балансировать каналы.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Рысканье по интернету давало много ответов, что нужно вписать для
byfly в конфигурационный файл pppd для данного подключения, но ничего не
помогало, только смущало, что у некоторых прописана строка на загрузку
модуля &lt;strong&gt;rp-pppoe.so&lt;/strong&gt; Оказалось, что авторизация не проходит без
загрузки данного модуля, достаточно было использовать стандартные
настройки peers от pppd и добавить:&lt;/p&gt;
&lt;blockquote&gt;
plugin rp-pppoe.so eth3 # eth3 — сетевая карта, куда подключён модем
к серверу в режиме bridge&lt;/blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Эта строка всё решила.&lt;/p&gt;
</summary><category term="ошибка"></category><category term="PPPoE"></category><category term="соединение"></category><category term="авторизация"></category><category term="интернет"></category><category term="byfly"></category><category term="плагин"></category><category term="работа"></category></entry><entry><title>Ironehide и ASUS EeePC 1215N</title><link href="/posts/2012/01/11/ironehide-i-asus-eeepc-1215n/" rel="alternate"></link><updated>2012-01-11T17:27:39+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-01-11:posts/2012/01/11/ironehide-i-asus-eeepc-1215n/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Теперь я смог оседлать Nvidia Optimus, в Ubuntu 11.10 после добавки
ppa, как описано &lt;a class="reference external" href="http://kubuntu.ru/node/9078"&gt;здесь&lt;/a&gt; мне ещё
пришлось убрать nouveau драйвер и переключиться на nvidia драйвер. При
чём как-то с первого раза не вышло, я уже даже подумал, что всё …
приехали, но потом отлегло. Ещё пока только не проверят bluetooth на
своей машинке, надеюсь он тоже заработает без особых мучений. Пока всё
заработало меньше, чем с полпинка. Без особых гуглений и тервотрёпки.&lt;/p&gt;
</summary><category term="asus"></category><category term="linux"></category><category term="optimus"></category><category term="nvidia"></category><category term="ironhide"></category><category term="blumblebee"></category><category term="eeepc"></category></entry><entry><title>Купил себе ASUS EeePC 1215N</title><link href="/posts/2012/01/11/kupil-sebe-asus-eeepc-1215n/" rel="alternate"></link><updated>2012-01-11T03:04:19+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-01-11:posts/2012/01/11/kupil-sebe-asus-eeepc-1215n/</id><summary type="html">&lt;p&gt;Купил сабж в интернет-магазине redmarket.by, было приятно, что цена
у них была относительно невысокая и товар в наличии, а когда сказали,
что доставят прямо на следующий день, то меня переполнила радость.
Сегодня товар оперативно доставили, я даже не успел настроится на
рабочий лад. Пока полёт нормальный и я доволен, ощущения как от
ноутбука, который брал когда-то в командировку, поэтому переодически не
покидает беспокойство, что у меня заберут и это назад :) Поверхность
реально пачкается от пальцев, но меня это не напрягает, я всегда могу
его протереть салфетками для техники. Нужно ещё докупить чехольчик и
мышку небольшую.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/441180/"&gt;&lt;img alt="Нетбук" src="http://img-fotki.yandex.ru/get/4529/22199227.a/0_6bb5c_554fe62c_L" title="Нетбук"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="покупка"></category><category term="жизнь"></category><category term="asus"></category><category term="техника"></category><category term="eeepc"></category><category term="Я"></category></entry><entry><title>Удивительная механика</title><link href="/posts/2012/01/07/udivitelnaia-mekhanika/" rel="alternate"></link><updated>2012-01-07T15:31:22+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-01-07:posts/2012/01/07/udivitelnaia-mekhanika/</id><summary type="html">&lt;p&gt;Вчера на одном дыхании прочёл книгу “В поисках энергетической
капсулы”, описывающую жизненный путь Нурбея Гулиа в поисках оптимального
аккумулятора. Очень вдохновляет и написана простым языком, с юмором и
техническими подробностями.&lt;/p&gt;
</summary><category term="интересно"></category><category term="книга"></category><category term="механика"></category><category term="аккумулятор"></category></entry><entry><title>com.badlogic.gdx.utils</title><link href="/posts/2012/01/05/combadlogicgdxutils/" rel="alternate"></link><updated>2012-01-05T23:51:13+03:00</updated><author><name>IMDagger</name></author><id>tag:,2012-01-05:posts/2012/01/05/combadlogicgdxutils/</id><summary type="html">&lt;p&gt;libGDX радует своим utils, там есть и &lt;code class="code"&gt;
JsonReader&lt;/code&gt;
 и &lt;code class="code"&gt;
XmlReader&lt;/code&gt;
 и
другие полезные фишечки.&lt;/p&gt;
</summary><category term="utils"></category><category term="libGDX"></category><category term="программирование"></category></entry><entry><title></title><link href="/posts/2011/12/31/urn:ya.ru:post/22199227/1522/" rel="alternate"></link><updated>2011-12-31T17:08:43+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-12-31:posts/2011/12/31/urn:ya.ru:post/22199227/1522/</id><summary type="html">&lt;p&gt;С Новым Кодом!&lt;/p&gt;
</summary></entry><entry><title>С Новым 2012 Кодом! :)</title><link href="/posts/2011/12/31/s-novym-2012-kodom/" rel="alternate"></link><updated>2011-12-31T17:08:14+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-12-31:posts/2011/12/31/s-novym-2012-kodom/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; В этот год родились тысячи строк кода и сотни коммитов, они прошли
свой долгий путь, чтобы превратиться в релизы и порадовать своих
создателей. Так пусть в новом году будет ещё больше кода и меньше багов,
и программы принесут нирвану в наши виртуальные дома. С праздником!&lt;/p&gt;
</summary><category term="код"></category><category term="2012"></category><category term="радость"></category><category term="поздравление"></category><category term="праздник"></category><category term="Я"></category></entry><entry><title>RequireJS модули</title><link href="/posts/2011/12/29/requirejs-moduli/" rel="alternate"></link><updated>2011-12-29T03:55:53+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-12-29:posts/2011/12/29/requirejs-moduli/</id><summary type="html">&lt;p&gt;Мне нужно было подправить странную проблему в JavaScript коде,
структура которого была написана не мной. Сервер возвращает некоторый
готовый HTML, который принимает клиентская сторона и превращает в DOM.
Возвращаемая страница содержала несколько тегов &lt;code class="code"&gt;
&amp;lt;script&amp;gt;&lt;/code&gt;
, я создал
несколько js-файлов, при чём B нуждался в A, и был после них тег
&lt;code class="code"&gt;
&amp;lt;script&amp;gt;&lt;/code&gt;
 с прописанным кодом в шаблоне, где создавался экземпляр
прототипа из файла B.&lt;/p&gt;
&lt;p&gt;И всё это счастье срабатывало на нажатие кнопки. Я обнаружил, что
кнопку приходится нажимать несколько раз. При чём странным образом
первый раз код выпадал с ошибкой и говорил, что не знает такой прототип
C и в помине (и что он undefined), хотя чуть выше был подключён
JavaScript-код для него.&lt;/p&gt;
&lt;p&gt;Пару проб с &lt;strong&gt;alert&lt;/strong&gt;-ами и выяснилось, что если этот участок кода
немного подождёт, то всё проходит из соринки и задоринки. Стало ясно,
что &lt;code class="code"&gt;
&amp;lt;script&amp;gt;&lt;/code&gt;
 элементы обходятся в произвольном порядке и по мере
загрузки. В тот момент, когда блок кода исполнялся, протопит C ещё
загружался с сервера. Пришлось искать решения.&lt;/p&gt;
&lt;p&gt;И оно нашлось &lt;a class="reference external" href="http://requirejs.org/"&gt;RequireJS&lt;/a&gt;, что позволило
мне собрать части кода как модули и определить зависимости между ними. Я
не JavaScript разработчик, поэтому я раньше не особо задумывался, что в
JS есть такие проблемы и до этого не искал таких библиотек.&lt;/p&gt;
&lt;p&gt;Но после того как я сделал модули меня ждал небольшой сюрприз
(документацию я смотрел невнимательно):&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;// a/b/c&lt;/div&gt;
&lt;div class="line"&gt;define([], function() { … });&lt;/div&gt;
&lt;div class="line"&gt;// mod/user&lt;/div&gt;
&lt;div class="line"&gt;define([’a/b/c’, …], function (mod_a) {&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; ....&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; &lt;strong&gt;mod_a undefined, т.к. модуль ничего не экспортирует&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;});&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Я ничего не возвращал из данной функции, почему-то подразумевая, что
всё как-то само отправится в глобальную видимость, хотя сто раз прочёл в
доке про указание на анонимную функцию и т.д.&lt;/p&gt;
&lt;p&gt;А затем час волосы на себе рвал пытаясь понять почему mod_a
переменная undefined и не содержит заветного модуля. Оказалось, что
функция возвращает словарь с данными, которые модуль экспортирует.&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;// a/b/c&lt;/div&gt;
&lt;div class="line"&gt;define([], function() { … return {exported: MyMegaProto}; });&lt;/div&gt;
&lt;div class="line"&gt;// mod/user&lt;/div&gt;
&lt;div class="line"&gt;define([’a/b/c’, …], function (mod_a) {&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; ...&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; &lt;strong&gt;использовать mod_a.exported&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; ...&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; return … // то что экспортируем&lt;/div&gt;
&lt;div class="line"&gt;});&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
</summary><category term="загрузка"></category><category term="ошибка"></category><category term="программирование"></category><category term="радость"></category><category term="javascript"></category><category term="undefined"></category><category term="модуль"></category><category term="RequireJS"></category><category term="зависимость"></category><category term="работа"></category></entry><entry><title>Новогодний корпоратив — Epic Fail 2</title><link href="/posts/2011/12/22/novogodnii-korporativ-epic-fail-2/" rel="alternate"></link><updated>2011-12-22T23:43:26+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-12-22:posts/2011/12/22/novogodnii-korporativ-epic-fail-2/</id><summary type="html">&lt;p&gt;В этот раз вышло даже похуже, чем в прошлый раз, хоть и в ресторане
отмечали. Такое чувство было, что в зале прямо рядом со мной курят или
это специально такая система вентиляции: брать дым извне и затягивать в
зал? Ведущий тоже … в общем Терренс и Филлип отдыхают с их
фикально/анальными шутками, у этого были сексуально/фикально/анальные с
ответвлением в различные девиации. Участвовать в пошлых и странных
конкурсах я не хотел, еда мне не очень понравилась, поэтому я быстренько
ушёл и не жалею.&lt;/p&gt;
</summary><category term="корпоратив"></category><category term="ресторан"></category><category term="праздник"></category><category term="Я"></category><category term="печаль"></category><category term="работа"></category></entry><entry><title></title><link href="/posts/2011/12/20/urn:ya.ru:post/22199227/1516/" rel="alternate"></link><updated>2011-12-20T01:05:51+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-12-20:posts/2011/12/20/urn:ya.ru:post/22199227/1516/</id><summary type="html">&lt;p&gt;Полная загруженность :-/&lt;/p&gt;
</summary></entry><entry><title>$where в MongoDB</title><link href="/posts/2011/12/12/where-v-mongodb/" rel="alternate"></link><updated>2011-12-12T03:55:54+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-12-12:posts/2011/12/12/where-v-mongodb/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Внимательнее нужно мне читать стандартную документацию к MongoDB, а
то я был удивлён оператором $where для поиска, а также возможностью
использовать регулярные выражения для поиска. Пока оно мне ещё не особо
нужно, но я на них наткнулся на стороннем сайте, откуда затем снова
пришёл на MongoDB
&lt;a class="reference external" href="http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-RegularExpressions"&gt;Wiki&lt;/a&gt;.&lt;/p&gt;
</summary><category term="Я"></category><category term="невнимательность"></category><category term="$where"></category><category term="документация"></category><category term="MongoDB"></category></entry><entry><title>10,000,000 файлов</title><link href="/posts/2011/12/01/10000000-failov/" rel="alternate"></link><updated>2011-12-01T23:31:04+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-12-01:posts/2011/12/01/10000000-failov/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Случайно осталось в коде обработчика запросов на пока баннера
сохранение и создание сессии. Так за месяц набежало почти 10 миллионов
файлов по пару сотен байт. От этого серверу было не очень прикольно,
т.к. сесии складывались на диск файлами, а не в базу (что значительно бы
ускорило процесс), т.к. особой потребности в быстрых сессиях не было
из-за того, что они только применялись для админки. Пришлось их вычищать
чуть меньше десяти часов во FreeBSD. Зато фикс кода занят меньше пяти
минут.&lt;/p&gt;
</summary><category term="ошибка"></category><category term="FreeBSD"></category><category term="программирование"></category><category term="много"></category><category term="файл"></category><category term="работа"></category></entry><entry><title>Автобусные билеты</title><link href="/posts/2011/11/29/avtobusnye-bilety/" rel="alternate"></link><updated>2014-07-15T04:26:00+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-11-29:posts/2011/11/29/avtobusnye-bilety/</id><summary type="html">&lt;p&gt;Недавно заинтересовала проблема разности номеров на автобусном
билетике, а точнее разности основного видимого номера и отпечатанного
номера с обратной стороны билета от номера, который был под ним. Сначала
я сталкивался с разностью в 36 и это было довольно продолжительное
время. Я даже уже начала верить, что разность в определённое время
всегда равна ~36, т.к. за смену расходуется обычно одинаковое число
билетов в среднем.&lt;/p&gt;
&lt;p&gt;Но затем я впервые столкнулся с разностью 30, и понеслось. Были 14,
28, 20 и т.д. Я начала задумываться над тем, чтобы вычислить радиус
мотка у кондуктора (&lt;em&gt;нет, я не псих, у меня справка есть&lt;/em&gt; :) ). Первая
проблема подкралась незаметно, когда я ехал на последнем автобусе ночью
и заметил, что у кондуктора средних размеров рулон билетов, а она мне
выдала билет с разностью 14, а на следующий день этот же последний
автобус мне выдал разность 38, и я был в шоке, т.к. моток был
&lt;strong&gt;малюсенький&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Моя первоначальная идея рушилась, что я могу по этой разности понять
размер рулона. Затем мне пришла в голову более стройная идея, что
автобусный парк заказывает в некотором унитарном предприятии печать
билетов. Тот в свою очередь печатает билеты по возрастанию номеров и
закручивает в рулон. Билеты с меньшими номерами оказываются ближе к
центру, а с большими на периферии. Краска в тот момент ещё свежая,
поэтому появляется на обратной стороне на бумаге оттиск от билета снизу.&lt;/p&gt;
&lt;p&gt;Затем эти исходные рулоны поступают в автобусные парки (или это
происходит прямо на заводе, я не знаю), где они сматываются уже в новые
мотки, пригодные для кондукторов. Поэтому мои расчёты для разности 28
дают радиус, которые не похож на рулон, что держал кондуктор автобуса.&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="formula"&gt;
&lt;i&gt;L&lt;/i&gt;&lt;sub&gt;&lt;i&gt;билета&lt;/i&gt;&lt;/sub&gt; ≈ 4.5&lt;i&gt;см&lt;/i&gt;&lt;br/&gt;Δ&lt;i&gt;k&lt;/i&gt; ≈ 28&lt;i&gt;билетов&lt;/i&gt;&lt;br/&gt;Δ&lt;i&gt;k&lt;/i&gt;⋅&lt;i&gt;L&lt;/i&gt;&lt;sub&gt;&lt;i&gt;билета&lt;/i&gt;&lt;/sub&gt; = &lt;i&gt;C&lt;/i&gt; = 2⋅&lt;i&gt;π&lt;/i&gt;⋅&lt;i&gt;R&lt;/i&gt;&lt;br/&gt;&lt;i&gt;R&lt;/i&gt; = &lt;span class="fraction"&gt;&lt;span class="ignored"&gt;(&lt;/span&gt;&lt;span class="numerator"&gt;Δ&lt;i&gt;k&lt;/i&gt;⋅&lt;i&gt;L&lt;/i&gt;&lt;sub&gt;&lt;i&gt;билета&lt;/i&gt;&lt;/sub&gt;&lt;/span&gt;&lt;span class="ignored"&gt;)/(&lt;/span&gt;&lt;span class="denominator"&gt;2⋅&lt;i&gt;π&lt;/i&gt;&lt;/span&gt;&lt;span class="ignored"&gt;)&lt;/span&gt;&lt;/span&gt; ≈ 4.5⋅28 ⁄ (2⋅3.14159) ≈ 20&lt;i&gt;см&lt;/i&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Я хоть и плохо вижу, но рулон с радиусом почти 20см я бы отличил от
средних размеров кольца билетов. Поэтому единственное решение, что это
радиус исходного билетного барабана с уже намотанным слоем билетов при
печати. Вероятнее всего его стандартный максимальный размер где-то 36-38
билетов в окружности.&lt;/p&gt;
&lt;p&gt;Осталось убедится, что у кондуктора билеты идут по возрастанию, тогда
это &lt;strong&gt;окончательно подтвердит&lt;/strong&gt; мои измышления :].&lt;/p&gt;
</summary><category term="жизнь"></category><category term="билет"></category><category term="автобус"></category><category term="размышления"></category><category term="математика"></category><category term="Я"></category><category term="бредни"></category></entry><entry><title>Грядущие изменения</title><link href="/posts/2011/11/16/griadushchie-izmeneniia/" rel="alternate"></link><updated>2011-11-16T03:51:56+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-11-16:posts/2011/11/16/griadushchie-izmeneniia/</id><summary type="html">&lt;p&gt;А я как-то пропустил эту новость, а потом болел, вот теперь заметил
изменения. В принципе стало компактнее и приятнее, только шрифты у меня
немного странно начали отображаться&lt;/p&gt;
</summary><category term="Я.ру"></category><category term="изменение"></category></entry><entry><title>Исключение файлов при сборке под Android</title><link href="/posts/2011/11/16/iskliuchenie-failov-pri-sborke-pod-android/" rel="alternate"></link><updated>2011-11-16T03:30:06+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-11-16:posts/2011/11/16/iskliuchenie-failov-pri-sborke-pod-android/</id><summary type="html">&lt;p&gt;Жаль, что без копирования+вставки не обошлось, но проблема
заключалась в том, что при сборке под Android нужно, чтобы Ant исключил
некоторые java-файлы. Т.к. эти файлы не удастся собрать под мобильную
платформу и они предназначены для другой сборки.&lt;/p&gt;
&lt;p&gt;Я забрался в &lt;em&gt;android-sdk-linux_x86/tools/ant/main_rules.xml&lt;/em&gt; и
нашёл &lt;em&gt;target&lt;/em&gt; с &lt;em&gt;name&lt;/em&gt; равный &lt;em&gt;compile&lt;/em&gt;. Затем я скопировал всё правило
и вставил в свой файл Ant-правил до &lt;code class="code"&gt;
&amp;lt;setup /&amp;gt;&lt;/code&gt;
 узла.&lt;/p&gt;
&lt;p&gt;После этого внутри узла javac добавил правило:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-nt"&gt;&amp;lt;javac&lt;/span&gt; &lt;span class="pgcss-err"&gt;...&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="pgcss-nt"&gt;&amp;lt;exclude&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;путь/к/файлу&amp;quot;&lt;/span&gt; &lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt; &lt;span class="pgcss-c"&gt;&amp;lt;!-- src/ в этот путь не нужно включать --&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;/javac&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</summary><category term="файл"></category><category term="правило"></category><category term="исключение"></category><category term="Android"></category><category term="ant"></category><category term="компиляция"></category></entry><entry><title></title><link href="/posts/2011/11/14/urn:ya.ru:post/22199227/1505/" rel="alternate"></link><updated>2011-11-14T23:44:46+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-11-14:posts/2011/11/14/urn:ya.ru:post/22199227/1505/</id><summary type="html">&lt;p&gt;уже иду на поправку&lt;/p&gt;
</summary></entry><entry><title>Расчёт масштаба отображения</title><link href="/posts/2011/11/12/raschiot-masshtaba-otobrazheniia/" rel="alternate"></link><updated>2011-11-12T22:59:11+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-11-12:posts/2011/11/12/raschiot-masshtaba-otobrazheniia/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Как сделать, чтобы на разных устройствах при использовании libGDX
необходимые игровые элементы имели одинаковые размеры? Нужно
использовать Graphics.getPpiX()/getPpiY()/getPpcX()/getPpcY() Это
позволит получить количество пикселей устройства на один дюйм или
сантиметр по заданной оси. Попробую их использовать, чтобы выбрать
правильный начальный масштаб для отображения участка поля на экране
телефона.&lt;/p&gt;
</summary><category term="размер"></category><category term="устройство"></category><category term="программирование"></category><category term="libGDX"></category><category term="отображение"></category></entry><entry><title>Первый пост с мобильного через GPRS</title><link href="/posts/2011/11/11/pervyi-post-s-mobilnogo-cherez-gprs/" rel="alternate"></link><updated>2011-11-11T02:00:38+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-11-11:posts/2011/11/11/pervyi-post-s-mobilnogo-cherez-gprs/</id><summary type="html">&lt;p&gt;Что-то я сильно разболелся, два дня в постели безвылазно :( приходится
писать с мобильного. Хотя это дороговато, но зато не так скучно болеть.
Очень хочется покодить.&lt;/p&gt;
</summary><category term="здоровье"></category><category term="Я"></category><category term="жизнь"></category><category term="болезнь"></category><category term="грусть"></category></entry><entry><title></title><link href="/posts/2011/11/09/urn:ya.ru:post/22199227/1497/" rel="alternate"></link><updated>2011-11-09T19:53:37+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-11-09:posts/2011/11/09/urn:ya.ru:post/22199227/1497/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/427960"&gt;&lt;img alt="tags_screen1.png" src="http://img-fotki.yandex.ru/get/5818/22199227.a/0_687b8_5db982f8_L" title="tags_screen1.png"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/427961"&gt;&lt;img alt="tags_screen2.png" src="http://img-fotki.yandex.ru/get/4522/22199227.a/0_687b9_70b83188_L" title="tags_screen2.png"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Вот что я имею ввиду, а то из-за этой игры слов с “заголовок” путаница
одна&lt;/p&gt;</summary></entry><entry><title></title><link href="/posts/2011/11/09/urn:ya.ru:post/22199227/1494/" rel="alternate"></link><updated>2011-11-09T19:37:49+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-11-09:posts/2011/11/09/urn:ya.ru:post/22199227/1494/</id><summary type="html">&lt;p&gt;кажется, у меня ангина, терпеть не могу, когда болит горло, лучше уж
просто температура&lt;/p&gt;
</summary></entry><entry><title>Adb devices</title><link href="/posts/2011/11/06/adb-devices/" rel="alternate"></link><updated>2011-11-06T02:53:57+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-11-06:posts/2011/11/06/adb-devices/</id><summary type="html">&lt;p&gt;Вчерашние ночные попытки заставить adb показать Samsung GT-I5800 в
списке устройств сегодня увенчались успехом. Просто я копал не туда, я
думал, что у меня что-то не так с модулями ядра или udev, но (спасибо
брату, что указал мне на это) оказалось нужно на телефоне в настройках
Android включить режим отладки USB: Настройки → Приложения → Разработка
→ Отладка USB.&lt;/p&gt;
&lt;p&gt;И я смог сделать install моего приложения на телефон, что меня
радует (даже несмотря на то, что сосед сверху сейчас ночью что-то
таскает по полу, такое чувство, что к его ногам прикована гиря и цепи :) ).&lt;/p&gt;
</summary><category term="udev"></category><category term="devices"></category><category term="радость"></category><category term="USB"></category><category term="Samsung"></category><category term="устройство"></category><category term="Android"></category><category term="adb"></category></entry><entry><title></title><link href="/posts/2011/11/04/urn:ya.ru:post/22199227/1486/" rel="alternate"></link><updated>2011-11-04T03:43:08+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-11-04:posts/2011/11/04/urn:ya.ru:post/22199227/1486/</id><summary type="html"></summary></entry><entry><title>&lt;java&gt; задача из Ant</title><link href="/posts/2011/11/04/java-zadacha-iz-ant/" rel="alternate"></link><updated>2011-11-04T03:25:18+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-11-04:posts/2011/11/04/java-zadacha-iz-ant/</id><summary type="html">&lt;p&gt;Добавил в build.xml правило для сборки и последующего запуска
приложения, без формирования релизного JAR-архива. Мне для этой цели
подошла задача java из Ant. Правда пришлось её исполнять с опцией
&lt;code class="code"&gt;
fork=&amp;quot;true&amp;quot;&lt;/code&gt;
, иначе выпадала странная ошибка, видимо приложению не
понравилась JVM от Ant. Главное, что в официальной
&lt;a class="reference external" href="http://ant.apache.org/manual/Tasks/java.html"&gt;документации&lt;/a&gt; есть
понятное описание, зачем нужна опция fork. Ещё я использовал
classpathref и classpath одновременно, т.к. в classpathref мне не
требовалась директория сборки.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-nt"&gt;&amp;lt;target&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;run&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;description=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;Compile and execute build&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;depends=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;compile&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="pgcss-nt"&gt;&amp;lt;echo&amp;gt;&lt;/span&gt;Run project ...&lt;span class="pgcss-nt"&gt;&amp;lt;/echo&amp;gt;&lt;/span&gt;
    &lt;span class="pgcss-nt"&gt;&amp;lt;java&lt;/span&gt; &lt;span class="pgcss-na"&gt;classpathref=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;gdx-libraries&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;classpath=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;${build.dir}&amp;quot;&lt;/span&gt;
          &lt;span class="pgcss-na"&gt;classname=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;${project.mainclass}&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;fork=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;true&amp;quot;&lt;/span&gt; &lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;/target&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</summary><category term="ant"></category><category term="запуск"></category><category term="java"></category><category term="программирование"></category><category term="класс"></category></entry><entry><title>Подключение библиотек в JAR-архив</title><link href="/posts/2011/11/03/podkliuchenie-bibliotek-v-jar-arkhiv/" rel="alternate"></link><updated>2011-11-03T23:24:18+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-11-03:posts/2011/11/03/podkliuchenie-bibliotek-v-jar-arkhiv/</id><summary type="html">&lt;p&gt;Сначала я пробовал замутить с Class-Path, но решение оказалось проще,
достаточно было использовать zipfileset, чтобы впихнуть содержимое из
libGDX &lt;strong&gt;jar&lt;/strong&gt;-ов в проект.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-nt"&gt;&amp;lt;jar&lt;/span&gt; &lt;span class="pgcss-na"&gt;destfile=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;${build.file}&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;
    ...
    &lt;span class="pgcss-nt"&gt;&amp;lt;zipfileset&lt;/span&gt; &lt;span class="pgcss-na"&gt;src=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;${external.libs}/gdx.jar&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;includes=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;**/*&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class="pgcss-nt"&gt;&amp;lt;zipfileset&lt;/span&gt; &lt;span class="pgcss-na"&gt;src=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;${external.libs}/gdx-natives.jar&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;includes=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;**/*&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
    ...
&lt;span class="pgcss-nt"&gt;&amp;lt;/jar&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</summary><category term="подключение"></category><category term="zipfileset"></category><category term="программирование"></category><category term="JAR"></category></entry><entry><title></title><link href="/posts/2011/11/02/urn:ya.ru:post/22199227/1482/" rel="alternate"></link><updated>2011-11-02T03:16:01+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-11-02:posts/2011/11/02/urn:ya.ru:post/22199227/1482/</id><summary type="html">&lt;p&gt;счастье - это, когда реализуется то, что ты хочешь, но ты не можешь
управлять процессом создающим эти блага&lt;/p&gt;
</summary></entry><entry><title>Headphones</title><link href="/posts/2011/11/02/headphones/" rel="alternate"></link><updated>2011-11-02T03:13:10+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-11-02:posts/2011/11/02/headphones/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Купил я когда-то свои &lt;strong&gt;Cosonic CD-832MV&lt;/strong&gt;, раньше нареканий на них
не было. Куплены они были что-то около $20 (или $35 я уже курс точный не
помню), что не очень дорого (но подороже, чем нишевый хлам). Выглядят
они довольно солидно, эдакий середнячок. По качеству звука я тоже ими
доволен, и изоляция хорошая. А самое главное уши и голова после них не
устают.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Но вот уже около года или двух у них отключается иногда одно ухо.
Т.к. последние несколько лет я их не часто использовал, поэтому не
напрягало. Но вот сегодня меня они вывели, они сопротивлялись выйти на
нормальную громкость и не подавали больше звук в правое ухо.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Я от злости разогрел большущий паяльник, отпаял регулятор громкости,
нафиг. Зачистил тонкожильные провода, подчистил регулятор. А затем
вспорол провод возле левого уха, где подводится контакт, и обнаружил
перелом. Всё собрал и запаял обратно, достал силикатный клей и замазал
оголённые контакты.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Ура! Оно снова всё заработало как в былые времена и я больше не
раздражён! [-:&lt;/p&gt;
</summary><category term="починил"></category><category term="жизнь"></category><category term="радость"></category><category term="наушники"></category><category term="ухо"></category><category term="Я"></category></entry><entry><title>Fossil SCM</title><link href="/posts/2011/10/29/fossil-scm/" rel="alternate"></link><updated>2011-10-29T02:52:47+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-10-29:posts/2011/10/29/fossil-scm/</id><summary type="html">&lt;p&gt;Наткнулся ещё раз на Fossil, до этого только немного про него читал. Как
SCM+Wiki+Blog+Trac в одном флаконе, очень даже интересно выглядит. Нужно
будет как-нибудь попробовать его, чтобы ощутить на себе фичи и баги.&lt;/p&gt;
</summary><category term="SCM"></category><category term="fossil"></category><category term="контроль"></category><category term="версия"></category><category term="разработка"></category></entry><entry><title>Маршрутизация определённых MAC-адресов в заданный VPN</title><link href="/posts/2011/10/26/marshrutizatsiia-opredelionnykh-mac-adresov-v-zadannyi-vpn/" rel="alternate"></link><updated>2011-10-26T04:02:59+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-10-26:posts/2011/10/26/marshrutizatsiia-opredelionnykh-mac-adresov-v-zadannyi-vpn/</id><summary type="html">&lt;p&gt;На сервере имеется два интернет канала и через один из них
поднимается VPN соединение по pptp до другого сервера, который
маршрутизирует пакеты дальше во внешний мир используя SNAT. На нашем
сервере необходимо было настроить правила для iproute2 и iptables, так
чтобы только машины с указанными MAC’ами полностью проходили через VPN,
а все остальные через обычные интернет каналы провайдера.&lt;/p&gt;
&lt;p&gt;Задача выглядит достаточно просто, но заставила меня изрядно
помучаться. Я создал правила в iptables в mangle таблице, которое
помечает пакеты при помощи специального маркера, если пакет уходит с
определённого MAC-адреса. Затем iptables при помощи SNAT заворачивает
все такие пакеты с маркером. И далее iproute2 при помощи правила с
проверкой маркера отправляет в необходимое ppp соединение наш пакет.&lt;/p&gt;
&lt;p&gt;Вылазит небольшая проблема, называется она rp_filter, т.к. ядро не
находит явного маршрута для пакетов, то из VPN они не возвращаются. И
получается, что я вижу пир помощи tcpdump пакеты, которые попали в
интерфейс VPN и вернулись ответы, но к клиенту из локальной подсети
(192.168.1.0/24) они не доходят.&lt;/p&gt;
&lt;p&gt;Пришлось сделать (&lt;code class="code"&gt;
$PPP _IFACE&lt;/code&gt;
 это название интерфейса VPN, например
ppp2):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-nb"&gt;echo &lt;/span&gt;0 &amp;gt;/proc/sys/net/ipv4/conf/all/rp_filter
&lt;span class="pgcss-nb"&gt;echo &lt;/span&gt;0 &amp;gt;/proc/sys/net/ipv4/conf/&lt;span class="pgcss-nv"&gt;$PPP_IFACE&lt;/span&gt;/rp_filter
&lt;span class="pgcss-c"&gt;# остальные устройства можно не трогать они будут с флагом 1&lt;/span&gt;
&lt;span class="pgcss-c"&gt;# пусть так и остаются&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Я создал ip-up.d скрипт для pppd, который, когда поднимается vpn
соединение, автоматически исполняется и настраивает маршруты и правила.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;для Ubuntu этот файл будет лежать здесь /etc/ppp/ip-up.d/usa
ещё нужно не забыть создать таблицу usa_vpn для iproute2 в его
конфигурационном файле в rt_tables&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-c"&gt;#!/bin/sh&lt;/span&gt;
&lt;span class="pgcss-nv"&gt;USA_VPN&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s2"&gt;&amp;quot;15&amp;quot;&lt;/span&gt;
&lt;span class="pgcss-nv"&gt;USA_TABLE&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s2"&gt;&amp;quot;usa_vpn&amp;quot;&lt;/span&gt;
&lt;span class="pgcss-nv"&gt;USA_CHAIN&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s2"&gt;&amp;quot;USA_VPN&amp;quot;&lt;/span&gt;

sync_mac_sources&lt;span class="pgcss-o"&gt;()&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;
    &lt;span class="pgcss-c"&gt;# чистим таблицу, которая содержит маркировку MAC адресов&lt;/span&gt;
    /sbin/iptables -t mangle -F &lt;span class="pgcss-nv"&gt;$USA_CHAIN&lt;/span&gt;

    &lt;span class="pgcss-c"&gt;# в отдельном скрипте храним список MAC-адресов&lt;/span&gt;
    &lt;span class="pgcss-nv"&gt;MACHINE_MAC_LIST&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-sb"&gt;`&lt;/span&gt;/etc/ppp/usa_vpn_macs&lt;span class="pgcss-sb"&gt;`&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;for &lt;/span&gt;MACHINE_MAC in &lt;span class="pgcss-nv"&gt;$MACHINE_MAC_LIST&lt;/span&gt;; &lt;span class="pgcss-k"&gt;do&lt;/span&gt;
        &lt;span class="pgcss-c"&gt;# если пакет содержит подходящий исходный MAC-адрес, то&lt;/span&gt;
        &lt;span class="pgcss-c"&gt;# маркируем его числом 15&lt;/span&gt;
        /sbin/iptables -t mangle -I &lt;span class="pgcss-nv"&gt;$USA_CHAIN&lt;/span&gt; -m mac --mac-source &lt;span class="pgcss-s2"&gt;&amp;quot;$MACHINE_MAC&amp;quot;&lt;/span&gt; -j MARK --set-mark &lt;span class="pgcss-nv"&gt;$USA_VPN&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;done&lt;/span&gt;;
&lt;span class="pgcss-o"&gt;}&lt;/span&gt;

&lt;span class="pgcss-c"&gt;# а это, чтобы можно было легко синхронизировать уже рабочие iptables&lt;/span&gt;
&lt;span class="pgcss-c"&gt;# правила и файл с MAC-адресами&lt;/span&gt;
&lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-o"&gt;[&lt;/span&gt; &lt;span class="pgcss-s2"&gt;&amp;quot;$1&amp;quot;&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s2"&gt;&amp;quot;sync&amp;quot;&lt;/span&gt; &lt;span class="pgcss-o"&gt;]&lt;/span&gt;; &lt;span class="pgcss-k"&gt;then&lt;/span&gt;
&lt;span class="pgcss-k"&gt;    &lt;/span&gt;sync_mac_sources;
&lt;span class="pgcss-k"&gt;fi&lt;/span&gt;

&lt;span class="pgcss-c"&gt;# это проверка, чтобы скрипт просто так не запускался дальше&lt;/span&gt;
&lt;span class="pgcss-o"&gt;[&lt;/span&gt; &lt;span class="pgcss-s2"&gt;&amp;quot;$LINKNAME&amp;quot;&lt;/span&gt; !&lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s2"&gt;&amp;quot;usa&amp;quot;&lt;/span&gt; &lt;span class="pgcss-o"&gt;]&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="pgcss-nb"&gt;exit &lt;/span&gt;0

&lt;span class="pgcss-c"&gt;# выключаем rp_filter для VPN, т.к. он мешает в нашем случае&lt;/span&gt;
&lt;span class="pgcss-nb"&gt;echo &lt;/span&gt;0 &amp;gt;/proc/sys/net/ipv4/conf/all/rp_filter
&lt;span class="pgcss-nb"&gt;echo &lt;/span&gt;0 &amp;gt;/proc/sys/net/ipv4/conf/&lt;span class="pgcss-nv"&gt;$PPP_IFACE&lt;/span&gt;/rp_filter

&lt;span class="pgcss-c"&gt;# создаём свою цепочку USA_VPN и синхронизируем файл и правила&lt;/span&gt;
/sbin/iptables -t mangle -N &lt;span class="pgcss-nv"&gt;$USA_CHAIN&lt;/span&gt;
sync_mac_sources;

&lt;span class="pgcss-c"&gt;# добавляем её как PREROUTING правило&lt;/span&gt;
&lt;span class="pgcss-c"&gt;# т.к. с меткой нужно определится до iproute2 правил&lt;/span&gt;
/sbin/iptables -t mangle -I PREROUTING -j &lt;span class="pgcss-nv"&gt;$USA_CHAIN&lt;/span&gt;

&lt;span class="pgcss-c"&gt;# когда уже определились с маршрутом, то нужно подменить&lt;/span&gt;
&lt;span class="pgcss-c"&gt;# оригинальный IP-адрес на локальный VPN-адрес, что-то типа&lt;/span&gt;
&lt;span class="pgcss-c"&gt;# 192.168.5.24 (зависит от того, что выдал VPN-сервер)&lt;/span&gt;
/sbin/iptables --table nat -I POSTROUTING -m mark --mark &lt;span class="pgcss-nv"&gt;$USA_VPN&lt;/span&gt; --jump SNAT --to-source &lt;span class="pgcss-nv"&gt;$IPLOCAL&lt;/span&gt;

&lt;span class="pgcss-c"&gt;# локальная сеть&lt;/span&gt;
/sbin/ip route add 192.168.1.0/24 dev eth0 table &lt;span class="pgcss-nv"&gt;$USA_TABLE&lt;/span&gt;
&lt;span class="pgcss-c"&gt;# теперь добавляем в таблицу usa_vpn маршрут по умолчанию в VPN&lt;/span&gt;
/sbin/ip route add default dev &lt;span class="pgcss-nv"&gt;$PPP_IFACE&lt;/span&gt; table &lt;span class="pgcss-nv"&gt;$USA_TABLE&lt;/span&gt;
&lt;span class="pgcss-c"&gt;# все пакеты с маркером 15 отправляем в таблицу usa_vpn&lt;/span&gt;
/sbin/ip rule add fwmark &lt;span class="pgcss-nv"&gt;$USA_VPN&lt;/span&gt; lookup &lt;span class="pgcss-nv"&gt;$USA_TABLE&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/blockquote&gt;
</summary><category term="iptables"></category><category term="MAC"></category><category term="маршрут"></category><category term="VPN"></category><category term="rp_filter"></category><category term="fwmark"></category><category term="iproute2"></category><category term="метка"></category><category term="Я"></category><category term="работа"></category><category term="администрирование"></category></entry><entry><title>Шейпинг трафика</title><link href="/posts/2011/10/26/sheiping-trafika/" rel="alternate"></link><updated>2011-10-26T03:35:28+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-10-26:posts/2011/10/26/sheiping-trafika/</id><summary type="html">&lt;p&gt;Нужно будет попробовать tc на офисе, думаю это решит проблему того, что
ssh, svn и im-трафик приоритетный, а вот торренты и закачки тоже важны,
но не такой высокий приоритет, чтобы забивать два канала под завязку.&lt;/p&gt;
</summary><category term="приоритет"></category><category term="трафик"></category><category term="работа"></category><category term="шейпинг"></category><category term="tc"></category></entry><entry><title>2011 какой-то год потерь</title><link href="/posts/2011/10/25/2011-kakoi-to-god-poter/" rel="alternate"></link><updated>2011-10-25T01:58:57+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-10-25:posts/2011/10/25/2011-kakoi-to-god-poter/</id><summary type="html">&lt;p&gt;Вот теперь ещё и Джон Маккарти :( умер Потихоньку исчезают люди, теорию
которых я читал, потихоньку умирают мои кумиры.&lt;/p&gt;
</summary><category term="смерть"></category><category term="LISP"></category><category term="новость"></category><category term="грусть"></category></entry><entry><title>Низкий приоритет сдвига</title><link href="/posts/2011/10/21/nizkii-prioritet-sdviga/" rel="alternate"></link><updated>2011-10-21T04:25:16+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-10-21:posts/2011/10/21/nizkii-prioritet-sdviga/</id><summary type="html">&lt;p&gt;Который раз уже попадаюсь на том, что у &amp;gt;&amp;gt; и &amp;lt;&amp;lt; сдвигов низкий
приоритет. Вот опять написал конструкцию похожу на &lt;code class="code"&gt;
g2 &amp;amp; (2  * * point
- 1) + (g1 &amp;gt;&amp;gt; point) &amp;lt;&amp;lt; point&lt;/code&gt;
 и сижу размышляю почему битовая
арифметика так странно себя ведёт в моей программе, а потом резко
осознаю, что сначала выполняется сложение, а потом только сдвиг влево.
Чтобы получить то, что я хочу мне нужно добавить скобок, т.е. &lt;code class="code"&gt;
g2 &amp;amp; (2
 * * point - 1) + ((g1 &amp;gt;&amp;gt; point) &amp;lt;&amp;lt; point)&lt;/code&gt;
&lt;/p&gt;
</summary><category term="python"></category><category term="приоритет"></category><category term="сдвиг"></category><category term="оператор"></category></entry><entry><title></title><link href="/posts/2011/10/21/urn:ya.ru:post/22199227/1474/" rel="alternate"></link><updated>2011-10-21T03:38:37+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-10-21:posts/2011/10/21/urn:ya.ru:post/22199227/1474/</id><summary type="html">&lt;p&gt;страдаю красноглазием, в прямом смысле :(&lt;/p&gt;
</summary></entry><entry><title>Стоило хорошо подумать</title><link href="/posts/2011/10/21/stoilo-khorosho-podumat/" rel="alternate"></link><updated>2011-10-21T03:37:26+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-10-21:posts/2011/10/21/stoilo-khorosho-podumat/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Прежде, чем запихнуть в код вызов PyMongo функции db.eval с
параметром, в котором описана JavaScript-функция, стоило проверить, что
оно будет делать. Т.к. оно пыталось выполнить функцию, а мне всего лишь
нужно было проверить корректность синтаксиса и распарсить, но вовсе не
вызывать содержимое. Т.е. вызвать то можно, но если функция просто
описана, но не пытаться её выполнять. Хорошо, что я перепроверил сегодня
и наткнулся, что мой код портит важную информацию. Я ж ещё додумался
(это ж надо блин) вызвать проверку и если код неверный, то в базу
записать не то, что просят, а пустую строку. Хотя по нормальному я
должен был просто не записывать JS, который считаю некорректным.&lt;/p&gt;
</summary><category term="python"></category><category term="pymongo"></category><category term="MongoDB"></category></entry><entry><title>MAC фильтр</title><link href="/posts/2011/10/12/mac-filtr/" rel="alternate"></link><updated>2011-10-12T12:57:58+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-10-12:posts/2011/10/12/mac-filtr/</id><summary type="html">&lt;p&gt;Нужно будет попробовать собрать новый SQUID с опцией
--enable-arp-acl, чтобы фильтровать на нём не по статическим IP-адресам,
а по MAC-адресам некоторые особые машины.&lt;/p&gt;
</summary><category term="arp"></category><category term="фильтрация"></category><category term="работа"></category><category term="squid"></category></entry><entry><title>Мой перевод добавили</title><link href="/posts/2011/10/10/moi-perevod-dobavili/" rel="alternate"></link><updated>2011-10-10T04:19:41+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-10-10:posts/2011/10/10/moi-perevod-dobavili/</id><summary type="html">&lt;p&gt;Прошло достаточно много месяцев с тех пор, когда я отправлял в
список рассылки GoboLinux запрос о том, что я выполнил перевод небольшой
статьи. И вот я решил заглянуть в него недавно ещё раз и был обрадован,
что Hisham мне
&lt;a class="reference external" href="http://lists.gobolinux.org/pipermail/gobolinux-www/2011-August/000195.html"&gt;ответил&lt;/a&gt;.
Теперь на сайте GoboLinux есть отметка, что я перевёл
&lt;a class="reference external" href="http://www.gobolinux.org/index.php?page=k5"&gt;статью&lt;/a&gt;. Я заметил ответ
тоже только по прошествии почти двух месяцев. Приятно, что он не забил и
заметил моё сообщение, значит я не зря потратил время на перевод :)&lt;/p&gt;
</summary><category term="GoboLinux"></category><category term="радость"></category><category term="перевод"></category><category term="добавили"></category></entry><entry><title>Git post-receive хук</title><link href="/posts/2011/10/05/git-post-receive-khuk/" rel="alternate"></link><updated>2011-10-05T14:12:31+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-10-05:posts/2011/10/05/git-post-receive-khuk/</id><summary type="html">&lt;p&gt;Я создал shared bare-репозиторий в git, из которого данные уже
направляются в основной репозиторий, где нужно выполнить некоторый набор
действий по сборке и деплою проекта. Т.к. было желание со своей машины,
где развёрнут похожий pg, при заливки через git push сразу на стороне
сервера инициализировать необходимые процедуры, то я создал
shared/hooks/post-receive хук:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-nv"&gt;WEB_PROJECT&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;полный_путь_к_проекту
&lt;span class="pgcss-nv"&gt;CURRENT&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-sb"&gt;`&lt;/span&gt;&lt;span class="pgcss-nb"&gt;pwd&lt;/span&gt;&lt;span class="pgcss-sb"&gt;`&lt;/span&gt;
&lt;span class="pgcss-nv"&gt;LOG_NAME&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-nv"&gt;$WEB_PROJECT&lt;/span&gt;/logs/pushes/&lt;span class="pgcss-sb"&gt;`&lt;/span&gt;date +&lt;span class="pgcss-s1"&gt;&amp;#39;%F-%X&amp;#39;&lt;/span&gt;&lt;span class="pgcss-sb"&gt;`&lt;/span&gt;-&lt;span class="pgcss-sb"&gt;`&lt;/span&gt;whoami&lt;span class="pgcss-sb"&gt;`&lt;/span&gt;

&lt;span class="pgcss-nb"&gt;echo&lt;/span&gt; &lt;span class="pgcss-s1"&gt;&amp;#39;Start pushing ...&amp;#39;&lt;/span&gt; &amp;gt;&lt;span class="pgcss-s2"&gt;&amp;quot;$LOG_NAME&amp;quot;&lt;/span&gt;

&lt;span class="pgcss-nb"&gt;cd&lt;/span&gt; &lt;span class="pgcss-nv"&gt;$WEB_PROJECT&lt;/span&gt;
&lt;span class="pgcss-nb"&gt;echo&lt;/span&gt; &lt;span class="pgcss-s2"&gt;&amp;quot;Pulling from $CURRENT to $WEB_PROJECT&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt;&lt;span class="pgcss-s2"&gt;&amp;quot;$LOG_NAME&amp;quot;&lt;/span&gt; 2&amp;gt;&amp;gt;&lt;span class="pgcss-s2"&gt;&amp;quot;$LOG_NAME&amp;quot;&lt;/span&gt;

&lt;span class="pgcss-nb"&gt;unset &lt;/span&gt;GIT_DIR

git pull &lt;span class="pgcss-nv"&gt;$CURRENT&lt;/span&gt; &amp;gt;&amp;gt;&lt;span class="pgcss-s2"&gt;&amp;quot;$LOG_NAME&amp;quot;&lt;/span&gt; 2&amp;gt;&amp;gt;&lt;span class="pgcss-s2"&gt;&amp;quot;$LOG_NAME&amp;quot;&lt;/span&gt;
gmake &amp;gt;&amp;gt;&lt;span class="pgcss-s2"&gt;&amp;quot;$LOG_NAME&amp;quot;&lt;/span&gt; 2&amp;gt;&amp;gt;&lt;span class="pgcss-s2"&gt;&amp;quot;$LOG_NAME&amp;quot;&lt;/span&gt;
./uwsgi_reload.sh &amp;gt;&amp;gt;&lt;span class="pgcss-s2"&gt;&amp;quot;$LOG_NAME&amp;quot;&lt;/span&gt; 2&amp;gt;&amp;gt;&lt;span class="pgcss-s2"&gt;&amp;quot;$LOG_NAME&amp;quot;&lt;/span&gt;

&lt;span class="pgcss-nb"&gt;echo&lt;/span&gt; &lt;span class="pgcss-s1"&gt;&amp;#39;Finish pushing, done!&amp;#39;&lt;/span&gt; &amp;gt;&amp;gt;&lt;span class="pgcss-s2"&gt;&amp;quot;$LOG_NAME&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Самое основное для меня было это unset GIT_DIR, т.к. без него git
выдавал ошибку такого вида:&lt;/p&gt;
&lt;blockquote&gt;
fatal: Not a git repository: '.'&lt;/blockquote&gt;
&lt;p&gt;Нужно ещё добавить в этот хук проверку логов от одной ревизии до
другой и выполнение дополнительных команд, в зависимости от флагов в
сообщениях коммитов. Тогда можно будет перезапускать дополнительные
сервисы.&lt;/p&gt;
&lt;p&gt;P.S. Вообще решение с unset нашёл в
&lt;a class="reference external" href="http://stackoverflow.com/questions/4043609/getting-fatal-not-a-git-repository-when-using-post-update-hook-to-execute"&gt;здесь&lt;/a&gt;.&lt;/p&gt;
</summary><category term="python"></category><category term="push"></category><category term="git"></category><category term="хук"></category><category term="post-receive"></category><category term="работа"></category></entry><entry><title>Бенчмарк</title><link href="/posts/2011/10/01/benchmark/" rel="alternate"></link><updated>2011-10-01T05:33:46+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-10-01:posts/2011/10/01/benchmark/</id><summary type="html">&lt;p&gt;По следам статьи &lt;a class="reference external" href="http://nichol.as/benchmark-of-python-web-servers"&gt;http://nichol.as/benchmark-of-python-web-servers&lt;/a&gt;
проверял производительность uWSGI и Twisted в standalone-режиме, uWSGI
запускал в однопоточном режиме тоже. Благодаря этой статье узнал про
чудесную pure-JavaScript библиотеку
&lt;a class="reference external" href="http://www.highcharts.com/"&gt;Highcharts&lt;/a&gt; для отображения и
просмотра графиков. Оно ещё и экспорт умеет и печать. Выглядит в
браузере примерно вот так (это экспортированное изображение):&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/418874/"&gt;&lt;img alt="График" src="http://img-fotki.yandex.ru/get/4412/22199227.a/0_6643a_f1f6bf94_L" title="График"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Мне очень понравилось то, как оно создаёт графики. Я написал
небольшой Python-генератор, чтобы переваривать csv-файлы от
&lt;a class="reference external" href="http://www.xenoclast.org/autobench/"&gt;autobench&lt;/a&gt; скрипта, который
вызывает &lt;a class="reference external" href="http://www.hpl.hp.com/research/linux/httperf/"&gt;httperf&lt;/a&gt;.
Жаль только, что на моих тестах Twisted очень сильно проигрывает uWSGI в
связке с Nginx, особенно из-за того, что не умеет возвращать клиенту
сжатую gzip страницу.&lt;/p&gt;</summary><category term="python"></category><category term="сравнение"></category><category term="javascript"></category><category term="программирование"></category></entry><entry><title></title><link href="/posts/2011/09/21/urn:ya.ru:post/22199227/1456/" rel="alternate"></link><updated>2011-09-21T03:12:12+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-09-21:posts/2011/09/21/urn:ya.ru:post/22199227/1456/</id><summary type="html">&lt;p&gt;продаю по 10 граммов души за каждые 10 минут сна…&lt;/p&gt;
</summary></entry><entry><title>Ошибка в os.path.relpath в Python 2.6</title><link href="/posts/2011/09/20/oshibka-v-ospathrelpath-v-python-26/" rel="alternate"></link><updated>2011-09-20T23:14:19+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-09-20:posts/2011/09/20/oshibka-v-ospathrelpath-v-python-26/</id><summary type="html">&lt;p&gt;Нужно было видимо поставить сразу Python 2.7, а не Python 2.6. Т.к.
я сегодня потратил минут 30 на поиск ошибки в коде, а оказалось она в
библиотеке из стандартного комплекта.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-nn"&gt;os&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-n"&gt;os&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;path&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;relpath&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;/test&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;/&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-go"&gt;../test&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Но это ведь не правильно, должно было сказать, просто test. Т.к.
подняться выше корня нельзя и объект лежит в корне. Немного подправил
posixpath.py. Я знал, что этот баг уже давно нашли, поэтому просто
подправил вручную файл в соответствии с патчем
&lt;a class="reference external" href="http://bugs.python.org/file19111/py27_fix_relpath.patch"&gt;http://bugs.python.org/file19111/py27_fix_relpath.patch&lt;/a&gt;&lt;/p&gt;
</summary><category term="python"></category><category term="библиотека"></category><category term="relpath"></category><category term="ошибка"></category></entry><entry><title>Сохранение функций из PyMongo</title><link href="/posts/2011/09/15/sokhranenie-funktsii-iz-pymongo/" rel="alternate"></link><updated>2011-09-15T23:29:39+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-09-15:posts/2011/09/15/sokhranenie-funktsii-iz-pymongo/</id><summary type="html">&lt;p&gt;Думаю pymongo.code.Code поможет мне сохранять JavaScript код не как
строки в поля документов.&lt;/p&gt;
</summary></entry><entry><title>JS и export</title><link href="/posts/2011/09/13/js-i-export/" rel="alternate"></link><updated>2011-09-13T23:33:34+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-09-13:posts/2011/09/13/js-i-export/</id><summary type="html">&lt;p&gt;Не стоит использовать слово export в JavaScript коде, т.к. это
зарезервированное слово. И конструкции вида &lt;code class="code"&gt;
aaa.bbb.export = ccc&lt;/code&gt;
,
работают во многих браузерах, но в IE выдаёт ошибку, что ожидается
идентификатор. Я не знал, что это зарезервированное слово и долго тупил,
почему IE не хочет переварить моё &lt;code class="code"&gt;
{export: true}&lt;/code&gt;
, а в FF всё ок.&lt;/p&gt;
</summary><category term="ошибка"></category><category term="export"></category><category term="программирование"></category><category term="javascript"></category><category term="слово"></category><category term="работа"></category><category term="зарезервированное"></category></entry><entry><title></title><link href="/posts/2011/09/13/urn:ya.ru:post/22199227/1451/" rel="alternate"></link><updated>2011-09-13T15:04:53+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-09-13:posts/2011/09/13/urn:ya.ru:post/22199227/1451/</id><summary type="html">&lt;p&gt;Да прибудет знание с нами.&lt;/p&gt;
</summary></entry><entry><title>Отрендерились вантузы</title><link href="/posts/2011/09/11/otrenderilis-vantuzy/" rel="alternate"></link><updated>2011-09-11T04:41:13+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-09-11:posts/2011/09/11/otrenderilis-vantuzy/</id><summary type="html">&lt;p&gt;Уфф… оно завершилось, не знаю точно, когда это произошло, я
вздремнул&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/412453/"&gt;&lt;img alt="Рендер" src="http://img-fotki.yandex.ru/get/4412/22199227.a/0_64b25_c4a084b2_L" title="Рендер"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="рендер"></category><category term="конкурс"></category><category term="вантуз"></category></entry><entry><title>Вантузы</title><link href="/posts/2011/09/11/vantuzy/" rel="alternate"></link><updated>2011-09-11T03:25:32+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-09-11:posts/2011/09/11/vantuzy/</id><summary type="html">&lt;p&gt;Пробую 2.59, решил сделать и отрендерить вантузы. Халтурно вышло
конечно, но и спать тоже хочется&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/412452/"&gt;&lt;img alt="Рендер вантузов" src="http://img-fotki.yandex.ru/get/5309/22199227.a/0_64b24_18317eb5_L" title="Рендер вантузов"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="вантуз"></category><category term="моделирование"></category><category term="набросок"></category></entry><entry><title>auto-complete</title><link href="/posts/2011/09/08/auto-complete/" rel="alternate"></link><updated>2011-09-08T15:16:46+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-09-08:posts/2011/09/08/auto-complete/</id><summary type="html">&lt;p&gt;Попробую эту штучку, давно её видел, но как-то привык к простому
дополнению по &lt;code class="code"&gt;
Alt+/&lt;/code&gt;
 Выглядит прикольно.&lt;/p&gt;
&lt;div class="text-center"&gt;&lt;div class="youtube" align="left"&gt;&lt;/div&gt;&lt;iframe width="425" height="350" src="https://www.youtube.com/embed/rGVVnDxwJYE" frameborder="0"&gt;&lt;/iframe&gt;&lt;/div&gt;</summary><category term="emacs"></category><category term="автодополнение"></category></entry><entry><title>Два интернет канала</title><link href="/posts/2011/09/05/dva-internet-kanala/" rel="alternate"></link><updated>2011-09-05T23:47:41+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-09-05:posts/2011/09/05/dva-internet-kanala/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Чтобы повысить надёжность и увеличить ширину канала решено было
купить вторую аналогичную линию у того же провайдера (изначально хотели
у другого, но никто иной, к сожалению, не обслуживает данную линию).
Вышло два интерфейса eth1 и eth2 для соединения с модемом и ppp0,ppp1
после подъёма интернет-соединения для каждого из каналов. Дальше
пришлось поискать как же сбалансировать загрузку&amp;nbsp; от запросов, меня
устроил
&lt;a class="reference external" href="http://lartc.org/howto/lartc.rpdb.multiple-links.html"&gt;простой&lt;/a&gt;
вариант, пункт 4.2.2 был для меня основным. Маршруты для 127.0.0.0/8 я
не делал. Вес на каналы выставлен одинаковый. Осталось только завести
скрипт, который будет проверять соединения и переключать default
gateway-и. Вариант с кешированием маршрутов меня устраивает из-за того,
что мне не хочется возможности резкой смены IP-адреса, некоторые
корпоративные ресурсы меня резко обрывают на полпути из-за этого.&lt;/p&gt;
</summary><category term="PPPoE"></category><category term="интерфейс"></category><category term="интернет"></category><category term="два"></category><category term="провайдер"></category><category term="Я"></category><category term="работа"></category></entry><entry><title></title><link href="/posts/2011/09/03/urn:ya.ru:post/22199227/1436/" rel="alternate"></link><updated>2011-09-03T21:54:19+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-09-03:posts/2011/09/03/urn:ya.ru:post/22199227/1436/</id><summary type="html">&lt;p&gt;на крыльях ночи!&lt;/p&gt;
</summary></entry><entry><title>Вспомнил XML Schema</title><link href="/posts/2011/09/03/vspomnil-xml-schema/" rel="alternate"></link><updated>2011-09-03T21:51:17+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-09-03:posts/2011/09/03/vspomnil-xml-schema/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Потренировался в написании xsd-схем, сделал небольшой на 11 килобайт
валидатор для наших XML-аниматоров. Надеюсь им данный файл поможет, и
искать ошибки станет легче, т.к. опечатки будут выявляться ещё до
заливки на устройство, а некоторые типы контроллироваться.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Жалко, что в XML Schema нельзя по фиксированному значению параметра
выбирать одни или другие параметры или их количество. Но пока и так
хорошо.&lt;/p&gt;
</summary><category term="xml"></category><category term="программирование"></category><category term="xsd"></category><category term="схема"></category><category term="отдых"></category><category term="Я"></category></entry><entry><title>Жизнь или смерть?</title><link href="/posts/2011/09/02/zhizn-ili-smert/" rel="alternate"></link><updated>2011-09-02T10:06:40+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-09-02:posts/2011/09/02/zhizn-ili-smert/</id><summary type="html">&lt;p&gt;Похоже у оператора Life какие-то технические неисправности. Со
вчерашнего дня деньги на телефоны не пришли ещё, служба *100# о
состоянии баланса не доступна по техническим причинам, сайт тоже не
доступен был. А сейчас на нём предупреждения, и похоже, что файловая
система в режиме Read Only, наверное у них какие-то сбои с винчестером
(чисто мои догадки), хотя почему mysql не доступен, только если он не
крутился на этой же машине.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/409617/"&gt;&lt;img alt="life:)" src="http://img-fotki.yandex.ru/get/5410/22199227.a/0_64011_658f217a_L" title="life:)"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="Life :)"></category><category term="ошибка"></category><category term="жизнь"></category><category term="оператор"></category></entry><entry><title>Adiós amigos</title><link href="/posts/2011/08/31/adios-amigos/" rel="alternate"></link><updated>2011-08-31T18:30:58+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-08-31:posts/2011/08/31/adios-amigos/</id><summary type="html">&lt;p&gt;Грустно то, что код который создавал полгода назад, который не
успели включить в активный функционал пригодится для того, чтобы
похоронить проект, экспортировав всё что можно на другие Google ресурсы.
Чтобы не потерять лояльность пользователей Google; а для меня время
скоро закончится ибо … как говорят adiós Slide… :(&lt;/p&gt;
</summary><category term="жизнь"></category><category term="google"></category><category term="грусть"></category><category term="slide"></category><category term="Я"></category><category term="работа"></category></entry><entry><title>Что тут думать, трясти нужно</title><link href="/posts/2011/08/29/chto-tut-dumat-triasti-nuzhno/" rel="alternate"></link><updated>2011-08-29T15:34:53+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-08-29:posts/2011/08/29/chto-tut-dumat-triasti-nuzhno/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Писал, писал вебсервис для Samba4 для внутренних целей, что-то типа
SWAT4, но более узкого профиля и затрагивающий специфику моего AD. А
потом прижало время и запустил как обычно полуручной скрипт, который
сделал всё что нужно (я его ещё раньше написал, но он управляется только
мной), а хотелось бы сложить полномочия по созданию и управлению AD.&lt;/p&gt;
</summary><category term="сервер"></category><category term="сервис"></category><category term="скрипт"></category><category term="утилита"></category><category term="samba4"></category><category term="жизнь"></category><category term="работа"></category></entry><entry><title>Ролик и Яндекс.Видео</title><link href="/posts/2011/08/24/rolik-i-iandeksvideo/" rel="alternate"></link><updated>2011-08-24T11:18:48+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-08-24:posts/2011/08/24/rolik-i-iandeksvideo/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Пожалуй это просто была небольшая проблема на Яндекс.Видео, стечение
обстоятельств. Т.к. мой второй ролик, который я загружал, отображается
сейчас нормально. И есть возможность повысить качество воспроизведения.
А вот первый в формате MOV оно не восприняло как HD, хотя битрейт был
ещё выше, чем в FLV.&lt;/p&gt;
</summary><category term="видео"></category><category term="ролик"></category><category term="Яндекс"></category></entry><entry><title></title><link href="/posts/2011/08/22/urn:ya.ru:post/22199227/1426/" rel="alternate"></link><updated>2011-08-22T13:11:55+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-08-22:posts/2011/08/22/urn:ya.ru:post/22199227/1426/</id><summary type="html">&lt;p&gt;Ура! Моё видео на Vimeo сконвертировалось. Теперь можно смотреть.
Дополнительный курсор, который всегда виден – это от ffmpeg.&lt;/p&gt;
&lt;div class="text-center"&gt;&lt;div class="vimeo" align="left"&gt;&lt;/div&gt;&lt;iframe width="450" height="370" src="https://player.vimeo.com/video/27969738" frameborder="0"&gt;&lt;/iframe&gt;&lt;/div&gt;</summary><category term="bge"></category><category term="CEGUI"></category><category term="программирование"></category><category term="улучшение"></category><category term="blender"></category><category term="актуатор"></category></entry><entry><title>Моё видео и Vimeo</title><link href="/posts/2011/08/22/moio-video-i-vimeo/" rel="alternate"></link><updated>2011-08-22T01:07:26+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-08-22:posts/2011/08/22/moio-video-i-vimeo/</id><summary type="html">&lt;p&gt;8 часов назад залил своё видео длиной в 19 минут, выждал 1 час, как
Vimeo.com сказал, пока начнётся конвертация. Теперь моё видео просто
стоит и написано, что моё видео скоро начнёт конвертироваться.. Что-то
мне уже надоедает ждать, залить его что ли на YouTube. На &lt;strong&gt;Яндекс.Видео
я пробовал заливать&lt;/strong&gt;, но оно убирает возможность режима с повышенным
качеством и на скринкасте &lt;strong&gt;ничего не разобрать&lt;/strong&gt;, с таким же успехом
мог записать на древний мобильник с экрана и выложить. Печально, но этот
ролик ни в какую не хочет нормально запихнуться в Я.Видео, а все мои
предыдущие видео проходили на ура :(&lt;/p&gt;
</summary><category term="bge"></category><category term="видео"></category><category term="Яндекс"></category><category term="скринкастинг"></category><category term="негодую"></category><category term="vimeo"></category></entry><entry><title></title><link href="/posts/2011/08/21/urn:ya.ru:post/22199227/1421/" rel="alternate"></link><updated>2011-08-21T16:29:12+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-08-21:posts/2011/08/21/urn:ya.ru:post/22199227/1421/</id><summary type="html"></summary></entry><entry><title>Я назову его Сашко</title><link href="/posts/2011/08/20/ia-nazovu-ego-sashko/" rel="alternate"></link><updated>2011-08-20T21:19:07+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-08-20:posts/2011/08/20/ia-nazovu-ego-sashko/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/406889"&gt;&lt;img alt="Я назову его Сашко" src="http://img-fotki.yandex.ru/get/4610/22199227.a/0_63569_16041fc_-1-L" title="Я назову его Сашко"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/406890"&gt;&lt;img alt="Я назову его Сашко" src="http://img-fotki.yandex.ru/get/4707/22199227.a/0_6356a_f021a072_-1-L" title="Я назову его Сашко"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/406892"&gt;&lt;img alt="Я назову его Сашко" src="http://img-fotki.yandex.ru/get/4812/22199227.a/0_6356c_a15991d1_-2-L" title="Я назову его Сашко"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Это паук-оса, у нас нынче начинает встречаться всё чаще и чаще, для
человека без аллергий безобиден, укусить может, но не больно. Я его
сфоткал в дождь.&lt;/p&gt;</summary><category term="паук"></category><category term="паук-оса"></category></entry><entry><title>Сорняк засадил по самые булочки</title><link href="/posts/2011/08/20/sorniak-zasadil-po-samye-bulochki/" rel="alternate"></link><updated>2011-08-20T21:08:39+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-08-20:posts/2011/08/20/sorniak-zasadil-po-samye-bulochki/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/406886"&gt;&lt;img alt="ALIM2235.JPG" src="http://img-fotki.yandex.ru/get/4610/22199227.a/0_63566_b477af59_L" title="ALIM2235.JPG"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/406887"&gt;&lt;img alt="Заголовок" src="http://img-fotki.yandex.ru/get/4610/22199227.a/0_63567_24e8e50d_L" title="Заголовок"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Аааа! Сорняки атакуют мою картошку и измываются над ней&lt;/p&gt;</summary><category term="сорняк"></category><category term="плод"></category><category term="картофель"></category><category term="проросло"></category></entry><entry><title>Актуаторы для CEGUI</title><link href="/posts/2011/08/19/aktuatory-dlia-cegui/" rel="alternate"></link><updated>2011-08-19T01:26:38+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-08-19:posts/2011/08/19/aktuatory-dlia-cegui/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Сегодня доделал актуаторы для загрузки схем, раскладок и выгрузки,
для смены курсора мыши, для показа и скрытия курсора. Записал видео, где
быстро заменил тему TaharezLook на OgreTray, чтобы показать как легко
можно сменить стиль интерфейса, без переработки его самого.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Но видео долго перекодировалось и я не успел его залить на
Яндекс.Видео. Так что чуть позже.&lt;/p&gt;
</summary><category term="bge"></category><category term="CEGUI"></category><category term="программирование"></category><category term="улучшение"></category><category term="blender"></category><category term="видео"></category><category term="актуатор"></category></entry><entry><title>Плавающие окна и TAB</title><link href="/posts/2011/08/18/plavaiushchie-okna-i-tab/" rel="alternate"></link><updated>2011-08-18T02:06:51+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-08-18:posts/2011/08/18/plavaiushchie-okna-i-tab/</id><summary type="html">&lt;p&gt;Эхх, почему я не использовал клавишу &lt;kbd class="kbd"&gt;
TAB&lt;/kbd&gt;
 для плавающих окон раньше.
Особенно для GIMP, особенно на 15&amp;quot; мониторе. Т.к. это бы сэкономило мне
время и нервы.&lt;/p&gt;
</summary><category term="gimp"></category><category term="размышления"></category><category term="жизнь"></category><category term="окно"></category></entry><entry><title></title><link href="/posts/2011/08/16/urn:ya.ru:post/22199227/1403/" rel="alternate"></link><updated>2011-08-16T11:58:02+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-08-16:posts/2011/08/16/urn:ya.ru:post/22199227/1403/</id><summary type="html">&lt;div class="text-center"&gt;&lt;div class="yavideo" align="left"&gt;&lt;/div&gt;&lt;object id="flash" width="450" height="370" data="http://flv.video.yandex.ru/lite/imdagger/l385t35fji.4227/" type="application/x-shockwave-flash"&gt;&lt;param value="http://flv.video.yandex.ru/lite/imdagger/l385t35fji.4227/" name="movie"&gt;&lt;param value="high" name="quality"&gt;&lt;param value="transparent" name="wmode"&gt;&lt;param value="#ffffff" name="bgcolor"&gt;&lt;param value="true" name="allowfullscreen"&gt;&lt;param value="sameDomain" name="allowscriptaccess"&gt;&lt;param value="scale" name="scale"&gt;&lt;/object&gt;&lt;/div&gt;&lt;p&gt;Добавил обработку клавиатуры. Теперь можно не только мышью
манипулировать, но и вводить тексты. Системный курсор на самом деле не
виден, его просто ffmpeg добавляет, а версии, где можно выбирать это у
меня не было.&lt;/p&gt;
</summary><category term="blender"></category><category term="bge"></category><category term="CEGUI"></category><category term="улучшение"></category></entry><entry><title>+70 fps</title><link href="/posts/2011/08/15/70-fps/" rel="alternate"></link><updated>2011-08-15T22:28:49+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-08-15:posts/2011/08/15/70-fps/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Заметил, что моя сборка Blender работает медленнее на 70fps, чем моя
прошлая сборка (которую ещё прошлым летом делал). Я думал, что это CEGUI
замедляет так. Но после выключения вывода и всех событий от CEGUI fps не
сильно увеличился. Где-то &lt;em&gt;только на 17fps&lt;/em&gt;. Я стал перебирать ту
ревизию, где это случилось и оно конечно же указало на момент, когда я
добавлял X-Ray.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Сначала я подумал, что вот оно нашлось. Просто вывожу два раза,
поэтому и падает fps. Но тесты показали, что это не так. Оказалось, что
очистка GL_DEPTH_BUFFER и GL_STENCIL_BUFFER и отнимают всё время. У
меня получается идёт очистка трафаретного буфера, потом вывод объектов,
затем очистка буфера глубины. Оно и пожирает более половины
производительности, т.к. почти всё время код &lt;strong&gt;простаивает в очистке
этих буферов&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Я пока временно выключил их очистку, несмотря на то, что это
частично сломает вывод X-Ray.&lt;/p&gt;
</summary><category term="bge"></category><category term="производительность"></category><category term="очистка"></category><category term="улучшение"></category><category term="blender"></category><category term="регрессия"></category><category term="буфер"></category></entry><entry><title>Разбор колеса от роликовых коньков</title><link href="/posts/2011/08/14/razbor-kolesa-ot-rolikovykh-konkov/" rel="alternate"></link><updated>2011-08-14T21:10:14+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-08-14:posts/2011/08/14/razbor-kolesa-ot-rolikovykh-konkov/</id><summary type="html">&lt;p&gt;Чтобы заменить само колесо на новое, требуется вынуть из старого
колеса подшипники и втулку. Затем разобрать подшипник и вымыть его в
каком-нибудь водоотталкивающем растворе или керосине. У меня ролики
достаточно старые и поэтому у них устройство колеса не включает втулку.
Это просто два подшипника, которые разделены перегородкой колеса.&lt;/p&gt;
&lt;p&gt;Вначале я пытался найти в Интернете ответ, но то, что я нашёл было
примерами со втулкой и выдавливанием. Случайно надавив на подшипник я
сместил второй и решил попробовать его вынуть. Сначала я доставал их
просто подковыривая скраю плоской отвёрткой.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/404960/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/5013/22199227.a/0_62de0_de4e3b9b_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Но так было сложно и неудобно, да и выдавить получалось на небольшое
расстояние второй подшипник. Поэтому я стал пробовать подхватить
отвёрткой изнутри его. И это сработало, стало намного легче доставать.
Это как будто пытаешься засунуть отвёртку в отверстие и вскрыть крышку.
Пару раз по кругу проходишься и всё.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/404963/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/5213/22199227.a/0_62de3_7e0deeb1_M" title="image1"/&gt;&lt;/a&gt; &lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/404965/"&gt;&lt;img alt="image2" src="http://img-fotki.yandex.ru/get/4706/22199227.a/0_62de5_16d9d165_M" title="image2"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Так я смог почистить колёса керосином, промыть некоторые части
спиртом. И сами колёса вымыть водой с мылом.&lt;/p&gt;</summary><category term="подшипник"></category><category term="жизнь"></category><category term="чистка"></category><category term="пересборка"></category><category term="разбор"></category><category term="колесо"></category><category term="роликовые"></category><category term="коньки"></category></entry><entry><title></title><link href="/posts/2011/08/13/urn:ya.ru:post/22199227/1399/" rel="alternate"></link><updated>2011-08-13T21:42:06+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-08-13:posts/2011/08/13/urn:ya.ru:post/22199227/1399/</id><summary type="html">&lt;p&gt;эх, снова забег длиной в 1 год&lt;/p&gt;
</summary></entry><entry><title>Размял мозг</title><link href="/posts/2011/08/11/birthday-paradox/" rel="alternate"></link><updated>2014-07-16T17:56:00+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-08-11:posts/2011/08/11/birthday-paradox/</id><summary type="html">&lt;p&gt;Решил самостоятельно вычислить вероятность совпадения дня рождения в
группе из 30 человек, но формулы как обычно вывести в общем виде. Т.к.
это позволит поддержать мой мозг в бодром виде и напомнит мне ТеорВер.
Вообще это классическая задача о парадоксе дней рождений.&lt;/p&gt;
&lt;p&gt;И так, предположим, что наша группа состоит из &lt;strong&gt;N человек&lt;/strong&gt;. Всего
в году &lt;strong&gt;K дней&lt;/strong&gt;. Допустим дни рождения распределены равномерно, т.к.
&lt;em&gt;это наихудший случай&lt;/em&gt; и приводит к &lt;em&gt;минимальной оценочной вероятности&lt;/em&gt;.
Возьмём два человека и вычислим вероятность, что они родились в один и
тот же день, если каждый из них родился в &lt;span class="formula"&gt;&lt;i&gt;D&lt;/i&gt;&lt;sub&gt;&lt;i&gt;i&lt;/i&gt;&lt;/sub&gt;&lt;/span&gt; день. Для
этого рассмотрим все пары дней в которые могли родится человек A1 и A2:
&lt;span class="raw-latex"&gt;$math$ \{(i, j) | \forall (i, j) \in [1, K] \} $/math$&lt;/span&gt;.
Количество пар таких, то &lt;span class="raw-latex"&gt;$math$ i=j $/math$&lt;/span&gt; всего K, а
общее число пар &lt;span class="raw-latex"&gt;$math$ K^2 $/math$&lt;/span&gt;, поэтому &lt;span class="raw-latex"&gt;$math$ P(D_{A1} = D_{A2}) = \frac{1}{K} $/math$&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;Теперь рассмотрим все пары людей из группы. Таких пар G&lt;sub&gt;ij&lt;/sub&gt;
получится &lt;span class="raw-latex"&gt;$math$ |G_{ij}| = C(N, 2) = \frac{N!}{(N - 2)! \cdot 2} $/math$&lt;/span&gt;. Вероятность того,
что оба человека из пары родились в разные дни равна &lt;span class="raw-latex"&gt;$math$ (1 - \frac{1}{K}) $/math$&lt;/span&gt;, поэтому
вероятность, что все люди в группе родились в разные дни равна &lt;span class="raw-latex"&gt;$math$ (1 - \frac{1}{K})^{C(N, 2)} $/math$&lt;/span&gt;.
Из этого следует &lt;span class="raw-latex"&gt;$math$ P(\exists (i, j), что\ D_i = D_j) = 1 - (1 - \frac{1}{K})^{C(N, 2)} $/math$&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;Формула уже найдена, но аппроксимируем для случая, когда K
достаточно большое, т.е. пусть &lt;span class="raw-latex"&gt;$math$ K \rightarrow -\infty $/math$&lt;/span&gt;, тогда преобразуем выражения для
применения второго замечательного предела: &lt;span class="raw-latex"&gt;$math$ lim_{x \rightarrow -\infty} 1 -
(1 + \frac{1}{-K})^{\frac{-K \cdot C(N, 2)}{-K}} = 1 - e^{\frac{C(N, 2)}{-K}} $/math$&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;Вычислим такую вероятность для группы в N=30 человек и количество
дней в году K=365.&lt;/p&gt;
&lt;p&gt;&lt;span class="raw-latex"&gt;$$math$$ P(\exists (i, j), что\ D_i = D_j) = 1 - (1 - \frac{1}{365})^{435} \approx 0.6968163 $$/math$$&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Т.е. не научным языком и грубо говоря, это 70%.&lt;/p&gt;
&lt;p&gt;Что является достаточно большой вероятностью для такой маленькой
группы. Легко показать, что при N → K такая вероятность стремится к 1.&lt;/p&gt;
</summary><category term="тренировка"></category><category term="вероятность"></category><category term="теория"></category><category term="парадокс"></category><category term="мозг"></category><category term="знания"></category><category term="память"></category><category term="день"></category><category term="рождение"></category><category term="задача"></category></entry><entry><title>Шарики и ролики</title><link href="/posts/2011/08/11/shariki-i-roliki/" rel="alternate"></link><updated>2011-08-11T01:13:00+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-08-11:posts/2011/08/11/shariki-i-roliki/</id><summary type="html">&lt;p&gt;Сегодня сходил покатался на роликах на прокат. Я не стоял уже на
роликах до этого момента 10 лет, может даже чуть больше. Зашнуровываю я
ролики, и сердце бьётся… потому, что я думаю не о том, как крепче их
зашнуровать. А воображаю как я сейчас поднимусь и смачно шлёпнуть на
глазах у всех.&lt;/p&gt;
&lt;p&gt;Поставил я свои туфли рядом возле лавочки. Вещи там не сдают :/ И
поэтому за ними никто не смотрит, в следующий раз возьму что-нибудь типа
простых кед или шлёпанцев (мне идти от дома до катка очень близко).&lt;/p&gt;
&lt;p&gt;И вот я поднимаюсь, ноги дрожат, начинаю двигаться. Фух! Я не упал,
ноги помнят, хоть и мандражируют! После этого момента мне полегчало, я
начал делать шаги, а потом переносить вес и попытками плавного
перемещения.&lt;/p&gt;
&lt;p&gt;Вообще, когда ты нуб в этом деле (ибо я катался давно и не очень
много), как я, то чувствуешь моральный дискомфорт от того, что все
быстро ездят и не испытывают трудностей. И подсознательно хочется ещё
увидеть парочку таких же как ты, чтобы не было обидно. Обычная защитная
реакция мозга на жизнь в социуме, чтобы он мог оправдать сам себя перед
фактом, что ты последний.&lt;/p&gt;
&lt;p&gt;Я катался довольно долго и вот… бах первый раз упал. Не очень
больно, т.к. у меня заниженный болевой порог, потом я ступил и решил
поучиться тормозить при помощи тормоза. С учётом, что даже в детстве я
не наловчился держать равновесие во время торможения, то ясно, что
дальше произошло. Я снова упал, но мягко.&lt;/p&gt;
&lt;p&gt;Потом я пытался кататься, прошло время и вот я упал больно на
повороте, и неудачно. Я всем весом упал на большой палец раскрытой левой
ладони. Вот это было уже больно. И мне пока сложно сжимать руку.&lt;/p&gt;
&lt;p&gt;Главное было для меня найти в себе духа продолжить, я размял немного
руку и стал смотреть, как катаются другие и пользоваться стандартной
процедурой мимикрии. Тот, кто меня обгонят, того я и пробовал
клонировать.&lt;/p&gt;
&lt;p&gt;Потом мне чуть полегчало от того, что прибавилось немного народу и
один парень не очень стоят на роликах. Я даже сначала хотел к компании
подкатить (благо ребята хорошие с виду), но потому подумал, что чего их
доставать, я пока и сам поучусь кататься.&lt;/p&gt;
&lt;p&gt;Хорошо и немного больно провёл время :) Жалко, что мои роликовые коньки
уже маленькие для меня :(.&lt;/p&gt;
</summary><category term="жизнь"></category><category term="палец"></category><category term="кисть"></category><category term="повреждение"></category><category term="катание"></category><category term="ролики"></category></entry><entry><title>Гранд-очистка</title><link href="/posts/2011/08/10/grand-ochistka/" rel="alternate"></link><updated>2011-08-10T17:14:44+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-08-10:posts/2011/08/10/grand-ochistka/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Подчистил я сегодня почту, навёл некоторый порядок. У меня и так всё
по папочкам всё разбито, по тематикам. Метки использую. Но вот писем
накопилась тьма. Надеюсь меня простят сотрудники Яндекс, что я хранил
4000+ лишних писем x-D Аж руки устали всё чистить и приводить в порядок,
теперь у меня лежат только свеженькие нужные письма.&lt;/p&gt;
</summary><category term="жизнь"></category><category term="порядок"></category><category term="Яндекс"></category><category term="почта"></category><category term="очистка"></category><category term="Я"></category></entry><entry><title>Папины арбузы</title><link href="/posts/2011/08/10/papiny-arbuzy/" rel="alternate"></link><updated>2011-08-10T13:23:50+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-08-10:posts/2011/08/10/papiny-arbuzy/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/403895"&gt;&lt;img alt="Арбуз" src="http://img-fotki.yandex.ru/get/4410/22199227.a/0_629b7_ad4a4638_L" title="Арбуз"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/403896"&gt;&lt;img alt="Арбузы с другой стороны" src="http://img-fotki.yandex.ru/get/5306/22199227.a/0_629b8_174a4cf7_L" title="Арбузы с другой стороны"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/403897"&gt;&lt;img alt="Арбуз" src="http://img-fotki.yandex.ru/get/5306/22199227.a/0_629b9_fbef79b7_L" title="Арбуз"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/403898"&gt;&lt;img alt="Бахча" src="http://img-fotki.yandex.ru/get/5012/22199227.a/0_629ba_1cd21914_L" title="Бахча"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Мой папа садовод&lt;/p&gt;</summary><category term="выросло"></category><category term="отец"></category><category term="бахча"></category><category term="арбуз"></category></entry><entry><title>Повезло</title><link href="/posts/2011/08/09/povezlo/" rel="alternate"></link><updated>2011-08-09T21:57:16+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-08-09:posts/2011/08/09/povezlo/</id><summary type="html">&lt;p&gt;Сегодня одел шлёпанцы (кара тем, кто их обзывает сланцами, ибо ещё
сам Чехов называл это шлёпанцами) … в дождик небольшой. А они у меня за
год тренировок износились и сцепление с поверхностью очень низкое.
Подскользнулся я посредине дороги и упал на проезжей части, хорошо, что
брат помог быстро встать. Т.к. пальцы на ноге скользнули и подломились
внутрь (терпеть не могу, когда так бывает).&lt;/p&gt;
&lt;p&gt;И вот и иду с мокрой ногой и дыркой в носке от асфальта, и думаю что
эх.. как невесело вышло. Что день сегодня какой-то неудачный, аж
грустно стало. Пошёл на тренировку и опять подскользнулся при переходе
проезжей части, но уже вечером и один. Благо успел второй ногой стать на
тротуар и первой засадил пальцами в бордюр. Грязно выматюкался, т.к.
опять таже нога и пальцы. Но пошёл дальше уже размышляя, что сегодня
вообще не везёт. Ещё на тренировке как-то вяло шло.&lt;/p&gt;
&lt;p&gt;Возвращаюсь я назад на другую (которая админская) работу положить
вещи и только я немного прошёл, а за спиной столкнулись две машины лоб в
лоб. Вот я и подумал.. не всё же день сегодня удался и мне повезло :)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;UPD. Для тех, кто задаётся вопросом зачем носки одевать под шлёпанцы,
стоит задуматься о шлёпанцах в дождь изначально, т.к. это была просто
оптимизация, сначала одеть туфли и положить шлёпанцы в пакет, а потом
снять туфли и одеть шлёпанцы, элементарно, Ватсон.&lt;/strong&gt;&lt;/p&gt;
</summary><category term="Я"></category><category term="повезло"></category><category term="жизнь"></category></entry><entry><title>Правка Firefox</title><link href="/posts/2011/08/08/pravka-firefox/" rel="alternate"></link><updated>2011-08-08T22:07:45+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-08-08:posts/2011/08/08/pravka-firefox/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Сегодня ковырял omni.jar от Firefox4, я правил
&lt;strong&gt;chrom/browser/content/browser.js&lt;/strong&gt; функцию onLocationChange. Некоторое
время убил просто на то, что я сделаю правку в этом zip-архива, запускаю
Firefox, а он ноль внимания: использует старые данные. Я уже вернул
omni.jar на оригинальный, ноль эмоций: использует последние мои правки.
И закралась у меня мысль, что он кеширует эти данные. И мысль моя была
верна, по дате и размеру я нашёл в
~/.mozilla/firefox/nnnnn.default/&lt;strong&gt;XUL.mfast&lt;/strong&gt;. Уже по расширению я
почувствовал, что это связано с ускорением, раз fast. Мои мысли
подтвердились — это просто XUL-кеш. Так что, если правите omni.jar, то
стоит не забывать &lt;strong&gt;удалять XUL.mfast&lt;/strong&gt;. Т.к. это сбережёт нервы, ибо
Firefox его обновляет не сильно активно и иногда запутывается.&lt;/p&gt;
</summary><category term="firefox"></category><category term="javascript"></category><category term="программирование"></category><category term="доработка"></category></entry><entry><title>Дао программирования</title><link href="/posts/2011/08/07/dao-programmirovaniia/" rel="alternate"></link><updated>2011-08-07T04:07:59+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-08-07:posts/2011/08/07/dao-programmirovaniia/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Однажды новичок спросил мастера:&lt;/p&gt;
&lt;p&gt;— О, великий мастер, как мне писать программы, чтобы не испытывать
стресса при заливке кода на продакшен?&lt;/p&gt;
&lt;p&gt;— Ты должен отправиться в отшельничество и один год постигать написание
кода без ошибок, — сказал мастер.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp; Новичок так и сделал, он один год в одиночестве созерцал код и
пытался предсказать ошибки ещё до их написания. Когда он вернулся он
спросил мастера снова:&lt;/p&gt;
&lt;p&gt;— О, мастер, я всё ещё испытываю стресс при заливке кода в продакшен,
что мне делать?&lt;/p&gt;
&lt;p&gt;— Ты уже просветлил свой разум, настал черёд очистить душу, — сказал
мастер. — Теперь ты должен нагрузить QA своими проблемами.&lt;/p&gt;
&lt;p&gt;— О, мастер, — удивлённо воскликнул новичок. — Как я могу так поступать?&lt;/p&gt;
&lt;p&gt;— Если ты хочешь постигнуть природу Дао, ты должен постигнуть путь
свободного течения по реке, где не требуется прикладывать усилий, —
ответил мастер.&lt;/p&gt;
&lt;p&gt;&amp;nbsp; И ученик перешёл в итерационную фазу разработки, всё более и более
просветляясь и позволяя коду быть в единстве с природой машин, и
позволяя его проверять на ранних фазах.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Ученик вернулся к мастеру и снова спросил:&lt;/p&gt;
&lt;p&gt;— Я всё ещё не решил свои проблемы, что мне делать?&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Мастер ему ответил:&lt;/p&gt;
&lt;p&gt;— Ты слишком долго блуждал в поисках идеального решения твоей проблемы,
но истинное решение находится лишь в Дао, оно всегда было рядом с тобой,
нужно лишь допускать ошибки, которые и не ошибки вовсе. Ибо они тоже
едины с Дао и пользователь никогда их не увидит, так как он нечист и
неспособен созерцать Дао.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; И прозрел ученик и пошёл он писать код без стресса и заливал он его
тысячи раз в продакшен. И не видели люди багов, ибо баги, которые едины
с Дао не являются ошибками системы.&lt;/p&gt;
</summary><category term="ученик"></category><category term="Дао"></category><category term="программирование"></category><category term="мастер"></category><category term="байка"></category></entry><entry><title>Ага! Попался!</title><link href="/posts/2011/08/07/aga-popalsia/" rel="alternate"></link><updated>2011-08-07T01:56:07+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-08-07:posts/2011/08/07/aga-popalsia/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/402940"&gt;&lt;img alt="Попался" src="http://img-fotki.yandex.ru/get/5409/22199227.a/0_625fc_e780ccc7_L" title="Попался"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Аааа!!.. они меня нашли и поймали, задержание прошло быстро&lt;/p&gt;</summary><category term="Я"></category><category term="google"></category><category term="slide"></category></entry><entry><title>С IT happens</title><link href="/posts/2011/08/06/s-it-happens/" rel="alternate"></link><updated>2011-08-06T21:13:38+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-08-06:posts/2011/08/06/s-it-happens/</id><summary type="html">&lt;p&gt;&lt;a class="reference external" href="http://ithappens.ru/story/6275"&gt;#6275&lt;/a&gt; &lt;strong&gt;«Плачут все. Но
настоящие сисадмины плачут тайно, потому что настоящие сисадмины не
плачут никогда.»&lt;/strong&gt;&lt;/p&gt;
&lt;p class="cut"&gt;&lt;a class="h-link reference internal" href="#cut_53100432"data-toggle="collapse"&gt;http://ithappens.ru/story/6275&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_53100432"&gt;
&lt;!--  --&gt;
&lt;blockquote&gt;
&lt;p&gt;Самое сложное в этой жизни — улыбаться, несмотря ни на что. Загадка
настоящего сисадмина в том, что его жизнь среди чайников гораздо
веселее
и проще, чем у окружающих, — по крайней мере, именно так считается. А
на самом деле…&lt;/p&gt;
&lt;p&gt;Первый админ плачет от того, что сеть упала.&lt;/p&gt;
&lt;p&gt;Второй снова и снова объясняет элементарные вещи тем, кто его не
слышит.&lt;/p&gt;
&lt;p&gt;У третьего прямо во время коллапса побился бэкап — и он плачет, не
помня, что настраивал бэкап бэкапа на другой сервер. Плачут все. Но
настоящие сисадмины плачут тайно, потому что настоящие сисадмины не
плачут никогда. Они настраивают, объясняют, сеть падает, вопросы
повторяются, и они снова настраивают и объясняют… А окружающие, этого
не понимая, пытаются выяснить секрет ленивой и ненапряжной жизни.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
</summary><category term="сисадмин"></category><category term="жизнь"></category></entry><entry><title>Greasemonkey и onclick</title><link href="/posts/2011/08/05/greasemonkey-i-onclick/" rel="alternate"></link><updated>2011-08-05T23:34:58+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-08-05:posts/2011/08/05/greasemonkey-i-onclick/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Пытаясь помочь человеку с скриптом, который использовал традиционную
модель DOM, узнал, что установить onclick из Greasemonkey не выйдет и
это нужно делать при помощи addEventListener из DOM2. Т.к. вариант с
установкой строки в onclick теряет область видимости скрипта. После
правки решил ещё взглянуть зачем этой функции 3-ий параметр (заодно
узнал про войну двух гигантов оттуда)
&lt;a class="reference external" href="http://www.quirksmode.org/js/events_advanced.html"&gt;http://www.quirksmode.org/js/events_advanced.html&lt;/a&gt;&lt;/p&gt;
</summary><category term="Greasemonkey"></category><category term="javascript"></category><category term="программирование"></category><category term="скрипт"></category></entry><entry><title>Сборка Riak 0.14.2 на Erlang OTP 14B03</title><link href="/posts/2011/08/02/sborka-riak-0142-na-erlang-otp-14b03/" rel="alternate"></link><updated>2011-08-02T02:26:37+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-08-02:posts/2011/08/02/sborka-riak-0142-na-erlang-otp-14b03/</id><summary type="html">&lt;p&gt;Если взять исходники &lt;strong&gt;не из master&lt;/strong&gt;, а просто со страницы
скачивании от Basho, то с новым Erlang есть несколько проблем при сборке
Riak. Чтобы не выпадало &lt;strong&gt;src/riakc_pb_socket.erl:62: type
ip_address() undefined&lt;/strong&gt; нужно применить патч из
&lt;a class="reference external" href="https://github.com/basho/riak-erlang-client/commit/6d3bafd8322270113a9401ba30ad35ec4c7ce95f"&gt;этого&lt;/a&gt;
коммита к 0.14.2 (либо вытянуть просто текущую версию из master). Также
выпадает ошибка при сборке ebloom фильтра:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
==&amp;gt; ebloom (compile)
Compiling c_src/ebloom_nifs.cpp
c_src/ebloom_nifs.cpp: In function 'ERL_NIF_TERM ebloom_new_filter(ErlNifEnv*, int, const ERL_NIF_TERM*)':
c_src/ebloom_nifs.cpp:85: ошибка: нет декларации 'enif_alloc_resource_compat' в этой области видимости
c_src/ebloom_nifs.cpp:90: ошибка: нет декларации 'enif_release_resource_compat' в этой области видимости
c_src/ebloom_nifs.cpp: In function 'ERL_NIF_TERM ebloom_serialize(ErlNifEnv*, int, const ERL_NIF_TERM*)':
c_src/ebloom_nifs.cpp:247: ошибка: нет декларации 'enif_alloc_binary_compat' в этой области видимости
c_src/ebloom_nifs.cpp: In function 'ERL_NIF_TERM ebloom_deserialize(ErlNifEnv*, int, const ERL_NIF_TERM*)':
c_src/ebloom_nifs.cpp:263: ошибка: нет декларации 'enif_alloc_resource_compat' в этой области видимости
c_src/ebloom_nifs.cpp:266: ошибка: нет декларации 'enif_release_resource_compat' в этой области видимости
c_src/ebloom_nifs.cpp: In function 'int on_load(ErlNifEnv*, void**, ERL_NIF_TERM)':
c_src/ebloom_nifs.cpp:287: ошибка: нет декларации 'enif_open_resource_type_compat' в этой области видимости
ERROR: $CXX -c $CXXFLAGS $DRV_CFLAGS c_src/ebloom_nifs.cpp -o c_src/ebloom_nifs.o failed with error: 1
make: *** [all] Ошибка 1
&lt;/pre&gt;
&lt;p&gt;Но и это связано тоже с неточностью в erl_nif_compat.h из ebloom
модуля. Которая исправлена в master вот &lt;a class="reference external" href="https://github.com/basho/ebloom/commit/b72cc51041ab6ee4e9317e0451d18e70e6722b14"&gt;этим
коммитом&lt;/a&gt;.
Его тоже легко применить даже руками, просто заменить == на &amp;gt;= для
проверки минорной версии Erlang NIF.&lt;/p&gt;
&lt;p&gt;P.S. Заинтересовавшись, что это за модуль узнал про такую структуру
данных как &lt;a class="reference external" href="http://ru.wikipedia.org/wiki/%D0%A4%D0%B8%D0%BB%D1%8C%D1%82%D1%80_%D0%91%D0%BB%D1%83%D0%BC%D0%B0"&gt;фильтр
Блума&lt;/a&gt;.
Думаю стоит пополнить свои пробелы знаний в теории не детерминированных
структур данных.&lt;/p&gt;
</summary><category term="решение"></category><category term="ошибка"></category><category term="сборка"></category><category term="riak"></category><category term="erlang"></category></entry><entry><title>Первый день в отпуске</title><link href="/posts/2011/08/02/pervyi-den-v-otpuske/" rel="alternate"></link><updated>2011-08-02T00:35:58+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-08-02:posts/2011/08/02/pervyi-den-v-otpuske/</id><summary type="html">&lt;p&gt;Выспался сегодня до обеда, поел, довольный как толстый кот. Собрал
вещи и отправился забирать с другой работы файлик, который скачался. Я
его забыл скопировать на флешку до этого. Оказалось он качался всего 6
минут, а я просто прошляпил его пока смотрел фильмы. А ждал меня Erlang
OTP 14B03, который мне так нужен чтобы взглянуть на Riak.&lt;/p&gt;
&lt;p&gt;Потом посмотрел фильм про &lt;strong&gt;Ниндзя убийцу&lt;/strong&gt;, хм… смотреть в принципе
можно, но у меня сложилось впечатление, что люди у них состоят из
множества литров крови и это всё обёрнуто полиэтиленовой оболочкой.
Чтобы при попадении сюрикенов или ещё чего, кровь разлеталась как брызги
в CS 1.6, если попасть из дробовика в голову. Такие низкополигональные
огромные капли крови. Сюжет очень простой, я и не ожидал ничего другого.
Одна баба пытается расследовать заказные убийства и выходит на клан
чёрного песка (звучит прям как клан Чёрной горы из Arcanum). Забавные
такие человечки, учитель берёт за заказные убийства большие деньги
золотом, а ученики до сих пол махаются мечами, а на дворе 21 век. Ну и
по фильму становится понятно, что эти ниндзя хотят завалить главную
героиню, а другой ниндзя (который был крутой, но его бабу-ниндзя
завалили и он восстал против учителя) защищает её. Поэтому много
потасовок и он убивает тела, иначе никак не называть эту гору, как мешки
с картошкой. Всё из них льётся, разлетаются на куски, а ему хоть бы хны:
максиму пару средней глубины порезов. А потом приблизительно как во всех
боевиках, его всё таки схватили и потащили к учителю (их наказывают
прокалывая сердце, не.. вру ещё этот учитель-мужЫк суёт руку в живот и
ковыряет пальцами, от этого все кричат). Главная героиня за этим ниндзя
приходит, чтобы выручить и вместе с подразделением SWAT (пулемёты,
гранатомёты и т.д.). У них это выходит как-то средне, но получше чем с
середине фильма, где их перевалили пару десятков чудиков в чёрном со
старинным оружием. Всё сопровождается морем крови, бесконечным
отрубанием частей тела, большая часть фильма акцентирует внимание на
этом.&lt;/p&gt;
&lt;p&gt;Ну и, конечно, какой боевик обходится без того, что злой
учитель-мужЫк вваливает по самое не балуй ниндзя, «убивает» главную
героиню (выживает лишь из-за того, что у неё сердце справа), от этого
наш обессилевший герой концентрируется, поднимается и мегокрутяцки
уничтожает врага. И крофф.. крофф.. автор фильма очень видимо её любит.&lt;/p&gt;
&lt;p&gt;В общем, пока мой Erlang собирался я себя занимал таким вот фильмом,
я его ещё комментировал и смеялся с некоторых глупостей из фильма,
правда мои бредни слушал только компьютер, а … наверное не стоит с ним
говорить, а то заберут меня в далёкие места :)&lt;/p&gt;
</summary><category term="erlang"></category><category term="фильм"></category><category term="жизнь"></category><category term="сборка"></category><category term="отпуск"></category><category term="ниндзя"></category><category term="Я"></category></entry><entry><title>Клинит</title><link href="/posts/2011/07/31/klinit/" rel="alternate"></link><updated>2011-07-31T03:25:56+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-07-31:posts/2011/07/31/klinit/</id><summary type="html">&lt;p&gt;Не знаю почему, но правую руку в локте на жимах клинит последние
несколько месяцев. Веса сильно не добавляю, просто стало клинить на
подъёме. При чём из-за этого как-то начинаю руку на автомате
разворачивать, что нарушает технику и ещё сильнее ухудшает ситуацию.
Толкаю от груди и зависаю в середине пути, а дальше останов… рука не
разгибается, силы держать штангу хватает, левой рукой продолжаю толкать,
а правая не слушается.. эх… тупит она. Ладно бы левую руку клинило, т.к.
левую я уже травмировал, надорвав трицепс плеча, а теперь складывается
впечатление, будто левая сильнее правой. Хотя жму не очень-то и большие
веса :-/ Нужно её как-то подправить.&lt;/p&gt;
</summary><category term="здоровье"></category><category term="Я"></category><category term="проблема"></category><category term="мышца"></category><category term="жизнь"></category></entry><entry><title></title><link href="/posts/2011/07/30/urn:ya.ru:post/22199227/1382/" rel="alternate"></link><updated>2011-07-30T00:43:39+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-07-30:posts/2011/07/30/urn:ya.ru:post/22199227/1382/</id><summary type="html">&lt;p&gt;ура! отпуск!&lt;/p&gt;
</summary></entry><entry><title>Riak</title><link href="/posts/2011/07/29/riak/" rel="alternate"></link><updated>2011-07-29T04:26:05+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-07-29:posts/2011/07/29/riak/</id><summary type="html">&lt;p&gt;Хм.. а может стоит посмотреть на Riak, а не на CouchDB :-/ У них есть
печеньки… ой т.е. ссылки Links, вроде то, что мне нужно. Т.к. в
реальности мне не особо нужны версии, т.к. большая часть данных растёт
инкрементарно, но структура сильно завязана на ссылки. Можно конечно и в
CouchDB построить такой View, но боюсь ему придётся туго от некоторых
моих изменений, да и не знаю как полностью удержать Materialized Path на
приемлемом уровне.&lt;/p&gt;
</summary><category term="ссылка"></category><category term="размышления"></category><category term="riak"></category><category term="couchdb"></category></entry><entry><title>IE7 и лишняя запятая</title><link href="/posts/2011/07/25/ie7-i-lishniaia-zapiataia/" rel="alternate"></link><updated>2011-07-25T13:58:48+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-07-25:posts/2011/07/25/ie7-i-lishniaia-zapiataia/</id><summary type="html">&lt;p&gt;Ошибка в IE: “Предполагается наличие идентификатора, строки или числа”&lt;/p&gt;
</summary><category term="ошибка"></category><category term="javascript"></category><category term="IE"></category></entry><entry><title>Popup и callback</title><link href="/posts/2011/07/23/popup-i-callback/" rel="alternate"></link><updated>2011-07-23T20:32:27+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-07-23:posts/2011/07/23/popup-i-callback/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Идея с первым вызовом window.open с пустой строкой в качестве URL и
последующим вызовом window.open для того же popup (такое же имя окна) с
уже подходящим URL сработала. Больше браузеры не блокируют окно и
callback-функции тоже могут манипулировать содержимым окна. И волки сыты
и овцы целы. Только IE оказывается не переваривает пробелы в названии
popup window, пришлось заменить пробел “_”, спасибо Brian, что нашёл
это.&lt;/p&gt;
</summary><category term="блокировка"></category><category term="javascript"></category><category term="окно"></category><category term="popup"></category><category term="пробел"></category><category term="IE"></category><category term="space"></category><category term="вызов"></category></entry><entry><title>Мелкий тест для CouchDB</title><link href="/posts/2011/07/22/melkii-test-dlia-couchdb/" rel="alternate"></link><updated>2011-07-22T13:49:13+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-07-22:posts/2011/07/22/melkii-test-dlia-couchdb/</id><summary type="html">&lt;p&gt;Протестировал вчера CouchDB на создание структуры типа дерево,
заливал по узкому каналу на удалённую машину через VPN соединение.
Принимающая машинка не быстрая, винчестер старый и медленный и процессор
Celeron. Конечно такой вид дерева не подходил для быстрой выборки, то
мне было интересно протестировать view с include_docs и внешним _id.
Итого загружено 71196 документов вида &lt;code class="code"&gt;
{ _id: строка, parent: строка}&lt;/code&gt;
 в
базу. После заливки через bulk-операцию (время не измерял, т.к. всё
проводилось на нестабильном канале), а последующая индексация view
длилась около 1 минуты, т.е. где-то 1186 документов в секунду.
Представление было простое: обычный map с &lt;code class="code"&gt;
emit(null, { _id:
doc.parent})&lt;/code&gt;
. До индексации база весила 13 598 818 байт, а после
индексации 13 619 298 байт. В принципе для такого количества документов
мне понравились результаты. Правда я пока не представляю каким образом
хранить дерево, чтобы можно было легко и удобно выполнять Map/Reduce и
одновременно можно было запросто переместить огромное поддерево без
проблем. И конечно же, чтобы репликация не создала проблем тоже.&lt;/p&gt;
</summary><category term="база"></category><category term="тест"></category><category term="couchdb"></category></entry><entry><title>Конфликт</title><link href="/posts/2011/07/17/konflikt/" rel="alternate"></link><updated>2011-07-17T21:42:41+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-07-17:posts/2011/07/17/konflikt/</id><summary type="html">&lt;p&gt;Дома установлена CouchDB 1.1.0, но при попытке создания новой базы
или сохранении документа выскакивала ошибка &lt;em&gt;function_clause error&lt;/em&gt;.
Хорошо, что я вспомнил, что до этого пробовал установить версию 0.11 и
вызвал не обновление пакета, а установку новой версии. От этого в
директории с CouchDB для Erlang образовалось по несколько версий на
couchdb, mochiweb и т.д. После удаления 0.11 директорий вот такая ошибка
при создании документа исчезла и я смог продолжить мои эксперименты с
репликацией:&lt;/p&gt;
&lt;p class="cut"&gt;&lt;a class="h-link reference internal" href="#cut_52310352"data-toggle="collapse"&gt;показать весь трэйс с ошибкой&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_52310352"&gt;
&lt;pre class="literal-block"&gt;
[info] [&amp;lt;0.464.0&amp;gt;] 127.0.0.1 - - 'PUT' /dluser/5aeb0baa0557cc4048385a8ff3000e2b 500
[error] [&amp;lt;0.609.0&amp;gt;] function_clause error in HTTP request
[info] [&amp;lt;0.609.0&amp;gt;] Stacktrace: [{mochiweb_request,get,
                                 [scheme,
                                  {mochiweb_request,#Port&amp;lt;0.2302&amp;gt;,'PUT',
                                   &amp;quot;/dluser/5aeb0baa0557cc4048385a8ff3000e2b&amp;quot;,
                                   {1,1},
                                   {12,
                                    {&amp;quot;host&amp;quot;,
                                     {'Host',&amp;quot;127.0.0.1:5985&amp;quot;},
                                     {&amp;quot;accept&amp;quot;,
                                      {'Accept',
                                       &amp;quot;application/json, text/javascript, */*&amp;quot;},
                                      nil,
                                      {&amp;quot;accept-language&amp;quot;,
                                       {'Accept-Language',&amp;quot;en-us,en;q=0.5&amp;quot;},
                                       {&amp;quot;accept-encoding&amp;quot;,
                                        {'Accept-Encoding',&amp;quot;gzip, deflate&amp;quot;},
                                        {&amp;quot;accept-charset&amp;quot;,
                                         {'Accept-Charset',
                                          &amp;quot;ISO-8859-1,utf-8;q=0.7,*;q=0.7&amp;quot;},
                                         nil,nil},
                                        nil},
                                       {&amp;quot;connection&amp;quot;,
                                        {'Connection',&amp;quot;keep-alive&amp;quot;},
                                        nil,
                                        {&amp;quot;content-type&amp;quot;,
                                         {'Content-Type',
                                          &amp;quot;application/json; charset=UTF-8&amp;quot;},
                                         {&amp;quot;content-length&amp;quot;,
                                          {'Content-Length',&amp;quot;108&amp;quot;},
                                          nil,nil},
                                         nil}}}},
                                     {&amp;quot;user-agent&amp;quot;,
                                      {'User-Agent',
                                       &amp;quot;Mozilla/5.0 (X11; Linux i686; rv:2.0) Gecko/20100101 Firefox/4.0&amp;quot;},
                                      {&amp;quot;keep-alive&amp;quot;,
                                       {'Keep-Alive',&amp;quot;115&amp;quot;},
                                       nil,
                                       {&amp;quot;referer&amp;quot;,
                                        {'Referer',
                                         &amp;quot;http://127.0.0.1:5985/_utils/document.html?dluser&amp;quot;},
                                        nil,nil}},
                                      {&amp;quot;x-requested-with&amp;quot;,
                                       {&amp;quot;X-Requested-With&amp;quot;,&amp;quot;XMLHttpRequest&amp;quot;},
                                       nil,nil}}}}}]},
                                {couch_httpd,absolute_uri,2},
                                {couch_httpd_db,db_doc_req,3},
                                {couch_httpd_db,do_db_req,2},
                                {couch_httpd,handle_request_int,5},
                                {mochiweb_http,headers,5},
                                {proc_lib,init_p_do_apply,3}]
&lt;/pre&gt;
&lt;/div&gt;
</summary><category term="дом"></category><category term="ошибка"></category><category term="конфликт"></category><category term="couchdb"></category><category term="исправление"></category></entry><entry><title>Hovercraft</title><link href="/posts/2011/07/16/hovercraft/" rel="alternate"></link><updated>2011-07-16T21:19:48+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-07-16:posts/2011/07/16/hovercraft/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Нужно будет попробовать эту штукенцию, т.к. это прямой доступ из
Erlang в CouchDB без HTTP API, для повышения производительности при
работе с данной базой (она и сама написана на Erlang). Только он должен
крутиться в том же beam, что и ChouchDB. Можно оставить HTTP API для
частей системы написанной, на других языках, или не для критически
важных операций. Т.е. оставить его не для массовых вставок и обновлений.&lt;/p&gt;
</summary><category term="erlang"></category><category term="программирование"></category><category term="couchdb"></category><category term="hovercraft"></category></entry><entry><title>Popup</title><link href="/posts/2011/07/16/popup/" rel="alternate"></link><updated>2011-07-16T16:27:10+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-07-16:posts/2011/07/16/popup/</id><summary type="html">&lt;p&gt;Не особо интересовался раньше почему некоторые popup окна появляются
ез проблем, а некоторые блокируются резалкой popup-окон браузером.
Оказывается всё очень просто, если popup-окно создаётся обработчиком,
который связан напрямую с действием пользователя, то &lt;code class="code"&gt;
window.open(…)&lt;/code&gt;

проходит без подводных камней. А вот если окно должно появится на
какое-нибудь событие сервера (допустим использовали AJAX), то уже
браузер точно спросит подтверждение на показ окна. Для решения своей
проблемы, я попробовал делать «предпоказ» окна, а затем ещё раз вызывать
уже в обработчике открытие окна с таким же name. Правда нужно переделать
это немного, т.к. IE как обычно не любит работать, как требуется.&lt;/p&gt;
</summary><category term="javascript"></category><category term="окно"></category><category term="popup"></category></entry><entry><title>Google+</title><link href="/posts/2011/07/12/google/" rel="alternate"></link><updated>2011-07-12T02:38:14+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-07-12:posts/2011/07/12/google/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Сижу себе спокойно никого не трогаю, но решил посмотреть свой Gmail
(не часто его смотрю). И обнаруживаю там инвайт на Google+ от человека,
с которым работаем. Инвайт уже достаточно давно валяется, а у человека
его инвайт уже несколько недель. Посмотрел я Google+, есть прикольные
штуки, по крайней мере на мой взгляд, оно выглядело яснее и чище, чем
Facebook, в котором я будучи разработчиком приложений под него, не могу
понять как базовые вещи делают обычные пользователи, да и не любитель я
системы: друг-друг, мне больше о душе читатель-писатель.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Заинвайтил немного людей, правда ночь, сонный … я тупил долго.&lt;/p&gt;
</summary><category term="инвайт"></category><category term="попробовал"></category><category term="google+"></category><category term="google"></category></entry><entry><title>Правки в проекте</title><link href="/posts/2011/07/12/pravki-v-proekte/" rel="alternate"></link><updated>2011-07-12T01:24:55+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-07-12:posts/2011/07/12/pravki-v-proekte/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp; Обнаружилось, что Power не проверяет физический урон на возможность
отрицательного значения. Раньше предполагалось, что конечный Power это
проверит, а промежуточным нужны отрицательные значения. Но это так и не
потребовалось, т.к. считается сумма силы 1 и сумма сил 2, а затем их
разница. Сначала я хотел произвести правку CycleMagic для изменения
поведения по умолчанию, т.к. WaterMagic фильтрует WaterMagic, но затем
взглянув в собственную техдоку обнаружил, что была идея создавать
AntiWaterMagic. Т.е. всем предметам, кому нужны антимагии создают их, но
это не исключает, что WaterMagic может убрать FireMagic и т.д.&lt;/p&gt;
</summary><category term="проект"></category><category term="last_gateway_to_hell"></category><category term="программирование"></category><category term="исправление"></category></entry><entry><title>Майка от Google</title><link href="/posts/2011/07/07/maika-ot-google/" rel="alternate"></link><updated>2011-07-07T23:43:13+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-07-07:posts/2011/07/07/maika-ot-google/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Прибыла моя маечка. Тёмно-серая, с надписью и изображением Slide
спереди и Google сзади. Внутри написано, что сделано в Mexico на
Американском заводе, и что Slide on и Google is your friend.&lt;/p&gt;
</summary><category term="slide"></category><category term="майка"></category><category term="работа"></category><category term="google"></category></entry><entry><title></title><link href="/posts/2011/07/07/urn:ya.ru:post/22199227/1371/" rel="alternate"></link><updated>2011-07-07T02:39:13+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-07-07:posts/2011/07/07/urn:ya.ru:post/22199227/1371/</id><summary type="html">&lt;p&gt;каждый день встречать рассвет с красными глазами .. это … как в старые
добрые времена&lt;/p&gt;
</summary></entry><entry><title>Вернулся звук. Прощай старый добрый OSS...</title><link href="/posts/2011/07/04/vernulsia-zvuk-proshchai-staryi-dobryi-oss/" rel="alternate"></link><updated>2011-07-04T02:16:33+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-07-04:posts/2011/07/04/vernulsia-zvuk-proshchai-staryi-dobryi-oss/</id><summary type="html">&lt;p&gt;Установил новую alsa и запустил alsaconf, т.к. в 2.6.39.2 нет
&lt;strong&gt;i810_intel&lt;/strong&gt; модуля (он был obsolete и удалён из oss в пользу
intel8x0). Я вижу, что install добавил файл sound в modprobe.d с двумя
строками: alias snd-card-0 snd-intel8x0 и alias sound-slot-0
snd-intel8x0. Хотя у меня вроде эти модули и так загружены. Конфигуратор
поднастроил мой SI7012, а то у меня alsa была древняя и уже не хотела
выдавать никаких сигналов даже с поднятыми до предела микшерами. Ну что
ж … прощай OSS (был у меня ещё какое-то время даже ESD), пришло время с
тобой расстаться, тем более два потока больше не воюют за общий /dev/dsp
:).&lt;/p&gt;
</summary><category term="alsa"></category><category term="oss"></category><category term="радость"></category><category term="драйвер"></category><category term="linux"></category><category term="звук"></category></entry><entry><title>Спустя 6 лет...</title><link href="/posts/2011/07/03/spustia-6-let/" rel="alternate"></link><updated>2011-07-03T03:30:44+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-07-03:posts/2011/07/03/spustia-6-let/</id><summary type="html">&lt;p&gt;Я снова обновил свой Glib и Gtk. Это позволило мне запустить Firefox
4 на моей старенькой домашней машине, хотя для этого потребовалось ещё
кучу всего обновить. Давно уже не было такого апгрейда. Хотя GNOME стоит
пока старенький, привык я к нему тут (а на одной из работ Fluxbox), да и
сапфировая тема тоже уже стала для меня привычной дома.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/391608/"&gt;&lt;img alt="Firefox4 на домашнем компьютере" src="http://img-fotki.yandex.ru/get/5305/imdagger.9/0_5f9b8_2c4884c0_L" title="Firefox4 на домашнем компьютере"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="система"></category><category term="жизнь"></category><category term="время"></category><category term="дом"></category><category term="обновление"></category><category term="Я"></category></entry><entry><title>Stacktrace на лету</title><link href="/posts/2011/06/30/stacktrace-na-letu/" rel="alternate"></link><updated>2011-06-30T18:56:09+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-06-30:posts/2011/06/30/stacktrace-na-letu/</id><summary type="html">&lt;p&gt;Не знал, что можно так красиво повесить обработчик на SIGUSR1&lt;/p&gt;
</summary><category term="отладка"></category><category term="python"></category><category term="stack"></category><category term="рабочий"></category><category term="процесс"></category></entry><entry><title>NoobTeam бот</title><link href="/posts/2011/06/30/noobteam-bot/" rel="alternate"></link><updated>2011-06-30T01:15:03+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-06-30:posts/2011/06/30/noobteam-bot/</id><summary type="html">&lt;p&gt;Круто недописанный бот со случайным поведением занял 169 место, при
чём я забыл сделать в нём одну из аппликаций, т.е. он умел делать только
половину от всех теоретически возможных операций. Ура! Он не последний :) У
него &lt;strong&gt;135&lt;/strong&gt; очков, а у 30 места, например, где-то почти &lt;strong&gt;900&lt;/strong&gt; очков.
Но у них дописанные боты и есть тактика, а я не успел. Я уже открывал
таблицу и думал увидеть рандома последним, ну что ж, NoobTeam-бот, ты
порадовал создателя!&lt;/p&gt;
</summary><category term="радость"></category><category term="результаты"></category><category term="бот"></category><category term="небольшая"></category><category term="icfpc"></category></entry><entry><title>Перевод: часть 2</title><link href="/posts/2011/06/26/perevod-chast-2/" rel="alternate"></link><updated>2011-06-26T22:05:10+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-06-26:posts/2011/06/26/perevod-chast-2/</id><summary type="html">&lt;p&gt;Перевел до конца весь текст статьи, нужно ещё чуть отшлифовать и
отправить на сайт.&lt;/p&gt;
&lt;p&gt;Унаследованное дерево каталогов&lt;/p&gt;
&lt;p&gt;К несчастью не все программы достаточно гибки, чтобы быть
установленными в любое место. Время от времени, жёстко прописанные пути
поджидают прямо в программах, которые относятся к пользовательскому
окружению, а им следует, как минимум теоретически, позволять быть
установленными внутрь, скажем, в пользовательский домашний каталог.&lt;/p&gt;
&lt;p&gt;Постольку поскольку мне хотелось, чтобы это завершилось в
долгосрочной перспективе, то правка всех приложений это не выход. По
этой причине, GoboLinux поддерживает, как упоминалось ранее,
унаследованное дерево каталогов, где все обычные Unix-пути спроецированы
на GoboLinux эквиваленты, таким образом, если Makefile ищет
/usr/X11R6/include/X11/Xaw3d/XawInit.h, он найдёт его, хотя он будет
расположен в /Programs/Xaw3d/1.5/include/X11/Xaw3d/XawInit.h, где ему и
положено быть. Когда два приложения содержат вложенные директории с
одинаковым именем, GoboLinux-скрипты рекурсивно извлекают их. Допустим
XFree86 и Xaw3d содержат X11 в include. Директория
/System/Links/Headers/X11 создаётся автоматически, содержащая ссылки из
обоих X11 директорий.&lt;/p&gt;
&lt;p&gt;Другая интересная возможность это то, что GoboLinux скрипты
запускают make install, используя специальный идентификатор
пользователя, который имеет права записи только внутрь директории с
исходным кодом программ и вхождениями в /Programs. Таким способом файлы
не могут “выбраться” из GoboLinux иерархии и перебраться в
унаследованное классическое дерево каталогов.&lt;/p&gt;
&lt;p&gt;Структура директорий GoboLinux приносит свежесть и чистый взгляд в
Linux систему, но присутствие унаследованного дерева каталогов, без
которого не обойтись, немного убавляет красоту. Mac OS X использует
“хитрый трюк”, чтобы скрыть эту природу Unix: Finder не будет показывать
Unix директории, но вы можете их видеть из командной строки. В Linux у
нас есть множество различных путей чтобы просмотреть файловую систему
(оболочки, файловые менеджеры, браузеры…), значит мы должны идти дальше,
чтобы иметь опрятно выглядящую систему. GoboHide (конечно
необязательный) это патч для ядра плюс приложение пользовательской среды
написанные Lucas Correia Villa Real и Felipe Damásio, которые эффективно
выполняют “скрытие файлов” на Linux (способ отличный от файлов
начинающихся с точки, который реализован на уровне пользовательского
интерфейса, например как делает Finder).&lt;/p&gt;
&lt;p&gt;Вот как ls / выглядит под GoboLinux:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;Depot  Mount     System&lt;/div&gt;
&lt;div class="line"&gt;Files  Programs  Users&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Другие работы по данной тематике&lt;/p&gt;
&lt;p&gt;Т.к. вы читаете это, то возможно вы нашли много похожих концепций
(не говоря уже о именах каталогов). GoboLinux целиком вдохновлялся из
других операционных систем, таких как Mac OS X, BeOS и AtheOS, но я
думаю, уже понимание того, что они строят «что-то другое», используя
существующую базу Unix (будь то с использованием ядра Unix, как в OS X
или с помощью инструментов GNU, как в  AtheOS) оказало наибольшее
влияние из всего. На данным момент существует несколько других проектов
на различных стадиях разработки, которые используют ядро Linux как
основу с альтернативным деревом каталогов. Любопытно, но
большинство из них клоны или под сильным влиянием особенностей
некоторых проприетарных операционных систем: ROX OS стремится быть
RiscOS-подобной системой, LinuxSTEP — это проект основанный на GNUstep
нацеленный на создание NEXT-подобной системы, и BlueEyedOS  рассчитана,
чтобы быть совместимой с BeOS на уровне исходного кода.&lt;/p&gt;
&lt;p&gt;С другой стороны GoboLinux не клон чего-нибудь. Он использует
стандарное программное обеспечение Linux для настольных компьютеров. Мы
верим что хорошо организованная структура директорий делает его отличной
тестовой площадкой для новых идей — возможности не имеют границ.&lt;/p&gt;
&lt;p&gt;Где мы на данный момент?&lt;/p&gt;
&lt;p&gt;GoboLinux очень сильно развился за последний год. На gobolinux.org
можно найти ISO образ нашего свежего релиза 006. Это загрузочный “live
CD” запускающий GoboLinux в chroot-среде с доступом только на чтение
файловой системы, таким образом можно пробежаться по структуре
директорий и взглянуть на то, как GoboLinux выглядит. В CD также включён
обычным скрипт инсталляции и дополнительные пакеты. Вообще ещё нету
модного графического инсталлятора, но я думаю простота установки
отражает общую простоту использования системы вцелом (в отличии от того,
как это случается на других дистрибутивах).&lt;/p&gt;
&lt;p&gt;Несмотря на небольшое количество пользователей (мы никогда реально
не публиковали это где-либо), проект продвинулся быстро и стал полностью
пригодным уже долгое время (большинство GoboLinux разработчиков
используют его как их единственную операционную систему и остальные
пользуются тоже).&lt;/p&gt;
</summary><category term="GoboLinux"></category><category term="статья"></category><category term="перевод"></category><category term="linux"></category><category term="набросок"></category></entry><entry><title></title><link href="/posts/2011/06/26/urn:ya.ru:post/22199227/1365/" rel="alternate"></link><updated>2011-06-26T04:52:11+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-06-26:posts/2011/06/26/urn:ya.ru:post/22199227/1365/</id><summary type="html">&lt;p&gt;все четыре глаза красные и хотят спать [8]_[8]&lt;/p&gt;
</summary></entry><entry><title>Часть перевода из истории GoboLinux</title><link href="/posts/2011/06/26/chast-perevoda-iz-istorii-gobolinux/" rel="alternate"></link><updated>2011-06-26T04:50:34+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-06-26:posts/2011/06/26/chast-perevoda-iz-istorii-gobolinux/</id><summary type="html">&lt;p&gt;Перевёл (глаза уже закрываются, утро же… спать хочется, почему я
решил под утро перевести эту статью я не знаю) чуть больше половины вот
этой &lt;a class="reference external" href="http://www.gobolinux.org/index.php?lang=en_US&amp;amp;page=k5"&gt;статьи&lt;/a&gt;.
Завтра пеерведу остаток и отправлю на сайт создателей:&lt;/p&gt;
&lt;p&gt;Hisham Muhammad, 09 Мая 2003.&lt;/p&gt;
&lt;p&gt;За последнее время было множество споров о текущем состоянии Linux
как настольной системы, и статьи всплывали тут и там, иногда с очень
хорошими идеями. Однако ничто меня не удивило более, чем одна из них.
Она была вся очень гипотетическая, но имела довольно радикальные идеи
относительно того, как по их мнению дерево каталогов Linux должно быть
реорганизовано. Это несомненно была наиболее полемичная часть статьи, и
вызвала много дискуссий, о том возможно ли реализовать нечто подобное.
Это и есть причина для моего удивления, т.к. мы это реализовали более
года назад. GoboLinux это дистрибутив Linux основанный на альтернативном
дереве каталогов, которое развилось из самодельной инсталляции LFS в
дистрибутив, который сегодня используется и поддерживается небольшой
группой людей. Было любопытно наблюдать как множество людей
заинтересовано в идеях похожих на наши. Что ж, возможно это время для
нас, чтобы выйти из тени.&lt;/p&gt;
&lt;p&gt;Немного истории&lt;/p&gt;
&lt;p&gt;Мы все помним время, когда разговор о дистрибутивах Linux для
настольных компьютеров подразумевал спор какой из них имеет лучший
инсталлятор. Многое изменилось с тех пор: лёгкие, графические
инсталляторы уже здесь, но мы всё ещё не там, где нужно. Из числа
обычных напыщенных речей на тему «почему (вписать наболевшее сюда) это
проблема», некоторые интересные идеи появляются время от времени. Ещё
интереснее то, что некоторые люди начинали верить что возможно это время
для более рискованных попыток.&lt;/p&gt;
&lt;p&gt;Как ни странно, то GoboLinux не начался как одна из таковых. Всё
началось когда мне нужно было установить программы в Университете.  Т.к.
я не имел доступа на запись в стандартные Unix-директории, то я создавал
мои собственные директории в $HOME тем способом, как я видел это. Я
обновлял программы из исходных кодов постоянно, и не мог использовать
пакетный менеджер. Моё решение было наиболее очевидным: размещать каждую
программу в её собственной директории, например ~/Programs/AfterStep.
Вскоре переменные среды (PATH, LD_LIBRARY_PATH…) становились всё
больше и больше, тогда я сделал централизованные директории для каждого
класса файлов, содержащих символические ссылки: ~/Libraries, ~/Headers и
т.д. Естественным продолжением было написать сценарии командной
оболочки, чтобы управлять ссылками, скриптами конфигурации и
Make-файлами.&lt;/p&gt;
&lt;p&gt;Такой подход доказал, что очень удобен в использовании. На моей
домашней системе я начал постепенно удалять ранее собранные пакеты и
перекомпилировать их с помощью тех скриптов. Я занимался перемещением
полностью самодельной Linux системы, которую в шутку называл LodeLinux.
Когда около 80% от всего было завершенного, выскочил Великий Сбой
Файловой Системы. Это было время начать всё сначала, но в этот раз по
другому пути: вместо «деконструирования» существующего дистирбутива, я
(Hisham Muhammad) и мой друг, André Detsch, потратили два дня собирая
модифицированную Linux From Scratch систему. Без особой суеты, 20 Марта
2002 родился GoboLinux. Месяц спустя мы представили статью в 3-ем
Workshop в Free Software названную «Новое предложение для дерева
каталогов Unix».&lt;/p&gt;
&lt;p&gt;О чём вообще всё это?&lt;/p&gt;
&lt;p&gt;GoboLinux явно не «просто ещё один Linux дистрибутив для
настольного компьютера». Он целиком базируется на альтернативной
структуре директорий. Каждая программа живёт в её собственной
директории: Вы найдёте XFree86 4.3 в /Programs/XFree86/4.3/, и ping в
/Programs/Netkit-Base/0.17/bin/ping. Чтобы просмотреть что за программы
инсталлированны в системе достаточно просто сделать ls /Programs.&lt;/p&gt;
&lt;p&gt;Для каждой категории файлов есть директория в /System/Links
группирующая файлы из каждого приложения как символические ссылки:
Executables, Libraries, Headers, Shared и Manual. Для совместимости,
каждая “традиционная” директория это ссылка на соответствующую
категорию. Более того /bin, /sbin, /usr/bin, /usr/local/bin (и т.д.)
просто символические ссылки на /System/Links/Executables. Переменные
среды тоже очень простые: достаточно сделать &lt;code class="code"&gt;
export
PATH=/System/Links/Executables&lt;/code&gt;
.&lt;/p&gt;
&lt;p&gt;Коротко говоря, то что мы имеем это система управления пакетами без
базы данных, структура директорий сама по себе организует систему (разве
не это было её первоначальной целью в конце концов?). Каждая директория
программы (например, /Programs/KDE) содержит директории с каталогами
версий (/Programs/KDE/3.0, /Programs/KDE/3.1.1), и безверсионную
директорию для настроек (/Programs/KDE/Settings), чтобы хранить файлы,
которые обычно хранились бы в /etc. Поддерживание двух и более версий
библиотек тривиально. Когда большинство дистрибутивов переключилось на
GCC3 они выпустили новую старшую версию, по большому счёту не
совместимую с предыдущими. Когда в версии 006 GoboLinux адаптировали
GCC3, это было лишь вопросом поддержания старых версий библиотек рядом с
новыми, пока они полностью постепенно не были бы убраны. Никаких
«пакетов совместимости» не потребовалось.&lt;/p&gt;
&lt;p&gt;Большинство задач в GoboLinux автоматизированы набором скриптов.
Чтобы создать GoboLinux пакет, нужно всего лишь написать нечто подобное
на CreatePackage CoreUtils. Всё, что делает данная комманда — это
сохраненяет CoreUtils/5.0/ и CoreUtils/Settings в .tar.bz2 файл с
названием CoreUtils–5.0–i686.tar.bz2. Ссылка с названием
/Programs/CoreUtils/Current показывает какая версия на данным момент
действует. Она используется скриптами как ‘версия по умолчанию’.
Установка программы управляется тремя скриптами: PrepareProgram, который
создаёт /Programs/ иерархию и передаёт подходящие опции для configure.
SymlinkProgram создаёт ссылки в /System/Links. Скрипт обёртка
CompileProgram заменяет обычный &lt;code class="code"&gt;
configure &amp;amp;&amp;amp; make &amp;amp;&amp;amp; make install&lt;/code&gt;
 подход
(с множеством опций командной строки, чтобы учесть особые случаи).&lt;/p&gt;
&lt;p&gt;Альтернативные скрипты загрузки&lt;/p&gt;
&lt;p&gt;С того момента как мы почувствовали, что мы «строим с нуля» и мы
хотим делать систему, где всё значимо для нас, мы также потратили время
на то, чтобы перепродумать сценарии загрузки. Я ощущал, что две
исторические модели (System V и BSD) были перебором для нашей установки
на обычном настольном компьютере. GoboLinux использует систему попроще:
два скрипта, Init и Done, которые делают большинство работы.
Дополнительные скрипты такие как Multi и Single заботятся об runlevel-е.
Эти файлы просто последовательность комманд, начинающихся со слова Exec
и строки с сообщением. Вот выдержка из Init:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;Exec &amp;quot;Setting clock...&amp;quot; SetClock&lt;/div&gt;
&lt;div class="line"&gt;Exec &amp;quot;Loading keymap...&amp;quot; loadkeys &amp;quot;$KeymapLayout&amp;quot;&lt;/div&gt;
&lt;div class="line"&gt;Exec &amp;quot;Bringing up the loopback interface...&amp;quot; ifconfig lo 127.0.0.1&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Более сложные задачи такие как SetClock объявлены, как функции
командной оболочки в файле Tasks (эти задачи могут быть также вызваны из
командной строки используя Runtask скрипт). Настройки для
конфигурирования объявлены, как переменные среды в Options файле.
Функция обёртка Exec позволяет реализовать стильные дополнительные
возможности, такие как темы загрузок. Последовательность загрузки может
выглядеть как Slackware подобная (с обычными сообщениями в поток
стандартного вывода/ошибки), похожая на RedHat (с множеством OK), или в
стиле GoboLinux (последний использует модифицированную версию Linux
Progress Patch).&lt;/p&gt;
</summary><category term="GoboLinux"></category><category term="статья"></category><category term="часть"></category><category term="перевод"></category><category term="linux"></category></entry><entry><title>Залил рандом</title><link href="/posts/2011/06/20/zalil-random/" rel="alternate"></link><updated>2011-06-20T03:26:46+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-06-20:posts/2011/06/20/zalil-random/</id><summary type="html">&lt;p&gt;Жаль, но одному такую задачу сложно осилить за 3 дня в свободное
время :( Но я написал рандомного бота, надеюсь его не дисквалифицируют
из-за того, чо я кривой install отправил, т.к. торопился и напортачил.
Пока на сервер залил, пока sha512 сумму посчитал и инфу вписал. Первый
раз вообще неверную ссылку отправил.&lt;/p&gt;
&lt;p&gt;Я даже успел придумать несколько функций:&lt;/p&gt;
&lt;p&gt;0: f&lt;/p&gt;
&lt;p&gt;1: g&lt;/p&gt;
&lt;p&gt;S(S(K(get)(succ))(get)(zero) -&amp;gt; g(f)&lt;/p&gt;
&lt;p&gt;Где f и g могуть быть функции любой сложности.&lt;/p&gt;
&lt;p&gt;Затем сделал функцию S(get)(S(inc)(K(zero))), которая добавляет к
0-ой ячейке &lt;strong&gt;167&lt;/strong&gt; единиц, при этом нигде не вычитает. Функцию нужно
разить на 0: S(get) и 1: S(inc)(K(zero)), а последнюю как 0: S(inc)
1:K(zero).&lt;/p&gt;
&lt;p&gt;Ещё появились идеи по рекурсивному help, по аттаке, как управляться
с зомби. Но на это времени уже никак хватить не могло.&lt;/p&gt;
&lt;p&gt;Сегодня ещё ко всему горю умерла материнская плата второго сервера,
благо быстро заменил.&lt;/p&gt;
</summary><category term="соревнование"></category><category term="печаль"></category><category term="жизнь"></category><category term="участие"></category><category term="icfpc"></category></entry><entry><title></title><link href="/posts/2011/06/19/urn:ya.ru:post/22199227/1361/" rel="alternate"></link><updated>2011-06-19T04:47:48+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-06-19:posts/2011/06/19/urn:ya.ru:post/22199227/1361/</id><summary type="html">&lt;p&gt;всё вокруг вверх ногами&lt;/p&gt;
</summary></entry><entry><title>Нас мало, но мы в тельняшках</title><link href="/posts/2011/06/19/nas-malo-no-my-v-telniashkakh/" rel="alternate"></link><updated>2011-06-19T04:46:32+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-06-19:posts/2011/06/19/nas-malo-no-my-v-telniashkakh/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Дела идут медленно, второй кодер немного помог и опять пропал,
осталось 24 часа до конца, у меня пока только есть каркас бота,
стратегии у него нету ещё никакой. Нужно будет завтра (т.е. уже сегодня,
т.к. ночь просидел) усиленно продумать пару простых правил, которые
апозволят хотя бы быть не последним. Если бы работа не отобрала часов 8
сегодня моего времени я бы успел больше! Но проклятый винчестер на
сервере решил сломаться и подпортить мне всё.&lt;/p&gt;
</summary><category term="Я"></category><category term="icfpc"></category><category term="бот"></category><category term="работа"></category><category term="набросок"></category></entry><entry><title>Лучше поздно чем никогда</title><link href="/posts/2011/06/19/luchshe-pozdno-chem-nikogda/" rel="alternate"></link><updated>2011-06-19T04:38:17+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-06-19:posts/2011/06/19/luchshe-pozdno-chem-nikogda/</id><summary type="html">&lt;p&gt;Когда ICFP 2011 ещё не началось, на сайте было видно, что над
изображением висит строка с пропросом “WHAT’S IN AN IMAGE?”.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/387747/"&gt;&lt;img alt="PNG+JAR" src="http://img-fotki.yandex.ru/get/4515/imdagger.9/0_5eaa3_793fdaf2_L" title="PNG+JAR"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Ну я подумал, что это подсказка о том, что будет на турнире.
Взглянул на PNG одним глазом во внтурь и успокоился на мысли, что всё
снаружи и нужно как-то не буквально воспринимать вопрос. Вот только
сегодня узнал, что стоило быть настойчивее и прямолинейнее, т.к. вопрос
был &lt;strong&gt;буквальный&lt;/strong&gt;. После PNG-шного IEND-а начинался ZIP-овский PK.
Архивом оказался JAR, который генерирует исходное изображение и
добавляет себя в конец.&lt;/p&gt;
&lt;p&gt;В JAR-архиве было два файла 0 и 1, я поменял их местами и увидел
новую сгенерированную картинку. Как раз с названием контеста и общей
идеей.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/387748/"&gt;&lt;img alt="PNG JAR контест" src="http://img-fotki.yandex.ru/get/5507/imdagger.9/0_5eaa4_3d83fbc0_L" title="PNG JAR контест"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="радость"></category><category term="забавно"></category><category term="обнаружил"></category><category term="icfpc"></category></entry><entry><title>День первый</title><link href="/posts/2011/06/18/den-pervyi/" rel="alternate"></link><updated>2011-06-18T02:17:11+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-06-18:posts/2011/06/18/den-pervyi/</id><summary type="html">&lt;p&gt;Сначала ночью я не очень сильно разобрался с условием задачи. Но уже
по утру она была достаточно понятна для меня. Правда я пока не знаю
хороших стратегий, я планирую написать нечто детерминированное и
простое, т.к. на сложности времени нету, да и к сожалению второй человек
“перегрелся” и решил сдаться. Поэтому мне придётся расчитывать только на
свои силы.&lt;/p&gt;
&lt;p&gt;Насколько я вижу задачу: есть 256 слотов с функцией/константой и
показателем жизнеспособности. Можно применять функции из заданного
набора для слотов и наоборот. Моя задача сделать так, чтобы 0 и -1
мёртвых слотов у меня было как можно меньше, а у оппонента больше.&lt;/p&gt;
&lt;p&gt;Т.к. атака наносится в &lt;strong&gt;255-i&lt;/strong&gt;, то смею предположить, что ячейки с
меньшими номерами безопаснее, чем крайние, т.к. получение числа 255
требует больше операций. Я набросал простую функцию получения
произвольного числа.&lt;/p&gt;
&lt;p&gt;И написал код, который &amp;nbsp;производит редукции функций.&lt;/p&gt;
</summary><category term="соревнование"></category><category term="задача"></category><category term="программирование"></category><category term="icfpc"></category></entry><entry><title>Осталось пару минут</title><link href="/posts/2011/06/17/ostalos-paru-minut/" rel="alternate"></link><updated>2011-06-17T02:59:37+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-06-17:posts/2011/06/17/ostalos-paru-minut/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Вот ещё пройдёт немного времени (2 минуты) и стартует ICFP Contest
2011, поэтому я ещё не сплю, а завтра, блин, на работу :-/&lt;/p&gt;
</summary><category term="Я"></category><category term="жизнь"></category><category term="работа"></category><category term="радость"></category><category term="icfpc"></category></entry><entry><title>3proxy крут</title><link href="/posts/2011/06/17/3proxy-krut/" rel="alternate"></link><updated>2011-06-17T02:52:42+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-06-17:posts/2011/06/17/3proxy-krut/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Это первое за долгие годы пребывание моего домашнего компьютера
BlackTears в сети Интернет, много лет назад он имел дело только с
dialup. Т.к. у меня нет модуля на соединения с телефоном брата с 3G,
зато у меня прекрасно работает Wifi (мы это раньше проверили); я создал
защищённую точку доступа, подключил в неё буку брата, а телефон в
ноутбук. На ноуте есть интернет благодаря телефону, затем я принёс и
запустил &lt;a class="reference external" href="http://3proxy.ru"&gt;3proxy&lt;/a&gt; (&lt;strong&gt;спасибо вам, ребята, за
него!&lt;/strong&gt;), он очень &lt;em&gt;легко настраивается&lt;/em&gt; и проксирует даже DNS. Так у
меня появился на компьютере Интернет тоже. Нужно будет потом притащить
нового софта на него, а то всё древнее как мамонты. Одна только Opera не
слишком старая, а вот Firefox аж версии 1.5!&lt;/p&gt;
</summary><category term="дом"></category><category term="радость"></category><category term="интернет"></category><category term="3proxy"></category></entry><entry><title>Форвардинг соединений с хост-машины в гостевую виртуальную машину</title><link href="/posts/2011/06/16/forvarding-soedinenii-s-khost-mashiny-v-gostevuiu-virtualnuiu-mashinu/" rel="alternate"></link><updated>2011-06-16T18:26:38+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-06-16:posts/2011/06/16/forvarding-soedinenii-s-khost-mashiny-v-gostevuiu-virtualnuiu-mashinu/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Хоть я раньше и работал с QEMU но без приключений не обошлось. Так
как я раньше не запускал сетевые соединения с ней, а сетевые соединения
делал только с VMWare, но очень давно. Я попробовал запустить просто с
-net user и указанием форвардинга, но сетевая карта вообще пропала из
виртуальной среды. Когда я запускал QEMU по умолчанию, но сеть была
видна, гостевая машина была &lt;strong&gt;10.0.2.15&lt;/strong&gt;, а хост-компьютер
&lt;strong&gt;10.0.2.2&lt;/strong&gt;. Оказалось, что по умолчанию QEMU запускается с &lt;strong&gt;-net
nic&lt;/strong&gt; и &lt;strong&gt;-net user&lt;/strong&gt;. Небольшая правка и вуаля, порт из виртуальной
машины для SSH проброшен на ту машину, которая запустила виртуальную:&lt;/p&gt;
&lt;blockquote&gt;
-net nic -net user,hostfwd=&lt;strong&gt;tcp::8700-:22&lt;/strong&gt;&lt;/blockquote&gt;
</summary><category term="виртуальная"></category><category term="QEMU"></category><category term="машина"></category><category term="форвардинг"></category><category term="порт"></category></entry><entry><title>После дачи</title><link href="/posts/2011/06/12/posle-dachi/" rel="alternate"></link><updated>2011-06-12T21:12:24+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-06-12:posts/2011/06/12/posle-dachi/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/386586"&gt;&lt;img alt="После дачи" src="http://img-fotki.yandex.ru/get/5506/imdagger.9/0_5e61a_256371f4_L" title="После дачи"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/386588"&gt;&lt;img alt="После дачи" src="http://img-fotki.yandex.ru/get/4515/imdagger.9/0_5e61c_a82d65d0_L" title="После дачи"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/386589"&gt;&lt;img alt="После дачи" src="http://img-fotki.yandex.ru/get/5807/imdagger.9/0_5e61d_36809309_L" title="После дачи"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/386590"&gt;&lt;img alt="После дачи" src="http://img-fotki.yandex.ru/get/5707/imdagger.9/0_5e61e_21837214_L" title="После дачи"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/386591"&gt;&lt;img alt="После дачи" src="http://img-fotki.yandex.ru/get/5706/imdagger.9/0_5e61f_a11d579f_L" title="После дачи"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/386592"&gt;&lt;img alt="После дачи" src="http://img-fotki.yandex.ru/get/5806/imdagger.9/0_5e620_258bd4d9_L" title="После дачи"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/386593"&gt;&lt;img alt="После дачи" src="http://img-fotki.yandex.ru/get/5808/imdagger.9/0_5e621_dde6a616_L" title="После дачи"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/386594"&gt;&lt;img alt="После дачи" src="http://img-fotki.yandex.ru/get/4704/imdagger.9/0_5e622_ca16ba6d_L" title="После дачи"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/386595"&gt;&lt;img alt="После дачи" src="http://img-fotki.yandex.ru/get/5607/imdagger.9/0_5e623_e04af6ae_-1-L" title="После дачи"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;   Когда-то у меня была похожая гусеница в банке, но моя была мохнатая и
из неё вывелась большая красивая бабочка.&lt;/p&gt;</summary><category term="цветы"></category><category term="природа"></category><category term="жизнь"></category><category term="деревня"></category><category term="отдых"></category><category term="жук"></category><category term="насекомое"></category></entry><entry><title>Мой прогресс</title><link href="/posts/2011/06/05/moi-progress/" rel="alternate"></link><updated>2011-06-05T22:12:36+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-06-05:posts/2011/06/05/moi-progress/</id><summary type="html">&lt;p&gt;Пока компилировался QEMU для всех архитектур (вообще мне хватило бы
только x64, но я решил собрать разные платформы), я набрал в электронном
виде данные из тетради за год моих занятий по одной третьей программы. И
построил график роста суммарного усилия килограмм-повторений. А QEMU
занял почти 400 мегов диска для сборки :) Скоро буду туда ставить Debian
для ICFPC.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/385145/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/5506/imdagger.9/0_5e079_c8992fde_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="здоровье"></category><category term="Я"></category><category term="сборка"></category><category term="прогресс"></category><category term="QEMU"></category></entry><entry><title></title><link href="/posts/2011/06/01/urn:ya.ru:post/22199227/1352/" rel="alternate"></link><updated>2011-06-01T22:40:23+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-06-01:posts/2011/06/01/urn:ya.ru:post/22199227/1352/</id><summary type="html">&lt;p&gt;make eat! :) or it!&lt;/p&gt;
</summary></entry><entry><title>Верификация времени</title><link href="/posts/2011/06/01/verifikatsiia-vremeni/" rel="alternate"></link><updated>2011-06-01T22:39:10+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-06-01:posts/2011/06/01/verifikatsiia-vremeni/</id><summary type="html">&lt;p&gt;Думаю, что я не первый, кого заинтересовала данная проблема.
Возможно есть чёткая формулировка почему это не возможно, но я даже не
знаю как спросить поисковик о такой задаче.&lt;/p&gt;
&lt;p&gt;Есть некоторый не детерминированный процесс, для которого нужно
гарантировать, что он отработал T шагов. Начальное состояние процесса
определяется со стороны системы V, она может выдавать какие угодно
начальные параметры. Данная система как раз и зависит от того, кто
решает задачу (т.е .меня). Процесс должен протекать с момента t1 до
момента t2. Т.е. если сказано, что 5 секунд, значит нужно дать гарантию,
что он протекал 5 секунд (не обязательно очень точно). При чём этот
процесс сгенерировал некоторый набор данных. Данные генерируются легко,
поэтому процессу не составляет труда выполнить операцию быстрее чем за
заданное T. По окончанию процесса он отправляет данные обратно в
систему. Система либо принимает данные либо отвергает.&lt;/p&gt;
&lt;p&gt;Я хотел построить схему таким образом: изначально система выдаёт
K=2&lt;sup&gt;L&lt;/sup&gt; ключей N&lt;sub&gt;1&lt;/sub&gt;…N&lt;sub&gt;K&lt;/sub&gt; для процесса. Каждый ключ
является либо ложным либо действительно описывает некоторый момент
времени. Связь&amp;nbsp; моментов времени и ключей заключается в какой-нибудь
такой формуле (это не заданная формула, а просто мысль):
N&lt;sub&gt;j&lt;/sub&gt;=hash(t&lt;sub&gt;j&lt;/sub&gt;*K&lt;sub&gt;j&lt;/sub&gt;), но не обязательно такой.
Главное, чтобы не возможно было легко извлечь момент времени из
N&lt;sub&gt;j&lt;/sub&gt;. Получится, что для выяснения нужного ключа потребуется K
операций вскрытия, а для проверки момента времени нужно лишь от O(1) до
O(L) (зависит от реализации).&lt;/p&gt;
&lt;p&gt;Процесс на каждом шаге вместе с основной операцией генерации
вычисляет ещё и функцию связи для текущего t, если полученное число
присутствует в множестве, значит мы нашли подходящий момент времени.
Проблема в том, что операция получается простой и можно создать процесс
который ничего не будет генерировать, а просто сначала найдёт ответы
перебором, таким же как по данным будет проходит нормальный процесс, а
затем построит ответ.&lt;/p&gt;
&lt;p&gt;Что-то от этого всего голова разболелась. Наверное для всего этого
есть доказательство невозможности реализации :-/.&lt;/p&gt;
</summary><category term="время"></category><category term="верификация"></category><category term="бредни"></category></entry><entry><title>Прилетело, посидело</title><link href="/posts/2011/05/31/priletelo-posidelo/" rel="alternate"></link><updated>2011-05-31T23:40:21+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-05-31:posts/2011/05/31/priletelo-posidelo/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/383660"&gt;&lt;img alt="alim2084.jpg" src="http://img-fotki.yandex.ru/get/5908/imdagger.9/0_5daac_e52815ea_L" title="alim2084.jpg"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/383661"&gt;&lt;img alt="Прилетело, посидело" src="http://img-fotki.yandex.ru/get/5304/imdagger.9/0_5daad_4269b182_L" title="Прилетело, посидело"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/383662"&gt;&lt;img alt="Прилетело, посидело" src="http://img-fotki.yandex.ru/get/5906/imdagger.9/0_5daae_36a5fb39_L" title="Прилетело, посидело"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Опять большая живность сегодня залетела через открытое окно, ещё до
этого жук большой залез. Чуть прогнал :) А то мне жалко смотреть как они
в лампочку долбятся.&lt;/p&gt;</summary><category term="большой"></category><category term="залетел"></category><category term="живность"></category><category term="мотылёк"></category><category term="работа"></category></entry><entry><title>ICFPC 2011 и образ</title><link href="/posts/2011/05/30/icfpc-2011-i-obraz/" rel="alternate"></link><updated>2011-05-30T22:42:13+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-05-30:posts/2011/05/30/icfpc-2011-i-obraz/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Не совсем понятно почему у японских ребят из университета нет
возможности раздать образ один раз в торрентах. Я не в курсе их правил с
пользованием интернетом, но видимо они намного жестче, чем у нас в
стране. Придётся мне собрать свой Debian образ и раздать для нашей
команды. Постараюсь его сделать поменьше, т.к. я не любитель запускать
огромные образы в виртуальной машине. Пока нас в команде всё ещё двое.
Ищё ещё людей, кто кодит на Python и готов работать с Bazaar, ну и чтобы
было конечно &lt;strong&gt;желание&lt;/strong&gt; и &lt;strong&gt;время&lt;/strong&gt;. Репозиторий у нас уже есть и общая
дока, чтобы обсуждать идеи.&lt;/p&gt;
</summary><category term="готовимся"></category><category term="NoobTeam"></category><category term="2011"></category><category term="icfpc"></category></entry><entry><title>Skype не умер :)</title><link href="/posts/2011/05/26/skype-ne-umer/" rel="alternate"></link><updated>2011-05-26T14:56:30+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-05-26:posts/2011/05/26/skype-ne-umer/</id><summary type="html">&lt;p&gt;Linux Skype 2.1.0.81 полёт нормальный, не падает, а все остальные
умирают.&lt;/p&gt;
</summary><category term="умер"></category><category term="skype"></category></entry><entry><title>Bazaar fast forward</title><link href="/posts/2011/05/23/bazaar-fast-forward/" rel="alternate"></link><updated>2011-05-23T23:23:41+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-05-23:posts/2011/05/23/bazaar-fast-forward/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Теперь я осознал, что стоило побольше почитать про Bazaar, когда я
его начал использовать, т.к. только при работе с Git я узнал про fast
forward. Раньше, если &lt;strong&gt;bzr pull&lt;/strong&gt; не хотел срабатывать, то я делал
полноценный merge, что приводило к некоторому уровню «спагетти», но
когда я узнал про fast forward из Git, решил взглянуть на эту же
возможность в Bazaar. Оказывается всё просто, нужно лишь писать &lt;strong&gt;bzr
merge –pull&lt;/strong&gt;.&lt;/p&gt;
</summary><category term="fast"></category><category term="forward"></category><category term="bazaar"></category><category term="merge"></category></entry><entry><title></title><link href="/posts/2011/05/22/urn:ya.ru:post/22199227/1338/" rel="alternate"></link><updated>2011-05-22T22:03:50+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-05-22:posts/2011/05/22/urn:ya.ru:post/22199227/1338/</id><summary type="html">&lt;p&gt;хочется позитива&lt;/p&gt;
</summary></entry><entry><title>Добавлено описание по некромантам</title><link href="/posts/2011/05/22/dobavleno-opisanie-po-nekromantam/" rel="alternate"></link><updated>2011-05-22T22:03:22+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-05-22:posts/2011/05/22/dobavleno-opisanie-po-nekromantam/</id><summary type="html">&lt;p&gt;В
&lt;a class="reference external" href="http://bazaar.launchpad.net/~sim-game-group/+junk/main/revision/211"&gt;imdagger@yandex.ru-20110522183215-lp3is0tp8cmpgl89&lt;/a&gt;
ревизии добавлено описании некроманхеров. Ранее &lt;em&gt;прескульпт&lt;/em&gt; уже делал
(описания с примерами ещё тогда не было) обычного некроманхера для
главного персонажа игрока. Те примеры ,что я добавил учитывают уже
сделанные наработки в прескульпте и не расходятся с ними в идее.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/380839/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/5706/imdagger.9/0_5cfa7_429beda7_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/380840/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/5906/imdagger.9/0_5cfa8_dd7bde4c_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="проект"></category><category term="документация"></category><category term="некромант"></category><category term="некроманхер"></category><category term="дизайн"></category><category term="набросок"></category></entry><entry><title>Evolution</title><link href="/posts/2011/05/18/evolution/" rel="alternate"></link><updated>2011-05-18T18:16:17+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-05-18:posts/2011/05/18/evolution/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Если в Evolution 2.28.2 из поставки Mandriva вызвать параметры и
полазать по ним, попереключать, то локаль последующего интерфейса
Evolution становится английской. И при цитировании писем тоже начинает
использоваться английская локаль.&lt;/p&gt;
</summary><category term="почта"></category><category term="баг"></category><category term="evolution"></category></entry><entry><title></title><link href="/posts/2011/05/17/urn:ya.ru:post/22199227/1335/" rel="alternate"></link><updated>2011-05-17T23:42:36+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-05-17:posts/2011/05/17/urn:ya.ru:post/22199227/1335/</id><summary type="html">&lt;p&gt;опять сгребают еду&lt;/p&gt;
</summary></entry><entry><title>Народ паникует</title><link href="/posts/2011/05/17/narod-panikuet/" rel="alternate"></link><updated>2011-05-17T23:41:53+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-05-17:posts/2011/05/17/narod-panikuet/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; В «Линия» народ выгребает всё, я как обычно пошёл купить немного еды
после тренировки в 22:00, а там народу тьма, касс активно где-то 15,
гиппермаркет не особо готовился к нашествию людей. Кажется я там
единственный, кто не тащил &lt;strong&gt;полную тележку&lt;/strong&gt;! Я простоял в очереди
где-то &lt;strong&gt;50 минут.&lt;/strong&gt; &lt;strong&gt;Все выгребают&lt;/strong&gt;: масло подсолнечное, соль, мука,
макароны, детское питание, порошок импортный и тонну других товаров. В
каждую кассу стоит по 30-40 человек!&lt;/p&gt;
</summary><category term="скупают"></category><category term="ужас"></category><category term="еда"></category><category term="Гомель"></category></entry><entry><title></title><link href="/posts/2011/05/13/urn:ya.ru:post/22199227/1333/" rel="alternate"></link><updated>2011-05-13T23:54:16+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-05-13:posts/2011/05/13/urn:ya.ru:post/22199227/1333/</id><summary type="html">&lt;p&gt;я опять переутомился, packed week&lt;/p&gt;
</summary></entry><entry><title>Уфф... полегчало</title><link href="/posts/2011/05/10/uff-polegchalo/" rel="alternate"></link><updated>2011-05-10T22:38:11+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-05-10:posts/2011/05/10/uff-polegchalo/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Звонок состоялся, в одном ухе шум с улицы из открытого окна, тут ещё
кто-то что-то в чат решил написать, у другого уха телефон с человеком из
Google на проводе, меня подклинивает, подтупливает… выполняю базовые
шаги, что он просит, диктует важную информацию, а мне плохо слышно — по
сто раз переспрашиваю :-/Так и хочется попросить отложить всё на момент,
когда я буду морально готов.. Но не.. нужно действовать. Слава Богу всё
завершилось и заработало.&lt;/p&gt;
</summary><category term="напряжение"></category><category term="устал"></category><category term="работа"></category><category term="google"></category></entry><entry><title></title><link href="/posts/2011/05/09/urn:ya.ru:post/22199227/1330/" rel="alternate"></link><updated>2011-05-09T21:57:55+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-05-09:posts/2011/05/09/urn:ya.ru:post/22199227/1330/</id><summary type="html">&lt;p&gt;спать возле компа, есть возле компа, жить возле компа :-)&lt;/p&gt;
</summary></entry><entry><title>Ночные слои</title><link href="/posts/2011/05/08/nochnye-sloi/" rel="alternate"></link><updated>2011-05-08T22:01:47+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-05-08:posts/2011/05/08/nochnye-sloi/</id><summary type="html">&lt;p&gt;Получил сегодня немного слоёв с ещё недоработанной программы, но
кажется фитнесс-функцию я откалибровал. Не понимаю почему мне в голову
раньше не пришла мысль вычислять площадь правильным способом. Сначала я
для упрощения использовал просто абсолютное значение разности в заданных
точках, но это приводило к «слепоте» алгоритма в большей части функции.
Затем я начал вычислять площадь на интервалах и брать абсолютное
значение разности уже этих значений. Но это приводило всё равно к
«слепоте» функции на участке, хотя уже было лучше. Затем я осознал, что
так делать это неправильно, ведь моя фитнесс-функция это интеграл
абсолютного значения разностей функций: искомой и найденной. И такая
разность не может учесть случай, что один участок возрастает, а другой
убывает. Поэтому я написал правильную обработку этого случая.&lt;/p&gt;
&lt;p&gt;Стало уже лучше, а ещё я написал merit-функцию на C и использовал из
Python через ctypes, поэтому мне пришла в голову идея не увеличивать
число исходных точек руками. Я задаю некоторые ключевые точки, а
алгоритм проходит с заданным интервалом между точками. При этом для
указанных R/T производится линейное интерполирование. Предполагается,
что пользователь выбрал ключевые точки из расчёта, что отрезки близки
или просто параллельны к касательным функции между этими концами.&lt;/p&gt;
&lt;p&gt;Улучшение функции для выживания особей дало для меня поистине
колоссальный результат. Раньше я и не думал, что смогу создать сильно
изогнутый участок. Помогло ещё то, что я стал использовать всего два
материала и сосредоточил поиск только на толщине.&lt;/p&gt;
&lt;p&gt;Мне предстоит написать код, который будет симулировать популяцию с
параметрами (M, n&lt;sub&gt;h&lt;/sub&gt;, n&lt;sub&gt;l&lt;/sub&gt;, I). Где M — количество слоёв,
а I — порядок. Затем для каждой особи снова строится популяция и
отрабатывают шаги FCEA-алгоритма, который я ещё «не допилил».&lt;/p&gt;
&lt;p&gt;Вот некоторые результаты, начальные параметры я выбрал случайным
образом руками, т.е. данный график не может претендовать на
оптимальность в целом, но для выбранных мной критериев и требуемых
показателей он превзошёл все мои ожидания.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/376445/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4515/imdagger.9/0_5be7d_7af5e0cd_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/376446/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/4403/imdagger.9/0_5be7e_364d2467_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;P.S. n&lt;sub&gt;подложки&lt;/sub&gt;=1.5. Значит я не зря проводил ночами за
компьютером после работы и просыпался каждые полчаса, чтобы взглянуть на
результаты, пока машинка шуршит :).&lt;/p&gt;</summary><category term="радость"></category><category term="оптимизация"></category><category term="слой"></category><category term="алгоритм"></category><category term="генетический"></category><category term="результат"></category><category term="оптика"></category></entry><entry><title>YouTube API ленты</title><link href="/posts/2011/05/06/youtube-api-lenty/" rel="alternate"></link><updated>2011-05-06T15:37:46+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-05-06:posts/2011/05/06/youtube-api-lenty/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Кажется у YouTube только что отвалились feed-ы, т.к. запросы к API
возвращают &lt;strong&gt;Service Unavailable&lt;/strong&gt;, например на такой стандартный запрос
&lt;a class="reference external" href="http://gdata.youtube.com/feeds/api/standardfeeds/on_the_web"&gt;http://gdata.youtube.com/feeds/api/standardfeeds/on_the_web&lt;/a&gt;&lt;/p&gt;
</summary><category term="ошибка"></category><category term="лента"></category><category term="youtube"></category></entry><entry><title>Бошка кипит</title><link href="/posts/2011/05/03/boshka-kipit/" rel="alternate"></link><updated>2011-05-03T22:11:57+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-05-03:posts/2011/05/03/boshka-kipit/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Я конечно понимаю, что эти тайваньцы запустили свой FCEA 100 раз по
2000 итераций, и что у меня ещё очень сырая и медленная реализация, но
почему они в формулах писали про R, а на графике используют
Transmittance?! Попробую ещё китайский вариант, который базируется на
данной же статье, хотя там тоже такое чувство, что они часть ручками
подгоняли.&lt;/p&gt;
</summary><category term="Я"></category><category term="негодую"></category><category term="статья"></category><category term="оптика"></category></entry><entry><title>FCEA</title><link href="/posts/2011/05/02/fcea/" rel="alternate"></link><updated>2011-05-02T21:58:48+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-05-02:posts/2011/05/02/fcea/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp; Почти до конца реализовал алгоритм &lt;strong&gt;FCEA&lt;/strong&gt; (Family Competition
Evolutionary Algorithm) от Jinn-Moon Yang и Cheng-Yen Kao, надеюсь
сегодня ночью смогу его адаптировать под свои нужды и получить для
начала хотя бы результаты, которые описаны в их статье. Функцию merit
написал на C для большей скорости расчёта. В целом алгоритм похож на то,
что я придумал, но тут более обоснованно используются функции и
коэффициенты уже получены экспериментально.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; P.S. А ещё да.. Яндекс черновики на Я.ру — это хорошо, где ж они
были раньше, когда я один раз нажал случайно закрыть вкладку в FF3.&lt;/p&gt;
</summary><category term="python"></category><category term="генетический"></category><category term="алгоритм"></category><category term="покрытие"></category><category term="оптика"></category></entry><entry><title>Срез</title><link href="/posts/2011/05/01/srez/" rel="alternate"></link><updated>2011-05-01T14:53:47+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-05-01:posts/2011/05/01/srez/</id><summary type="html">&lt;p&gt;Это просто пару рендеров до правки плана, т.к. я в нескольких местах
ошибся, в одном сделал стены по 100, а в другом дверь не там прорезал.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/369737/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4513/imdagger.9/0_5a449_b0103a77_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/369738/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/5503/imdagger.9/0_5a44a_eca928b9_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/369740/"&gt;&lt;img alt="image2" src="http://img-fotki.yandex.ru/get/5303/imdagger.9/0_5a44c_c802ebab_L" title="image2"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="домик"></category><category term="жизнь"></category><category term="набросок"></category></entry><entry><title></title><link href="/posts/2011/04/30/urn:ya.ru:post/22199227/1312/" rel="alternate"></link><updated>2011-04-30T17:22:40+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-04-30:posts/2011/04/30/urn:ya.ru:post/22199227/1312/</id><summary type="html">&lt;p&gt;echo &amp;quot;empty&amp;quot; &amp;gt;/proc/self/heart&lt;/p&gt;
</summary><category term=""></category></entry><entry><title>Дом</title><link href="/posts/2011/04/30/dom/" rel="alternate"></link><updated>2011-04-30T17:20:27+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-04-30:posts/2011/04/30/dom/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Сделал 3D-модель своего будущего дома, пробежался по нему, нужно ещё
раз обдумать план, а то не хочется построить то, что будет неудобным :)
Забыл флешку и пару черновых рендеров на ней :-/ ладно завтра выложу то,
что будет строится.&lt;/p&gt;
</summary><category term="blender"></category><category term="Я"></category><category term="домик"></category><category term="жизнь"></category></entry><entry><title>Приятная неожиданность</title><link href="/posts/2011/04/28/priiatnaia-neozhidannost/" rel="alternate"></link><updated>2011-04-28T22:56:50+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-04-28:posts/2011/04/28/priiatnaia-neozhidannost/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Было приятно, что &lt;a class="reference external" href="http://www.belpay.by/moneyback/"&gt;http://www.belpay.by/moneyback/&lt;/a&gt; работает и всё
прошло успешно, ввёл 140000тыс, а получил по курсу 4490 уже WMZ. Я
думал, что деньги потеряются, страшновато было.&lt;/p&gt;
</summary><category term="деньги"></category><category term="жизнь"></category><category term="работа"></category></entry><entry><title>Таблица с генераторами</title><link href="/posts/2011/04/26/tablitsa-s-generatorami/" rel="alternate"></link><updated>2011-04-26T00:05:12+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-04-26:posts/2011/04/26/tablitsa-s-generatorami/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Наконец-то я допилил идею с таблицей генераторов, которая является
наследником &lt;strong&gt;object&lt;/strong&gt; с UserDict.DictMixin. На запрос по ключу таблица
возвращает генератор, т.к. есть код, который выбирает что показать и он
не связан с этой таблицей, то генераторы были лучшим решением, т.к. не
требуется множества запросов, а только необходимый минимум.&lt;/p&gt;
</summary><category term="код"></category><category term="работа"></category><category term="google"></category></entry><entry><title>Cycles</title><link href="/posts/2011/04/24/cycles/" rel="alternate"></link><updated>2011-04-24T16:54:48+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-04-24:posts/2011/04/24/cycles/</id><summary type="html">&lt;p&gt;Новый Cycles это будет нечто! Крутота! /me пляшет от радости.&lt;/p&gt;
&lt;div class="text-center"&gt;&lt;div class="youtube" align="left"&gt;&lt;/div&gt;&lt;iframe width="450" height="370" src="https://www.youtube.com/embed/8KgrBjt4e9k" frameborder="0"&gt;&lt;/iframe&gt;&lt;/div&gt;</summary><category term="blender"></category><category term="радость"></category><category term="cycles"></category><category term="возможности"></category></entry><entry><title>Картошка 100% completed</title><link href="/posts/2011/04/23/kartoshka-100-completed/" rel="alternate"></link><updated>2011-04-23T15:24:46+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-04-23:posts/2011/04/23/kartoshka-100-completed/</id><summary type="html">&lt;p&gt;Проснуться рано в 5 утра, быстро собраться, ехать, садится на поезд
… снова ехать, быстро переодеться. На старт.. внимание … марш! Я
приступаю к посадке, обхожу кочку, которую сделал крот, укладываю
картофелину.. ещё.. ещё… ура!!.. ряд закончился. Мотоблок жужжит и
делает своё дело, закрыл, ещё накрыл… поехали снова. Оопс.. игрок вышел
на 1,5 минуты из строя из-за травмы глаза, т.к. гадкая мошка туда попала
и шевелится. Игрок вернулся в строй и продолжает посадку, сажаем
картофель, а собираем камни и стекло (камней много), т.к. сажаем в
целину. Земля ложится мощными пластами, хотя ещё до зимы перекапывали и
перерабатывали. Игрок-копатель подходит к финишу и всё, теперь можно
поесть и поехать довольным домой.&lt;/p&gt;
&lt;p&gt;Вообще при перекапывании земли много чего нашлось: гильзы времён
второй мировой, гайка размером с кулак (думаю от поезда), нижняя челюсть
(предположительно человеческая), много костей, но в основном животных (я
думаю кони), самое ценное это довоенный циркуль (его теперь отец на
работе юзает)!&lt;/p&gt;
&lt;p&gt;Хочу построить там дом и посадить сад. Если злобная соседка опять не
будет ставить палки в колёса, то потихому отстроимся, а дерево я своё
уже выращиваю.&lt;/p&gt;
&lt;p&gt;Прикольно, что каштаны, которые мы с братом посадили, когда ещё были
малыми лет 5 назад проросли и стали большими деревьями. Они уже
переросли нас, так держать каштаны!! Я вас люблю, обожаю! И буду делать
ещё больше деревьев.&lt;/p&gt;
</summary><category term="Я"></category><category term="бредни"></category><category term="жизнь"></category><category term="деревня"></category></entry><entry><title></title><link href="/posts/2011/04/23/urn:ya.ru:post/22199227/1298/" rel="alternate"></link><updated>2011-04-23T15:15:35+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-04-23:posts/2011/04/23/urn:ya.ru:post/22199227/1298/</id><summary type="html">&lt;p&gt;сонный позитив внутри меня&lt;/p&gt;
</summary></entry><entry><title>Ключ</title><link href="/posts/2011/04/19/kliuch/" rel="alternate"></link><updated>2011-04-19T23:54:11+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-04-19:posts/2011/04/19/kliuch/</id><summary type="html">&lt;p&gt;Ура! Ко мне прибыл OTP-ключ. Теперь я себя чувствую на капельку
счастливее.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/362739/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/5006/imdagger.9/0_588f3_ba7bb9b4_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="посылка"></category><category term="жизнь"></category><category term="ключ"></category></entry><entry><title></title><link href="/posts/2011/04/17/urn:ya.ru:post/22199227/1296/" rel="alternate"></link><updated>2011-04-17T21:57:44+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-04-17:posts/2011/04/17/urn:ya.ru:post/22199227/1296/</id><summary type="html">&lt;p&gt;переутомление&lt;/p&gt;
</summary></entry><entry><title>В погоне за счастьем</title><link href="/posts/2011/04/17/v-pogone-za-schastem/" rel="alternate"></link><updated>2011-04-17T21:55:55+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-04-17:posts/2011/04/17/v-pogone-za-schastem/</id><summary type="html">&lt;p&gt;Я хочу быть машиной бездушной,&lt;/p&gt;
&lt;p&gt;Не жалеть, не любить, не страдать.&lt;/p&gt;
&lt;p&gt;Быть железкой тупой и послушной,&lt;/p&gt;
&lt;p&gt;Я за это готов всё отдать.&lt;/p&gt;
&lt;p&gt;Умирайте простые нейроны!&lt;/p&gt;
&lt;p&gt;Череп кремний забьёт до конца,&lt;/p&gt;
&lt;p&gt;В голове потекут электроны,&lt;/p&gt;
&lt;p&gt;Ничего уже нет от творца.&lt;/p&gt;
&lt;p&gt;Слепота…, я в беспомощных муках,&lt;/p&gt;
&lt;p&gt;И никто не излечит глаза,&lt;/p&gt;
&lt;p&gt;Растворившись в пространстве и звуках,&lt;/p&gt;
&lt;p&gt;Не познать, что такое слеза.&lt;/p&gt;
</summary><category term="бредни"></category><category term="стихотворение"></category><category term="набросок"></category></entry><entry><title></title><link href="/posts/2011/04/11/urn:ya.ru:post/22199227/1292/" rel="alternate"></link><updated>2011-04-11T21:26:10+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-04-11:posts/2011/04/11/urn:ya.ru:post/22199227/1292/</id><summary type="html"></summary></entry><entry><title>Обратная сторона города</title><link href="/posts/2011/04/10/obratnaia-storona-goroda/" rel="alternate"></link><updated>2011-04-10T20:52:25+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-04-10:posts/2011/04/10/obratnaia-storona-goroda/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/359447"&gt;&lt;img alt="Обратная сторона города" src="http://img-fotki.yandex.ru/get/5704/imdagger.9/0_57c17_9051e687_L" title="Обратная сторона города"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/359448"&gt;&lt;img alt="Обратная сторона города" src="http://img-fotki.yandex.ru/get/5903/imdagger.9/0_57c18_673c2e20_L" title="Обратная сторона города"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/359449"&gt;&lt;img alt="Обратная сторона города" src="http://img-fotki.yandex.ru/get/5209/imdagger.9/0_57c19_f830b9ee_L" title="Обратная сторона города"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/359450"&gt;&lt;img alt="Обратная сторона города" src="http://img-fotki.yandex.ru/get/5209/imdagger.9/0_57c1a_91a8ff4d_L" title="Обратная сторона города"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/359451"&gt;&lt;img alt="Обратная сторона города" src="http://img-fotki.yandex.ru/get/5704/imdagger.9/0_57c1b_cb001be1_L" title="Обратная сторона города"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/359452"&gt;&lt;img alt="Обратная сторона города" src="http://img-fotki.yandex.ru/get/4403/imdagger.9/0_57c1c_b3e70b7_L" title="Обратная сторона города"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/359453"&gt;&lt;img alt="Обратная сторона города" src="http://img-fotki.yandex.ru/get/5604/imdagger.9/0_57c1d_9e234b8f_L" title="Обратная сторона города"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/359456"&gt;&lt;img alt="Обратная сторона города" src="http://img-fotki.yandex.ru/get/4702/imdagger.9/0_57c20_e6b0fac7_L" title="Обратная сторона города"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/359457"&gt;&lt;img alt="Обратная сторона города" src="http://img-fotki.yandex.ru/get/4405/imdagger.9/0_57c21_f503487f_L" title="Обратная сторона города"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/359458"&gt;&lt;img alt="Обратная сторона города" src="http://img-fotki.yandex.ru/get/5006/imdagger.9/0_57c22_edc94c00_L" title="Обратная сторона города"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/359459"&gt;&lt;img alt="Обратная сторона города" src="http://img-fotki.yandex.ru/get/6005/imdagger.9/0_57c23_f3ca6605_L" title="Обратная сторона города"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/359460"&gt;&lt;img alt="Обратная сторона города" src="http://img-fotki.yandex.ru/get/5904/imdagger.9/0_57c24_84039baa_L" title="Обратная сторона города"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/359461"&gt;&lt;img alt="Обратная сторона города" src="http://img-fotki.yandex.ru/get/5407/imdagger.9/0_57c25_2e75ebc2_L" title="Обратная сторона города"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/359462"&gt;&lt;img alt="Обратная сторона города" src="http://img-fotki.yandex.ru/get/5604/imdagger.9/0_57c26_dceb29d_L" title="Обратная сторона города"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Я не понимаю зачем так уродовать деревья (на фото частный сектор,
который страдает последние годы). Но службы стараются выслужиться перед
своим начальством и каждый год всё вырезают под корень. Иногда деревья
не переносят такого и засыхают. По улице Б. Хмельницкого самые стойкие
деревья, которые пережили многое :(.&lt;/p&gt;</summary><category term="деревья"></category><category term="ужас"></category><category term="издевательство"></category><category term="Гомель"></category><category term="Богдана Хмельницкого"></category><category term="улица"></category></entry><entry><title></title><link href="/posts/2011/04/09/urn:ya.ru:post/22199227/1289/" rel="alternate"></link><updated>2011-04-09T21:42:51+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-04-09:posts/2011/04/09/urn:ya.ru:post/22199227/1289/</id><summary type="html">&lt;p&gt;Мама - Анархия, папа - стакан портвейна&lt;/p&gt;
</summary></entry><entry><title>Авокадо</title><link href="/posts/2011/04/02/avokado/" rel="alternate"></link><updated>2011-04-02T20:12:50+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-04-02:posts/2011/04/02/avokado/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Никогда раньше не пробовал его плоды. Сегодня купил по приколу один.
Заранее подготовился и прочитал в интернете как это будет. Понял, что
это будет не супер и что-то маслянистое и травянистое. Мда.. реально
такое и есть, без хлеба его сложно есть. Теперь понятно почему его
просто так не едят, а использую для салатов. Я аккуратно выковырял
косточку, попробую прорастить.&lt;/p&gt;
</summary><category term="попробовал"></category><category term="вкус"></category><category term="еда"></category><category term="авокадо"></category><category term="бредни"></category></entry><entry><title>MinGW</title><link href="/posts/2011/03/30/mingw/" rel="alternate"></link><updated>2011-03-30T23:09:00+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-03-30:posts/2011/03/30/mingw/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Установил MinGW, попробую сам собрать Blender под Винду, используя
кросскомпиляцию. Часть библиотек уже собранных возьму с launchpad.net из
ветки для Blender 2.4x, а недостающие или неподходящие соберу сам
(например там есть Python 3.1 и 3.2, но нет 2.6 и 2.5, которые нужны для
Blender 2.49b).&lt;/p&gt;
</summary><category term="blender"></category><category term="кросскомпиляция"></category><category term="сборка"></category><category term="MinGW"></category></entry><entry><title></title><link href="/posts/2011/03/30/urn:ya.ru:post/22199227/1284/" rel="alternate"></link><updated>2011-03-30T22:16:06+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-03-30:posts/2011/03/30/urn:ya.ru:post/22199227/1284/</id><summary type="html">&lt;p&gt;а мне нравится сахар с корицей и не волнует :)&lt;/p&gt;
</summary></entry><entry><title>extglob Bash</title><link href="/posts/2011/03/28/extglob-bash/" rel="alternate"></link><updated>2011-03-28T22:28:54+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-03-28:posts/2011/03/28/extglob-bash/</id><summary type="html">&lt;p&gt;Хм… не было времени раньше разбираться почему на моей офисной машине
паттерны вида &lt;strong&gt;/!(tmp|var)&lt;/strong&gt; не работают. Случайно :) в разделе
Pattern Matching обнаружил указание на &lt;strong&gt;shopt&lt;/strong&gt;, проверил на другой
рабочей машинке:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;$ shopt extglob&lt;/div&gt;
&lt;div class="line"&gt;extglob&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; on&lt;/div&gt;
&lt;div class="line"&gt;а у меня:&lt;/div&gt;
&lt;div class="line"&gt;extglob&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;strong&gt;off&lt;/strong&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;После включения: &lt;strong&gt;*shopt -s extglob*&lt;/strong&gt; заработали в текущей сессии
Bash паттерны с возможностью исключения.&lt;/p&gt;
</summary><category term="bash"></category><category term="исключение"></category><category term="extglob"></category><category term="маска"></category></entry><entry><title>Изменения в диздоке игрового проекта</title><link href="/posts/2011/03/27/izmeneniia-v-dizdoke-igrovogo-proekta/" rel="alternate"></link><updated>2011-03-27T21:13:39+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-03-27:posts/2011/03/27/izmeneniia-v-dizdoke-igrovogo-proekta/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Я наконец-то перенёс с бумаги список соответствия номеров и
элементов локации Долины мёртвых в диздок. Теперь он точно не
потеряется, т.к. один раз я думал, что его случайно выкинули или я
где-то забыл листик. Бумага удобна для размышлений, но как носитель
информации очень не устойчива к проблемным ситуациям. Ещё я добавил
примеры того, как должны выглядеть некоторые мосты данной локации.
Планирую добавить и сделать (если не найду готовых) наброски всех
основных частей локации, чтобы было понятно как моделировать. Вот сам
&lt;a class="reference external" href="http://bazaar.launchpad.net/~sim-game-group/+junk/main/download/head:/desdoc.odt-20081012180121-u2rjn1qhn5ihhtt0-46/desdoc.odt"&gt;диздок&lt;/a&gt;.&lt;/p&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;/div&gt;
</summary><category term="проект"></category><category term="мост"></category><category term="документация"></category><category term="дизайн"></category><category term="добавка"></category><category term="изменение"></category><category term="предметы"></category></entry><entry><title></title><link href="/posts/2011/03/21/urn:ya.ru:post/22199227/1281/" rel="alternate"></link><updated>2011-03-21T23:20:15+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-03-21:posts/2011/03/21/urn:ya.ru:post/22199227/1281/</id><summary type="html">&lt;p&gt;хочется чего-нибудь вкусного съесть&lt;/p&gt;
</summary></entry><entry><title>CEGUI Blender</title><link href="/posts/2011/03/20/cegui-blender/" rel="alternate"></link><updated>2011-03-20T22:13:02+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-03-20:posts/2011/03/20/cegui-blender/</id><summary type="html">&lt;p&gt;Это видео показывает CEGUI в BGE Ketsji в динамике. До этого был просто
скриншот, но я уже научил эту всю штуку обрабатывать курсор мыши.
Следующим будет ввод с клавиатуры.&lt;/p&gt;
&lt;div class="text-center"&gt;&lt;div class="yavideo" align="left"&gt;&lt;/div&gt;&lt;object id="flash" width="450" height="370" data="http://flv.video.yandex.ru/lite/imdagger/usjatc9vq3.2310/" type="application/x-shockwave-flash"&gt;&lt;param value="http://flv.video.yandex.ru/lite/imdagger/usjatc9vq3.2310/" name="movie"&gt;&lt;param value="high" name="quality"&gt;&lt;param value="transparent" name="wmode"&gt;&lt;param value="#ffffff" name="bgcolor"&gt;&lt;param value="true" name="allowfullscreen"&gt;&lt;param value="sameDomain" name="allowscriptaccess"&gt;&lt;param value="scale" name="scale"&gt;&lt;/object&gt;&lt;/div&gt;</summary><category term="blender"></category><category term="bge"></category><category term="CEGUI"></category><category term="улучшение"></category><category term="доработка"></category></entry><entry><title>UBlenderJS версии 0.0.6</title><link href="/posts/2011/03/13/ublenderjs-versii-006/" rel="alternate"></link><updated>2011-03-13T18:05:51+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-03-13:posts/2011/03/13/ublenderjs-versii-006/</id><summary type="html">&lt;p&gt;Выпустил
&lt;a class="reference external" href="http://blender3d.org.ua/forum/bu/iwe/upload/blender_org_ua_v006%2Euser.js"&gt;фикс&lt;/a&gt;
для UBlenderJS. Завёл отдельный
&lt;a class="reference external" href="http://blender3d.org.ua/forum/bu/46.html"&gt;топик&lt;/a&gt; на форуме
&lt;a class="reference external" href="http://blender3d.org.ua"&gt;БлендерУкраина&lt;/a&gt;. Пришлось сделать проверку
на innerText, который есть в Opera, но нет в Firefox, я раньше пробовал
заменить его на textContent, но это не аналогичная функция в Javascript.
Т.к. она работает неправильно для многострочных данных и с пробелами
иное поведение. Нашёл на Stack Overflow
&lt;a class="reference external" href="http://stackoverflow.com/questions/3907846/innertext-shim-for-firefox"&gt;решение&lt;/a&gt;
для Firefox с использованием &lt;code class="code"&gt;
toString&lt;/code&gt;
 и выделением (в Opera оно
себя ведёт не очень дружелюбно):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;sel&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nb"&gt;window&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;getSelection&lt;/span&gt;&lt;span class="pgcss-p"&gt;();&lt;/span&gt;
&lt;span class="pgcss-nx"&gt;sel&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;removeAllRanges&lt;/span&gt;&lt;span class="pgcss-p"&gt;();&lt;/span&gt;
&lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;range&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nb"&gt;document&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;createRange&lt;/span&gt;&lt;span class="pgcss-p"&gt;();&lt;/span&gt;
&lt;span class="pgcss-nx"&gt;range&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;selectNodeContents&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;textNode&lt;/span&gt;&lt;span class="pgcss-p"&gt;);&lt;/span&gt;
&lt;span class="pgcss-nx"&gt;sel&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;addRange&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;range&lt;/span&gt;&lt;span class="pgcss-p"&gt;);&lt;/span&gt;
&lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;str&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nx"&gt;sel&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;toString&lt;/span&gt;&lt;span class="pgcss-p"&gt;();&lt;/span&gt;
&lt;span class="pgcss-nx"&gt;sel&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;removeAllRanges&lt;/span&gt;&lt;span class="pgcss-p"&gt;();&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</summary><category term="исправление"></category><category term="доработка"></category><category term="javascript"></category><category term="blender"></category><category term="UBlenderJS"></category><category term="форум"></category><category term="дополнительно"></category></entry><entry><title>Использованные материалы</title><link href="/posts/2011/03/13/ispolzovannye-materialy/" rel="alternate"></link><updated>2014-07-17T01:35:00+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-03-13:posts/2011/03/13/ispolzovannye-materialy/</id><summary type="html">&lt;p&gt;Как и обещал выкладываю материалы, которые использовал при создании
цветка:&lt;/p&gt;
&lt;table border="1" class="table table-striped table-hover table-condensed table-post-50 borderless docutils"&gt;
&lt;colgroup&gt;
&lt;col width="49%"&gt;&lt;/col&gt;
&lt;col width="51%"&gt;&lt;/col&gt;
&lt;/colgroup&gt;
&lt;thead valign="bottom"&gt;
&lt;tr&gt;&lt;th class="head"&gt;&lt;strong&gt;Пользователь&lt;/strong&gt;&lt;/th&gt;
&lt;th class="head"&gt;&lt;strong&gt;Материал&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td&gt;&lt;a class="reference external" href="http://matrep.parastudios.de/index.php?p=8&amp;amp;u=205"&gt;mookie&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="http://matrep.parastudios.de/index.php?action=view&amp;amp;material=651-blue-velvet&amp;amp;fc=5"&gt;Blue Velvet&lt;/a&gt;&lt;/p&gt;
&lt;p class="last"&gt;&lt;a class="reference external" href="http://matrep.parastudios.de/index.php?action=view&amp;amp;material=651-blue-velvet&amp;amp;fc=5"&gt;&lt;img alt="blue velvet" src="http://matrep.parastudios.de/mats/preview/480c7eddaa849.jpg" title="blue velvet"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;a class="reference external" href="http://matrep.parastudios.de/index.php?p=8&amp;amp;u=598"&gt;Ush&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="http://matrep.parastudios.de/index.php?action=view&amp;amp;material=295-english-walnut&amp;amp;fc=10"&gt;English walnut&lt;/a&gt;&lt;/p&gt;
&lt;p class="last"&gt;&lt;a class="reference external" href="http://matrep.parastudios.de/index.php?action=view&amp;amp;material=295-english-walnut&amp;amp;fc=10"&gt;&lt;img alt="english walnut" src="http://matrep.parastudios.de/mats/preview/47039cf858805.jpg" title="english walnut"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;a class="reference external" href="http://matrep.parastudios.de/index.php?p=8&amp;amp;u=78"&gt;hoehrer&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="http://matrep.parastudios.de/index.php?action=view&amp;amp;material=139-eraser-rubber-red&amp;amp;fc=4"&gt;Eraser Rubber (red)&lt;/a&gt;&lt;/p&gt;
&lt;p class="last"&gt;&lt;a class="reference external" href="http://matrep.parastudios.de/index.php?action=view&amp;amp;material=139-eraser-rubber-red&amp;amp;fc=4"&gt;&lt;img alt="eraser rubber red" src="http://matrep.parastudios.de/mats/preview/464ac1e1b735d.jpg" title="eraser rubber red"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;a class="reference external" href="http://matrep.parastudios.de/index.php?p=8&amp;amp;u=557"&gt;Guerraz&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="http://matrep.parastudios.de/index.php?action=view&amp;amp;material=360-lemon&amp;amp;fc=6"&gt;Lemon&lt;/a&gt;&lt;/p&gt;
&lt;p class="last"&gt;&lt;a class="reference external" href="http://matrep.parastudios.de/index.php?action=view&amp;amp;material=360-lemon&amp;amp;fc=6"&gt;&lt;img alt="lemon" src="http://matrep.parastudios.de/mats/preview/47330e20627ef.jpg" title="lemon"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;a class="reference external" href="http://matrep.parastudios.de/index.php?p=8&amp;amp;u=1005"&gt;brikbot&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="http://matrep.parastudios.de/index.php?action=view&amp;amp;material=642-manta-ray-skin&amp;amp;fc=6"&gt;Manta Ray Skin&lt;/a&gt;&lt;/p&gt;
&lt;p class="last"&gt;&lt;a class="reference external" href="http://matrep.parastudios.de/index.php?action=view&amp;amp;material=642-manta-ray-skin&amp;amp;fc=6"&gt;&lt;img alt="manta ray skin" src="http://matrep.parastudios.de/mats/preview/47ff01d00644b.jpg" title="manta ray skin"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;a class="reference external" href="http://matrep.parastudios.de/index.php?p=8&amp;amp;u=61"&gt;meschoyez&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="http://matrep.parastudios.de/index.php?action=view&amp;amp;material=190-mud&amp;amp;fc=10"&gt;Mud&lt;/a&gt;&lt;/p&gt;
&lt;p class="last"&gt;&lt;a class="reference external" href="http://matrep.parastudios.de/index.php?action=view&amp;amp;material=190-mud&amp;amp;fc=10"&gt;&lt;img alt="mud" src="http://matrep.parastudios.de/mats/preview/4661dadb99304.jpg" title="mud"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;a class="reference external" href="http://matrep.parastudios.de/index.php?p=8&amp;amp;u=2"&gt;Paratron&lt;/a&gt; &lt;a class="reference external" href="http://swemat01.sweblend.se/"&gt;[оригинал]&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="http://matrep.parastudios.de/index.php?action=view&amp;amp;material=291-glass&amp;amp;fc=3"&gt;Glass&lt;/a&gt;&lt;/p&gt;
&lt;p class="last"&gt;&lt;a class="reference external" href="http://matrep.parastudios.de/index.php?action=view&amp;amp;material=291-glass&amp;amp;fc=3"&gt;&lt;img alt="glass" src="http://matrep.parastudios.de/mats/preview/470366623da9d.jpg" title="glass"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;a class="reference external" href="http://matrep.parastudios.de/index.php?p=8&amp;amp;u=20"&gt;SoylentGreen&lt;/a&gt; [R]&lt;/td&gt;
&lt;td&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="http://matrep.parastudios.de/index.php?action=view&amp;amp;material=94-gold-voronoi&amp;amp;fc=2"&gt;Gold Voronoi&lt;/a&gt;&lt;/p&gt;
&lt;p class="last"&gt;&lt;a class="reference external" href="http://matrep.parastudios.de/index.php?action=view&amp;amp;material=94-gold-voronoi&amp;amp;fc=2"&gt;&lt;img alt="gold voronoi" src="http://matrep.parastudios.de/mats/preview/46438cd2c8d74.jpg" title="gold voronoi"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;br/&gt;&lt;/div&gt;
&lt;div class="line"&gt;Все материалы (кроме реализованных мной и изображения за окном) взяты
с &lt;a class="reference external" href="http://matrep.parastudios.de"&gt;http://matrep.parastudios.de&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;</summary><category term="blender"></category><category term="материал"></category><category term="использование"></category></entry><entry><title>UBlenderJS 0.0.5</title><link href="/posts/2011/03/13/ublenderjs-005/" rel="alternate"></link><updated>2011-03-13T15:11:18+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-03-13:posts/2011/03/13/ublenderjs-005/</id><summary type="html">&lt;p&gt;Выпустил новую версию JS-дополнения для форума
&lt;a class="reference external" href="http://blender3d.org.ua"&gt;BlenderУкраина&lt;/a&gt; по имени &lt;strong&gt;UBlenderJS
0.0.5&lt;/strong&gt;. Нашёл одну ошибку, что Firefox не изменял текст ссылки на
«показать форму» для страниц без формы, а это очень удобно, когда хочешь
обратится к кому-нибудь или прокомментировать. Добавил возможность
дополнения смайлами. Можно скачать &lt;a class="reference external" href="http://blender3d.org.ua/forum/bu/8-9999.html#556"&gt;новую
версию&lt;/a&gt; со страницы
форума.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/347366/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/6004/imdagger.9/0_54ce6_829864c1_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="userjs"></category><category term="форум"></category><category term="javascript"></category><category term="улучшение"></category><category term="blender"></category><category term="UBlenderJS"></category></entry><entry><title></title><link href="/posts/2011/03/11/urn:ya.ru:post/22199227/1273/" rel="alternate"></link><updated>2011-03-11T23:36:21+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-03-11:posts/2011/03/11/urn:ya.ru:post/22199227/1273/</id><summary type="html">&lt;p&gt;приходит весна, скоро компы начнут расцветать&lt;/p&gt;
</summary></entry><entry><title>Карты, деньги, два ствола</title><link href="/posts/2011/03/11/karty-dengi-dva-stvola/" rel="alternate"></link><updated>2011-03-11T23:34:09+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-03-11:posts/2011/03/11/karty-dengi-dva-stvola/</id><summary type="html">&lt;p&gt;Firefox, window.location.hash, favicon.ico. Эта комбинация имеет
один досадный баг, при установке hash исчезает иконка сайта в Firefox, а
в моём случае он ещё шёл в корень сайти и брал другой favicon. Но
хорошо, что я нашёл в интернете ответ на мой вопрос, я и не думал, что
это баг браузера. Вот
&lt;a class="reference external" href="http://kilianvalkhof.com/2010/javascript/the-case-of-the-disappearing-favicon/"&gt;решение&lt;/a&gt;
проблемы. Только оно сломало IE8 :) поэтому лучше использовать вот так:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-nb"&gt;window&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;location&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;hash&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nx"&gt;my_mega_link_hash&lt;/span&gt;&lt;span class="pgcss-p"&gt;;&lt;/span&gt;
&lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;agent&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nx"&gt;navigator&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;userAgent&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;toLowerCase&lt;/span&gt;&lt;span class="pgcss-p"&gt;();&lt;/span&gt;
&lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;agent&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;indexOf&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s2"&gt;&amp;quot;firefox&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;!=&lt;/span&gt; &lt;span class="pgcss-o"&gt;-&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-nx"&gt;setFavicon&lt;/span&gt;&lt;span class="pgcss-p"&gt;();&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Я добавил проверку агента, т.е. для FF после присваивания якоря
страницы вызываем setFavicon, а для других браузеров делаем как обычно:
ничего :).&lt;/p&gt;
</summary><category term="location"></category><category term="ошибка"></category><category term="favicon"></category><category term="window"></category><category term="firefox"></category><category term="hash"></category></entry><entry><title>Список, кому пользователь отправил app invite</title><link href="/posts/2011/03/09/spisok-komu-polzovatel-otpravil-app-invite/" rel="alternate"></link><updated>2011-03-09T18:54:48+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-03-09:posts/2011/03/09/spisok-komu-polzovatel-otpravil-app-invite/</id><summary type="html">&lt;p&gt;Пришлось сегодня мне опеределить, кому из своих друзей отправил
пользователь от нашего приложения инвайт. Facebook со своим новым
&lt;a class="reference external" href="http://developers.facebook.com/blog/post/464"&gt;Request 2.0&lt;/a&gt; передаёт
в JS переменную response в callback только список id-запросов, но не
самих пользователей. А в документации сказано, что по этому id можно уже
получить от кого кому и какой запрос был. Только этот apprequests долго
сопротивлялся и возвращал &lt;strong&gt;false&lt;/strong&gt; (как обычно Facebook такое
возвращает, когда какие-то проблемы с правами). Какой я только
access_token ни перебирал. Но в блоге разработчиков в PHP-примере чётко
видно, что нужно делать OAuth-запрос
&lt;a class="reference external" href="https://graph.facebook.com/oauth/access_token"&gt;https://graph.facebook.com/oauth/access_token&lt;/a&gt;
и получать в ответ специальный токен для последующего запроса к Graph API. Думаю стоит
почаще читать их блог, т.к. их документация не поспевает обновляться,
что создаёт мне трудности. Правда я сначала долго гуглил и тупил, но в
итоге и вышел на страницы блога.&lt;/p&gt;
&lt;p&gt;Спасибо иноземному товарищу, который на форуме искал решение такой
же проблемы прямо вчера :). На его
&lt;a class="reference external" href="http://forum.developers.facebook.net/viewtopic.php?id=92062"&gt;пост&lt;/a&gt; я
и вышел.&lt;/p&gt;
</summary><category term="facebook"></category><category term="javascript"></category><category term="диалог"></category><category term="инвайт"></category><category term="GraphAPI"></category><category term="туплю"></category><category term="request_ids"></category></entry><entry><title>С 8 Марта!</title><link href="/posts/2011/03/08/s-8-marta/" rel="alternate"></link><updated>2011-03-08T22:10:14+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-03-08:posts/2011/03/08/s-8-marta/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/345486"&gt;&lt;img alt="С 8 Марта!" src="http://img-fotki.yandex.ru/get/4703/imdagger.9/0_5458e_4dacde6f_L" title="С 8 Марта!"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;В этот раз скелет при моделировании использовал по проще. Чуть позже
выпишу все материалы, которые я использовал с Blender Materials.&lt;/p&gt;</summary><category term="поздравление"></category><category term="март"></category><category term="8"></category></entry><entry><title>Нюанс, который я умолчал</title><link href="/posts/2011/03/08/niuans-kotoryi-ia-umolchal/" rel="alternate"></link><updated>2011-03-08T14:20:41+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-03-08:posts/2011/03/08/niuans-kotoryi-ia-umolchal/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Не знаю почему, но у меня CEGUI на моей Geforce 4 MX440 жутко
тормозит.&amp;nbsp; На предыдущей картинке FPS упал до 8 кадров из-за включения
GUI. Возможно это чисто проблема моей карточки, либо я как-то не так
собрался или использую. Придётся ещё в этом разобраться.&lt;/p&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;/div&gt;
</summary><category term="странное поведение"></category><category term="CEGUI"></category><category term="производительность"></category></entry><entry><title>CEGUI и BGE Ketsji</title><link href="/posts/2011/03/08/cegui-i-bge-ketsji/" rel="alternate"></link><updated>2011-03-08T14:05:15+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-03-08:posts/2011/03/08/cegui-i-bge-ketsji/</id><summary type="html">&lt;p&gt;MyGUI 3.0.1 собирался легко и быстро, но почему-то напрочь отказался
работать в режиме OpenGL платформы без всяких глюков. При добавлении его
в Blender и простой инициализации уже валился сам Blender. Ещё я нашёл
там ошибки в обработке opendir под Linux под OpenGL платформу, в функции
проверки &lt;em&gt;NULL&lt;/em&gt; стоял только комментарий и не было &lt;strong&gt;return&lt;/strong&gt;, маска
_mask вообще не учитывалась и от этого DataManager никогда не находил
ресурсы и говорил not found :(. Поэтому я решил попробовать CEGUI 0.7.5,
благо я его лет 5 назад собирал, когда была версия 0.4. Как бонус идёт
то, что есть стандартные биндинги для Python.&lt;/p&gt;
&lt;p&gt;Собралась библиотека без особых проблем, даже на GCC 3.4.6 (пару
микроскопических правок исходников только пришлось сделать). И главное,
что скомпилились демки (в MyGUI они только под винду компилятся) и я
смог их глянуть. Оттуда я вырезал нужные мне участки кода, и разбросал в
Ketsji коде.&lt;/p&gt;
&lt;p&gt;Запускаю Blender нажимаю &lt;kbd class="kbd"&gt;
P&lt;/kbd&gt;
… бах упало, смотрю, а оно не смогло
инициализировать ресурсы, понимаю, что не всё перенёс. Добавляю
инициализацию ресурсов, запсукаю.. нажимаю &lt;kbd class="kbd"&gt;
P&lt;/kbd&gt;
.. и бах.. ничего не
появилось и не упало. Понимаю, что Ketsji Render сделал Swap Buffers.
Добавляю отрисовку кадра в нужное место, запускаю.. нажимаю &lt;kbd class="kbd"&gt;
P&lt;/kbd&gt;
..
барабанная дробь… ура! появилось чёрное GUI :D&lt;/p&gt;
&lt;p&gt;Почему было оно чёрное?… Ах, я забыл перед отрисовкой GUI сделать
&lt;code class="code"&gt;
glDisable(GL _LIGHTING)&lt;/code&gt;
. Он нужен самому движку, но для интерфейса
нужен режим без освещения, вот что получилось:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/345418/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/6003/imdagger.9/0_5454a_a0d6305_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="bge"></category><category term="CEGUI"></category><category term="интерфейс"></category><category term="улучшение"></category><category term="разработка"></category><category term="возможности"></category><category term="добавка"></category></entry><entry><title>20 часов спустя</title><link href="/posts/2011/03/08/20-chasov-spustia/" rel="alternate"></link><updated>2011-03-08T13:47:05+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-03-08:posts/2011/03/08/20-chasov-spustia/</id><summary type="html">&lt;p&gt;Таже lowpoly моделька, но уже 19 (почти 20) часов рендеринга на той
же машинке, шумы вроде ушли полностью, достиг чуть буольше &lt;strong&gt;17000S/p&lt;/strong&gt;.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/345415/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/5503/imdagger.9/0_54547_ded5f72b_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="luxrender"></category><category term="lowpoly"></category></entry><entry><title>Для сравнения после 50 минут</title><link href="/posts/2011/03/07/dlia-sravneniia-posle-50-minut/" rel="alternate"></link><updated>2011-03-07T21:58:31+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-03-07:posts/2011/03/07/dlia-sravneniia-posle-50-minut/</id><summary type="html">&lt;p&gt;После 50 минут рендеринга, хотя изменения не сильно большие, они
обычно видны хорошо в начале, а уже к финалу сложнее заметить отличия:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/345320/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/6003/imdagger.9/0_544e8_ba665055_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="luxrender"></category><category term="производительность"></category><category term="рендер"></category><category term="сервер"></category><category term="шум"></category><category term="сравнение"></category><category term="blender"></category><category term="волк"></category></entry><entry><title>Проба LuxRender 0.7.1 на сервере</title><link href="/posts/2011/03/07/proba-luxrender-071-na-servere/" rel="alternate"></link><updated>2011-03-07T21:29:55+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-03-07:posts/2011/03/07/proba-luxrender-071-na-servere/</id><summary type="html">&lt;p&gt;Моделька (lowpoly) не моя, она от &lt;a class="reference external" href="http://o-din13.ya.ru/"&gt;O'DIN13&lt;/a&gt;.
Я запустил рендеринг на сервере,
у которого 4 AMD ядра по 2.6Ghz (каждое показывает около 6500 Bogomips)
и 8GiB RAM на борту. Рендер показывает, что скорость &lt;strong&gt;117706&lt;/strong&gt;
samples/totsec, за 3 часа я уже достиг &lt;strong&gt;3000 samplex/pix&lt;/strong&gt;. Ещё видно
некоторое количество шумов, но во много раз превышает мощностью, которой
я располагал раньше (мне приходилось запускать десяток компов по сети).
А теперь можно удобно отрендерить, &lt;strong&gt;всё равно ядра простаивают&lt;/strong&gt; (если
кому нужно, вдруг у кого комп не позволяет, можно со мной договориться и
я поставлю рендериться на сервер, UPS у сервера большой он долго может
жить без энергии и рендерить, весит его UPS &lt;strong&gt;48кг&lt;/strong&gt;).&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/345313/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/5407/imdagger.9/0_544e1_525c1e22_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="luxrender"></category><category term="рендер"></category><category term="сервер"></category><category term="радость"></category><category term="blender"></category><category term="волк"></category></entry><entry><title>Mesa 7.11, Nouveau и DRI на nv05</title><link href="/posts/2011/03/05/mesa-711-nouveau-i-dri-na-nv05/" rel="alternate"></link><updated>2011-03-05T21:48:52+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-03-05:posts/2011/03/05/mesa-711-nouveau-i-dri-na-nv05/</id><summary type="html">&lt;p&gt;Я смог перевести драйвер с Software rasterizer на Gallium Nouveau
DRI, только вот почему-то OpenGL стал версии 1.2, а у меня было 1.5 и
FPS упал :( Т.е. на процессоре без видео карты (Riva TNT2) оно быстрее
успевает сделать все дела. Да ещё и глюки драйвера проявились (правда
может это связано с версия OGL 1.2):&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/344747/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/5704/imdagger.9/0_542ab_365eed77_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;А MyGUI захотел для своего OpenGL менеджера PBO, возможно придётся
переделать менеждера, чтобы настолько требовательно не было. А то сам
BGE и Blender не требуют PBO. А ещё OpenGL DataManager неправильно ищет
ресурсы из-за ошибки в Common.&lt;/p&gt;</summary><category term="ошибка"></category><category term="nouveau"></category><category term="драйвер"></category><category term="MyGUI"></category><category term="печаль"></category><category term="медленно"></category><category term="ускорение"></category><category term="DRI"></category></entry><entry><title>Первый билд Blender и MyGUI, небольшая победа</title><link href="/posts/2011/03/04/pervyi-bild-blender-i-mygui-nebolshaia-pobeda/" rel="alternate"></link><updated>2011-03-04T22:08:37+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-03-04:posts/2011/03/04/pervyi-bild-blender-i-mygui-nebolshaia-pobeda/</id><summary type="html">&lt;p&gt;Я смог добраться до компьютера, на котором произвёл удалённый билд
Blender 2.49b. Запустил его, включил игровой режим… и GUI не появился. Я
вспомнил, что я не положил файл test.layout. Я снова повторил попытку и
… ничего. Но самое главное, что оно не рухнуло и оно успешно
инициализировалось! Оно даже лог создаётся. В логах я нашёл указание на
ошибку, что оно не может найти test.layout. Я попробовал прописать путь
в ResourceManager, но это не помогло.. буду завтра разбираться. Сердце
поёт и радуется от мысли, что я увижу GUI в BGE :)&lt;/p&gt;
</summary><category term="первый"></category><category term="bge"></category><category term="MyGUI"></category><category term="сборка"></category><category term="билд"></category></entry><entry><title></title><link href="/posts/2011/03/02/urn:ya.ru:post/22199227/1262/" rel="alternate"></link><updated>2011-03-02T22:47:50+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-03-02:posts/2011/03/02/urn:ya.ru:post/22199227/1262/</id><summary type="html">&lt;p&gt;глаза разбегаются, жжёт&lt;/p&gt;
</summary></entry><entry><title>MyGUI OpenGLPlatform</title><link href="/posts/2011/03/02/mygui-openglplatform/" rel="alternate"></link><updated>2011-03-02T22:46:21+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-03-02:posts/2011/03/02/mygui-openglplatform/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Не знаю почему, но у меня libMyGUIStaticEngine и
libMyGUI.OpenGLPlatform разделены в две статические библиотеки. Причём
вторую пришлось скопировать вручную. Я добавил в Blender 2.49b загрузку
GUI, чуть позже взгляну сможет оно что-либо показать или просто упадёт
(скорее всего не упадёт, но и ничего не покажет, по закону подлости).
Пока систему ввода OIS не прикручивал, т.к. это может создать много
головной боли, нужно будет унаследоваться от классов ввода BGE. Во время
сборки ещё раз линковщик &lt;strong&gt;ld&lt;/strong&gt; мне напомнил, что ему важен порядок
указания статических библиотек. Я почему-то ступил и указал сначала
основную библиотеку, а затем для платформы OpenGL, результат — выпадала
ошибка линковки. Линковщик смотрел, что основная статическая библиотека
не особо нужна на данном этапе линковки и исключал ещё, затем переходил
к OpenGLPlatform и обнаруживал неразрешённые символы. Пришлось поменять
местами и всё прошло гладко.&lt;/p&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;/div&gt;
</summary><category term="ошибка"></category><category term="bge"></category><category term="линковщик"></category><category term="ld"></category><category term="сборка"></category><category term="MyGUI"></category><category term="blender"></category></entry><entry><title>OpenAL, Blender 2.49b и GCC 4.3.3 сборка</title><link href="/posts/2011/03/01/openal-blender-249b-i-gcc-433-sborka/" rel="alternate"></link><updated>2011-03-01T18:05:45+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-03-01:posts/2011/03/01/openal-blender-249b-i-gcc-433-sborka/</id><summary type="html">&lt;p&gt;При сборке Blender 2.49b уже обновлённым у меня компилятором GCC
4.3.3 выскочила ошибка SND_OpenALDevice.cpp:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;In file included from&lt;/div&gt;
&lt;div class="line"&gt;intern/SoundSystem/openal/SND_OpenALDevice.cpp:48:&lt;/div&gt;
&lt;div class="line"&gt;/usr/include/AL/alc.h:190: ошибка: ‘&amp;lt;anonymous&amp;gt;’ has incomplete type&lt;/div&gt;
&lt;div class="line"&gt;/usr/include/AL/alc.h:190: ошибка: invalid use of ‘ALCvoid’&lt;/div&gt;
&lt;div class="line"&gt;/usr/include/AL/alc.h:251: ошибка: ‘&amp;lt;anonymous&amp;gt;’ has incomplete type&lt;/div&gt;
&lt;div class="line"&gt;/usr/include/AL/alc.h:251: ошибка: invalid use of ‘ALCvoid’&lt;/div&gt;
&lt;div class="line"&gt;scons: ***
[/home/imdagger/new_blender/build/build/linux2/intern/SoundSystem/openal/SND_OpenALDevice.o]
Error 1&lt;/div&gt;
&lt;div class="line"&gt;scons: building terminated because of errors.&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Т.к. у меня всё же не самый свежайший компилятор и не самая новая
OpenAL, то сообщение об ошибке не очень внятно звучит для меня. Я
заглянул внутрь и увидел использование &lt;code class="code"&gt;
ALCvoid&lt;/code&gt;
, затем я отправился в
/usr/include и нашёл AL/alc.h, там был объявлен тип &lt;code class="code"&gt;
typedef void
ALCvoid;&lt;/code&gt;
 это обычный &lt;code class="code"&gt;
void&lt;/code&gt;
. Я уже подзабыл стандарт C++, и поэтому
ошибка мне казалась необычной, я даже подумал, что это проблема GCC (ибо
я уже встречался с таким). Но быстрое гугление дало
&lt;a class="reference external" href="http://gcc.gnu.org/bugzilla/show_bug.cgi?id=33101"&gt;результат&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Я уже успешно забыл, что для C++ объявление функции с указанием
&lt;code class="code"&gt;
void&lt;/code&gt;
 можно только делать так (нельзя заменить &lt;code class="code"&gt;
void&lt;/code&gt;
 на другой тип,
который получен через &lt;code class="code"&gt;
typedef&lt;/code&gt;
)&lt;/p&gt;
&lt;blockquote&gt;
тип имя_функции&lt;strong&gt;(void)&lt;/strong&gt;&lt;/blockquote&gt;
</summary><category term="blender"></category><category term="OpenAL"></category><category term="сборка"></category><category term="GCC"></category></entry><entry><title></title><link href="/posts/2011/02/27/urn:ya.ru:post/22199227/1246/" rel="alternate"></link><updated>2011-02-27T21:57:26+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-02-27:posts/2011/02/27/urn:ya.ru:post/22199227/1246/</id><summary type="html">&lt;p&gt;устал&lt;/p&gt;
</summary></entry><entry><title>MyGUI и Blender</title><link href="/posts/2011/02/27/mygui-i-blender/" rel="alternate"></link><updated>2011-02-27T21:56:54+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-02-27:posts/2011/02/27/mygui-i-blender/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Мне нужно добавить в Blender 2.49 в BGE функционал MyGUI, т.к. это
упростит разработку проекта, позволит делать удобные и легко
модифицируемые меню и интерфейс. MyGUI я собрал под Linux без примеров и
утилит. Попробую сделать свой небольшой пример, т.к. я собрал ещё и OIS,
а мне нужно, чтобы события могли приходить из Blender (если я смогу
добавить в него редактор интерфесов) и из BGE, либо посадить BGE на OSI
для всей системы ввода.&lt;/p&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;/div&gt;
</summary><category term="blender"></category><category term="bge"></category><category term="OIS"></category><category term="MyGUI"></category></entry><entry><title>После работы</title><link href="/posts/2011/02/23/posle-raboty/" rel="alternate"></link><updated>2011-02-23T22:07:08+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-02-23:posts/2011/02/23/posle-raboty/</id><summary type="html">&lt;p&gt;Вот такой пейзаж я наблюдаю каждый раз после работы, обычно где-то
около 00:30-01:00 на троллейбусной остановке:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/341369/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4403/imdagger.9/0_53579_7c72169c_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="пейзаж"></category><category term="Я"></category><category term="работа"></category><category term="фото"></category></entry><entry><title></title><link href="/posts/2011/02/15/urn:ya.ru:post/22199227/1243/" rel="alternate"></link><updated>2011-02-15T23:08:48+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-02-15:posts/2011/02/15/urn:ya.ru:post/22199227/1243/</id><summary type="html">&lt;p&gt;не хочу снова болеть&lt;/p&gt;
</summary></entry><entry><title>Canon i-SENSYS MF4018 и Ubuntu x64</title><link href="/posts/2011/02/15/canon-i-sensys-mf4018-i-ubuntu-x64/" rel="alternate"></link><updated>2013-03-01T01:05:14+03:00</updated><author><name>IMDagger</name></author><id>tag:,2011-02-15:posts/2011/02/15/canon-i-sensys-mf4018-i-ubuntu-x64/</id><summary type="html">&lt;p&gt;У меня всё гладко поставилось на сервер, без каких-либо пересборок и
сильных танцев с бубном. До этого про установку драйверов я читал в
блоге &lt;a class="reference external" href="http://blog.denisiuk.org/2010/01/canon-i-sensys-mf4018-install-linux.html"&gt;Дмитрия
Григорьевича&lt;/a&gt;.
Возникла только одна заминка с тем, что в архиве в директории для x64
архитектуры нет deb-пакета. Но в &lt;strong&gt;день всех влюблённых&lt;/strong&gt; мне
повстречалась утилита &lt;strong&gt;alien&lt;/strong&gt;, я не мог пройти мимо, это была любовь с
первого взгляда&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-gp"&gt;#&lt;/span&gt; alien -d cndrvcups-ufr2-uk-1.90-1.x86_64.rpm
&lt;span class="pgcss-go"&gt;…&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;#&lt;/span&gt; alien -d cndrvcups-common-1.90-1.x86_64.rpm
&lt;span class="pgcss-go"&gt;…&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;#&lt;/span&gt; dpkg -i cndrvcups-common-1.90-1.x86_64.deb
&lt;span class="pgcss-gp"&gt;#&lt;/span&gt; dpkg -i cndrvcups-ufr2-uk-1.90-1.x86_64.deb
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;И ура всё поставилось. Перезапуск сервиса печати, затем я пошёл в
раздел администрирования CUPS на 631 порт и добавил принтер с указанием
новоиспечённого драйвера.&lt;/p&gt;
</summary><category term="alien"></category><category term="deb"></category><category term="rpm"></category><category term="драйвер"></category><category term="x64"></category><category term="canon"></category><category term="cups"></category><category term="linux"></category></entry><entry><title>Подводный камень с Tweepy при работе в Python 2.4</title><link href="/posts/2011/02/11/podvodnyi-kamen-s-tweepy-pri-rabote-v-python-24/" rel="alternate"></link><updated>2011-02-11T23:48:02+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-02-11:posts/2011/02/11/podvodnyi-kamen-s-tweepy-pri-rabote-v-python-24/</id><summary type="html">&lt;p&gt;Объект класса TweepError не содержит свойства args, хотя должен, это
видно из примера с Exception:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-go"&gt;Python 2.4.6 (#1, May 13 2009, 12:55:36)&lt;/span&gt;
&lt;span class="pgcss-go"&gt;[GCC 4.2.4 (Ubuntu 4.2.4-1ubuntu3)] on linux2&lt;/span&gt;
&lt;span class="pgcss-go"&gt;Type &amp;quot;help&amp;quot;”, &amp;quot;copyright&amp;quot;, &amp;quot;credits&amp;quot; or &amp;quot;license&amp;quot; for more information.&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-nn"&gt;tweepy&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-n"&gt;tweepy&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;error&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;TweepError&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;test&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;test&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-go"&gt;&amp;lt;util.tweepy.error.TweepError instance at 0x7f2bf9c0dd88&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-n"&gt;tweepy&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;error&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;TweepError&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;test&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;test&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;args&lt;/span&gt;
&lt;span class="pgcss-gt"&gt;Traceback (most recent call last):&lt;/span&gt;
  File &lt;span class="pgcss-nb"&gt;&amp;quot;&amp;lt;stdin&amp;gt;&amp;quot;&lt;/span&gt;, line &lt;span class="pgcss-m"&gt;1&lt;/span&gt;, in &lt;span class="pgcss-n"&gt;?&lt;/span&gt;
&lt;span class="pgcss-gr"&gt;AttributeError&lt;/span&gt;: &lt;span class="pgcss-n"&gt;TweepError instance has no attribute &amp;#39;args&amp;#39;&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-ne"&gt;Exception&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;test&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;test&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;args&lt;/span&gt;
&lt;span class="pgcss-go"&gt;(&amp;#39;test&amp;#39;, &amp;#39;test&amp;#39;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Открываем код модуля и видим __init__ класса:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;span class="pgcss-k"&gt;class&lt;/span&gt; &lt;span class="pgcss-nc"&gt;TweepError&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-ne"&gt;Exception&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
    &lt;span class="pgcss-sd"&gt;&amp;quot;&amp;quot;&amp;quot;Tweepy exception&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;__init__&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;reason&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;response&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-bp"&gt;None&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
        &lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;reason&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nb"&gt;str&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;reason&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
        &lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;response&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;response&lt;/span&gt;
&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;И не вижу никакого вызова конструктора родительского класса.
Достаточно добавить для 2.4 в __init__ вызов
Exception.__init__(self, reason, response) и свойство args у объекта
появится. Для 2.4 не проходит &lt;strong&gt;super&lt;/strong&gt; с Exception, т.к. он не из новых
классов ещё, а в 2.5 уже на ура :).&lt;/p&gt;
</summary><category term="python"></category><category term="tweepy"></category><category term="twitter"></category><category term="ошибка"></category></entry><entry><title>23!</title><link href="/posts/2011/02/08/23/" rel="alternate"></link><updated>2011-02-08T23:48:57+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-02-08:posts/2011/02/08/23/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Забыл себя поздравить с &lt;strong&gt;25852016738884976640000&lt;/strong&gt;-ёхлетием :) По
традиции поздравляю себя, пусть заливки бранчей на продакшн будут без
фэйлов, пусть всегда буду успевать делать код в срок, пусть всегда будут
силы и здоровье для работы, ибо это только начало пути и всё ещё
впереди!&lt;/p&gt;
</summary><category term="поздравление"></category><category term="23"></category><category term="день рождения"></category></entry><entry><title>Duplicate status и Twitter</title><link href="/posts/2011/02/07/duplicate-status-i-twitter/" rel="alternate"></link><updated>2011-02-07T21:47:46+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-02-07:posts/2011/02/07/duplicate-status-i-twitter/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Подправил сегодня функцию, которая делает пост на Twitter. Сначала
она пытается сделать пост, если это не удалось то произвести коннект.
Только вот Twitter вернул мне “Status is a duplicate.”. И поехали: проба
запостить, ошибка, JS-код думает, что это из-за коннекта, пробудет
произвести авторизацию и снова запостить, опять не выходит, снова
пробудет и поехали по кругу. Забавно было наблюдать, как приложение
атакует Twitter и тот в конце-концов сдаётся. Т.к. “Status is a
duplicate.” имеет timeout, после которого статус в Twitter меняется.&lt;/p&gt;
</summary><category term="ошибка"></category><category term="twitter"></category><category term="забавно"></category><category term="программирование"></category></entry><entry><title></title><link href="/posts/2011/02/06/urn:ya.ru:post/22199227/1238/" rel="alternate"></link><updated>2011-02-06T20:26:41+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-02-06:posts/2011/02/06/urn:ya.ru:post/22199227/1238/</id><summary type="html">&lt;p&gt;полегчало&lt;/p&gt;
</summary></entry><entry><title>Octave 3.2.3 и 3.2.4</title><link href="/posts/2011/02/06/octave-323-i-324/" rel="alternate"></link><updated>2011-02-06T20:24:20+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-02-06:posts/2011/02/06/octave-323-i-324/</id><summary type="html">&lt;p&gt;Свезло же мне скачать версию пакета 3.2.3, в котором GPLab
запустился, но выпала ошибка. Я пошёл посмотреть строку и нашёл, что оно
не нормально проходит конструкцию &lt;code class="code"&gt;
error(nargchk(2, 2, nargin))&lt;/code&gt;
.
Хорошо, в одной
&lt;a class="reference external" href="http://octave.1599824.n4.nabble.com/nargchk-always-fails-td1673882.html"&gt;рассылке&lt;/a&gt;
нашёл похожую проблему. Правда я сначала сам руками проверил, что
происходит и заметил, что &lt;code class="code"&gt;
nargchk&lt;/code&gt;
 возвращает что-то не то. А
&lt;code class="code"&gt;
error&lt;/code&gt;
 работает как надо. Обновление до 3.2.4 помогло решить проблему
и GPLab в этой точне не упал уже :).&lt;/p&gt;
</summary><category term="octave"></category><category term="gplab"></category></entry><entry><title></title><link href="/posts/2011/02/04/urn:ya.ru:post/22199227/1236/" rel="alternate"></link><updated>2011-02-04T00:13:14+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-02-04:posts/2011/02/04/urn:ya.ru:post/22199227/1236/</id><summary type="html">&lt;p&gt;иду на поправку, я бацила :)&lt;/p&gt;
</summary></entry><entry><title>Unix PID-файл</title><link href="/posts/2011/02/04/unix-pid-fail/" rel="alternate"></link><updated>2011-02-04T00:12:45+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-02-04:posts/2011/02/04/unix-pid-fail/</id><summary type="html">&lt;p&gt;Дополнительная библиотека, которая легко ставится (даже через старый
добрый easy_install) lockfile позволяет делать блокировки на файлы и
запросто проверять блокировку с учётом таймаута.&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;[&lt;a class="reference external" href="mailto:imdagger&amp;#64;killer"&gt;imdagger&amp;#64;killer&lt;/a&gt; ~]$ sudo easy_install &lt;strong&gt;lockfile&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;хохохо! тут скачивается яйцо&lt;/div&gt;
&lt;div class="line"&gt;…&lt;/div&gt;
&lt;div class="line"&gt;запускаем python&lt;/div&gt;
&lt;/div&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-nn"&gt;lockfile&lt;/span&gt;
&lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;lockfile&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;pidlockfile&lt;/span&gt;
&lt;span class="pgcss-n"&gt;f&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;pidlockfile&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;PIDLockFile&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;/var/run/mydaemon.pid&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-k"&gt;try&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;f&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;acquire&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-c"&gt;# timeout в 1 секунду, попытка залочить файл&lt;/span&gt;
&lt;span class="pgcss-k"&gt;except&lt;/span&gt; &lt;span class="pgcss-n"&gt;lockfile&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;LockTimeout&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;print&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;Already running pid=&lt;/span&gt;&lt;span class="pgcss-si"&gt;%s&lt;/span&gt;&lt;span class="pgcss-s"&gt;...&amp;#39;&lt;/span&gt; &lt;span class="pgcss-o"&gt;%&lt;/span&gt; &lt;span class="pgcss-n"&gt;f&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;read_pid&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt; &lt;span class="pgcss-c"&gt;# уже есть рабочая копия демона&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;В пакете присутствуют ещё удобные моудли для директорий, симлинков и
т.д. Вкусная и простая библиотека, к тому же кроссплатформенная. И не
тянет за собой ничего лишнего, чистый Python, стандартные библиотеки.
Класс &lt;code class="code"&gt;
PIDLockFile&lt;/code&gt;
 создаёт pid файл в соответствии с требованиями
спецификации &lt;em&gt;HFS 2.3&lt;/em&gt;.&lt;/p&gt;
</summary><category term="file"></category><category term="lock"></category><category term="pid"></category><category term="блокировка"></category><category term="файл"></category><category term="python"></category></entry><entry><title>Сборка Octave</title><link href="/posts/2011/02/02/sborka-octave/" rel="alternate"></link><updated>2011-02-02T20:17:20+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-02-02:posts/2011/02/02/sborka-octave/</id><summary type="html">&lt;p&gt;При сборке из исходников возникли небольшие проблемы, GCC я
установил новый, был у меня 3.4.6 и я им доволен, но поставил и 4.3.3,
чтобы не мучаться на всякий случай. Ещё Octave потребовал Fortran 77, ну
а раз я ставил G77 версии 4.3.3, то и GCC тоже поставил такой. А потом
выпала вот такая ошибка от GNU As:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
/tmp/cccPYg3d.s: Assembler messages:
/tmp/cccPYg3d.s:312: Error: unknown pseudo-op: `.weakref'
&lt;/pre&gt;
&lt;p&gt;Виновник сразу же себя выдал, конечно же это &lt;strong&gt;as&lt;/strong&gt; из &lt;strong&gt;binutils&lt;/strong&gt;. И
т.к. он не понимает .weakref, то я сразу побежал смотреть какой у меня
версии:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ as --version
GNU assembler 2.15.92.0.2 20040927
Copyright 2002 Free Software Foundation, Inc.
This program is free software; you may redistribute it under the terms of
the GNU General Public License.  This program has absolutely no warranty.
This assembler was configured for a target of `i486-slackware-linux'.
&lt;/pre&gt;
&lt;p&gt;Мда.. староват, пора и его обновить. Обновление до
2.18.50.0.9.20080822 помогло решить проблему :).&lt;/p&gt;
</summary><category term="octave"></category><category term="сборка"></category><category term="GCC"></category><category term="as"></category><category term="компиляция"></category></entry><entry><title>Хлебники (Crazy draniks)</title><link href="/posts/2011/01/31/khlebniki-crazy-draniks/" rel="alternate"></link><updated>2011-01-31T23:46:59+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-01-31:posts/2011/01/31/khlebniki-crazy-draniks/</id><summary type="html">&lt;p&gt;От нечего делать я ночью взял остаточный продукт, скорее даже
исходный материал, от производства кваса из сухого состояния, т.е.
хлебная закваска. Она уже была сырой, я взял хромированную миску и
перегрузил туда около 1кг, точно не мерял. Добавил полторы чайной ложки
соли, две столовые ложки подсолнечного масла, два яйца, каплю перца,
перетёр одну луковицу на мелкой тёрке. Всё тщательно перемешал с
небольшой миской толчоной картошки (осталась большая кастрюля её, а если
вяло) и начал добавлять муку, доводя до густоты. Но так, чтобы
получилось подобие густой медленно текущей жидкости. Залил сковородку
маслом, выложил на ней лепешки по полторы ложечки и обжаривал как
обычные драники. Вышло забавно и вкусно.&lt;/p&gt;
</summary><category term="эксперимент"></category><category term="драники"></category><category term="приготовление"></category><category term="еда"></category><category term="кухня"></category></entry><entry><title>Zotonic</title><link href="/posts/2011/01/30/zotonic/" rel="alternate"></link><updated>2011-01-30T21:58:59+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-01-30:posts/2011/01/30/zotonic/</id><summary type="html">&lt;p&gt;Присматриваюсь к этой CMS на Erlang, прикольная штука.&lt;/p&gt;
</summary><category term="erlang"></category><category term="cms"></category><category term="web"></category></entry><entry><title>Персонаж эльфа</title><link href="/posts/2011/01/30/personazh-elfa/" rel="alternate"></link><updated>2011-01-30T21:57:58+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-01-30:posts/2011/01/30/personazh-elfa/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Забыл сказать, что я завёл общую ветку для нашей группы
разработчиков для
&lt;a class="reference external" href="https://code.launchpad.net/~sim-game-group/+junk/main"&gt;проекта&lt;/a&gt;. И
O.din13 закоммитил своего
&lt;a class="reference external" href="http://bazaar.launchpad.net/~sim-game-group/+junk/main/revision/209"&gt;эльфа&lt;/a&gt;
в репозиторий, теперь он тоже может участвовать в проекте, раз все тёрки
с Bazaar под его Window$ решены :).&lt;/p&gt;
</summary><category term="blender"></category><category term="эльф"></category><category term="last_gateway_to_hell"></category></entry><entry><title></title><link href="/posts/2011/01/29/urn:ya.ru:post/22199227/1230/" rel="alternate"></link><updated>2011-01-29T23:44:36+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-01-29:posts/2011/01/29/urn:ya.ru:post/22199227/1230/</id><summary type="html">&lt;p&gt;сильный сухой кашель :( аж до тошноты и щекотки в горле&lt;/p&gt;
</summary></entry><entry><title>Установка на компьютеры Ubuntu из внутрисетевого "зеркала"</title><link href="/posts/2011/01/29/ustanovka-na-kompiutery-ubuntu-iz-vnutrisetevogo-zerkala/" rel="alternate"></link><updated>2011-01-29T23:43:49+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-01-29:posts/2011/01/29/ustanovka-na-kompiutery-ubuntu-iz-vnutrisetevogo-zerkala/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Потребность в установке на 11 компьютеров, который не все имеют
одинаковую конфигурацию создала делему: либо установить на один
компьютер, а дальше drbl+clonezilla, либо просто установить на все по
отдельности. Благо компьютеров не так уж и много, как у меня в другом
месте, поэтому в этот раз я выбрал вариант ручной установки на каждый
компьютер. Тем более, что это дистрибутив Ubuntu 10.04.1, ставится легко
и быстро.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Сначала я хотел заюзать apt-mirror, но понял, что с моим каналом и
ограниченным временем (к которуму всё нужно завершить), не управиться.
Тем более зачем мне тянуть всё подряд, когда мне только amd64 нужно и то
часть была на alternative iso образе.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Поэтому погуглив я наткнулся на
&lt;a class="reference external" href="http://www.vabakane.ru/blog/9-ubuntu/4-ubuntu-apt-cacher-ng"&gt;руководство&lt;/a&gt;
доброго человека, где расказываеться про проксирующий сервис для пакетов
(еее!! то что мне и нужно, т.к. у меня всего пару тяжёлых пакетов и
почти голая ОСь). Мне не пришлось ничего делать с iptables, я просто
установил на Debian-сервере apt-cacher-ng через apt-get install.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; С клиентскими компьютерами тоже всё прошло гладко, только мне ещё
потребовалось сделать &amp;quot;&lt;strong&gt;apt-get update&lt;/strong&gt;&amp;quot; на них. Чтобы добавились
дополнительные репозитории. Т.к. я ставился по PXE и репозиторию
указывал как &lt;em&gt;myserver.mydomain.com&lt;/em&gt;. Я добавил
&lt;a class="reference external" href="ftp://ftp.byfly.by"&gt;ftp.byfly.by&lt;/a&gt;&lt;strong&gt;&amp;nbsp;&lt;/strong&gt; и
&lt;a class="reference external" href="http://mirror.yandex.ru"&gt;mirror.yandex.ru&lt;/a&gt; репозитории в
/etc/apt/sources.list по образцу.&lt;/p&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;/div&gt;
</summary><category term="зеркало"></category><category term="pxe"></category><category term="apt-cacher-ng"></category><category term="установка"></category><category term="ubuntu"></category><category term="mirror"></category><category term="linux"></category><category term="кеширование"></category></entry><entry><title></title><link href="/posts/2011/01/28/urn:ya.ru:post/22199227/1228/" rel="alternate"></link><updated>2011-01-28T23:17:40+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-01-28:posts/2011/01/28/urn:ya.ru:post/22199227/1228/</id><summary type="html">&lt;p&gt;бронхит :(&lt;/p&gt;
</summary></entry><entry><title>Копирование файла с ограничением по скорости</title><link href="/posts/2011/01/25/kopirovanie-faila-s-ogranicheniem-po-skorosti/" rel="alternate"></link><updated>2011-01-25T20:39:40+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-01-25:posts/2011/01/25/kopirovanie-faila-s-ogranicheniem-po-skorosti/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Мне нужно было перекопировать файл в 600MB с одного компьютера на
другой, но между ними сеть Интернет и мне ещё нужно граничить скорость
скачивания файла на 100KBps. Я примонтировал по sshfs удалённую файловую
систему с указанием компрессии, т.к.&amp;nbsp; исходящий канал второго компа тоже
не очень широкий. А затем запустил rsync, т.к. он умеет показывать
оставшееся время и текущую скороcть:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;sshfs -C удалённый_комп:/home/директория директория&lt;/div&gt;
&lt;div class="line"&gt;rsync –bwlimit=100 –stats –progress /home/директория/файл файл&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Опция –bwlimit указывает ограничение скорости в 100KBps.&lt;/div&gt;
&lt;/div&gt;
</summary><category term="rsync"></category><category term="linux"></category><category term="копирование"></category></entry><entry><title>Подводный камень с % для строк</title><link href="/posts/2011/01/22/podvodnyi-kamen-s-dlia-strok/" rel="alternate"></link><updated>2011-01-22T00:00:02+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-01-22:posts/2011/01/22/podvodnyi-kamen-s-dlia-strok/</id><summary type="html">&lt;p&gt;Несколько раз уже встречался с этим pitfall, вот в этот раз снова,
поэтому стоит отметить себе в назидание:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;example_text = …&lt;/div&gt;
&lt;div class="line"&gt;info = 'There is %s example text' % example_text&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Всё красиво и хорошо, пока example_text это просто строка, число,
объект, но как только приходит на ум: «а не сделать ли его кортежем
строка, например, пару строчек», тут же выпаадет исключение, что
невыходит распаковать кортеж и подставить все значения в строку. Поэтому
конечно же, когда даже один параметр, то стоит прописывать кортеж явно:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;example_text = …&lt;/div&gt;
&lt;div class="line"&gt;info = 'There is %s example text' % &lt;strong&gt;(example_text, )&lt;/strong&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Теперь объекты всех типов пройдут.&lt;/p&gt;
</summary><category term="python"></category><category term="камень"></category><category term="подводный"></category><category term="программирование"></category><category term="строка"></category></entry><entry><title></title><link href="/posts/2011/01/20/urn:ya.ru:post/22199227/1224/" rel="alternate"></link><updated>2011-01-20T00:20:02+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-01-20:posts/2011/01/20/urn:ya.ru:post/22199227/1224/</id><summary type="html">&lt;p&gt;red eyes&lt;/p&gt;
</summary></entry><entry><title>Заливка кода</title><link href="/posts/2011/01/20/zalivka-koda/" rel="alternate"></link><updated>2011-01-20T00:19:28+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-01-20:posts/2011/01/20/zalivka-koda/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Первый раз в жизни сегодня учавствовал в заливке нового проекта на
Slide, до этого я только учавствовал в итеративном процессе дозаливки, а
тут 10 часов чистки кода и вливания, и мы завелись. Попутно чуть-чуть
сломав другое приложение, пришлось сделать временный фикс, т.к. спать
уже хочется очень сильно. Моей ветке пришлось сделать unmerge, т.к.
нельзя заливать код, где объявился фантомный баг, после объединения.&lt;/p&gt;
</summary><category term="python"></category><category term="slide"></category><category term="работа"></category><category term="google"></category></entry><entry><title>OpenVPN сервер</title><link href="/posts/2011/01/16/openvpn-server/" rel="alternate"></link><updated>2011-01-16T20:32:16+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-01-16:posts/2011/01/16/openvpn-server/</id><summary type="html">&lt;p&gt;Установил, чтобы связать одну сеть с другой, где я нынче очень часто
просиживаю. Настройка сервера прошла гладко, тем более, что скрипты для
генерации сертификатов поставляются в комплекте с исходниками.
Единственное, что пришлось не забыть про
&lt;strong&gt;/proc/sys/net/ipv4/ip_forward&lt;/strong&gt;, там должна быть &lt;strong&gt;1&lt;/strong&gt;. И включить
правило для проброса пакетов с интерфейса &lt;em&gt;tun0&lt;/em&gt; на &lt;em&gt;eth1&lt;/em&gt; (у меня это
локальная сеть):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-c"&gt;# например можно используя NAT&lt;/span&gt;
iptables -t nat -A POSTROUTING -s 10.8.0.0/24 -j SNAT --to 10.0.0.4
&lt;span class="pgcss-c"&gt;# где 10.0.0.4 это компьютер с OpenVPN в локальной сети&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</summary><category term="сеть"></category><category term="сервер"></category><category term="openvpn"></category><category term="форвардинг"></category></entry><entry><title></title><link href="/posts/2011/01/14/urn:ya.ru:post/22199227/1221/" rel="alternate"></link><updated>2011-01-14T00:05:16+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-01-14:posts/2011/01/14/urn:ya.ru:post/22199227/1221/</id><summary type="html">&lt;p&gt;nouveau process dri2, swrast_dri.so fighting&lt;/p&gt;
</summary></entry><entry><title>Правка моего кода</title><link href="/posts/2011/01/13/pravka-moego-koda/" rel="alternate"></link><updated>2011-01-13T23:29:14+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-01-13:posts/2011/01/13/pravka-moego-koda/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Всегда приветствую, когда тот код, который я написал кто-нибудь
другой будет ковырять и править его. Я спокойно реагирую, если в нём
находят ошибки или считают, что нужно переработать некоторые мои классы
и абстракции. Потому, что если мой код ковыряют и понимают, то это
хорошо, значит я всё таки пишу понятно, значит не возникло желание
просто выбросить его и не разбираться в нём, значит он всё же читабелен.
Меня это радует.&lt;/p&gt;
</summary><category term="код"></category><category term="Я"></category><category term="программирование"></category><category term="мысли"></category></entry><entry><title>Вернул шрифты</title><link href="/posts/2011/01/12/vernul-shrifty/" rel="alternate"></link><updated>2011-01-12T22:07:27+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-01-12:posts/2011/01/12/vernul-shrifty/</id><summary type="html">&lt;p&gt;После обновления Xorg до 1.10.0 пропали все шрифты. Я их порпобовал
переместить в директорию /usr/fonts/X11/ и обновить fc-cache, но стало
ещё хуже и xfontsel утверждал, что «Unable to load any usable ISO8859
font». Но к счастью всё решилось просто, я раскомметировал строки,
которые убрал временно при обновлении с 1.5 до 1.6.3 Xorg, вот такого
вида &lt;code class="code"&gt;
FontPath &amp;quot;/usr/share/fonts/misc&amp;quot;&lt;/code&gt;
 .. &lt;code class="code"&gt;
FontPath &amp;quot;/usr/share/fonts/TTF&amp;quot;&lt;/code&gt;

и т.д. И всё поднялось после растарта X-ов. Осталось теперь решить
последнюю проблему и станет лучше, чем было: включить DRI для Riva TNT2,
драйвер nouvea заработал (у него есть небольшой сдвиг при выводе, а так
всё пока хорошо).&lt;/p&gt;
</summary><category term="обновление"></category><category term="Xorg"></category><category term="шрифты"></category></entry><entry><title>Обновил Xorg до 1.9.99.901</title><link href="/posts/2011/01/11/obnovil-xorg-do-1999901/" rel="alternate"></link><updated>2011-01-11T00:19:10+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-01-11:posts/2011/01/11/obnovil-xorg-do-1999901/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Я его обновил прямо из master ветки, это релиз кандидат Xorg 1.10.0.
К нему собрал nouveau драйвер, ядро тоже собрал с поддержкой Nouveau
DRM. Правда запустил я всё это удалённо, и пока на монитор взглянгуть не
могу. X-ы стартанули нормально, это видно по логам. Хотя без массы
приключений не обошлось. Почему-то пришлось прилинковать к libdrm
библиотеку libkms, почему-то не загружался драйвер без libkms. И вообще
я сначала забыл собрать nouveau_drv, а пытался загрузить
modesetting_drv :). Потом проблемы с udev, пришлось обновлять его, т.к.
у меня был 1.44, а там не хватает функции для nouveau_drv.&lt;/p&gt;
</summary><category term="Xorg"></category><category term="nouveau"></category></entry><entry><title></title><link href="/posts/2011/01/08/urn:ya.ru:post/22199227/1217/" rel="alternate"></link><updated>2011-01-08T22:13:22+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-01-08:posts/2011/01/08/urn:ya.ru:post/22199227/1217/</id><summary type="html">&lt;p&gt;nouveau process&lt;/p&gt;
</summary></entry><entry><title>Ядро 2.6.37 и GCC 3</title><link href="/posts/2011/01/08/iadro-2637-i-gcc-3/" rel="alternate"></link><updated>2011-01-08T22:12:27+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-01-08:posts/2011/01/08/iadro-2637-i-gcc-3/</id><summary type="html">&lt;p&gt;Сначала при сборке 2.6.37-rc3 ядра выпало типа такого (у меня не
очень новый binutils):&lt;/p&gt;
&lt;pre class="literal-block"&gt;
AS      arch/x86/kernel/entry_32.o
arch/x86/kernel/entry_32.S: Assembler messages:
arch/x86/kernel/entry_32.S:398: Error: too many positional arguments
make[2]: *** [arch/x86/kernel/entry_32.o] Error 1
make[1]: *** [arch/x86/kernel] Error 2
make: *** [arch/x86] Error 2
&lt;/pre&gt;
&lt;p&gt;Я собираю ядро с Nouveau модулем, брал ядро из их репозитория,
поэтому версия такая. Хорошо, что нашёл
&lt;a class="reference external" href="https://patchwork.kernel.org/patch/303952/"&gt;фикс&lt;/a&gt; для этой проблемы.
Патч очень маленький, я даже просто руками его применил без создания
.diff файла.&lt;/p&gt;
&lt;p&gt;Затем меня ждала проблема с GCC, т.к. он у меня 3-ей версии (я пока
не хочу обновлять его до 4). У меня версия 3.4.6. В ней есть какой-то
косят, что для некоторых модулей ядра при сборке создаётся лишняя метка
вида .Lxxx и её не удаётся разрезолвить. На форуме я нашёл, что это
проблема оптимизатора, поэтому я просто пересобрал модули ядра, на
которые ругалось с опцией -O1. Я запускал make O=директория_сборки V=1
и смотрел, как оно собирает проблемный файл, затем оно падало с ошибкой,
я выполнял команду сборки но с опцией -O1:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
gcc -Wp,-MD,drivers/tty/vt/.vt.o.d  -nostdinc -isystem /usr/lib/gcc/i486-slackware-linux/3.4.6/include -I/home/imdagger/linux-nouveau/linux-2.6/arch/x86/include -Iinclude  -I/home/imdagger/linux-nouveau/linux-2.6/include -include include/generated/autoconf.h  -I/home/imdagger/linux-nouveau/linux-2.6/drivers/tty/vt -Idrivers/tty/vt -D__KERNEL__ -Wall -Wundef -Wstrict-prototypes -Wno-trigraphs -fno-strict-aliasing -fno-common -Werror-implicit-function-declaration -Wno-format-security -fno-delete-null-pointer-checks -O1 -m32 -msoft-float -mregparm=3 -freg-struct-return -mpreferred-stack-boundary=2 -fno-unit-at-a-time -march=i686 -mtune=pentium4 -mtune=i686 -ffreestanding -DCONFIG_AS_CFI=1 -pipe -Wno-sign-compare -fno-asynchronous-unwind-tables -mno-sse -mno-mmx -mno-sse2 -mno-3dnow -fno-omit-frame-pointer -fno-optimize-sibling-calls -Wdeclaration-after-statement    -D&amp;quot;KBUILD_STR(s)=#s&amp;quot; -D&amp;quot;KBUILD_BASENAME=KBUILD_STR(vt)&amp;quot;  -D&amp;quot;KBUILD_MODNAME=KBUILD_STR(vt)&amp;quot; -c -o drivers/tty/vt/vt.o /home/imdagger/linux-nouveau/linux-2.6/drivers/tty/vt/vt.c
&lt;/pre&gt;
&lt;p&gt;Если ошибка выпадала в конце, как в случае с vt.c:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
drivers/built-in.o(.init.text+0x3bad): In function `con_init':
…где-нибудь… undefined reference to `.L1452'
&lt;/pre&gt;
&lt;p&gt;То я удалял соответствующий файл в директории build и собирал его
вручную, затем снова запускал make. Он обнаруживал .o файл и не пытался
его собрать с неверными флагами. Ядро собралось и работает, появился
модуль nouveau.&lt;/p&gt;
</summary><category term="2.6.37"></category><category term="GCC"></category><category term="nouveau"></category><category term="сборка"></category><category term="3"></category><category term="linux"></category><category term="проблема"></category></entry><entry><title>Twitter oauth_token</title><link href="/posts/2011/01/06/twitter-oauth_token/" rel="alternate"></link><updated>2011-01-06T00:06:37+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-01-06:posts/2011/01/06/twitter-oauth_token/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Что-то я упустил из виду тот момент, куда бы сохранить
request_token для tweepy, чтобы обменять его на постоянный. Сначала мне
пришла идея сохранить его зашифрованным в Cookie (т.к. сессия ещё не
создана). Но потом мне больше понравилась мысль сохранить это всё дело в
кеш, ключом будет является &lt;em&gt;request_token.key&lt;/em&gt;. Т.к. когда пользователь
подтвержает request_token, то key передаётся снова уже под видом
oauth_token. Поэтому можно извлечь всю пару из кеша (в котором данные
хранятся по времени и имеют свойство исчезать, чтобы оно там вечно не
лежало).&lt;/p&gt;
</summary><category term="python"></category><category term="кеш"></category><category term="ключ"></category><category term="tweepy"></category></entry><entry><title>Визуализатор вселенной</title><link href="/posts/2011/01/02/vizualizator-vselennoi/" rel="alternate"></link><updated>2011-01-02T21:33:21+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-01-02:posts/2011/01/02/vizualizator-vselennoi/</id><summary type="html">&lt;p&gt;Сделал рекурсивную визуализацию того, что делает генератор.
Вселенная большая, поэтому планеты трудно рассмотреть. Небольшие
фиолетовые скопления это целые планетарные системы. Есть ещё недоработки
в генераторе, но чуть позже исправлю.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/319239/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/5802/imdagger.9/0_4df07_915373a6_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="python"></category><category term="визуализация"></category><category term="генератор"></category><category term="планета"></category></entry><entry><title>Вселенная Bell AMP-PI</title><link href="/posts/2011/01/01/vselennaia-bell-amp-pi/" rel="alternate"></link><updated>2011-01-01T21:12:40+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-01-01:posts/2011/01/01/vselennaia-bell-amp-pi/</id><summary type="html">&lt;p&gt;Набросал небольшой генератор вселенной, нужно подчистить его код и
выложу сюда. В него осталось добавить выбор орбиты для подсистемы.
Генератор пока умеет создавать только вселенные, где орбиты круговые. В
данном генераторе я использовал ранее описанный генератор названий
планет и добавил запрет на повторение названий. Вот лишь небольшой
кусочек вселенной (т.к. целиком текст с описанием всех планет и
подсистем весит 126Кб):&lt;/p&gt;
&lt;pre class="literal-block"&gt;
 System &amp;quot;Bell AMP-PI&amp;quot; (own angle: 16.3660517193, orbit angle: 1.35566592858)
 Kernel
. System &amp;quot;Jacm L3CLA&amp;quot; (own angle: 52.4699971472, orbit angle: 11.1852662647)
  Kernel
.. System &amp;quot;Crematol V&amp;quot; (own angle: 42.9356828613, orbit angle: 8.56155368931)
   Kernel
... System &amp;quot;Kevlit&amp;quot; (own angle: 1.78621553426, orbit angle: 2.78555639001)
    Kernel
.... System &amp;quot;Cuo IX&amp;quot; (own angle: 22.4737305671, orbit angle: 13.2149029823)
     Kernel
..... System &amp;quot;Cul OmegaHI&amp;quot; (own angle: 36.2602458326, orbit angle: 10.8243369757)
      Kernel
...... Planet  &amp;quot;Mliae&amp;quot; mass: 1927.545984, radius: 24.3900492429, own angle: 28.3825946285, orbit angle: 3.54812948961
      Other
...... System &amp;quot;Veno&amp;quot; (own angle: 36.8008379182, orbit angle: 7.42926566603)
       Kernel
....... Planet  &amp;quot;Caes&amp;quot; mass: 297.683510191, radius: 20.3040866122, own angle: 46.2487757716, orbit angle: 10.5372898181
       Other
....... Planet  &amp;quot;Luisl&amp;quot; mass: 4.47974197292, radius: 16.1556491809, own angle: 2.14866049643, orbit angle: 0.518113077734
....... Planet  &amp;quot;Plaso I-PI&amp;quot; mass: 3.59825174505, radius: 13.5296422189, own angle: 12.9894142906, orbit angle: 12.3335314842
....... Planet  &amp;quot;Ooak&amp;quot; mass: 50.1910708357, radius: 23.9784340864, own angle: 24.0885015369, orbit angle: 18.3719686185
....... Planet  &amp;quot;Unife II&amp;quot; mass: 77.1220043454, radius: 23.7519538256, own angle: 1.56963269716, orbit angle: 9.66778420497
....... Planet  &amp;quot;Generc&amp;quot; mass: 0.954859525078, radius: 2.89965063537, own angle: 15.1977192455, orbit angle: 1.56909202794
....... Planet  &amp;quot;Luisr V-PI&amp;quot; mass: 9.15857260061, radius: 23.6343097555, own angle: 41.4134654258, orbit angle: 8.60298718306
....... System &amp;quot;Vavila&amp;quot; (own angle: 58.4942904382, orbit angle: 5.42910843328)
        Kernel
........ Planet  &amp;quot;Mega&amp;quot; mass: 9.90668278086, radius: 21.2579091744, own angle: 55.4839170633, orbit angle: 5.35352709001
        Other
........ Planet  &amp;quot;Ceno 7&amp;quot; mass: 4.08791579404, radius: 20.6325573986, own angle: 27.5536444655, orbit angle: 18.9861267757
........ Planet  &amp;quot;Mell&amp;quot; mass: 0.929107086513, radius: 4.48521899506, own angle: 40.9585332724, orbit angle: 2.45913512337
........ Planet  &amp;quot;Neh&amp;quot; mass: 1.58743230669, radius: 7.86796678631, own angle: 50.0154890556, orbit angle: 3.46508067616
....... Planet  &amp;quot;Cremati&amp;quot; mass: 2.57073825248, radius: 8.08656305806, own angle: 51.5767084156, orbit angle: 14.4613865496
....... Planet  &amp;quot;Slayeb L3&amp;quot; mass: 0.892278171643, radius: 3.2104856728, own angle: 35.280864282, orbit angle: 7.17439269782
....... System &amp;quot;Mop 7&amp;quot; (own angle: 28.8260733051, orbit angle: 10.581857998)
        Kernel
........ Planet  &amp;quot;Generr IINI&amp;quot; mass: 19.8259856835, radius: 21.9458559811, own angle: 7.17385648429, orbit angle: 8.2028602292
        Other
........ Planet  &amp;quot;Plyn 13&amp;quot; mass: 0.412215424555, radius: 3.99815118569, own angle: 43.2833339043, orbit angle: 3.15689005144
........ Planet  &amp;quot;Peaa X&amp;quot; mass: 1.67652635186, radius: 16.3246855463, own angle: 44.6282903891, orbit angle: 3.68209069637
........ Planet  &amp;quot;Clelaenm K&amp;quot; mass: 0.907430385201, radius: 8.7767363707, own angle: 44.6876879735, orbit angle: 9.42593184082
........ Planet  &amp;quot;Plastil&amp;quot; mass: 7.56815559442, radius: 24.2110500286, own angle: 42.0886798957, orbit angle: 6.4736934436
........ Planet  &amp;quot;Venel&amp;quot; mass: 0.548937028953, radius: 4.91524672657, own angle: 41.9364356155, orbit angle: 14.0150452196
........ Planet  &amp;quot;Reactin&amp;quot; mass: 1.17891410296, radius: 10.2043601182, own angle: 21.6836902623, orbit angle: 9.93692803484
........ Planet  &amp;quot;Mon&amp;quot; mass: 0.378742194024, radius: 3.63136144907, own angle: 59.3554914813, orbit angle: 14.1281845017
........ Planet  &amp;quot;Plo AMP&amp;quot; mass: 1.15902934644, radius: 9.67906191922, own angle: 57.8785245009, orbit angle: 4.02157922693
....... Planet  &amp;quot;Ges X&amp;quot; mass: 0.386065174927, radius: 1.38940642345, own angle: 48.3281945841, orbit angle: 11.174225646
...... Planet  &amp;quot;Lilv IIP&amp;quot; mass: 18.4287270936, radius: 22.8811413153, own angle: 49.7535392847, orbit angle: 9.484113229
...... System &amp;quot;Lebrola&amp;quot; (own angle: 2.07589402431, orbit angle: 17.7681479731)
       Kernel
....... Planet  &amp;quot;Nee&amp;quot; mass: 206.931454168, radius: 24.2282229636, own angle: 22.3670052921, orbit angle: 4.94854757469
       Other
....... Planet  &amp;quot;Badar&amp;quot; mass: 9.02902141779, radius: 23.5211240764, own angle: 27.5983732014, orbit angle: 5.9324001535
&lt;/pre&gt;
&lt;p&gt;Kernel означает, что далее следует подсистема (или планета), которая
является ядром данной подсистемы, Other это список подсистем (или
планет) по порядку от ядра по орбиталям. Грубо говоря алгоритм работает
следующим образом:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Выбрать параметры вселенной: общую массу и размер&lt;/li&gt;
&lt;li&gt;Выбрать произвольные углы для подсистемы с учётом диапазонов&lt;/li&gt;
&lt;li&gt;Выбрать случайное уникальное название (используется нарее описанный
модуль, его можно &lt;em&gt;поискать при помощи поиска по дневнику на Я.ру&lt;/em&gt;:
&lt;em&gt;генератор названий планет&lt;/em&gt;)&lt;/li&gt;
&lt;li&gt;Если масса слишком маленькая или размер, то разбиению система не
подлежит&lt;/li&gt;
&lt;li&gt;Разбить систему на случайное число подсистем&lt;/li&gt;
&lt;li&gt;Выбрать массу ядра (около 60% от общей массы)&lt;/li&gt;
&lt;li&gt;Выбрать произвольные массы для подсистем, но не слишком маленькие&lt;/li&gt;
&lt;li&gt;Выбрать размер подсистемы пропорционально массе&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Рекурсивно развернуть каждую из подсистем&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
</summary><category term="вселенная"></category><category term="планета"></category><category term="название"></category><category term="python"></category><category term="генератор"></category><category term="параметры"></category></entry><entry><title>Вот такой я в South Park</title><link href="/posts/2011/01/01/vot-takoi-ia-v-south-park/" rel="alternate"></link><updated>2011-01-01T17:32:17+02:00</updated><author><name>IMDagger</name></author><id>tag:,2011-01-01:posts/2011/01/01/vot-takoi-ia-v-south-park/</id><summary type="html">&lt;p&gt;При помощи конструктора &lt;a class="reference external" href="http://www.sp-studio.de/"&gt;http://www.sp-studio.de/&lt;/a&gt; сделал персонажа,
который представляет меня в повседневной жизни и выглядит так, как я бы
выглядел в South Park :)&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/318818/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/5301/imdagger.9/0_4dd62_c8e2bf91_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="south park"></category><category term="Я"></category><category term="забавно"></category><category term="персонаж"></category></entry><entry><title>Всех с наступающим Новым Годом</title><link href="/posts/2010/12/31/vsekh-s-nastupaiushchim-novym-godom/" rel="alternate"></link><updated>2010-12-31T19:18:24+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-12-31:posts/2010/12/31/vsekh-s-nastupaiushchim-novym-godom/</id><summary type="html">&lt;p&gt;В этот раз я был слишком загружен на работе, поэтому свою открытку
замоделить не успел :-/ поздравляю всех готовой открыткой :)&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://cards.yandex.ru/card.xml?crd=1&amp;amp;card_id=4990"&gt;&lt;img alt="С годом кролика!" src="http://cards2.yandex.net/get/5406/4990/lori-0001840601-ynd.jpg" title="С годом кролика!"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://cards.yandex.ru"&gt;&lt;img alt="Яндекс.Открытки" src="http://cards.yandex.ru/i/ya-logo.gif" title="Яндекс.Открытки"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Больше из &lt;a class="reference external" href="http://cards.yandex.ru/theme.xml?tags=2206"&gt;подборки открыток «Год кота или
кролика»&lt;/a&gt; на
&lt;a class="reference external" href="http://cards.yandex.ru"&gt;Яндекс.Открытках&lt;/a&gt;&lt;/p&gt;</summary><category term="праздник"></category><category term="новый"></category><category term="открытка"></category><category term="год"></category></entry><entry><title></title><link href="/posts/2010/12/31/urn:ya.ru:post/22199227/1210/" rel="alternate"></link><updated>2010-12-31T17:03:26+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-12-31:posts/2010/12/31/urn:ya.ru:post/22199227/1210/</id><summary type="html"></summary></entry><entry><title></title><link href="/posts/2010/12/30/urn:ya.ru:post/22199227/1209/" rel="alternate"></link><updated>2010-12-30T16:45:41+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-12-30:posts/2010/12/30/urn:ya.ru:post/22199227/1209/</id><summary type="html">&lt;p&gt;2011 - 2010 = +1&lt;/p&gt;
</summary></entry><entry><title>Работа с Tweepy</title><link href="/posts/2010/12/30/rabota-s-tweepy/" rel="alternate"></link><updated>2010-12-30T16:43:27+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-12-30:posts/2010/12/30/rabota-s-tweepy/</id><summary type="html">&lt;p&gt;Для работы с Twitter API мне приглянулась библиотека Tweepy.
Достаточно простая, обновляется периодически. API у самой библиотеки
тоже удобный, например если нужно получить объект-текущий пользователь,
то достаточно вызвать метод .me(). Поддерживаются различные схемы
авторизации, но мне нужна была OAuth 1.0 (Twitter не умеет пока 2.0).
dev_api_key, dev_secret нужно получить на странице
&lt;a class="reference external" href="http://dev.twitter.com/apps"&gt;http://dev.twitter.com/apps&lt;/a&gt;, зарегистрировав своё приложение. Получить
токен для Twitter-коннекта можно не хитрыми операциями:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-nn"&gt;tweepy&lt;/span&gt;
&lt;span class="pgcss-n"&gt;auth_handler&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;util&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;tweepy&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;auth&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;OAuthHandler&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;dev_api_key&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;dev_secret&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;\
       &lt;span class="pgcss-n"&gt;callback&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;тут можно написать наш url, если не указать, то будет взят и настроек приложения&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-n"&gt;url&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;auth&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;get_authorization_url&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
&lt;span class="pgcss-c"&gt;# обязательно сохраняем request-параметры и передаём браузеру пользователя url для перехода&lt;/span&gt;
&lt;span class="pgcss-n"&gt;request_info&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;auth&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;request_token&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;key&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;auth&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;request_token&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;secret&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Параметры пригодятся, когда наш callback получит управление и два
токена для offline доступа. Эти два ключа вместе с полученными
параметрами (хватит даже oauth_verifier) позволяют запросить у сервера
без помощи пользователя ключи, при помощи которых и можно работать с
персональными данными, т.к. права доступа подтверждены. Сохранённые
ключи нужно установить вручную в объект авторизации:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-nn"&gt;tweepy&lt;/span&gt;
&lt;span class="pgcss-n"&gt;auth_handler&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;tweepy&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;auth&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;OAuthHandler&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;dev_api_key&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;dev_secret&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-n"&gt;auth_handler&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;set_request_token&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;request_key&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;request_secret&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-k"&gt;try&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
    &lt;span class="pgcss-c"&gt;# запрашиваем ключи offline доступа&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;auth_handler&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;get_access_token&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;verifier&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-n"&gt;oauth_verifier&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-c"&gt;# сохраняем&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;store_offline_keys&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;auth_handler&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;access_token&lt;/span&gt;
&lt;span class="pgcss-k"&gt;except&lt;/span&gt; &lt;span class="pgcss-n"&gt;util&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;tweepy&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;error&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;TweepError&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
    &lt;span class="pgcss-c"&gt;# случилось нечто ужасное :) не выдан ключ, а пользователь подтвердил наши права&lt;/span&gt;
&lt;span class="pgcss-k"&gt;else&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
    &lt;span class="pgcss-c"&gt;# API готов к работе&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;api&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;tweepy&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;API&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;auth_handler&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</summary><category term="python"></category><category term="twitter"></category><category term="работа"></category><category term="tweepy"></category></entry><entry><title>emacs -nw в удалённом терминале</title><link href="/posts/2010/12/26/emacs-nw-v-udalionnom-terminale/" rel="alternate"></link><updated>2010-12-26T16:31:43+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-12-26:posts/2010/12/26/emacs-nw-v-udalionnom-terminale/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; В удалённом терминале иногда у меня в Emacs 22.1 (на удалённом
сервере стоит только такая версия) вместо Backspace вызывается помощь,
что сильно раздражает. Ситуацию решила команда в терминале (можно
добавить в .bashrc):&lt;/p&gt;
&lt;blockquote&gt;
user&amp;#64;server$ &lt;strong&gt;tset -e ^H&lt;/strong&gt;&lt;/blockquote&gt;
</summary><category term="терминал"></category><category term="emacs"></category><category term="клавиша"></category><category term="backspace"></category></entry><entry><title>Новый троллейбус</title><link href="/posts/2010/12/25/novyi-trolleibus/" rel="alternate"></link><updated>2010-12-25T18:48:38+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-12-25:posts/2010/12/25/novyi-trolleibus/</id><summary type="html">&lt;p&gt;Около двух недель назад заметил новый троллейбус с городе. Возможно
внутри он ещё не достиг достаточного уровня, удовлетворяющего
требованием наших реалий (т.е. вместимость прежде всего), но очень
приятно, что в нашей стране отечественное машиностроение начало делать
стильные вещи, то что дизайн не безразличен создателям общественного
транстпорта:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://gomeltrans.net/foto/img.php?c=line&amp;amp;img=018"&gt;&lt;img alt="image0" src="http://gomeltrans.net/foto/thumbnails/line/018.jpg" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="Гомель"></category><category term="город"></category><category term="дизайн"></category><category term="стиль"></category><category term="транспорт"></category><category term="троллейбус"></category></entry><entry><title>Тернарная условная операция и and/or</title><link href="/posts/2010/12/22/ternarnaia-uslovnaia-operatsiia-i-andor/" rel="alternate"></link><updated>2010-12-22T14:08:32+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-12-22:posts/2010/12/22/ternarnaia-uslovnaia-operatsiia-i-andor/</id><summary type="html">&lt;p&gt;До версии Python 2.5 не было тернарной условной операции вида
в&lt;em&gt;ыражение2 if условие else выражение3&lt;/em&gt;, поэтому приходилось
выкручмиваться через &lt;em&gt;условие and выражение2 or выражение3&lt;/em&gt;. Получается,
что если условие не ложно, то возвращается выражение2, иначе выражение3.
Но есть подводные камни у and/or, т.к. если само выражение2 не является
истинным, но будут проблемы. Например для пустого списка:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-c"&gt;# эта строчка содержит неявную ошибку&lt;/span&gt;
&lt;span class="pgcss-n"&gt;uids&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-ow"&gt;not&lt;/span&gt; &lt;span class="pgcss-nb"&gt;isinstance&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;uids&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-nb"&gt;list&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-ow"&gt;and&lt;/span&gt; &lt;span class="pgcss-n"&gt;uids&lt;/span&gt; &lt;span class="pgcss-ow"&gt;or&lt;/span&gt; &lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-n"&gt;uids&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Если uids равен 10, то после выполнения кода uids будет равер [10,
]. Всё хорошо, но если uids будет равен [] или {}, то после выполнения
кода uids будет равен [[], ] или [{}, ] соответственно. Что является
неверным. Поэтому в таком операторе, не полностью эквивалентном if,
стоит помнить об истинности выражения2, которое связано с условием через
&lt;em&gt;and&lt;/em&gt;, т.е. нужно поменять местами выражения:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-c"&gt;# так лучше&lt;/span&gt;
&lt;span class="pgcss-n"&gt;uids&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-ow"&gt;not&lt;/span&gt; &lt;span class="pgcss-nb"&gt;isinstance&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;uids&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-nb"&gt;list&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-ow"&gt;and&lt;/span&gt; &lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-n"&gt;uids&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-p"&gt;]&lt;/span&gt; &lt;span class="pgcss-ow"&gt;or&lt;/span&gt; &lt;span class="pgcss-n"&gt;uids&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</summary><category term="python"></category><category term="and"></category><category term="оператор"></category><category term="тринарный"></category><category term="or"></category></entry><entry><title>UJAM</title><link href="/posts/2010/12/18/ujam/" rel="alternate"></link><updated>2010-12-18T19:17:31+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-12-18:posts/2010/12/18/ujam/</id><summary type="html">&lt;p&gt;Прикольный сервис, завёл себе там аккаунт. Можно напевать мелодию в
микрофон (а можно загрузить готовое), а сервис превратит это в ноты и
исполнит композицию с использованием выбранного инструмента. Умеет
подыгрывать, можно редактировать&amp;nbsp; сгенерированную музыку.&lt;/p&gt;
</summary><category term="UJAM"></category><category term="генерация"></category><category term="музыка"></category></entry><entry><title></title><link href="/posts/2010/12/18/urn:ya.ru:post/22199227/1202/" rel="alternate"></link><updated>2010-12-18T19:10:33+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-12-18:posts/2010/12/18/urn:ya.ru:post/22199227/1202/</id><summary type="html">&lt;p&gt;концентрация прежде всего&lt;/p&gt;
</summary></entry><entry><title>Transmission uptime</title><link href="/posts/2010/12/18/transmission-uptime/" rel="alternate"></link><updated>2010-12-18T19:09:42+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-12-18:posts/2010/12/18/transmission-uptime/</id><summary type="html">&lt;p&gt;1285 часов &lt;strong&gt;процессорного&lt;/strong&gt; времени! И это всё transmission —
торрент демон. Всем радует, только на больших файлах долго хеши
пересчитывает.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/311162/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/5700/imdagger.9/0_4bf7a_cb513039_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="часы"></category><category term="uptime"></category><category term="1285"></category><category term="transmission"></category></entry><entry><title>Как создана линейка</title><link href="/posts/2010/12/13/kak-sozdana-lineika/" rel="alternate"></link><updated>2010-12-13T23:44:47+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-12-13:posts/2010/12/13/kak-sozdana-lineika/</id><summary type="html">&lt;p&gt;Я сделал всего один сантиметр линейки, а дальше применил модификатор
Array, главно только выполнить кусочек линейки бесшовно, чтобы он сам с
собой стыковался. Участок делается очень просто, нужно сделать несколько
аккуратных вырезов вручную, чтобы не было треугольников /* Loop &amp;amp; Cut
рулит :) */, а потом выставить на эти вырезы чёрный материал. Цифры это
просто объект типа Text, которы является дочерним по отношению к
линейке.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/309465/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/5901/imdagger.9/0_4b8d9_1b0b2b84_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="линейка"></category><category term="создание"></category></entry><entry><title>Лого с подколкой</title><link href="/posts/2010/12/13/logo-s-podkolkoi/" rel="alternate"></link><updated>2010-12-13T23:36:52+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-12-13:posts/2010/12/13/logo-s-podkolkoi/</id><summary type="html">&lt;p&gt;Сделал на днях за часик по приколу логотип для компании, которая
занимается продажей измерительных приборов. Линейка на самом деле даже
имеет небольшой срез, но его не видно при таком освещении и в таком
ракурсе. Зато вышло забавно :) То что я и хотел сделать: акцент на
размер и двусмысленную подпись.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/309464/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/5301/imdagger.8/0_4b8d8_b7d0646a_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="логотип"></category><category term="линейка"></category><category term="смешно"></category></entry><entry><title></title><link href="/posts/2010/12/13/urn:ya.ru:post/22199227/1198/" rel="alternate"></link><updated>2010-12-13T23:26:51+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-12-13:posts/2010/12/13/urn:ya.ru:post/22199227/1198/</id><summary type="html">&lt;p&gt;скоро праздник, всем нужно ужраться мандаринами :)&lt;/p&gt;
</summary></entry><entry><title>PPPoE и Bridge</title><link href="/posts/2010/12/13/pppoe-i-bridge/" rel="alternate"></link><updated>2010-12-13T23:20:09+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-12-13:posts/2010/12/13/pppoe-i-bridge/</id><summary type="html">&lt;p&gt;Столкнулся с тем, что Zyxel не пропустил запросы сервера с режиме
Bridge до провайдера для установки соединения. Немного поразмыслив я
пришёл к выводу, что стоит заглянуть в раздел Advanced (кнопка в базовых
WAN-настройках) и там нашёл не особо приметный пункт &lt;strong&gt;PPPoE
Passthrough&lt;/strong&gt;. По умолчанию онравен No, а нужно &lt;strong&gt;Yes&lt;/strong&gt;, чтобы сервер
смог сам пробросить запрос авторизации.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/309463/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/5900/imdagger.8/0_4b8d7_d00e4d72_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="bridge"></category><category term="мост"></category><category term="PPPoE"></category><category term="zyxel"></category><category term="модем"></category></entry><entry><title></title><link href="/posts/2010/12/07/urn:ya.ru:post/22199227/1196/" rel="alternate"></link><updated>2010-12-07T22:05:18+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-12-07:posts/2010/12/07/urn:ya.ru:post/22199227/1196/</id><summary type="html">&lt;p&gt;меня огорчает интернет-соединение&lt;/p&gt;
</summary></entry><entry><title>SRelay</title><link href="/posts/2010/12/07/srelay/" rel="alternate"></link><updated>2010-12-07T22:04:13+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-12-07:posts/2010/12/07/srelay/</id><summary type="html">&lt;p&gt;Эта прога меня сегодня порадовала, т.к. нужно было пробросить
OpenVPN соединение через прокси сервер, но соединение только UDP, т.к.
VPN нужный мне сервер не принимает TCP. Из приятного: работает под ядром
2.4 с OpenWall, настраивается очень легко и шевелится хорошо. OpenVPN
тоже прекрасно через SOCKS5 соединился с опцией --socks-proxy.&lt;/p&gt;
&lt;p&gt;Жаль, что у меня было времени мало и я почти не поработал, очень
жаль, т.к. проснулся я поздно, а инет на офисе пропал рано, пришлось
искать обходные пути. Надеюсь завтра с интернетом проблем не будет,
иначе это катастрофа, т.к. доделывать проект нужно.&lt;/p&gt;
</summary><category term="openvpn"></category><category term="socks5"></category><category term="srelay"></category></entry><entry><title>Мой баланс разработки и доработки</title><link href="/posts/2010/12/05/moi-balans-razrabotki-i-dorabotki/" rel="alternate"></link><updated>2010-12-05T21:51:01+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-12-05:posts/2010/12/05/moi-balans-razrabotki-i-dorabotki/</id><summary type="html">&lt;p&gt;Не стоит браться перерабатывать сразу целиком такую часть кода,
которая написана где-то 3 людьми за ~3 года, особенно когда нет
документации, как в моём случае. Я затратил 1 год и постоянно появляются
новые недоработки (которые из-за отсутствия доки были не видны, т.е. я
даже не знал про этот функционал), не говоря уже об ошибках. А мотивация
падает ещё сильнее, особенно когда пишешь на языке, которые прохладно
воспринимаешь. Поэтому я пришёл к рациональному выводу, что нужно просто
улучшить существующий код по скорости, пусть он выглядит через одно
место, но в одиночку его слишком сложно рефакторить.&lt;/p&gt;
&lt;p&gt;Постараюсь никогда больше не повторить этой ошибки: взятся на
неизведанный айсберг и решиться его переписать, когда не знаешь
функционала и нет спецификации, и требований, а лишь есть огромный файл
с кодом.&lt;/p&gt;
</summary><category term="диплом"></category><category term="dl"></category><category term="java"></category><category term="таблица"></category></entry><entry><title>YouTube Auth</title><link href="/posts/2010/12/04/youtube-auth/" rel="alternate"></link><updated>2010-12-04T22:05:24+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-12-04:posts/2010/12/04/youtube-auth/</id><summary type="html">&lt;p&gt;Некоторое время боролся с ошибкой 401, YouTube постоянно утверждал,
что у меня неверный scope для моего AuthSubToken. Но воспоминание о том,
что нужно ещё установить ключ разработчика дало мне надежду. И я
отправился на YouTube получил ключ разработчика и выполнил такой код
(использовать gdata-python-client библиотеку):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-nn"&gt;gdata.youtube&lt;/span&gt;
&lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-nn"&gt;gdata.youtube.service&lt;/span&gt;

&lt;span class="pgcss-n"&gt;yt_service&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;gdata&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;youtube&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;service&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;YouTubeService&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
&lt;span class="pgcss-n"&gt;yt_service&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;ssl&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-bp"&gt;False&lt;/span&gt;
&lt;span class="pgcss-c"&gt;# не забыть про установку ключа!&lt;/span&gt;
&lt;span class="pgcss-n"&gt;yt_service&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;developer_key&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;34-5Axrz123...&amp;#39;&lt;/span&gt;
&lt;span class="pgcss-c"&gt;# а client_id уже не нужен нынче&lt;/span&gt;
&lt;span class="pgcss-nb"&gt;next&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;тут-адрес-моего-сервера&amp;#39;&lt;/span&gt;
&lt;span class="pgcss-n"&gt;scope&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;http://gdata.youtube.com&amp;#39;&lt;/span&gt;
&lt;span class="pgcss-n"&gt;secure&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-bp"&gt;False&lt;/span&gt;
&lt;span class="pgcss-n"&gt;session&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-bp"&gt;True&lt;/span&gt;
&lt;span class="pgcss-n"&gt;auth_url&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;yt_service&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;GenerateAuthSubURL&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;next&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;scope&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;secure&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;session&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-c"&gt;#.... тут я получил URL для пользователя для авторизации и&lt;/span&gt;
&lt;span class="pgcss-c"&gt;# нужно показать ему отдельный popup ....&lt;/span&gt;
&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;span class="pgcss-c"&gt;# после получения токена (есть и функции которые сами&lt;/span&gt;
&lt;span class="pgcss-c"&gt;# парсят URL и достают оттуда и scope и token)&lt;/span&gt;
&lt;span class="pgcss-n"&gt;yt_service&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;SetAuthSubToken&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;authsub_token&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-n"&gt;yt_service&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;UpgradeToSessionToken&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;

&lt;span class="pgcss-c"&gt;# получаем любимые видео пользователя, default это тот, кто авторизовал&lt;/span&gt;
&lt;span class="pgcss-n"&gt;favorite_feed&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;yt_service&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;GetUserFavoritesFeed&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;username&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;default&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-n"&gt;video_info&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-n"&gt;favorite_feed&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;entry&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;print&lt;/span&gt; &lt;span class="pgcss-n"&gt;video_info&lt;/span&gt; &lt;span class="pgcss-c"&gt;# выводим XML информацию, можно&lt;/span&gt;
    &lt;span class="pgcss-c"&gt;# работать и со свойствами, ведь это же объект!&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;И о чудо! всё заработало, я смог получать информацию, которую
пожелал.&lt;/p&gt;
</summary><category term="видео"></category><category term="информация"></category><category term="youtube"></category><category term="api"></category><category term="python"></category><category term="авторизация"></category><category term="библиотека"></category></entry><entry><title></title><link href="/posts/2010/12/04/urn:ya.ru:post/22199227/1191/" rel="alternate"></link><updated>2010-12-04T21:55:00+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-12-04:posts/2010/12/04/urn:ya.ru:post/22199227/1191/</id><summary type="html">&lt;p&gt;Мне нужно много вкусной еды :)&lt;/p&gt;
</summary></entry><entry><title>CodeCup 2011</title><link href="/posts/2010/11/30/codecup-2011/" rel="alternate"></link><updated>2010-11-30T23:46:52+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-11-30:posts/2010/11/30/codecup-2011/</id><summary type="html">&lt;p&gt;В Google AI Contest я поучавствовал, теперь меня ждёт CodeCup. В этот
раз нужно написать бота для игры Dvonn. Это стратегическая игра для двух
игроков, где есть 3 нейтральные фишки на поле. С правилами можно
ознакомится на сайте, также там есть пример одного из боёв. Пока ещё не
поздно, хотя соревнования начались достаточно давно, но можно ещё успеть
на два тестовых раунда перед финальным боем.&lt;/p&gt;
</summary><category term="программирование"></category><category term="2010"></category><category term="соревнование"></category><category term="бот"></category><category term="турнир"></category><category term="ai"></category><category term="CodeCup"></category><category term="2011"></category><category term="участие"></category></entry><entry><title></title><link href="/posts/2010/11/28/urn:ya.ru:post/22199227/1189/" rel="alternate"></link><updated>2010-11-28T20:42:19+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-11-28:posts/2010/11/28/urn:ya.ru:post/22199227/1189/</id><summary type="html">&lt;p&gt;Плохо сплю и у меня красные глаза&lt;/p&gt;
</summary></entry><entry><title>IMDagger v.s. gibbzy</title><link href="/posts/2010/11/28/imdagger-vs-gibbzy/" rel="alternate"></link><updated>2010-11-28T20:06:36+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-11-28:posts/2010/11/28/imdagger-vs-gibbzy/</id><summary type="html">&lt;p&gt;Неплохо и лавинообразно мой бот атаковал, тут он красиво орудовал,
просто перехахватов было мало и пенальти не вырос, чтобы понизить
агрессивность бота. Но всё же заметно, что к концу игры бот стал вялым.&lt;/p&gt;
</summary><category term="сражение"></category><category term="игра"></category><category term="Galcon"></category><category term="python"></category><category term="запись"></category><category term="бот"></category><category term="ai"></category></entry><entry><title>Сражение Galcon</title><link href="/posts/2010/11/28/srazhenie-galcon/" rel="alternate"></link><updated>2010-11-28T19:58:33+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-11-28:posts/2010/11/28/srazhenie-galcon/</id><summary type="html">&lt;p&gt;Мой наспех сделанный ИИ для игры в Galcon превзошёл мои ожидания. Он
сумел выиграть немного больше половины боёв из всех участий на ринге на
данный момент. Но мои опасения оправдались: я боялся, что быстро
написанный код может содержать какой-нибудь противный баг. Так и
случилось, виновником всего стал параметр &lt;strong&gt;neutral_penalty&lt;/strong&gt;, который
служил каждой планете, как семафор сколько раз уже планета атаковала
нейтральные, и он регулировал стоит планете стать агрессивной или
спокойной. Но я забыл его сбрасывать при смене владельца планеты, а так
же неправильно ещё учёл в формуле важности атакующих. От этого бот стал
агрессивен, когаду него мало сил и очень спокойным – когда много. Это
отразилось на том, что он быстро расходует ресурсы вначале и его легко
стереть в порошок. А когда он откопит силы, то забивает даже на слабые
вражески планеты прямо под боком! Которые подрастают и убивают его! :(
&lt;a class="reference external" href="http://ai-contest.com/visualizer.php?game_id=8907219"&gt;Вот&lt;/a&gt; одно из
сражений моего бота с другим (&lt;a class="reference external" href="http://ai-contest.com/visualizer.php?game_id=8907219"&gt;тут от
победил&lt;/a&gt;):&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/302894/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/6000/imdagger.8/0_49f2e_6d7e275e_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Это график роста общего числа моего флота&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/302895/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/5700/imdagger.8/0_49f2f_cd5a65e_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;А это один кадр из записи боя против &lt;strong&gt;orkaboy&lt;/strong&gt;&lt;/p&gt;</summary><category term="игра"></category><category term="соревнование"></category><category term="Galcon"></category><category term="python"></category><category term="ai"></category><category term="конкурс"></category></entry><entry><title>В последние минуты</title><link href="/posts/2010/11/27/v-poslednie-minuty/" rel="alternate"></link><updated>2010-11-27T22:01:57+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-11-27:posts/2010/11/27/v-poslednie-minuty/</id><summary type="html">&lt;p&gt;За последний час я успел всё таки накорябать коекакого бота и он
даже может сражаться, жаль что быстро проигрывает, но что можно ожидать
от недописанного бота. Я рад, что хотя бы в контесте поучавствую, т.к. в
последнее время я вообще перестал успевать попадать на контесты.
Надеюсь, что я хотя бы буду не последний :).&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/302312/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/5001/imdagger.8/0_49ce8_c7a4c70b_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Жду результатов с нетерпением.&lt;/p&gt;</summary><category term="python"></category><category term="ai"></category><category term="google"></category><category term="конкурс"></category><category term="бот"></category></entry><entry><title>Facebook Graph и false</title><link href="/posts/2010/11/24/facebook-graph-i-false/" rel="alternate"></link><updated>2010-11-24T00:07:02+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-11-24:posts/2010/11/24/facebook-graph-i-false/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Когда производится Graph API запрос для Facebook, то для объектов, к
которым нет доступа у пользователя чей access_token выдан, то Facebook
возвращает false. Даже их собственная python-sdk реализация не ожидает
такого поворота событий. Можно в принципе подругому подойти к вопросу,
просто нужно запрос произвести не через get_object, а через
get_objects с параметром ids равным идентификатору нужного объекта.
Тогда будет возвращён как и следует ожидать пустой список без данных.
Если передать несколько ids, то будут только данные объектов к которым
есть доступ.&lt;/p&gt;
</summary><category term="python"></category><category term="api"></category><category term="facebook"></category><category term="false"></category><category term="graph"></category></entry><entry><title></title><link href="/posts/2010/11/21/urn:ya.ru:post/22199227/1184/" rel="alternate"></link><updated>2010-11-21T19:50:15+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-11-21:posts/2010/11/21/urn:ya.ru:post/22199227/1184/</id><summary type="html">&lt;p&gt;Нужно очень много успеть сделать&lt;/p&gt;
</summary></entry><entry><title>Blend-формат изнутри</title><link href="/posts/2010/11/21/blend-format-iznutri/" rel="alternate"></link><updated>2010-11-21T19:49:28+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-11-21:posts/2010/11/21/blend-format-iznutri/</id><summary type="html">&lt;p&gt;Очень доступно объясняет, как устроены blend-файлы, т.к. даже по
исходнику трудно понять, что там происходит.&lt;/p&gt;
</summary><category term="blender"></category><category term="формат"></category><category term="файл"></category><category term="документация"></category></entry><entry><title>Thread и загрузка из BGE</title><link href="/posts/2010/11/20/thread-i-zagruzka-iz-bge/" rel="alternate"></link><updated>2010-11-20T22:01:45+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-11-20:posts/2010/11/20/thread-i-zagruzka-iz-bge/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Выложил ещё один пример, где используется модуль threading для
загрузки данных на FTP сервер. Этот пример не блокирует BGE. Но нужно не
забывать, что предыдущий пример с реализацией через coro был отчасти
лучше, т.к. можно было вызывать функции BGE из него, а из Thread нельзя,
т.к. BGE — не потокобезопасный.&lt;/p&gt;
</summary><category term="python"></category><category term="bge"></category><category term="thread"></category></entry><entry><title></title><link href="/posts/2010/11/20/urn:ya.ru:post/22199227/1181/" rel="alternate"></link><updated>2010-11-20T21:54:00+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-11-20:posts/2010/11/20/urn:ya.ru:post/22199227/1181/</id><summary type="html">&lt;p&gt;заготавливаюсь на зиму, к призыву&lt;/p&gt;
</summary></entry><entry><title>FB Видео</title><link href="/posts/2010/11/17/fb-video/" rel="alternate"></link><updated>2010-11-17T22:08:19+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-11-17:posts/2010/11/17/fb-video/</id><summary type="html">&lt;p&gt;Странно почему при получении объекта типа Видео через Graph API не
возвращается параметр duration:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-p"&gt;{&lt;/span&gt;
   &lt;span class="pgcss-nt"&gt;&amp;quot;id&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s2"&gt;&amp;quot;159798044062126&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
   &lt;span class="pgcss-nt"&gt;&amp;quot;from&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-p"&gt;{&lt;/span&gt;
      &lt;span class="pgcss-nt"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s2"&gt;&amp;quot;Tito Fushacko&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
      &lt;span class="pgcss-nt"&gt;&amp;quot;id&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s2"&gt;&amp;quot;100000957939603&amp;quot;&lt;/span&gt;
   &lt;span class="pgcss-p"&gt;},&lt;/span&gt;
   &lt;span class="pgcss-nt"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s2"&gt;&amp;quot;Bullet for my valentine&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
   &lt;span class="pgcss-nt"&gt;&amp;quot;picture&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s2"&gt;&amp;quot;http://vthumb.ak.fbcdn.net/hvthumb-ak-snc4/hs1269.snc4/158117_159798267395437_159798044062126_44827_1339_t.jpg&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
   &lt;span class="pgcss-nt"&gt;&amp;quot;embed_html&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s2"&gt;&amp;quot;&amp;lt;object width=\&amp;quot;400\&amp;quot; height=\&amp;quot;288\&amp;quot; &amp;gt;&amp;lt;param name=\&amp;quot;allowfullscreen\&amp;quot; value=\&amp;quot;true\&amp;quot; /&amp;gt;&amp;lt;param name=\&amp;quot;allowscriptaccess\&amp;quot; value=\&amp;quot;always\&amp;quot; /&amp;gt;&amp;lt;param name=\&amp;quot;movie\&amp;quot; value=\&amp;quot;http://www.facebook.com/v/159798044062126\&amp;quot; /&amp;gt;&amp;lt;embed src=\&amp;quot;http://www.facebook.com/v/159798044062126\&amp;quot; type=\&amp;quot;application/x-shockwave-flash\&amp;quot; allowscriptaccess=\&amp;quot;always\&amp;quot; allowfullscreen=\&amp;quot;true\&amp;quot; width=\&amp;quot;400\&amp;quot; height=\&amp;quot;288\&amp;quot;&amp;gt;&amp;lt;/embed&amp;gt;&amp;lt;/object&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
   &lt;span class="pgcss-nt"&gt;&amp;quot;icon&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s2"&gt;&amp;quot;http://static.ak.fbcdn.net/rsrc.php/zD/r/DggDhA4z4tO.gif&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
   &lt;span class="pgcss-nt"&gt;&amp;quot;source&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s2"&gt;&amp;quot;http://video.ak.fbcdn.net/cfs-ak-snc4/77326/585/159798044062126_11744.mp4&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
   &lt;span class="pgcss-nt"&gt;&amp;quot;created_time&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s2"&gt;&amp;quot;2010-11-15T10:05:36+0000&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
   &lt;span class="pgcss-nt"&gt;&amp;quot;updated_time&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s2"&gt;&amp;quot;2010-11-15T10:05:36+0000&amp;quot;&lt;/span&gt;
&lt;span class="pgcss-p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Длины ролика нет, а ещё и в документации нет этого параметра. Но
оказалось, что его можно выудить из стрим-ленты пользователя, когда
ролик заливается и расшаривается в микроблоге.&lt;/p&gt;
</summary><category term="граф"></category><category term="facebook"></category><category term="video"></category><category term="duration"></category></entry><entry><title>999</title><link href="/posts/2010/11/15/999/" rel="alternate"></link><updated>2010-11-15T21:17:46+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-11-15:posts/2010/11/15/999/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; У меня 999 сообщений на форуме &lt;a class="reference external" href="http://blender3d.org.ua"&gt;Блендер
Украина&lt;/a&gt;. Все должны бояться меня x-D. Я год
шёл к этой цифре, т.к. пишу я не часто, времени мало. Это случилось вот
в данном &lt;a class="reference external" href="http://blender3d.org.ua/forum/game/198-3.html#55"&gt;посте&lt;/a&gt;.&lt;/p&gt;
</summary><category term="blender"></category><category term="форум"></category></entry><entry><title>cogen и BGE</title><link href="/posts/2010/11/14/cogen-i-bge/" rel="alternate"></link><updated>2010-11-14T22:06:29+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-11-14:posts/2010/11/14/cogen-i-bge/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Доделал соединение с ftplib библиотеки cogen. И всё это счастье
присоединил в
&lt;a class="reference external" href="http://blender3d.org.ua/forum/game/198-3.html#50"&gt;пример&lt;/a&gt; к BGE
вызовам. Теперь BGE не подвисает при работе с FTP. Можно даже в
несколько потоков работать и всё крутится как обычно. Правда с cogen
0.2.1 пришлось знатно помучаться, т.к. в нём исключили синхронный вызов
Call, пришлось найти 0.2.0 версию и самому его перекопировать.&lt;/p&gt;
</summary><category term="bge"></category><category term="сокет"></category><category term="неблокирующийся"></category><category term="сопрограмма"></category><category term="coro"></category><category term="cogen"></category></entry><entry><title>cogen и ftplib</title><link href="/posts/2010/11/13/cogen-i-ftplib/" rel="alternate"></link><updated>2010-11-13T21:58:38+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-11-13:posts/2010/11/13/cogen-i-ftplib/</id><summary type="html">&lt;p&gt;Пробую соединить обёртку сокета cogen с ftplib, т.к. даже после
подмены сокета оно работает не так как нужно, нужно подобавлять &lt;code class="code"&gt;
&amp;#64;coro&lt;/code&gt;
 а
библиотеку. Чтобы сделать return из &lt;code class="code"&gt;
&amp;#64;coro&lt;/code&gt;
 фунции нужно вызвать
исключение &lt;code class="code"&gt;
StopIteration&lt;/code&gt;
 с аргументом возврата.&lt;/p&gt;
</summary><category term="python"></category><category term="ftplib"></category><category term="coro"></category><category term="cogen"></category></entry><entry><title></title><link href="/posts/2010/11/08/urn:ya.ru:post/22199227/1171/" rel="alternate"></link><updated>2010-11-08T22:00:56+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-11-08:posts/2010/11/08/urn:ya.ru:post/22199227/1171/</id><summary type="html">&lt;p&gt;Болят глаза&lt;/p&gt;
</summary></entry><entry><title>План на месяц</title><link href="/posts/2010/11/08/plan-na-mesiats/" rel="alternate"></link><updated>2010-11-08T22:00:25+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-11-08:posts/2010/11/08/plan-na-mesiats/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; В этот месяц нужно доделать: риггинг гуманоидного скелета, доправить
редактор уровня (сделать так, чтобы было понятно, что за предметы
укладываются в рюкзак), сделать простое одевание предметов из редактора
(добавить кнопки: на руку, на ногу и т.д.), добавить меню с вводом имени
игрока. Думаю это я достаточно быстро сделаю, т.к. весь необходимый
функционал и код есть, нужно только соединить его. Жалко, что с каждым
днём мои глаза всё сильнее болят :( Скоро появятся скриншоты процесса и
результатов работы.&lt;/p&gt;
</summary><category term="проект"></category><category term="план"></category></entry><entry><title></title><link href="/posts/2010/11/07/urn:ya.ru:post/22199227/1169/" rel="alternate"></link><updated>2010-11-07T21:27:12+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-11-07:posts/2010/11/07/urn:ya.ru:post/22199227/1169/</id><summary type="html">&lt;p&gt;Много хочется в жизни исправить, жаль что права 444 и владелец God :(&lt;/p&gt;
</summary></entry><entry><title></title><link href="/posts/2010/11/07/urn:ya.ru:post/22199227/1167/" rel="alternate"></link><updated>2010-11-07T21:11:37+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-11-07:posts/2010/11/07/urn:ya.ru:post/22199227/1167/</id><summary type="html"></summary></entry><entry><title>Конвертирование из *.png</title><link href="/posts/2010/11/07/konvertirovanie-iz-png/" rel="alternate"></link><updated>2010-11-07T20:12:55+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-11-07:posts/2010/11/07/konvertirovanie-iz-png/</id><summary type="html">&lt;p&gt;Порой удобнее отрендерить множество PNG-файлов, а только затем
сделать видео, а не сразу рендерить как видео ряд. Выполз один pitfall
при такой конвертации у меня при помощи ffmpeg, качество сильно падало.
Но опция -sameq спасла, т.к. она задаёт уровень качества выходного
потока такой же как входного, а у моих PNG он 100%. 120 кадров заняли в
AVI-контейнере с использование MPEG4 кодека около 2Мб.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-c"&gt;# поумолчанию Blender создаёт png вида 0001.png, …, 0100.png, …&lt;/span&gt;
&lt;span class="pgcss-c"&gt;# мне нужно 25 кадров в секунду, это было выбрано в Blender при рендеринге&lt;/span&gt;
ffmpeg -sameq -r 25 -i %04d.png -vcodec mpeg4 rabbit.avi
&lt;/pre&gt;&lt;/div&gt;
</summary><category term="качество"></category><category term="png"></category><category term="конвертер"></category><category term="рендер"></category><category term="ffmpeg"></category><category term="blender"></category></entry><entry><title>В прыжке</title><link href="/posts/2010/11/06/v-pryzhke/" rel="alternate"></link><updated>2010-11-06T22:04:34+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-11-06:posts/2010/11/06/v-pryzhke/</id><summary type="html">&lt;p&gt;Вот один кадр зайчика в прыжке, тот кто нуждается в этом зайчике
может его уже забрать. Я сделал видео прыжка и готов его отправить по
почте вместе с исходными файлами. Там есть ветер, это ему на лету мех
ветром раздувает, со спины поддувает :)&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/290148/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/5900/imdagger.8/0_46d64_614db28c_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="кролик"></category><category term="мультфильм"></category><category term="рендер"></category><category term="набросок"></category></entry><entry><title>DLink AP</title><link href="/posts/2010/11/05/dlink-ap/" rel="alternate"></link><updated>2010-11-05T20:53:25+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-11-05:posts/2010/11/05/dlink-ap/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Бывает, что нужно сбросить свои настройки на заводские из-за того,
что этот чудо девайс может отказываться подключаться к компьютеру после
неполной настройки. Самое неприятное, что в руководстве не сказано, как
использовать их кнопку Reset, а в сети говорят, что нужно её зажать до
включения питания и держать после включения. Но оказалось, что нужно её
зажать во время включения и удерживать пока индикатор питания не станет
оранжевым, потом ещё подержать и отпустить. Теперь осталось ожидать пока
все индикаторы не перестанут моргать и станут зелёными. И да.. девайс
реально умеет работать в кросс режиме и в обычном с портом ethernet,
поэтому пачкорда из стандартной поставки хватит для всех случаев.&lt;/p&gt;
</summary><category term="dlink"></category><category term="настройки"></category><category term="сброс"></category><category term="wifi"></category></entry><entry><title></title><link href="/posts/2010/10/31/urn:ya.ru:post/22199227/1157/" rel="alternate"></link><updated>2010-10-31T18:46:41+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-10-31:posts/2010/10/31/urn:ya.ru:post/22199227/1157/</id><summary type="html">&lt;p&gt;Жить&lt;/p&gt;
</summary></entry><entry><title>Финальная версия</title><link href="/posts/2010/10/31/finalnaia-versiia/" rel="alternate"></link><updated>2010-10-31T18:46:09+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-10-31:posts/2010/10/31/finalnaia-versiia/</id><summary type="html">&lt;p&gt;Кролик прыгает, поворачивает голову, есть текстура для глаз, но нет
шерсти. В FBX экспортировался без проблем, единственное пришлось
применить модификаторы. И ещё указать масштабирование в 100 раз
уменьшить, чтобы в Maya смотрелось не огромным.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/284484/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/5601/imdagger.8/0_45744_41a3700a_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="кролик"></category><category term="анимация"></category><category term="fbx"></category></entry><entry><title>Прыжок кролика</title><link href="/posts/2010/10/30/pryzhok-krolika/" rel="alternate"></link><updated>2010-10-30T20:56:31+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-10-30:posts/2010/10/30/pryzhok-krolika/</id><summary type="html">&lt;p&gt;Всё мой упрощённый мультяшный кролик как-то прыгает, можно отдавать
его. Он готов, могу отдать :) Придётся сделать экспорт в FBX формат,
т.к. OBJ не может работать с арматурами.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/283987/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/5901/imdagger.8/0_45553_93fd33ed_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="кролик"></category><category term="анимация"></category><category term="экспорт"></category></entry><entry><title>Каша собирается назад в кости</title><link href="/posts/2010/10/24/kasha-sobiraetsia-nazad-v-kosti/" rel="alternate"></link><updated>2010-10-24T22:07:41+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-10-24:posts/2010/10/24/kasha-sobiraetsia-nazad-v-kosti/</id><summary type="html">&lt;p&gt;Каша в моей голове стала «крепчать» :). Я понял как заставить
приседать скелет. Нужно было лишь сделать ступни Target для ног в IK
Solver, а ещё добавить объект для Pole в том же IK. Это позволило
коленям смотреть в определённом направлении и не давать ногам гнутся
лишь бы куда. Прочитал вот этот старый
&lt;a class="reference external" href="http://www.blender.org/development/release-logs/blender-246/inverse-kinematics/"&gt;анонс&lt;/a&gt;
ещё для Blender 2.46 про новую фичу в инверсной кинематике. Теперь
достаточно потянуть за кость спины и Кожеголовый приседает, правда без
ограничителя Floor не обошлось (не забываем, что он проверяет не хвост
кости, а голову):&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/281584/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4606/imdagger.8/0_44bf0_c61b0617_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Вот пример уже с мешем (позу не изменял):&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/281585/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/4509/imdagger.8/0_44bf1_26607599_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;А вот для голени прописан ориентир полена, чтобы вся цепь гнулась в
нужном направлении:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/281587/"&gt;&lt;img alt="image2" src="http://img-fotki.yandex.ru/get/4603/imdagger.8/0_44bf3_195c8ac1_L" title="image2"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="кинематика"></category><category term="риггинг"></category><category term="кость"></category><category term="инверсная"></category><category term="Pole"></category><category term="IK"></category><category term="человек"></category><category term="Floor"></category><category term="скелет"></category></entry><entry><title></title><link href="/posts/2010/10/23/urn:ya.ru:post/22199227/1153/" rel="alternate"></link><updated>2010-10-23T21:24:57+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-10-23:posts/2010/10/23/urn:ya.ru:post/22199227/1153/</id><summary type="html">&lt;p&gt;От костей в голове одна каша :)&lt;/p&gt;
</summary></entry><entry><title>Stretch To</title><link href="/posts/2010/10/22/stretch-to/" rel="alternate"></link><updated>2010-10-22T22:43:02+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-10-22:posts/2010/10/22/stretch-to/</id><summary type="html">&lt;p&gt;Прикольно, ни разу его ещё не юзал и раньше думал, что кости мне не
удастся растягивать. А этот констрейнт позволяет «растянуть кость»:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/280772/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/5801/imdagger.8/0_448c4_16163923_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="кость"></category><category term="stretch"></category><category term="растягивание"></category></entry><entry><title>Улучшенный бот</title><link href="/posts/2010/10/18/uluchshennyi-bot/" rel="alternate"></link><updated>2010-10-18T21:58:23+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-10-18:posts/2010/10/18/uluchshennyi-bot/</id><summary type="html">&lt;p&gt;Со вчерашнего дня на сегодняшний мне хватило сил дописать своему
боту кое-какую защиту и случайное нападение. Теперь он больше стал похож
на игрока в Galcon :) даже начал выигрывать тестовых ботов. Мой красный:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/279395/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4605/imdagger.8/0_44363_86b2b332_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="python"></category><category term="google"></category><category term="конкурс"></category><category term="бот"></category></entry><entry><title>Swarm Algorithm</title><link href="/posts/2010/10/18/swarm-algorithm/" rel="alternate"></link><updated>2010-10-18T21:35:23+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-10-18:posts/2010/10/18/swarm-algorithm/</id><summary type="html">&lt;p&gt;Даже на прототипе написанном на языке Python алгоритм показал себя
лучше, чем я ожидал. Коэффициенты ГНП и ПНП, а также вес я выбрал 0.3,
0.7 и 0.3 просто так. Не тютинговал и не ускорял прототип, но он нашёл
ответ за десяток минут или около того. Даже не дожидаясь, когда алгоритм
до конца найдёт минимум функции я уже видел, что результат не плох
(особенно по сравнению с моими предыдущими результами с другими
алгоритмами). Всё, чт озакрашено эт опревышение по отражению и это не
очень хорошо, но в принципе это не очень большие превышения, особенно
если учесть, что я прервал алгоритм не дожидаясь окончательного
результата и выбранное число слоёв поиска — случайное:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/279355/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/5501/imdagger.8/0_4433b_c4a80591_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="поиск"></category><category term="программирование"></category><category term="оптимизация"></category><category term="частицы"></category><category term="python"></category><category term="алгоритм"></category><category term="набросок"></category><category term="просветление"></category><category term="оптика"></category></entry><entry><title>Я хочу</title><link href="/posts/2010/10/16/ia-khochu/" rel="alternate"></link><updated>2010-10-16T21:22:26+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-10-16:posts/2010/10/16/ia-khochu/</id><summary type="html">&lt;p&gt;растворится в пустоте и познать дао (не паттерн проектирования).&lt;/p&gt;
</summary></entry><entry><title>Для курсачей и дипломов</title><link href="/posts/2010/10/16/dlia-kursachei-i-diplomov/" rel="alternate"></link><updated>2010-10-16T21:18:16+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-10-16:posts/2010/10/16/dlia-kursachei-i-diplomov/</id><summary type="html">&lt;p&gt;Под эту музыку всегда получались хорошие, объёмные и качественные
курсовые работы, лабораторные и дипломные :) Особенно, когда по времени
осталось мало, а делать ещё много.&lt;/p&gt;
</summary><category term="Я"></category><category term="мысли"></category><category term="бредни"></category></entry><entry><title>Не верю, но забавно :)</title><link href="/posts/2010/10/16/ne-veriu-no-zabavno/" rel="alternate"></link><updated>2010-10-16T20:40:18+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-10-16:posts/2010/10/16/ne-veriu-no-zabavno/</id><summary type="html">&lt;form action="http://aeterna.qip.ru/ftell.php" method="get"&gt;
    &lt;input name="link" value="ftells:2216" type="hidden"&gt;
    &lt;table style="border: 1px solid #eeeeee; width: 400px;" border="0"&gt;
        &lt;tbody&gt;
            &lt;tr&gt;
                &lt;td style="margin: 0px; padding: 8px; text-align: center; background-color: #006680; color: #ffffff; font-family: Arial; font-style: normal; font-variant: normal; font-weight: normal; font-size: 16px; line-height: normal; font-size-adjust: none; font-stretch: normal;"&gt;
                    &lt;a style="display: block; padding-top: 4px; color: #ffffff;" href="http://aeterna.ru/ftell.php?link=ftells:2216" target="_blank"&gt;одним словом...&lt;/a&gt;
                &lt;/td&gt;
                &lt;td&gt;
                &lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td style="padding: 8px; text-align: left; background-color: #ffffff; color: #000000; font-family: Arial; font-style: normal; font-variant: normal; font-weight: normal; font-size: 12px; line-height: normal; font-size-adjust: none; font-stretch: normal;"&gt;
                    &lt;table border="0" width="100%"&gt;
                        &lt;tbody&gt;
                            &lt;tr&gt;
                                &lt;td style="padding: 2px; text-align: left; background-color: #ffffff; color: #000000; font-family: Arial; font-style: normal; font-variant: normal; font-weight: normal; font-size: 12px; line-height: normal; font-size-adjust: none; font-stretch: normal;"&gt;Ваше имя&lt;/td&gt;
                                &lt;td style="padding: 2px; text-align: left; background-color: #ffffff; color: #000000; font-family: Arial; font-style: normal; font-variant: normal; font-weight: normal; font-size: 12px; line-height: normal; font-size-adjust: none; font-stretch: normal;"&gt;
                                    &lt;input name="yourname" value="IMDagger" type="text"&gt;
                                &lt;/td&gt;
                                &lt;td&gt;
                                &lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                                &lt;td style="padding: 2px; text-align: left; background-color: #ffffff; color: #000000; font-family: Arial; font-style: normal; font-variant: normal; font-weight: normal; font-size: 12px; line-height: normal; font-size-adjust: none; font-stretch: normal;"&gt;слово, отражающее тебя -&lt;/td&gt;
                                &lt;td style="padding: 2px; text-align: left; background-color: #ffffff; color: #000000; font-family: Arial; font-style: normal; font-variant: normal; font-weight: normal; font-size: 12px; line-height: normal; font-size-adjust: none; font-stretch: normal;"&gt;сила&lt;/td&gt;
                                &lt;td&gt;
                                &lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                                &lt;td style="padding: 2px; text-align: left; background-color: #ffffff; color: #000000; font-family: Arial; font-style: normal; font-variant: normal; font-weight: normal; font-size: 12px; line-height: normal; font-size-adjust: none; font-stretch: normal;"&gt;То, к чему ты стремишься -&lt;/td&gt;
                                &lt;td style="padding: 2px; text-align: left; background-color: #ffffff; color: #000000; font-family: Arial; font-style: normal; font-variant: normal; font-weight: normal; font-size: 12px; line-height: normal; font-size-adjust: none; font-stretch: normal;"&gt;впечатления&lt;/td&gt;
                                &lt;td&gt;
                                &lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                                &lt;td style="padding: 2px; text-align: left; background-color: #ffffff; color: #000000; font-family: Arial; font-style: normal; font-variant: normal; font-weight: normal; font-size: 12px; line-height: normal; font-size-adjust: none; font-stretch: normal;"&gt;придает тебе силы -&lt;/td&gt;
                                &lt;td style="padding: 2px; text-align: left; background-color: #ffffff; color: #000000; font-family: Arial; font-style: normal; font-variant: normal; font-weight: normal; font-size: 12px; line-height: normal; font-size-adjust: none; font-stretch: normal;"&gt;музыка&lt;/td&gt;
                                &lt;td&gt;
                                &lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                                &lt;td style="padding: 2px; text-align: left; background-color: #ffffff; color: #000000; font-family: Arial; font-style: normal; font-variant: normal; font-weight: normal; font-size: 12px; line-height: normal; font-size-adjust: none; font-stretch: normal;"&gt;то, что ранит -&lt;/td&gt;
                                &lt;td style="padding: 2px; text-align: left; background-color: #ffffff; color: #000000; font-family: Arial; font-style: normal; font-variant: normal; font-weight: normal; font-size: 12px; line-height: normal; font-size-adjust: none; font-stretch: normal;"&gt;воспоминания&lt;/td&gt;
                                &lt;td&gt;
                                &lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                                &lt;td style="padding: 2px; text-align: left; background-color: #ffffff; color: #000000; font-family: Arial; font-style: normal; font-variant: normal; font-weight: normal; font-size: 12px; line-height: normal; font-size-adjust: none; font-stretch: normal;"&gt;то, чего у тебя никто не отнимет -&lt;/td&gt;
                                &lt;td style="padding: 2px; text-align: left; background-color: #ffffff; color: #000000; font-family: Arial; font-style: normal; font-variant: normal; font-weight: normal; font-size: 12px; line-height: normal; font-size-adjust: none; font-stretch: normal;"&gt;сочувствие&lt;/td&gt;
                                &lt;td&gt;
                                &lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                                &lt;td&gt;
                                &lt;/td&gt;
                            &lt;/tr&gt;
                        &lt;/tbody&gt;
                        &lt;tbody&gt;
                            &lt;tr&gt;
                                &lt;td&gt;
                                &lt;/td&gt;
                            &lt;/tr&gt;
                        &lt;/tbody&gt;
                    &lt;/table&gt;
                &lt;/td&gt;
                &lt;td&gt;
                &lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td style="margin: 0px; padding: 8px; text-align: center; background-color: #006680; font-family: Arial; font-style: normal; font-variant: normal; font-weight: normal; font-size: 12px; line-height: normal; font-size-adjust: none; font-stretch: normal;"&gt;
                    &lt;input value="Узнать" type="submit"&gt;
                    &lt;br&gt;
                    &lt;small&gt;
                        &lt;a style="display: block; padding-top: 4px; color: #ffffff;" href="http://aeterna.ru/ftells.php?link=ftells" target="_blank"&gt;все гадания на aeterna.ru&lt;/a&gt;
                    &lt;/small&gt;
                &lt;/td&gt;
                &lt;td&gt;
                &lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;
                &lt;/td&gt;
            &lt;/tr&gt;&lt;/tbody&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/form&gt;
</summary><category term="Я"></category><category term="бредни"></category></entry><entry><title>Кости для Кожеголового</title><link href="/posts/2010/10/16/kosti-dlia-kozhegolovogo/" rel="alternate"></link><updated>2010-10-16T20:35:12+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-10-16:posts/2010/10/16/kosti-dlia-kozhegolovogo/</id><summary type="html">&lt;p&gt;Набросал скелет для Кожеголового персонажа. Ещё не крепил к телу и
не настроил констрэйнты, от этого ноги гнутся немного странно.
Постарался кости не сдвигать с оси, т.к. не силько умею потом бороться с
IK.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/278562/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4600/imdagger.8/0_44022_1a6cd51_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="проект"></category><category term="набросок"></category><category term="last_gateway_to_hell"></category><category term="арматура"></category><category term="персонаж"></category><category term="риггинг"></category></entry><entry><title></title><link href="/posts/2010/10/16/urn:ya.ru:post/22199227/1143/" rel="alternate"></link><updated>2010-10-16T15:26:35+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-10-16:posts/2010/10/16/urn:ya.ru:post/22199227/1143/</id><summary type="html">&lt;p&gt;не люблю IE :-/&lt;/p&gt;
</summary></entry><entry><title>Про меня</title><link href="/posts/2010/10/16/pro-menia/" rel="alternate"></link><updated>2010-10-16T15:20:03+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-10-16:posts/2010/10/16/pro-menia/</id><summary type="html">&lt;p&gt;Жаль только, что я не смогу человеку дать что-нибудь взамен за его
девайс :( Хм… я бы поменялся на 48&amp;quot; моник :)&lt;/p&gt;
</summary><category term="cyanide"></category><category term="Я"></category><category term="happiness"></category></entry><entry><title>Использование метода роя частиц</title><link href="/posts/2010/10/16/ispolzovanie-metoda-roia-chastits/" rel="alternate"></link><updated>2010-10-16T15:11:40+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-10-16:posts/2010/10/16/ispolzovanie-metoda-roia-chastits/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Оказалось, что алгоритм долго не мог найти нормальное решение из-за
того, что я перетупал в проверке пригодности R и T местами. После правки
он стал искать решение быстрее, чем мой ГА даже с разделёнными n и d.
Подозреваю, что в ГА тоже есть проблема с кроссоверингом.&lt;/p&gt;
</summary><category term="алгоритм"></category><category term="просветление"></category><category term="физика"></category><category term="оптика"></category></entry><entry><title>Банана-коллекции</title><link href="/posts/2010/10/15/banana-kollektsii/" rel="alternate"></link><updated>2010-10-15T23:20:22+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-10-15:posts/2010/10/15/banana-kollektsii/</id><summary type="html">&lt;p&gt;Теперь залит код для коллекций бананов в MySpace SPP Ranch, а Ice
Cube коллекции уже готовы и тоже скоро будут залиты. Хорошо, что я код
сделал такой, что ему без разтицы тип данных коллекций и нужно было лишь
немного дополнительных строк кода добавить. И кое-где поменять banana на
icecube. До сих пор воюю с IE8, он падает где-то глубоко в MySpace коде
:( Нужно будет связаться с разработчиками MySpace и вместе с ними решить
проблему RPC контейнера.&lt;/p&gt;
</summary><category term="коллекции"></category><category term="myspace"></category><category term="работа"></category><category term="google"></category></entry><entry><title></title><link href="/posts/2010/10/10/urn:ya.ru:post/22199227/1139/" rel="alternate"></link><updated>2010-10-10T19:35:12+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-10-10:posts/2010/10/10/urn:ya.ru:post/22199227/1139/</id><summary type="html">&lt;p&gt;обновил Bazaar с 1.5 до 2.3b&lt;/p&gt;
</summary></entry><entry><title>Проект снова обрёл силы</title><link href="/posts/2010/10/10/proekt-snova-obriol-sily/" rel="alternate"></link><updated>2010-10-10T19:33:40+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-10-10:posts/2010/10/10/proekt-snova-obriol-sily/</id><summary type="html">&lt;p&gt;После долгого отпуска и отсутствия времени проект снова обрёл силы.
Теперь проблема обмена информацией решена и проект залит на
Launchpad.net, вот &lt;a class="reference external" href="https://launchpad.net/manual-meat-grinder"&gt;он&lt;/a&gt;.
Спасибо O.din13 и Dima Kiva за Кожеголового персонажа для игры:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/276918/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4900/imdagger.8/0_439b6_48f9907f_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="triad_vesuvius"></category><category term="проект"></category><category term="bge"></category><category term="launchpad"></category><category term="blender"></category><category term="python"></category><category term="last_gateway_to_hell"></category></entry><entry><title>Пора лечить</title><link href="/posts/2010/10/06/pora-lechit/" rel="alternate"></link><updated>2010-10-06T23:27:39+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-10-06:posts/2010/10/06/pora-lechit/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Меня пора лечить: я провёл 16 часов на работе, из которых все 16 был
занят делом и даже пообедал прямо на рабочем месте без отрыва от
мыслительного процесса :-/.&lt;/p&gt;
</summary><category term="Я"></category><category term="безумие"></category><category term="работа"></category></entry><entry><title></title><link href="/posts/2010/10/05/urn:ya.ru:post/22199227/1134/" rel="alternate"></link><updated>2010-10-05T22:46:36+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-10-05:posts/2010/10/05/urn:ya.ru:post/22199227/1134/</id><summary type="html">&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-gp"&gt;root@crazyman#&lt;/span&gt; /etc/rc.d/rc.soul restart
&lt;/pre&gt;&lt;/div&gt;
</summary><category term=""></category></entry><entry><title>Диалог бананов</title><link href="/posts/2010/10/05/dialog-bananov/" rel="alternate"></link><updated>2010-10-05T22:44:47+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-10-05:posts/2010/10/05/dialog-bananov/</id><summary type="html">&lt;p&gt;Нужно за сегодня успеть перенести похожий диалог на MySpace SPPRanch
с Facebook SPPRanch, только весь код придётся переделать, т.к. Facebook
не OpenSocial. Хочу машину времени :(&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/274739/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4508/imdagger.8/0_43133_4147db03_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="работа"></category><category term="коллекции"></category></entry><entry><title>Кроссовер NKD</title><link href="/posts/2010/10/02/krossover-nkd/" rel="alternate"></link><updated>2010-10-02T21:29:13+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-10-02:posts/2010/10/02/krossover-nkd/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Странно, что я раньше не подумал над тем, что я при просветлении
покрытия в операции кроссовера смешиваю параматры отражения, преломления
и толщины. Надеюсь, что сегодня мне поможет ускорить поиск разделение
этих параметров в разные участки. Мне почему-то эта мысль только пришла
после реализации алгоритма роя частиц. Надеюсь это разогреет популяцию.
Ещё планирую скомбирировать рой частиц и генетический алгоритм, чтобы
они не давали друг другу быстро скатится в локальный мимнимум.&lt;/p&gt;
</summary><category term="оптимизация"></category><category term="поиск"></category><category term="слой"></category><category term="генетический"></category><category term="просветление"></category><category term="покрытие"></category><category term="физика"></category><category term="оптика"></category></entry><entry><title>Загрузка соседей в MS SPP Ranch</title><link href="/posts/2010/09/30/zagruzka-sosedei-v-ms-spp-ranch/" rel="alternate"></link><updated>2010-09-30T22:06:31+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-09-30:posts/2010/09/30/zagruzka-sosedei-v-ms-spp-ranch/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Теперь у большинства игроков SPP Ranch на MySpace должны загружаться
их соседи нормально. Одну ошибку я пофиксил, а вторую исправил Трэвис,
т.к. это лежало вне области моего кода и пока ещё некоторых областей
знаний проекта. Надеюсь, что пользователи на форуме MySpace больше не
будут писать огорчённые отзывы.&lt;/p&gt;
</summary><category term="ранчо"></category><category term="исправление"></category><category term="slide"></category><category term="работа"></category><category term="google"></category></entry><entry><title></title><link href="/posts/2010/09/28/urn:ya.ru:post/22199227/1130/" rel="alternate"></link><updated>2010-09-28T23:47:12+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-09-28:posts/2010/09/28/urn:ya.ru:post/22199227/1130/</id><summary type="html">&lt;ol class="arabic simple"&gt;
&lt;li&gt;Кувшин старый глиняный, весь в трещинах, возьму с собой&lt;/li&gt;
&lt;li&gt;Попробую погладить лошадь по лицу и покормить из рук, лошадь фыркнет
и обдаст мои руки горячим воздухом, спокойно поест&lt;/li&gt;
&lt;li&gt;Буду наслаждаться видом, это будут стройные чёрные лошади&lt;/li&gt;
&lt;li&gt;Пропасть огромная, скалистая, вызывает огромное чувство уважения, но
есть верёвочный мостик и можно перебраться. Посижу на мостике полюбуюсь
видом и пойду дальше.&lt;/li&gt;
&lt;li&gt;Лес обязательно сосновый, мощный запах смолы, мягкая почва, очень
много хвойных иголок на земле, как ковёр, бодрит&lt;/li&gt;
&lt;li&gt;Лягу на землю люцом вниз, руки за голову, медведь понюхает меня,
попробует перевернуть и уйдёт&lt;/li&gt;
&lt;li&gt;Обычный домик лесника, там никого нет, есть н/з для путника, оставлю
там кувшин для следующего путника&lt;/li&gt;
&lt;li&gt;Море зелёное, пена около берега, над ним летают чайки, но кораблей не
видно, приятная пустота&lt;/li&gt;
&lt;li&gt;Чайки издают свои нервирующие звуки и постоянно кружат, но выглядят
они приятно, есть желание их потрогать руками&lt;/li&gt;
&lt;li&gt;Куда..куда..!? конечно же идём искать лодку на берегу, чтобы плыть!&lt;/li&gt;
&lt;/ol&gt;
</summary><category term=""></category></entry><entry><title>Капчи</title><link href="/posts/2010/09/28/kapchi/" rel="alternate"></link><updated>2010-09-28T23:26:51+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-09-28:posts/2010/09/28/kapchi/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Иногда такие капчи попадаются, что порой задумываешься над тем, что
можно устроить гадание по капчам :D&lt;/p&gt;
</summary><category term="мысли"></category></entry><entry><title>Рождение бота</title><link href="/posts/2010/09/26/rozhdenie-bota/" rel="alternate"></link><updated>2010-09-26T21:19:17+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-09-26:posts/2010/09/26/rozhdenie-bota/</id><summary type="html">&lt;p&gt;Сегодня набросал для Google AI Contest 2010 основу бота для игры в
Galcon. Т.к. стандартный пакет для Python не внушил мне доверия, то я
сделал свой вариант. Наконец у меня появилось чуть-чуть времени на это
соревнование, а то я уже упустил 2 недели :(. Сегодня нужно будет
улучшить интеллект бота, я сделал плагинную систему, чтобы можно было
выставлять группы правил для ИИ. Но пока он у меня играет просто
случайным образом :)&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/269384/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4602/imdagger.8/0_41c48_3beb5c17_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="программирование"></category><category term="игра"></category><category term="бот"></category><category term="google"></category><category term="python"></category><category term="конкурс"></category></entry><entry><title></title><link href="/posts/2010/09/25/urn:ya.ru:post/22199227/1127/" rel="alternate"></link><updated>2010-09-25T13:06:55+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-09-25:posts/2010/09/25/urn:ya.ru:post/22199227/1127/</id><summary type="html">&lt;p&gt;Класс NP&lt;/p&gt;
</summary></entry><entry><title>Риггинг для меня</title><link href="/posts/2010/09/25/rigging-dlia-menia/" rel="alternate"></link><updated>2010-09-25T13:05:30+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-09-25:posts/2010/09/25/rigging-dlia-menia/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Думаю мне стоит уделить побольше внимания риггингу, т.к. риггинг с
Auto IK порой доставляет много головной боли и не даёт долго сделать то,
как хочешь. Нашёл для себя интересный способ со сгибанием коленей, где
делается одна обазовая кость, которая служит полом. Ещё увидел в примере
Red-Nelb шарниры для носков ног, оказалось очень полезная вещь, особенно
если нужно поставить персонажа на носочки. Нужно будет опробовать этот
метод в следующий раз. Хочу реализовать ещё одну задумку, которая
пылилась не меньше, чем предыдущая… но это тоже пока секрет :-/ а т в
друг не получится.&lt;/p&gt;
</summary><category term="blender"></category><category term="риггинг"></category><category term="бредни"></category><category term="заметка"></category><category term="набросок"></category></entry><entry><title>МаТан</title><link href="/posts/2010/09/21/matan/" rel="alternate"></link><updated>2010-09-21T23:14:13+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-09-21:posts/2010/09/21/matan/</id><summary type="html">&lt;p&gt;Мои поздравления :) Я сделал изображение и чашку с ним.
Это изображение новой идеи для логотипа группы МаТан. Чашечку я не успел
зафоткать, но вот картинка:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/267527/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4603/imdagger.8/0_41507_2a74b2a7_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Немного о процессе создания (просто изображения):&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/267528/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/4505/imdagger.8/0_41508_1af44343_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/267529/"&gt;&lt;img alt="image2" src="http://img-fotki.yandex.ru/get/4601/imdagger.8/0_41509_114635bc_L" title="image2"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;Пианино без модификаторов&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/267530/"&gt;&lt;img alt="image3" src="http://img-fotki.yandex.ru/get/4508/imdagger.8/0_4150a_26dbc116_L" title="image3"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="cut text-center"&gt;&lt;a class="h-link reference internal" data-toggle="collapse" href="#cut_48531792"&gt;ещё изображения&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_48531792"&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/267531/"&gt;&lt;img alt="image4" src="http://img-fotki.yandex.ru/get/4604/imdagger.8/0_4150b_81d7469f_L" title="image4"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/267532/"&gt;&lt;img alt="image5" src="http://img-fotki.yandex.ru/get/4603/imdagger.8/0_4150c_cbdb7b3_L" title="image5"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/267533/"&gt;&lt;img alt="image6" src="http://img-fotki.yandex.ru/get/4604/imdagger.8/0_4150d_df582009_L" title="image6"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;Пробные рендеры&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/267534/"&gt;&lt;img alt="image7" src="http://img-fotki.yandex.ru/get/4601/imdagger.8/0_4150e_561e69e7_L" title="image7"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/267535/"&gt;&lt;img alt="image8" src="http://img-fotki.yandex.ru/get/4609/imdagger.8/0_4150f_12866170_L" title="image8"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/267536/"&gt;&lt;img alt="image9" src="http://img-fotki.yandex.ru/get/5200/imdagger.8/0_41510_b2321d9d_L" title="image9"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/267537/"&gt;&lt;img alt="image10" src="http://img-fotki.yandex.ru/get/4605/imdagger.8/0_41511_c6312c55_L" title="image10"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;С микрофоном&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/267538/"&gt;&lt;img alt="image11" src="http://img-fotki.yandex.ru/get/4605/imdagger.8/0_41512_8770feca_L" title="image11"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/267539/"&gt;&lt;img alt="image12" src="http://img-fotki.yandex.ru/get/5203/imdagger.8/0_41513_d7c7e748_L" title="image12"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/267540/"&gt;&lt;img alt="image13" src="http://img-fotki.yandex.ru/get/4505/imdagger.8/0_41514_80f15aa_L" title="image13"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;А вот так делал туфельки&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/267545/"&gt;&lt;img alt="image14" src="http://img-fotki.yandex.ru/get/4603/imdagger.8/0_41519_fadd0749_L" title="image14"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/267546/"&gt;&lt;img alt="image15" src="http://img-fotki.yandex.ru/get/5205/imdagger.8/0_4151a_6b97aeb0_L" title="image15"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/267558/"&gt;&lt;img alt="image16" src="http://img-fotki.yandex.ru/get/5205/imdagger.8/0_41526_95656f29_L" title="image16"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/267560/"&gt;&lt;img alt="image17" src="http://img-fotki.yandex.ru/get/4506/imdagger.8/0_41528_72d95d50_L" title="image17"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/267561/"&gt;&lt;img alt="image18" src="http://img-fotki.yandex.ru/get/4604/imdagger.8/0_41529_a196b754_L" title="image18"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;Каблучки доделал можно и риггить&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/267562/"&gt;&lt;img alt="image19" src="http://img-fotki.yandex.ru/get/4508/imdagger.8/0_4152a_13f23e43_L" title="image19"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/267564/"&gt;&lt;img alt="image20" src="http://img-fotki.yandex.ru/get/4604/imdagger.8/0_4152c_7904ae_L" title="image20"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;Добавлены скелеты, сделал риггинг&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/267565/"&gt;&lt;img alt="image21" src="http://img-fotki.yandex.ru/get/5202/imdagger.8/0_4152d_d83ccb8e_L" title="image21"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/267566/"&gt;&lt;img alt="image22" src="http://img-fotki.yandex.ru/get/4609/imdagger.8/0_4152e_b8a1ccc2_L" title="image22"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;</summary><category term="blender"></category><category term="радость"></category><category term="изображение"></category><category term="МаТан"></category></entry><entry><title>Несколько UV</title><link href="/posts/2010/09/19/neskolko-uv/" rel="alternate"></link><updated>2010-09-19T20:08:33+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-09-19:posts/2010/09/19/neskolko-uv/</id><summary type="html">&lt;p&gt;Что-то я затупил, когда пытался несколько развёрток UV сделать для
объетка. Хорошо, что &lt;a class="reference external" href="http://o-din13.ya.ru/"&gt;O'DIN&lt;/a&gt; вовремя подсказал.
И так, что требуется: для
нескольких частей одного и того же меша создать несколько развёрток на
разные текстуры. Зачем? Просто иногда хочется, например, положить
текстуру на глаз, но остальное не трогать. Когда текстура одна, то всё
привычно: развернул, добавил текстуру, выставил UV флаг. А когда нужно
ещё одну текстуру добавить и не хочется менять стару развёртку, то стоит
воспользоваться UV-слоями:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/266251/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/5203/imdagger.8/0_4100b_b2252fa7_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Одна развёртка UV соответствует одной текстуре. Нужно просто не
забывать указывать слой, после того как включаешь флаг UV в Map Input
(что я и подзабыл :) ).&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/266253/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/5202/imdagger.8/0_4100d_33f8bb5_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="развёртка"></category><category term="uv"></category></entry><entry><title>Небольшой секрет</title><link href="/posts/2010/09/19/nebolshoi-sekret/" rel="alternate"></link><updated>2010-09-19T19:35:35+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-09-19:posts/2010/09/19/nebolshoi-sekret/</id><summary type="html">&lt;p&gt;Сделал одно изображение, но пока выкладывать не буду, выложу через
несколько дней. Вот один скрин из процесса создания:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/266243/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/5201/imdagger.8/0_41003_c8614fcb_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;Остальное потом… :)&lt;/p&gt;</summary><category term="blender"></category><category term="изображение"></category><category term="риггинг"></category></entry><entry><title></title><link href="/posts/2010/09/19/urn:ya.ru:post/22199227/1119/" rel="alternate"></link><updated>2010-09-19T19:28:15+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-09-19:posts/2010/09/19/urn:ya.ru:post/22199227/1119/</id><summary type="html">&lt;p&gt;Жизнь кипит&lt;/p&gt;
</summary></entry><entry><title>Как выжить в катастрофе</title><link href="/posts/2010/09/14/kak-vyzhit-v-katastrofe/" rel="alternate"></link><updated>2010-09-14T16:34:13+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-09-14:posts/2010/09/14/kak-vyzhit-v-katastrofe/</id><summary type="html">&lt;p&gt;Что дано? Дана база users.ldb от Samba4-alpha8 размером в 73154560
байтов. Это LDB данные в хранилище типа TDB. Исходники показали, что TDB
записи не очень сложные для понимания. Да и LDB записи для меня теперь
не страшны. База повреждена. Как я это определил? было специфическое
поведение (&lt;strong&gt;ВСЕ ОПЕРАЦИИ ПРОВОДИЛИСЬ НА КОПИИ БАЗЫ!!!&lt;/strong&gt;):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-go"&gt;[root@alpha tmp]# /opt/bin/tdbtool&lt;/span&gt;
&lt;span class="pgcss-go"&gt;tdb&amp;gt; open users.ldb&lt;/span&gt;
&lt;span class="pgcss-go"&gt;tdb&amp;gt; info&lt;/span&gt;
&lt;span class="pgcss-go"&gt;Error = Corrupt database&lt;/span&gt;
&lt;span class="pgcss-go"&gt;tdb&amp;gt; check&lt;/span&gt;
&lt;span class="pgcss-go"&gt;Integrity check for the opened database failed.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;База открывалась через /opt/bin/ldbedit -H /tmp/users.ldb , но не
хватало огромного количества пользователей. База казалась оборванной.
Аналогичная ситуация наблюдалась при подключении к серверу по протоколу
LDAP — &lt;code class="code"&gt;
/opt/bin/ldbedit -H ldap://localhost&lt;/code&gt;
. Как можно было это всё
увидеть не со стороны сервера? Да очень просто: пользователи могли
входить в систему, работать как и раньше, но как только дело касалось
установки прав на какую-либо директорию, то PDC отвечал, что в LDAP
дереве не найден такой пользователь. Остались доступными лишь
пользователи, записи которых видны через ldbedit. Ещё периодически
происходила блокировка части записей и в логах Samba сыпалось (которая
проявлялась, как недоступный сервер при вводе в домен новой машинки):&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;[Wed Sep  8 15:51:35 2010 EEST, 0 lib/ldb_wrap.c:66:ldb_wrap_debug()]&lt;/div&gt;
&lt;div class="line"&gt;ldb: ltdb: tdb(/opt/private/users.ldb): tdb_rec_read bad magic 0xd9fee666 at offset=42488496&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Я вручную выправлял какждый раз этот magic на верный (как уже я
ранее писал в блоге). Это было похоже, что я даю обезболивающее
пациенту, у которого открытый перелом ноги. Ему вроде становится немного
легче, но ходить он всё равно не может. И если ничего не предпринять
серьёзнее, то он умрёт в конце-концов.&lt;/p&gt;
&lt;p&gt;Один из приятных моментов, что Samba расширяет TDB-хранилище
большими порциями и поэтому бэкап базы полугодичной давности хотя бы
похож размером и частично расположением записей на текущую. Это мне
помогло ориентироваться, что где и как.&lt;/p&gt;
&lt;p&gt;Для начала пришлось наловчиться пользоваться утилитой tdbtool,
отныне это наш друг и помощник. Это низкоуровневая утилита по работе с
TDB записями. Сначала у меня с ней не заладилось, я хотел получить по
ключу одну запись просто посмотреть, но утилита выдавала ошибку fetch. В
интернете я всё же смог найти, что нужно просто добавить ключу
терминирущий ноль, т.е.:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;em&gt;я писал&lt;/em&gt;&lt;/div&gt;
&lt;div class="line"&gt;open users.ldb&lt;/div&gt;
&lt;div class="line"&gt;show @INDEX:CN:M120&lt;/div&gt;
&lt;div class="line"&gt;&lt;strong&gt;*оно говорило ошибку*&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;&lt;em&gt;я написал&lt;/em&gt;&lt;/div&gt;
&lt;div class="line"&gt;show @INDEX:CN:M120\0&lt;/div&gt;
&lt;div class="line"&gt;&lt;em&gt;и получил данные о записи: её размер , размер ключа&lt;/em&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Я был в шоке, что у меня всё разрушено и бэкап этой базы я начал
делать слишком поздно (я думал, что это сделал уже другой человек, но
оказалось, что это не так). Но посопев и покряхтев я взялся за
исследования и осознание TDB в целях прозрения. Меня успокаивало то, что
хотя бы Samba4 может считывать записи и пользователи входят и всё более
менее работает.&lt;/p&gt;
&lt;p&gt;Я сделал дамп битой базы:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;/opt/bin/tdbtool &amp;gt;dump&lt;/div&gt;
&lt;div class="line"&gt;open users.ldb&lt;/div&gt;
&lt;div class="line"&gt;dump&lt;/div&gt;
&lt;div class="line"&gt;q&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;В конце файла dump меня ждал сюрприз (уже по размеру было видно,
что файл небольшой и оборван):&lt;/p&gt;
&lt;pre class="literal-block"&gt;
key 27 bytes
DN=@INDEX:US(...x&amp;lt;..l.....
data 88 bytes
[000] 00 36 00 00 00 4B D3 C5  D9 99 19 01 26 44 4E 3D  .6...K.. ....&amp;amp;DN=
[010] 40 49 4E 44 45 58 3A 55  53 4E 43 52 45 41 54 45  @INDEX:U SNCREATE
[020] 44 3A 31 30 37 36 39 34  00 67 19 01 26 01 00 00  D:107694 .g..&amp;amp;..
[030] 00 40 49 4E 44 45 58 3A  55 53 4E 43 52 45 41 54  .@INDEX: USNCREAT
[040] 45 44 3A 31 30 37 36 39  34 00 40 49 44 58 50 54  ED:10769 4.@IDXPT
[050] 52 00 01 00 00 00 04 00                           R......
&lt;/pre&gt;
&lt;p&gt;Ясно, что записи с ключом &lt;em&gt;@INDEX:US(…x&amp;lt;..l…..&lt;/em&gt; не бывает а дальше в
теле записи насторожило то, что снова начинается TDB запись. Это можно
увидеть по magic-ключу 0x99 0x19 0x01 0x26. И по тому, что тело не
начинается на 0x67 0x19 0x01 0x26, а эти байты можно найти чуть дальше.
С таких байтов начинаются все тела записей в TDB хранилище.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/262946/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/5202/imdagger.8/0_40322_7b4fb56_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Сперва я решил разблокировать все запись и набросал очень простой и
тупой скрипт на Python (&lt;strong&gt;ОСТОРОЖНО С НИМ&lt;/strong&gt;):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-nn"&gt;sys&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-nn"&gt;os&lt;/span&gt;

&lt;span class="pgcss-n"&gt;flag&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-bp"&gt;True&lt;/span&gt;

&lt;span class="pgcss-n"&gt;base&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nb"&gt;file&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;'users.ldb'&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;'rb+'&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-n"&gt;patch&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;'&lt;/span&gt;&lt;span class="pgcss-se"&gt;\x99\x19\x01\x26&lt;/span&gt;&lt;span class="pgcss-s"&gt;'&lt;/span&gt;

&lt;span class="pgcss-k"&gt;while&lt;/span&gt; &lt;span class="pgcss-n"&gt;flag&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;os&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;system&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;"/opt/bin/tdbbackup -v users.ldb &amp;gt;result.txt"&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

    &lt;span class="pgcss-n"&gt;flag&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-bp"&gt;False&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-n"&gt;l&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-nb"&gt;file&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;'result.txt'&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-s"&gt;'offset='&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-n"&gt;l&lt;/span&gt; &lt;span class="pgcss-ow"&gt;and&lt;/span&gt; &lt;span class="pgcss-s"&gt;'0xd9fee666'&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;flag&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-bp"&gt;True&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;pos&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nb"&gt;int&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;l&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-n"&gt;l&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;index&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;'offset='&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt; &lt;span class="pgcss-nb"&gt;len&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;'offset='&lt;/span&gt;&lt;span class="pgcss-p"&gt;):])&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;base&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;seek&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;pos&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;data&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;base&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;read&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-mi"&gt;128&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;try&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;dst&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;data&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;index&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;'&lt;/span&gt;&lt;span class="pgcss-se"&gt;\x66\xe6\xfe\xd9&lt;/span&gt;&lt;span class="pgcss-s"&gt;'&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

        &lt;span class="pgcss-n"&gt;base&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;seek&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;pos&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt; &lt;span class="pgcss-n"&gt;dst&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;base&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;write&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;patch&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;base&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;flush&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;except&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;print&lt;/span&gt; &lt;span class="pgcss-s"&gt;'error'&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;sys&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;exit&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;print&lt;/span&gt; &lt;span class="pgcss-n"&gt;pos&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Сценарий открывает базу users.ldb в текущей директории и использует
утилиту tdbbackup для определения заблокированных участков.
Восстанавливать нам всё равно не откуда, но… зато эта программулина
говорит, что bad magic в позиции offset такой-то. Скрипт работает до тех
пор, пока /opt/bin/tdbbackup (&amp;lt;b&amp;gt;путь в скрипте прописать свой!&amp;lt;/b&amp;gt;) не
согласится, что всё хорошо. Утилита будет выдавать, что users.ldb.bak не
найден, но ничего страшного, у нас всё равно его нет и не для этого мы
её используем, она просто может найти все места блокировки.&lt;/p&gt;
&lt;p&gt;После разблокировки нужно запустить снова tdbtool:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;open users.ldb &amp;gt;dump&lt;/div&gt;
&lt;div class="line"&gt;dump&lt;/div&gt;
&lt;div class="line"&gt;q&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;На этот раз файл dump будет соизмерим с users.ldb, там будут все
записи. Но.. как обычно всё не так хорошо… Я нашёл целый участок
разрушенных записей. Начиная с места обрыва. Но мне повезло и я нашёл
продолжение, где всё ок. Просто на глаз пролистал много строк вниз.
Большинство плохих записей было похоже на (т.е. содержало ключ
начинающийся с INDE$):&lt;/p&gt;
&lt;pre class="literal-block"&gt;
key 62 bytes
DN=@INDE$...l.q...../...r....&amp;gt;.U...&amp;amp;DN=@INDEX:OBJECTGUID::Bo3j
data 129 bytes
[000] 7A 6A 4A 45 33 30 4B 56  53 73 4F 54 4C 52 78 45  zjJE30KV SsOTLRxE
[010] 54 77 3D 3D 00 67 19 01  26 01 00 00 00 40 49 4E  Tw==.g.. &amp;amp;....@IN
[020] 44 45 58 3A 4F 42 4A 45  43 54 47 55 49 44 3A 3A  DEX:OBJE CTGUID::
[030] 42 6F 33 6A 7A 6A 4A 45  33 30 4B 56 53 73 4F 54  Bo3jzjJE 30KVSsOT
[040] 4C 52 78 45 54 77 3D 3D  00 40 49 44 58 00 01 00  LRxETw== .@IDX..
[050] 00 00 30 00 00 00 43 4E  3D 41 64 6D 69 6E 69 73  ..0...CN =Adminis
[060] 74 72 61 74 6F 72 2C 43  4E 3D 55 73 65 72 73 2C  trator,C N=Users,
[070] 44 43 3D 67 72 6C 2C 44  43 3D 75 6E 69 62 65 6C  DC=grl,D C=unibel
[080] 2C                                                ,
&lt;/pre&gt;
&lt;p&gt;Тут подтверждалась моя гипотеза, что за первой записью следуеть
сразу вторая запись и что у первой записи неверная длина ключа и тела.
Меня вдруг насторожило то, что я нашёл некоторые из записей, которые
внутри тела плохих TDB записей, нетронутыми и в нормальном виде. Вообще
вся структура TDB грубо говоря представляет из себя простой список:&lt;/p&gt;
&lt;blockquote&gt;
[&lt;strong&gt;запись 1&lt;/strong&gt;: указатель на 2] -&amp;gt; [&lt;strong&gt;запись 2&lt;/strong&gt;: указатель 3] -&amp;gt; …
-&amp;gt; [&lt;strong&gt;запись N&lt;/strong&gt;: 0 стоп]&lt;/blockquote&gt;
&lt;p&gt;Но записи разбросаны по всему файлу. Я сделал предположение, что
после того, как система бесперебойного питания отказала (а ныне на
сервере к сожалению стоит на SmartUPS, который скончался, а обычный), а
Samba в этот момент что-то делала с записями, то появилась одна или
несколько «косячных записей». Возможно Samba просто их не стёрла.
Получилась цепочка с самопересечением:&lt;/p&gt;
&lt;blockquote&gt;
[&lt;strong&gt;запись 1&lt;/strong&gt;: указатель на 2] -&amp;gt; [&lt;strong&gt;запись 2&lt;/strong&gt;: указатель на 3] -&amp;gt;
… -&amp;gt; [&lt;strong&gt;запись N&lt;/strong&gt;: указатель на кусок записи 1] -&amp;gt; [&lt;strong&gt;кусок записи
1&lt;/strong&gt;: указатель на кусок записи 2] -&amp;gt; и т.д. как-то так&lt;/blockquote&gt;
&lt;p&gt;Первую не разбитую запись я обнаружил в файле dump, она была
особенной, т.к. перед ней шла запись с длиной ключа 0 и телом 0:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
key 0 bytes

data 0 bytes

key 35 bytes
DN=@INDEX:SN::0KHQkNCf0KDQq9Ca0J4=
data 133 bytes
[000] 67 19 01 26 01 00 00 00  40 49 4E 44 45 58 3A 53  g..&amp;amp;... @INDEX:S
[010] 4E 3A 3A 30 4B 48 51 6B  4E 43 66 30 4B 44 51 71  N::0KHQk NCf0KDQq
[020] 39 43 61 30 4A 34 3D 00  40 49 44 58 00 01 00 00  9Ca0J4= @IDX...
[030] 00 4F 00 00 00 43 4E 3D  41 72 74 69 6F 6D 20 53  .O...CN= Artiom S
[040] 61 70 72 79 6B 6F 2C 4F  55 3D 49 50 5F 31 30 2C  apryko,O U=IP_10,
[050] 4F 55 3D 32 30 31 30 2C  4F 55 3D 53 74 75 64 65  OU=2010, OU=Stude
[060] 6E 74 73 2C 4F 55 3D 50  65 6F 70 6C 65 2C 44 43  nts,OU=P eople,DC
[070] 3D 67 72 6C 2C 44 43 3D  75 6E 69 62 65 6C 2C 44  =grl,DC= unibel,D
[080] 43 3D 62 79 00                                    C=by
&lt;/pre&gt;
&lt;p&gt;Я сделал следующее: взял запись 1 (целая запись, которая указывает
на первую битую) и взял запись 2 (первая целая запись после битых). А
затем в поле next записи 1 прописал указатель на запись 2. Как я это
сделал? Очень просто, достаточно понимания TDB и LDB:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;нашёл в файле &lt;a class="reference external" href="mailto:DN=@INDEX"&gt;DN=@INDEX&lt;/a&gt;:SN::0KHQkNCf0KDQq9Ca0J4= запись&lt;/li&gt;
&lt;li&gt;её можно будет определить по &amp;amp; впереди (т.к. 67 19 01 26 начало
записи)&lt;/li&gt;
&lt;li&gt;нашёл её magic (он до тела! его нет в dump, нужно смотреть в hex
редакторе), т.е. 0x99 0x19 0x01 0x26&lt;/li&gt;
&lt;li&gt;отступил назад 20 байтов от начала magic&lt;/li&gt;
&lt;li&gt;это и есть начало записи&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Я посмотрел адрес начала записи 2, повторил операцию для записи 1. И
прописал в поле next для 1 указатель на 2. Грубо говоря я «зашил» дырку,
т.е. выбросил участок кривых ссылок:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/262945/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/4605/imdagger.8/0_40321_ff0dc7f4_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;pre class="literal-block"&gt;
было для 1:
14 BA 44 02 | A4 00 00 00 | 1C 00 00 00 | 5C 00 00 00 | 80 46 3B CC | 99 19 01 26 | ключ и данные ...
стало для 1:
C0 8E 41 02 | A4 00 00 00 | 1C 00 00 00 | 5C 00 00 00 | 80 46 3B CC | 99 19 01 26 | ключ и данные ...
&lt;/pre&gt;
&lt;p&gt;Понимание полей можно получить из исходного кода Samba4, первое поле
это адрес следующей записи, третье — размер ключа, четвёртое — размер
данных после ключа. Ключ заканчивается терминирующим нулём.&lt;/p&gt;
&lt;p&gt;После такого сшивания остаток записей подхватился и Samba4 стала
работать вменяемо. А мёртвые записи надеюсь так и останутся в базе и не
будут мне больше мешать. Надеюсь призраки записей не придут ко мне :).&lt;/p&gt;</summary><category term="tdb"></category><category term="ошибка"></category><category term="исправление"></category><category term="пользователи"></category><category term="нарушение"></category><category term="python"></category><category term="удача"></category><category term="ldb"></category><category term="samba4"></category></entry><entry><title>Одолел Samba4 corrupted users.ldb</title><link href="/posts/2010/09/12/odolel-samba4-corrupted-usersldb/" rel="alternate"></link><updated>2010-09-12T21:32:51+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-09-12:posts/2010/09/12/odolel-samba4-corrupted-usersldb/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Сегодня ужасно устал, но придумал решение. Возможно из-за моей
правки потерялось 100-200 записей и от этого нашушится десяток
пользователей (старых, не новых), которые не часто появляются или вообще
уже не появятся. По сравнению с 20000 потерянных записей до правки,
100-200 это мизер :). Завтра утром Bacula сделает бэкап моих правок и
жизнь наладится. Завтра распишу, как выправил и суть проблемы и
нарушения LDB,&amp;nbsp; как мне помогла утилита tdbtool, hex-редактор, понимание
структуры TDB, знание Magic кода, языка Python и проверки при помощи
ldbedit.&lt;/p&gt;
</summary><category term="tdb"></category><category term="ошибка"></category><category term="починил"></category><category term="исправление"></category><category term="повреждение"></category><category term="радость"></category><category term="python"></category><category term="samba4"></category><category term="Я"></category><category term="устал"></category><category term="повезло"></category><category term="работа"></category></entry><entry><title></title><link href="/posts/2010/09/12/urn:ya.ru:post/22199227/1115/" rel="alternate"></link><updated>2010-09-12T21:27:10+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-09-12:posts/2010/09/12/urn:ya.ru:post/22199227/1115/</id><summary type="html">&lt;p&gt;Я победил Samba4&lt;/p&gt;
</summary></entry><entry><title>Восстановление базы</title><link href="/posts/2010/09/11/vosstanovlenie-bazy/" rel="alternate"></link><updated>2010-09-11T21:58:04+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-09-11:posts/2010/09/11/vosstanovlenie-bazy/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Надеюсь мне удастся хоть как то нормально восстановить базу от
Samba4 без потери SIDов :-/ Я и так уже разобрал много всяких структур и
устройство TDB.&lt;/p&gt;
</summary><category term="samba4"></category><category term="ошибка"></category><category term="проблема"></category><category term="восстановить"></category><category term="нарушение"></category></entry><entry><title>Настроение</title><link href="/posts/2010/09/10/nastroenie/" rel="alternate"></link><updated>2010-09-10T21:59:25+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-09-10:posts/2010/09/10/nastroenie/</id><summary type="html">&lt;p&gt;Шагай по дороге,&lt;/p&gt;
&lt;p&gt;Вперёд не смотри.&lt;/p&gt;
&lt;p&gt;Ведут тебя ноги,&lt;/p&gt;
&lt;p&gt;Печаль ты сотри.&lt;/p&gt;
</summary><category term="бредни"></category></entry><entry><title>Google AI Challenge!</title><link href="/posts/2010/09/08/google-ai-challenge/" rel="alternate"></link><updated>2010-09-08T20:37:51+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-09-08:posts/2010/09/08/google-ai-challenge/</id><summary type="html">&lt;p&gt;Нужно будет взглянуть, что за оно :)&lt;/p&gt;
</summary><category term="ai"></category><category term="google"></category><category term="конкурс"></category></entry><entry><title>Stream posting</title><link href="/posts/2010/09/06/stream-posting/" rel="alternate"></link><updated>2010-09-06T19:31:37+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-09-06:posts/2010/09/06/stream-posting/</id><summary type="html">&lt;p&gt;Сюрпризом оказалось, что на MySpace теперь для того, чтобы постить в
stream нужно запросить права с индикатором UT
(VIEWER_SEND_UPDATES_TO_FRIENDS). У меня приложение использует
iframe, а не canvas. Вот код, который проверяет право на создание
сообщений в stream пользователя, если они отсутствуют, то запускается
запрос на получение таковых. И только затем вызывается показ диалога на
добавку нового сообщения в ленту:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;container&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nx"&gt;MyOpenSpace&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;MySpaceContainer&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;get&lt;/span&gt;&lt;span class="pgcss-p"&gt;();&lt;/span&gt;
&lt;span class="pgcss-nx"&gt;container&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;requestCreateActivity&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;os&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;newActivity&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;activityParams&lt;/span&gt;&lt;span class="pgcss-p"&gt;),&lt;/span&gt; &lt;span class="pgcss-nx"&gt;priority&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-nx"&gt;callback&lt;/span&gt;&lt;span class="pgcss-p"&gt;);&lt;/span&gt;
&lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-o"&gt;!&lt;/span&gt;&lt;span class="pgcss-nx"&gt;container&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;hasPermission&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;MyOpenSpace&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;Permission&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;VIEWER_SEND_UPDATES_TO_FRIENDS&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;
    &lt;span class="pgcss-nx"&gt;container&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;requestPermission&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;MyOpenSpace&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;Permission&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;VIEWER_SEND_UPDATES_TO_FRIENDS&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
        &lt;span class="pgcss-s2"&gt;&amp;quot;тут нужно написать сообщение для пользователя&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
        &lt;span class="pgcss-kd"&gt;function&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;response&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-p"&gt;{&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-o"&gt;!&lt;/span&gt;&lt;span class="pgcss-nx"&gt;response&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;errorMessage&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
                &lt;span class="pgcss-nx"&gt;container&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;requestCreateActivity&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;container&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;newActivity&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;activityParams&lt;/span&gt;&lt;span class="pgcss-p"&gt;),&lt;/span&gt;
                            &lt;span class="pgcss-nx"&gt;priority&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-nx"&gt;callback&lt;/span&gt;&lt;span class="pgcss-p"&gt;);&lt;/span&gt;
            &lt;span class="pgcss-p"&gt;}&lt;/span&gt;
        &lt;span class="pgcss-p"&gt;);&lt;/span&gt;
&lt;span class="pgcss-k"&gt;else&lt;/span&gt;
    &lt;span class="pgcss-nx"&gt;container&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;requestCreateActivity&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;container&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;newActivity&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;activityParams&lt;/span&gt;&lt;span class="pgcss-p"&gt;),&lt;/span&gt; &lt;span class="pgcss-nx"&gt;priority&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-nx"&gt;callback&lt;/span&gt;&lt;span class="pgcss-p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;В комбинации с кодом для автоматической добавки постов со стороны
сервера это даёт неплохой результат. Можно пользователя постоянно не
доставать запросами для размещения нового сообщения.&lt;/p&gt;
</summary><category term="stream"></category><category term="myspace"></category><category term="javascript"></category><category term="права"></category><category term="activity"></category></entry><entry><title>Генератор названий</title><link href="/posts/2010/09/05/generator-nazvanii/" rel="alternate"></link><updated>2013-06-12T11:45:14+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-09-05:posts/2010/09/05/generator-nazvanii/</id><summary type="html">&lt;p&gt;Сделал небольшой генератор названий планет для &lt;strong&gt;O.din13&lt;/strong&gt;. Порой
генерируются достаточно забавные названия. Сам скрипт (UPD 12 июня 2013: нашёл
небольшую опечатку в коде и исправил, а также написал ещё
один &lt;a class="reference external" href="/posts/2013/06/12/generator-nazvanii-planet-vozvrashchenie/"&gt;генератор&lt;/a&gt; на
JavaScript):&lt;/p&gt;
&lt;p class="cut"&gt;&lt;a class="h-link reference internal" href="#cut_47845264"data-toggle="collapse"&gt;посмотреть исходный код&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_47845264"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-nn"&gt;random&lt;/span&gt;


&lt;span class="pgcss-c"&gt;# base names&lt;/span&gt;
&lt;span class="pgcss-n"&gt;abc&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;hello&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;world&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;uniform&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;planet&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;earth&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
        &lt;span class="pgcss-s"&gt;&amp;#39;moon&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;alpha&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;mars&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;persei&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;columb&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
        &lt;span class="pgcss-s"&gt;&amp;#39;vavilon&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;venera&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;odin&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;cuala&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;generator&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
        &lt;span class="pgcss-s"&gt;&amp;#39;vivek&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;vivian&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;crematoria&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;luisiana&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;orlean&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
        &lt;span class="pgcss-s"&gt;&amp;#39;belarus&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;bebomoro&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;badaboom&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;centurion&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
        &lt;span class="pgcss-s"&gt;&amp;#39;caesar&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;jaconda&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;zergus&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;yakee&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;kevlar&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
        &lt;span class="pgcss-s"&gt;&amp;#39;koala&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;melancolia&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;tansilit&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;peanut&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
        &lt;span class="pgcss-s"&gt;&amp;#39;plastic&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;neon&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;reactor&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;fractal&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;
&lt;span class="pgcss-c"&gt;# for the special part&lt;/span&gt;
&lt;span class="pgcss-n"&gt;postfix&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;I&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;II&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;III&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;IV&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;V&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;VI&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;VII&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;VIII&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;IX&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
            &lt;span class="pgcss-s"&gt;&amp;#39;X&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;Omega&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;7&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;13&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;AMP&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;K&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;L3&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;AR7&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;
&lt;span class="pgcss-c"&gt;# for fun, special part I, II ... is too boring :-/&lt;/span&gt;
&lt;span class="pgcss-n"&gt;suffixes&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;te&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;op&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;-ni&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;li&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;cla&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;-4&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;

&lt;span class="pgcss-n"&gt;vowel&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;aeiouy&amp;#39;&lt;/span&gt;

&lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;is_good&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;name&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
    &lt;span class="pgcss-c"&gt;# length of the planet name is more than 3 and name has at leat one vowel letter&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-nb"&gt;len&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;name&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="pgcss-mi"&gt;3&lt;/span&gt; &lt;span class="pgcss-ow"&gt;and&lt;/span&gt; &lt;span class="pgcss-nb"&gt;any&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;alp&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-n"&gt;name&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-p"&gt;:]&lt;/span&gt; &lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-n"&gt;alp&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-n"&gt;vowel&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

&lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;gen_planet&lt;/span&gt;&lt;span class="pgcss-p"&gt;():&lt;/span&gt;
    &lt;span class="pgcss-c"&gt;# noname&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;name&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;&amp;#39;&lt;/span&gt;

    &lt;span class="pgcss-c"&gt;# 40% names will be with special part (&amp;quot;fix of the tail&amp;quot;)&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;random&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;random&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pgcss-mf"&gt;0.6&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;add&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39; &amp;#39;&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt; &lt;span class="pgcss-n"&gt;random&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;choice&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;postfix&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
        &lt;span class="pgcss-c"&gt;# 12% will be with special suffix&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;random&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;random&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="pgcss-mf"&gt;0.3&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
            &lt;span class="pgcss-c"&gt;# choose from suffixes&amp;#39; list&lt;/span&gt;
            &lt;span class="pgcss-n"&gt;suffix&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;random&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;choice&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;suffixes&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
            &lt;span class="pgcss-c"&gt;# determine start cutting position of the suffix&lt;/span&gt;
            &lt;span class="pgcss-c"&gt;# make upper case and add to postfix&lt;/span&gt;
            &lt;span class="pgcss-n"&gt;from_p&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;random&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;randrange&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-mi"&gt;0&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-nb"&gt;len&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;suffix&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;
            &lt;span class="pgcss-n"&gt;suffix&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;suffix&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-n"&gt;from_p&lt;/span&gt;&lt;span class="pgcss-p"&gt;:]&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;upper&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
            &lt;span class="pgcss-n"&gt;add&lt;/span&gt; &lt;span class="pgcss-o"&gt;+=&lt;/span&gt; &lt;span class="pgcss-n"&gt;suffix&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;else&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
        &lt;span class="pgcss-c"&gt;# no need add something&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;add&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;&amp;#39;&lt;/span&gt;

    &lt;span class="pgcss-c"&gt;# try to find good name of the planet&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;while&lt;/span&gt; &lt;span class="pgcss-ow"&gt;not&lt;/span&gt; &lt;span class="pgcss-n"&gt;is_good&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;name&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
        &lt;span class="pgcss-c"&gt;# choose two names from the dictionary for mixing&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;first&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;random&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;choice&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;abc&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;second&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;random&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;choice&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;abc&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
        &lt;span class="pgcss-c"&gt;# first (but is not whole, at least without last symbol)&lt;/span&gt;
        &lt;span class="pgcss-c"&gt;# plus&lt;/span&gt;
        &lt;span class="pgcss-c"&gt;# second (but is not whole, at leat without leading symbol)&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;name&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;first&lt;/span&gt;&lt;span class="pgcss-p"&gt;[:&lt;/span&gt;&lt;span class="pgcss-n"&gt;random&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;randrange&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-mi"&gt;0&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-nb"&gt;len&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;first&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;-&lt;/span&gt; &lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-p"&gt;)]&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt; &lt;span class="pgcss-n"&gt;second&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-n"&gt;random&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;randrange&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-nb"&gt;len&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;second&lt;/span&gt;&lt;span class="pgcss-p"&gt;)):])&lt;/span&gt;

        &lt;span class="pgcss-c"&gt;# make list from string for vowel checkings and random shuffle&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;lst_name&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nb"&gt;list&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;name&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

        &lt;span class="pgcss-c"&gt;# only 15% of the words will be shuffled&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;random&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;random&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="pgcss-mf"&gt;0.15&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
            &lt;span class="pgcss-n"&gt;random&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;shuffle&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;lst_name&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

        &lt;span class="pgcss-c"&gt;# non vowel counter&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;non_v&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-mi"&gt;0&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;i&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-mi"&gt;0&lt;/span&gt;
        &lt;span class="pgcss-c"&gt;# don&amp;#39;t make names more than 15 characters length&lt;/span&gt;
        &lt;span class="pgcss-c"&gt;# but try to insert vowels&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;while&lt;/span&gt; &lt;span class="pgcss-n"&gt;i&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="pgcss-nb"&gt;len&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;lst_name&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-ow"&gt;and&lt;/span&gt; &lt;span class="pgcss-nb"&gt;len&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;lst_name&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="pgcss-mi"&gt;15&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
            &lt;span class="pgcss-c"&gt;# found vowel and it&amp;#39;s nice&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;lst_name&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-n"&gt;i&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-n"&gt;vowel&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;non_v&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-mi"&gt;0&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;else&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;non_v&lt;/span&gt; &lt;span class="pgcss-o"&gt;+=&lt;/span&gt; &lt;span class="pgcss-mi"&gt;1&lt;/span&gt;
            &lt;span class="pgcss-c"&gt;# two non vowel letters is not nice, it&amp;#39;s time for insert operation&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;non_v&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pgcss-mi"&gt;2&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;lst_name&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;insert&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;i&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;random&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;choice&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;vowel&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;
                &lt;span class="pgcss-c"&gt;# one additional letter is in the list now&lt;/span&gt;
                &lt;span class="pgcss-c"&gt;# gotta go to the next letter and clear counter&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;non_v&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-mi"&gt;0&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;i&lt;/span&gt; &lt;span class="pgcss-o"&gt;+=&lt;/span&gt; &lt;span class="pgcss-mi"&gt;1&lt;/span&gt;
            &lt;span class="pgcss-n"&gt;i&lt;/span&gt; &lt;span class="pgcss-o"&gt;+=&lt;/span&gt; &lt;span class="pgcss-mi"&gt;1&lt;/span&gt;

        &lt;span class="pgcss-c"&gt;# make string name from the temporary list&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;name&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;join&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;lst_name&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

    &lt;span class="pgcss-c"&gt;# first letter will be capital and after suffix (space + postfix + suffix)&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-n"&gt;name&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;capitalize&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt; &lt;span class="pgcss-n"&gt;add&lt;/span&gt;

&lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-n"&gt;_&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-nb"&gt;xrange&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-mi"&gt;50&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;print&lt;/span&gt; &lt;span class="pgcss-n"&gt;gen_planet&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Пример из 50 названий планет, которые сгенерировал скрипт (он
старается напичкать гласными слова, умеет перемешивать буквы и старается
не делать слишком длинных или коротких слов, а для заумности добавляет
некоторые суффиксы, типа как &lt;strong&gt;Babylon V&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Fracto 1&lt;/li&gt;
&lt;li&gt;Vavit XI&lt;/li&gt;
&lt;li&gt;Yake&lt;/li&gt;
&lt;li&gt;Ream IV&lt;/li&gt;
&lt;li&gt;Lul&lt;/li&gt;
&lt;li&gt;Kos AMP&lt;/li&gt;
&lt;li&gt;Bebe IVOP&lt;/li&gt;
&lt;li&gt;Vivio&lt;/li&gt;
&lt;li&gt;Kea&lt;/li&gt;
&lt;li&gt;Vivs&lt;/li&gt;
&lt;li&gt;Plire&lt;/li&gt;
&lt;li&gt;Jacone&lt;/li&gt;
&lt;/ul&gt;
&lt;p class="cut"&gt;&lt;a class="h-link reference internal" href="#cut_30399056"data-toggle="collapse"&gt;хочу ещё!&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_30399056"&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Caesc&lt;/li&gt;
&lt;li&gt;Pei&lt;/li&gt;
&lt;li&gt;Caec IILI&lt;/li&gt;
&lt;li&gt;Generam I&lt;/li&gt;
&lt;li&gt;Melancol&lt;/li&gt;
&lt;li&gt;Bha&lt;/li&gt;
&lt;li&gt;Melr 1E&lt;/li&gt;
&lt;li&gt;Fras IIIOP&lt;/li&gt;
&lt;li&gt;Iufnilo&lt;/li&gt;
&lt;li&gt;Luisa&lt;/li&gt;
&lt;li&gt;Fracta&lt;/li&gt;
&lt;li&gt;Orlyl&lt;/li&gt;
&lt;li&gt;Amlycoelan L3&lt;/li&gt;
&lt;li&gt;Cun X&lt;/li&gt;
&lt;li&gt;Bela 13P&lt;/li&gt;
&lt;li&gt;Cae VLI&lt;/li&gt;
&lt;li&gt;Frig VIII&lt;/li&gt;
&lt;li&gt;Plastel IVOP&lt;/li&gt;
&lt;li&gt;Vavie&lt;/li&gt;
&lt;li&gt;Avavi IXI&lt;/li&gt;
&lt;li&gt;Jacone VI&lt;/li&gt;
&lt;li&gt;Cenn&lt;/li&gt;
&lt;li&gt;Aei X&lt;/li&gt;
&lt;li&gt;Plaso VII&lt;/li&gt;
&lt;li&gt;Plyd L3-4&lt;/li&gt;
&lt;li&gt;Belan&lt;/li&gt;
&lt;li&gt;Luisiai&lt;/li&gt;
&lt;li&gt;Fracto Omega&lt;/li&gt;
&lt;li&gt;Melanr&lt;/li&gt;
&lt;li&gt;Luisiai&lt;/li&gt;
&lt;li&gt;Tano 7&lt;/li&gt;
&lt;li&gt;Belare&lt;/li&gt;
&lt;li&gt;Bae IV&lt;/li&gt;
&lt;li&gt;Wort&lt;/li&gt;
&lt;li&gt;Plana&lt;/li&gt;
&lt;li&gt;Tap VIITE&lt;/li&gt;
&lt;li&gt;Ala AR7&lt;/li&gt;
&lt;li&gt;Fractu&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</summary><category term="планета"></category><category term="название"></category><category term="скрипт"></category><category term="python"></category><category term="генератор"></category><category term="пример"></category></entry><entry><title>Параметры контраста</title><link href="/posts/2010/09/04/parametry-kontrasta/" rel="alternate"></link><updated>2010-09-04T22:02:58+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-09-04:posts/2010/09/04/parametry-kontrasta/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Чтобы не забыть :) Для себя отмечаю, что использовал яркость -30 и
контраст +60, для данных изображений, а то рисовал ручкой, а вышло как
карандашом, хотя картинки, которые сделал фотиком смотрятся ярко. А вот
сканер на работе не ахти :-/.&lt;/p&gt;
</summary><category term="параметры"></category><category term="Я"></category><category term="памятка"></category><category term="изображение"></category></entry><entry><title>Caught me</title><link href="/posts/2010/09/04/caught-me/" rel="alternate"></link><updated>2010-09-04T22:00:37+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-09-04:posts/2010/09/04/caught-me/</id><summary type="html">&lt;p&gt;Осталось сегодня немного времени после настройки сервера и я это
время выделил на дописывание задания с PyWeek. За сегодня сделал:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;система диалогов (движение вперёд, назад), связь родитель-потомок&lt;/li&gt;
&lt;li&gt;основное игровое поле&lt;/li&gt;
&lt;li&gt;заметил pygame.Rect, который очень сильно поможет&lt;/li&gt;
&lt;li&gt;система событий с callback-ами&lt;/li&gt;
&lt;li&gt;вывод через Layer систему множества спрайтов&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Мне нужно ещё 5-6 часиков свободного времени и я её допишу (ещё
нужно хорошее настроение и чтобы голова не болела, а то последнее время
частые головные боли достали):&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/258536/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4901/imdagger.8/0_3f1e8_3fa77a10_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="Я"></category><category term="pyweek"></category><category term="доработка"></category></entry><entry><title></title><link href="/posts/2010/09/01/urn:ya.ru:post/22199227/1102/" rel="alternate"></link><updated>2010-09-01T23:12:17+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-09-01:posts/2010/09/01/urn:ya.ru:post/22199227/1102/</id><summary type="html">&lt;p&gt;git push origin my-mind # mm :)&lt;/p&gt;
</summary></entry><entry><title>mediaItems на MySpace</title><link href="/posts/2010/08/30/mediaitems-na-myspace/" rel="alternate"></link><updated>2010-08-30T23:20:49+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-08-30:posts/2010/08/30/mediaitems-na-myspace/</id><summary type="html">&lt;p&gt;Разобрался сегодня как сделать так, чтобы mediaItems появились
наконец в activity. Оказалось это список словарей, которые содержат ключ
msMediaItemUri. В документации об этом лишь вскользь сказано (одна
строчка в замечаниях, и как использовать не указано). Для работы я
использую библиотеку opensocial для Python.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-nn"&gt;opensocial&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;opensocial&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;ContainerContext&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;
   &lt;span class="pgcss-n"&gt;opensocial&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;lib&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;ContainerConfig&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;
     &lt;span class="pgcss-n"&gt;oauth_consumer_key&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;http://www.myspace.com/number&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
     &lt;span class="pgcss-n"&gt;oauth_consumer_secret&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;mysecretkey&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
     &lt;span class="pgcss-n"&gt;server_rest_base&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;http://opensocial.myspace.com/1.0/&amp;#39;&lt;/span&gt;
   &lt;span class="pgcss-p"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-p"&gt;)&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;new_activity&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;userid&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
   &lt;span class="pgcss-n"&gt;params&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-p"&gt;{&lt;/span&gt;
     &lt;span class="pgcss-s"&gt;&amp;#39;titleId&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;myTemplateName&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
     &lt;span class="pgcss-s"&gt;&amp;#39;externalId&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;myExternalId&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
     &lt;span class="pgcss-s"&gt;&amp;#39;id&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;myspace.com.activity.-1&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
     &lt;span class="pgcss-s"&gt;&amp;#39;title&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;osapi test activity at&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
     &lt;span class="pgcss-s"&gt;&amp;#39;body&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;osapi test activity body&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
     &lt;span class="pgcss-s"&gt;&amp;#39;templateParams&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-p"&gt;{&lt;/span&gt;
       &lt;span class="pgcss-s"&gt;&amp;#39;msParameters&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-p"&gt;[&lt;/span&gt;
         &lt;span class="pgcss-p"&gt;{&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;key&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;param_name&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;value&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;param_value&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;},&lt;/span&gt;
       &lt;span class="pgcss-p"&gt;],&lt;/span&gt;
     &lt;span class="pgcss-p"&gt;},&lt;/span&gt;
     &lt;span class="pgcss-s"&gt;&amp;#39;mediaItems&amp;#39;&lt;/span&gt; &lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-p"&gt;[&lt;/span&gt;
       &lt;span class="pgcss-p"&gt;{&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;msMediaItemUri&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;some_myspace_url_with_image&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;},&lt;/span&gt;
     &lt;span class="pgcss-p"&gt;],&lt;/span&gt;
   &lt;span class="pgcss-p"&gt;}&lt;/span&gt;
&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Странно, что при постинге символа кавычка &lt;code class="code"&gt;
'&lt;/code&gt;
, MySpace реагирует очень
странно и два раза обрабатывает этот символ, сначала сделает &lt;code class="code"&gt;
'&lt;/code&gt;
 как
положено, но затем &amp;amp; снова разворачивается в &lt;code class="code"&gt;
&amp;amp;amp;&lt;/code&gt;
 Это мне доставляет
огромную головную боль. Не знаю пока, что делать.&lt;/p&gt;
</summary><category term="Я"></category><category term="mediaItems"></category><category term="myspace"></category><category term="работа"></category></entry><entry><title></title><link href="/posts/2010/08/28/urn:ya.ru:post/22199227/1096/" rel="alternate"></link><updated>2010-08-28T23:31:02+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-08-28:posts/2010/08/28/urn:ya.ru:post/22199227/1096/</id><summary type="html">&lt;p&gt;Снова дома&lt;/p&gt;
</summary></entry><entry><title>Уже не успею</title><link href="/posts/2010/08/28/uzhe-ne-uspeiu/" rel="alternate"></link><updated>2010-08-28T23:21:49+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-08-28:posts/2010/08/28/uzhe-ne-uspeiu/</id><summary type="html">&lt;p&gt;Слишком много времени я истратил в командировке. У меня было очень
мало кода и я чуть успел сделать графику сегодня. И уже пора идти домой.
Так что придётся просто доделать игру и выложить, но на pyweek не
попадаю, ну да ладно всё равно врядли бы я одержал победу :/&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/253252/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/5104/imdagger.7/0_3dd44_510bcb1e_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;Это тюрьма:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/253253/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/4804/imdagger.7/0_3dd45_f3630c8f_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;Это отдельно окна для картинки:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/253254/"&gt;&lt;img alt="image2" src="http://img-fotki.yandex.ru/get/4604/imdagger.7/0_3dd46_bbd4e9af_L" title="image2"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;Разбитые окна, когда преступник вылазит:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/253255/"&gt;&lt;img alt="image3" src="http://img-fotki.yandex.ru/get/4600/imdagger.8/0_3dd47_8e232d89_L" title="image3"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;А это два вида преступников :)&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/253256/"&gt;&lt;img alt="image4" src="http://img-fotki.yandex.ru/get/4508/imdagger.8/0_3dd48_2a4fba2b_L" title="image4"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;Есть ещё преступники на парашютах :)&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/253257/"&gt;&lt;img alt="image5" src="http://img-fotki.yandex.ru/get/4506/imdagger.8/0_3dd49_e0e8535a_L" title="image5"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="Я"></category><category term="неудачник"></category></entry><entry><title>Идеи к конкурсу</title><link href="/posts/2010/08/26/idei-k-konkursu/" rel="alternate"></link><updated>2010-08-26T03:13:15+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-08-26:posts/2010/08/26/idei-k-konkursu/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Устроили мозговой штурм с &lt;strong&gt;ILmaRin&lt;/strong&gt;, она предложила множество
идей, я в основном только их обрабатывал или отфильтровывал, т.к. после
работы я никакущий на фантазию, т.к. все силы растратил на создание
других игр по работе. Я подрасчитал, что я уже много дней конкурса
профукал и делать нужно нечто очень простое, чтобы банально успеть.
Поэтому появился вариант с кликами по заключнным сбегающим из тюрьмы.
Достаточно просто будет, нужно только сделать забавный стиль :/.&lt;/p&gt;
</summary><category term="Я"></category><category term="игра"></category><category term="конкурс"></category><category term="python"></category></entry><entry><title>Первые усилия</title><link href="/posts/2010/08/25/pervye-usiliia/" rel="alternate"></link><updated>2010-08-25T03:35:30+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-08-25:posts/2010/08/25/pervye-usiliia/</id><summary type="html">&lt;p&gt;Немного времени потратил на общение и успел только сделать и
продумать сегодня небольшой класс для подсистемы событий. Хотелось,
чтобы можно было бы просто устанавливать обработчики, который могут
влиять друг на друга.&lt;/p&gt;
</summary><category term="Я"></category><category term="pyweek"></category><category term="python"></category></entry><entry><title>Как проходит PyWeek?</title><link href="/posts/2010/08/25/kak-prokhodit-pyweek/" rel="alternate"></link><updated>2010-08-25T00:26:23+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-08-25:posts/2010/08/25/kak-prokhodit-pyweek/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Плохо, что я был так загружен работой и делами, что только сегодня
начал думать над темой и реализацией :( Попробую сегодня набросать меню
и всякие мелочи и продумать простую и быструю идею, чтобы я успел
уложиться в срок.&lt;/p&gt;
</summary><category term="Я"></category><category term="игра"></category><category term="pyweek"></category><category term="конкурс"></category><category term="python"></category></entry><entry><title>В инете</title><link href="/posts/2010/08/22/v-inete/" rel="alternate"></link><updated>2010-08-22T21:18:50+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-08-22:posts/2010/08/22/v-inete/</id><summary type="html">&lt;p&gt;Хорошо, что добрый ресторанчик снизу любезно предоставил нам бесплатный
Wifi интернет. Мне только не хватает столика, хм.. может стоит пойти на
кухню в интернет :) Но вдруг там соединение меньше, тут у меня хоть 45%.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/249518/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/5401/imdagger.7/0_3ceae_a91f38a6_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="Я"></category><category term="интернет"></category><category term="Минск"></category><category term="wifi"></category><category term="работа"></category></entry><entry><title></title><link href="/posts/2010/08/22/urn:ya.ru:post/22199227/1084/" rel="alternate"></link><updated>2010-08-22T20:54:53+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-08-22:posts/2010/08/22/urn:ya.ru:post/22199227/1084/</id><summary type="html">&lt;p&gt;Уже в Минске&lt;/p&gt;
</summary></entry><entry><title>Ура завтра PyWeek!</title><link href="/posts/2010/08/21/ura-zavtra-pyweek/" rel="alternate"></link><updated>2010-08-21T17:33:00+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-08-21:posts/2010/08/21/ura-zavtra-pyweek/</id><summary type="html">&lt;p&gt;Интересно, какую тему выберут … я то знаю за какие темы и как я
голосовал. Нужно как-то умудриться узнать тему прямо в поезде в поездке
и начать уже трудиться прямо завтра в командировке. Врядли я одержу
какую-либо победу на PyWeek, но море фана я себе гарантирую, хотя
придётся всё время после работы просидеть дома в Минске :) но оно того
стоит.&lt;/p&gt;
</summary><category term="Я"></category><category term="pyweek"></category><category term="участие"></category><category term="конкурс"></category></entry><entry><title></title><link href="/posts/2010/08/20/urn:ya.ru:post/22199227/1079/" rel="alternate"></link><updated>2010-08-20T13:11:56+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-08-20:posts/2010/08/20/urn:ya.ru:post/22199227/1079/</id><summary type="html">&lt;p&gt;Принимайте, какой я есть :/ Вот такой&lt;/p&gt;
</summary></entry><entry><title></title><link href="/posts/2010/08/19/urn:ya.ru:post/22199227/1078/" rel="alternate"></link><updated>2010-08-19T21:39:30+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-08-19:posts/2010/08/19/urn:ya.ru:post/22199227/1078/</id><summary type="html">&lt;p&gt;Не верь, не бойся, не проси&lt;/p&gt;
</summary></entry><entry><title>Цаца</title><link href="/posts/2010/08/19/tsatsa/" rel="alternate"></link><updated>2010-08-19T21:38:29+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-08-19:posts/2010/08/19/tsatsa/</id><summary type="html">&lt;p&gt;Хорошая штучка у меня появилась, чтобы я не скучал в дороге, правда
на клавиатуре нет русских букв, хотя я не ощущаю неудобств, т.к. у меня
дома нет букв тоже на ней, &lt;strong&gt;вообще нет&lt;/strong&gt;!! Linux установился на неё без
проблем и запинок, 3D подхватилось сразу из коробки. Сейчас ставлю всё
нужное на него ля работы. Немного непривычен размер кнопок, т.к. в
основном я работаю на стационаре. Радуют её два ядра. для рендеринга
будет хорошо. Вот сие чудо Sony VAIO:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/248698/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/5400/imdagger.7/0_3cb7a_19403f2_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="работа"></category><category term="ноутбук"></category></entry><entry><title>Богомол</title><link href="/posts/2010/08/17/bogomol/" rel="alternate"></link><updated>2010-08-17T11:08:39+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-08-17:posts/2010/08/17/bogomol/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/248036"&gt;&lt;img alt="alim1744.jpg" src="http://img-fotki.yandex.ru/get/4804/imdagger.7/0_3c8e4_573bf0d3_L" title="alim1744.jpg"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/248037"&gt;&lt;img alt="Заголовок" src="http://img-fotki.yandex.ru/get/5404/imdagger.7/0_3c8e5_e88bf06f_L" title="Заголовок"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/248038"&gt;&lt;img alt="Заголовок" src="http://img-fotki.yandex.ru/get/5408/imdagger.7/0_3c8e6_7bbb2b02_L" title="Заголовок"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/248039"&gt;&lt;img alt="Заголовок" src="http://img-fotki.yandex.ru/get/5407/imdagger.7/0_3c8e7_7aeb2d0b_L" title="Заголовок"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Обожаю всех животинок на Земле!&lt;/p&gt;</summary><category term="насекомое"></category><category term="богомол"></category></entry><entry><title>Apache и LDAP</title><link href="/posts/2010/08/15/apache-i-ldap/" rel="alternate"></link><updated>2010-08-15T20:11:48+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-08-15:posts/2010/08/15/apache-i-ldap/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Часть дня промучался с тем, что пытался сделать NTLM авторизацию для
Apache. Попробовал mod_ntlm, mod_ntlm_auth_winbind, порпобовал
версии с патчами mod_ntlm (т.к. оригинальный слишком стар), но всё это
не сильно помогло. Там какая-то проблема, что в запросе от Apache в
user, password и domain значения NULL. Я не стал дальше мучаться, т.к.
мне подходит вариант с авторизацией и через LDAP, благо AD на Samba4
работает.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;lt;Location ~ “/control/*” &amp;gt;&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; AuthName “Auth to control center”&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; AuthType Basic&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; AuthBasicProvider ldap&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; AuthLDAPURL &amp;quot;&lt;a class="reference external" href="ldap://"&gt;ldap://&lt;/a&gt;&lt;strong&gt;сервер&lt;/strong&gt;:389/OU=**Особая
группа**,OU=&lt;strong&gt;ещё&lt;/strong&gt;,DC=GRL,DC=unibel,DC=by?&lt;strong&gt;sAMAccountName&lt;/strong&gt;&amp;quot;&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; AuthzLDAPAuthoritative on&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; AuthLDAPBindDN &amp;quot;CN=**Специальный но простой
пользователь**,OU=&lt;strong&gt;ещё&lt;/strong&gt;,OU=&lt;strong&gt;ещё&lt;/strong&gt;,DC=grl,DC=unibel,DC=by&amp;quot;&lt;/p&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; AuthLDAPBindPassword &lt;strong&gt;пароль&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Require valid-user&lt;/div&gt;
&lt;div class="line"&gt;&amp;lt;/Location&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Снова меня подстерегали проблемы. Сначала я забыл ввести имя
пользователя в кавычках, т.к. оно у меня содержало пробел. Затем я
вспомнил, что нужно после сервер:389/ добавить узел, в котором будет
произведёт поиск пользователя. потом я обнаружил, что нужно добавить
sAMAccountName в категорию поиска, т.к. мне же хочется вводить логин в
окошко, а не весь путь в LDAP дереве.&lt;/p&gt;
</summary><category term="apache"></category><category term="работа"></category><category term="ldap"></category><category term="авторизация"></category></entry><entry><title></title><link href="/posts/2010/08/14/urn:ya.ru:post/22199227/1060/" rel="alternate"></link><updated>2010-08-14T21:08:20+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-08-14:posts/2010/08/14/urn:ya.ru:post/22199227/1060/</id><summary type="html">&lt;p&gt;Всё будет ok.&lt;/p&gt;
</summary></entry><entry><title>Создал пользователей</title><link href="/posts/2010/08/14/sozdal-polzovatelei/" rel="alternate"></link><updated>2010-08-14T21:07:54+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-08-14:posts/2010/08/14/sozdal-polzovatelei/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Наконец я создал пользователей, обошёл ошибку LDAP 53 в Samba,
оказалось, что я забыл опыт предыдущего года и не создал группы для 2010
года. И пытался заливать пользователей в группы, который нет. Ещё
сегодня хватило желания и сил сделать синхронизацию времени на двух
серверах и с внешним миром, теперь время не должно так сильно плясать, а
то на одном из серверов часы плохо работают, а по нему синхронизируются
компы простых смертных.&lt;/p&gt;
</summary><category term="samba4"></category><category term="Я"></category><category term="время"></category><category term="пользователи"></category><category term="работа"></category></entry><entry><title>Futurama</title><link href="/posts/2010/08/12/futurama-S6E7/" rel="alternate"></link><updated>2010-08-12T22:00:57+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-08-12:posts/2010/08/12/futurama-S6E7/</id><summary type="html">&lt;p&gt;Futurama 6 сезон, 7 серия. Оригинальное решение парадокса путешествия
во времени, долго смеялся с этой серии и песенка понравилась про
времена.&lt;/p&gt;
</summary><category term="отдых"></category><category term="забавно"></category><category term="мультфильм"></category></entry><entry><title>Подсчёт</title><link href="/posts/2010/08/09/podschiot/" rel="alternate"></link><updated>2010-08-09T23:09:45+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-08-09:posts/2010/08/09/podschiot/</id><summary type="html">&lt;p&gt;Хорошо, когда павлины правильно считаются и добавляются на ранчо.
Нужно сделать ещё один рывок и портировать до конца эту фичу:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/245423/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/5402/imdagger.7/0_3beaf_f9172ef8_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="google"></category><category term="павлин"></category><category term="коллекции"></category><category term="slide"></category><category term="Я"></category><category term="работа"></category></entry><entry><title>Резервное копирование</title><link href="/posts/2010/08/08/rezervnoe-kopirovanie/" rel="alternate"></link><updated>2010-08-08T20:21:14+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-08-08:posts/2010/08/08/rezervnoe-kopirovanie/</id><summary type="html">&lt;p&gt;Завёл Bacula, было достаточно просто, благо мануалов на русском
навалом. Возникла только проблема с соединением частей, но нужно быть
просто внимательным и вводить правильные пароли.&lt;/p&gt;
</summary><category term="bacula"></category><category term="резервное"></category><category term="копирование"></category></entry><entry><title></title><link href="/posts/2010/08/08/urn:ya.ru:post/22199227/1055/" rel="alternate"></link><updated>2010-08-08T15:19:18+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-08-08:posts/2010/08/08/urn:ya.ru:post/22199227/1055/</id><summary type="html">&lt;p&gt;0xD9FEE666&lt;/p&gt;
</summary></entry><entry><title>Нарушенная Samba4</title><link href="/posts/2010/08/08/narushennaia-samba4/" rel="alternate"></link><updated>2010-08-08T15:12:42+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-08-08:posts/2010/08/08/narushennaia-samba4/</id><summary type="html">&lt;p&gt;Ни с того ни с сего сдохла Samba4. Но перестала работать по
особенному, что дало мне время подумать и спокойно решить проблему.
Хорошо, что проблема выявилась быстро, нужно было ввести машину в домен,
а получили отказ. Взглянув в логи я чуть не поседел:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;[Wed Aug 4 11:23:07 2010 EEST, 0
lib/ldb_wrap.c:66:ldb_wrap_debug()]&lt;/div&gt;
&lt;div class="line"&gt;ldb: ltdb: tdb(/opt/private/users.ldb): tdb_rec_read bad magic
&lt;strong&gt;0xd9fee666&lt;/strong&gt; at offset=42488496&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Я понял, что база пользователей нарушена, а там же 70 мегов инфы.
Решил отложить разборки на выходные, благо авторизация работала и база
была испорчена не фатально, не работала только запись в базу и чтение
некоторых разделов базы.&lt;/p&gt;
&lt;p&gt;У меня был бэкап только месячной давности, но он очень помог (все
никак руки не дойдут на этом полигонном сервере сделать резервное
копирование). Сосредоточив мысли и успокоив себя, что всё не так уж и
плохо я стал препарировать пациента. В первую очередь сделал копию того,
что есть! И отметил, что она corrupted.&lt;/p&gt;
&lt;p&gt;Затем я взглянул, что там за запись по адресу 42488496, я посмотрел
в бэкапе и в текущей базе, благо не сильно много менялось. И обнаружил,
что в бэкапе пару 16-байтных страниц вперёд от данного адреса 0x99 0x19
0x01 0x26 (т.е. 0x26011999), а в испорченном users.ldb запись не такая,
но похожая с 0x66 0xE6 0xFE 0xD9 (0xD9FEE666). И я вдруг заметил
некоторую связь: &lt;strong&gt;(0x26011999 + 0xD9FEE666 + 1) = 0&lt;/strong&gt;. Круто подумал я,
ведь получается, что одно число &lt;strong&gt;A&lt;/strong&gt;, а другое &lt;strong&gt;not(A)&lt;/strong&gt;. Я исправил
только этих 4 байта, на правильные. Затем мне помогла утилита ldbedit из
поставки Samba4: я запускал &lt;code class="code"&gt;
ldbedit -H лалала/users _copy.ldb&lt;/code&gt;
, оно мне
назвало адрес и снова говорило, что magic неверный. Я правил и так ещё
пару раз. В конце-концов всё открылось. Я перезаписал users.ldb
исправленной версией users_copy.ldb и всё заработало снова.&lt;/p&gt;
&lt;p&gt;P.S. /me ушёл заводить систему резервного копирования (эти базы стоит
раз в день сохранять).&lt;/p&gt;
</summary><category term="ошибка"></category><category term="исправление"></category><category term="радость"></category><category term="работает"></category><category term="samba4"></category><category term="Я"></category><category term="повезло"></category><category term="работа"></category></entry><entry><title>Теперь в Google</title><link href="/posts/2010/08/07/teper-v-google/" rel="alternate"></link><updated>2010-08-07T13:28:55+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-08-07:posts/2010/08/07/teper-v-google/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Информация о покупке официально подтверждена в
&lt;a class="reference external" href="http://googleblog.blogspot.com/2010/08/google-and-slide-building-more-social.html"&gt;блоге&lt;/a&gt;
Google и на сайте фирмы, где я &lt;a class="reference external" href="http://slide.com"&gt;работаю&lt;/a&gt;. Надеюсь,
что если и будут изменения, то они будут в положительную сторону и мы
приобретём дополнительную мощность.&lt;/p&gt;
</summary><category term="Я"></category><category term="работа"></category><category term="google"></category></entry><entry><title>Возможно нас купят</title><link href="/posts/2010/08/05/vozmozhno-nas-kupiat/" rel="alternate"></link><updated>2010-08-05T23:16:51+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-08-05:posts/2010/08/05/vozmozhno-nas-kupiat/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Не знаю настоящая
&lt;a class="reference external" href="http://techcrunch.com/2010/08/04/google-buys-slide-for-182-million-getting-more-serious-about-social-games/"&gt;новость&lt;/a&gt;
или слухи. Надеюсь, что поглощение нас компанией Google не отразится
отрицательно на Slide. Хотя, думаю как простого программера меня не
сильно заденет.&lt;/p&gt;
</summary><category term="Я"></category><category term="google"></category><category term="slide"></category><category term="работа"></category><category term="python"></category></entry><entry><title>Павлины</title><link href="/posts/2010/08/05/pavliny/" rel="alternate"></link><updated>2010-08-05T23:12:52+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-08-05:posts/2010/08/05/pavliny/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Скоро у пользователей MySpace тоже появится возможность
коллекционировать павлинов и найти &lt;strong&gt;мистического&lt;/strong&gt;. И в этом нелёгком
деле помогут друзья. Нужно только нам поднапрячь силы по переносу кода.&lt;/p&gt;
</summary><category term="Я"></category><category term="myspace"></category><category term="работа"></category><category term="slide"></category></entry><entry><title>"Откат времени"</title><link href="/posts/2010/08/03/otkat-vremeni/" rel="alternate"></link><updated>2010-08-03T21:55:20+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-08-03:posts/2010/08/03/otkat-vremeni/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Это конечно не настоящий откат времени в BGE. И скрипт вышел не
достаточно оптимальный, я его сделал по-быстрому, но всё же забавно. Вот
выложил &lt;a class="reference external" href="http://blender3d.org.ua/forum/game/114-4.html#106"&gt;файл&lt;/a&gt; на
БУ в раздел примеров по BGE. Достаточно нажать L для проигрывания
времени в обратную сторону.&lt;/p&gt;
</summary><category term="bge"></category><category term="время"></category><category term="обратный"></category><category term="откат"></category><category term="скрипт"></category><category term="python"></category></entry><entry><title>Запись действий с объектами</title><link href="/posts/2010/08/01/zapis-deistvii-s-obektami/" rel="alternate"></link><updated>2010-08-01T21:10:57+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-08-01:posts/2010/08/01/zapis-deistvii-s-obektami/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Сделал небольшой скрипт для примера, который записывает позиции и
вращение объектов со свойством &lt;strong&gt;ipo&lt;/strong&gt; и сериализует все данные в файлы
с названиями объектов + суффикс Ipo. Выложил его на форуме БУ &lt;a class="reference external" href="http://blender3d.org.ua/forum/game/45-558.html#8959"&gt;(ссылка
на мой пост)&lt;/a&gt;.
Скрипт не полностью оптимален и вызывается постоянно, но можно
регулировать его и через Delay сенсоры и другие.&lt;/p&gt;
</summary><category term="python"></category><category term="bge"></category><category term="запись"></category><category term="ipo"></category></entry><entry><title></title><link href="/posts/2010/08/01/urn:ya.ru:post/22199227/1048/" rel="alternate"></link><updated>2010-08-01T14:29:40+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-08-01:posts/2010/08/01/urn:ya.ru:post/22199227/1048/</id><summary type="html">&lt;p&gt;Есть, спать, есть и спать.&lt;/p&gt;
</summary></entry><entry><title>Доделывание старых работ</title><link href="/posts/2010/08/01/dodelyvanie-starykh-rabot/" rel="alternate"></link><updated>2010-08-01T14:24:56+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-08-01:posts/2010/08/01/dodelyvanie-starykh-rabot/</id><summary type="html">&lt;p&gt;Иногда есть врем и желание доделать старую работу, которую взялся
давно создавать. Решил добавить эльфу полный скелет, чуть исправить лицо
и живот. На вопрос почему он такой получился есть несколько ответов:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Да, возможно он принимал экстази и его плющит&lt;/li&gt;
&lt;li&gt;Да, возможно у него было много сложных боёв, ему всё сломали, а
срослось как получилось&lt;/li&gt;
&lt;li&gt;Да! Возможно он вступил в го…родской мусор и удивлён этим
обстоятельством&lt;/li&gt;
&lt;/ul&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/242020/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4800/imdagger.7/0_3b164_df0abf36_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="набросок"></category><category term="blender"></category><category term="риггинг"></category><category term="эльф"></category><category term="80"></category><category term="уровни"></category></entry><entry><title></title><link href="/posts/2010/07/30/urn:ya.ru:post/22199227/1046/" rel="alternate"></link><updated>2010-07-30T21:26:57+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-07-30:posts/2010/07/30/urn:ya.ru:post/22199227/1046/</id><summary type="html">&lt;p&gt;Праздную&lt;/p&gt;
</summary></entry><entry><title>Сокровища</title><link href="/posts/2010/07/28/sokrovishcha/" rel="alternate"></link><updated>2010-07-28T22:14:09+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-07-28:posts/2010/07/28/sokrovishcha/</id><summary type="html">&lt;p&gt;Ура! Сегодня у пользователей на MySpace появилась возможность копать
клады на ранчо. Нужно лишь чаще заходить на ранчо и иметь побольше
друзей, чтобы суметь выкопать клад за 3 дня. Хорошо, что оно заработало
без существенных проблем.&lt;/p&gt;
</summary><category term="Я"></category><category term="myspace"></category><category term="работа"></category><category term="клад"></category></entry><entry><title>Флэш</title><link href="/posts/2010/07/27/flesh/" rel="alternate"></link><updated>2010-07-27T21:00:41+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-07-27:posts/2010/07/27/flesh/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Как бы параметры из одного swf в другой, который загружен первым и
при этом не через параметры GET-запроса, чтобы можно было свободно
производить кеширование :-/ Есть пока пару идей, но они мне не нравятся.&lt;/p&gt;
</summary><category term="параметры"></category><category term="Я"></category><category term="flash"></category><category term="работа"></category></entry><entry><title>Как раз про меня</title><link href="/posts/2010/07/25/kak-raz-pro-menia/" rel="alternate"></link><updated>2010-07-25T20:30:07+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-07-25:posts/2010/07/25/kak-raz-pro-menia/</id><summary type="html">&lt;div class="line-block"&gt;
&lt;div class="line"&gt;Мне это до боли знакомо:&lt;/div&gt;
&lt;div class="line"&gt;xxx: Что такое отпуск?&lt;/div&gt;
&lt;div class="line"&gt;yyy: это когда можно опоздать на работу и за это ничего не будет.&lt;/div&gt;
&lt;/div&gt;
</summary><category term="Я"></category><category term="работа"></category><category term="смешно"></category></entry><entry><title></title><link href="/posts/2010/07/25/urn:ya.ru:post/22199227/1037/" rel="alternate"></link><updated>2010-07-25T13:28:05+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-07-25:posts/2010/07/25/urn:ya.ru:post/22199227/1037/</id><summary type="html">&lt;p&gt;Ужасно грустно :(&lt;/p&gt;
</summary></entry><entry><title>Реализация Няшки</title><link href="/posts/2010/07/24/realizatsiia-niashki/" rel="alternate"></link><updated>2010-07-24T19:27:53+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-07-24:posts/2010/07/24/realizatsiia-niashki/</id><summary type="html">&lt;p&gt;На мех сил у меня не хватило, я его не проработал. Да и давно я не
моделил, а искусством меха не владел, не успел ещё научиться. Вот что за
пару часов я успел сделать:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/237774/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4801/imdagger.7/0_3a0ce_80a2c4f_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Котёнок Няшка говорит: “Няяяя!”&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Процесс создания:&lt;/strong&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/237775/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/4802/imdagger.7/0_3a0cf_396260b8_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;Тут у Няшки скелет пока управляет только усами&lt;/p&gt;
&lt;p class="cut text-center"&gt;&lt;a class="h-link reference internal" data-toggle="collapse" href="#cut_46266768"&gt;ещё чуть процесса создания под катом&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_46266768"&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/237776/"&gt;&lt;img alt="image2" src="http://img-fotki.yandex.ru/get/5403/imdagger.7/0_3a0d0_87eb8ae1_L" title="image2"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;Няшка даже в режиме редактирования няшная :)&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/237777/"&gt;&lt;img alt="image3" src="http://img-fotki.yandex.ru/get/4801/imdagger.7/0_3a0d1_898348_L" title="image3"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;А тут виден хвост&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/237778/"&gt;&lt;img alt="image4" src="http://img-fotki.yandex.ru/get/5402/imdagger.7/0_3a0d2_13aaf4cc_L" title="image4"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;Забыл отдельный материал сделать для ушек&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/237779/"&gt;&lt;img alt="image5" src="http://img-fotki.yandex.ru/get/5403/imdagger.7/0_3a0d3_92907978_L" title="image5"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;Соединил кости с телом через модификатор, т.к. это намного лучше, оно
хорошо тогда работает с Mirror&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/237780/"&gt;&lt;img alt="image6" src="http://img-fotki.yandex.ru/get/4801/imdagger.7/0_3a0d4_806f4d2_L" title="image6"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;Вид сбоку&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/237781/"&gt;&lt;img alt="image7" src="http://img-fotki.yandex.ru/get/5103/imdagger.7/0_3a0d5_f5b7bec6_L" title="image7"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;Добавил землю, на которой сидит на подушке Няшка&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/237782/"&gt;&lt;img alt="image8" src="http://img-fotki.yandex.ru/get/4803/imdagger.7/0_3a0d6_21750dbd_L" title="image8"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;Добавил частицы меха&lt;/p&gt;
&lt;/div&gt;</summary><category term="blender"></category><category term="няшка"></category><category term="котёнок"></category></entry><entry><title>Футурама</title><link href="/posts/2010/07/24/futurama/" rel="alternate"></link><updated>2010-07-24T19:14:31+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-07-24:posts/2010/07/24/futurama/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Футурама!! Футурама!! Посмотрел сегодня 3-ю серию 6-ого (&lt;strong&gt;НОВОГО&lt;/strong&gt;)
сезона. Стиль мультсериала сохранился, что меня как поклонника сильно
радует. Хотя по первой серии я подумал, что они могут поменять много и
изменят, но хорошо, что создатели оставили всё как есть.&lt;/p&gt;
</summary><category term="новый"></category><category term="сезон"></category><category term="мультфильм"></category><category term="отдых"></category><category term="Futurama"></category><category term="Я"></category><category term="сериал"></category></entry><entry><title>Няшка</title><link href="/posts/2010/07/24/niashka/" rel="alternate"></link><updated>2010-07-24T19:12:23+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-07-24:posts/2010/07/24/niashka/</id><summary type="html">&lt;p&gt;Хотел сделать небольшого симпатичного котёнка, на подушечке.
Попытался набросать идею на листок. Сошёлся на позе йоги, но вот при
реализации всё вышло немного не так, но в целом идею передал надеюсь. Я
хотел сделать акцент на глаза :)&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/237773/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4800/imdagger.7/0_3a0cd_231dec48_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="котёнок"></category><category term="идеи"></category><category term="набросок"></category></entry><entry><title></title><link href="/posts/2010/07/22/urn:ya.ru:post/22199227/1033/" rel="alternate"></link><updated>2010-07-22T23:11:43+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-07-22:posts/2010/07/22/urn:ya.ru:post/22199227/1033/</id><summary type="html">&lt;p&gt;Жара!&lt;/p&gt;
</summary></entry><entry><title>Клады</title><link href="/posts/2010/07/22/klady/" rel="alternate"></link><updated>2010-07-22T23:11:07+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-07-22:posts/2010/07/22/klady/</id><summary type="html">&lt;p&gt;Ещё немного усилий и будет перенесён код для поиска на ранчо кладов
на MySpace. Недавно у пользователей появился обещанная коробка для
сувениров. Правда если бы мне кто-нибудь подсказал, как пользователи
умудряются получать бронзовую статуэтку в этот ящик. Всё равно они не
смогут её поместить на ранчо сколько бы не пытались, а вот трэйсы мне
создают и нервы портят. Вот такой же как на Facebook сундук:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/236018/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4800/imdagger.7/0_399f2_18fa6108_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="Я"></category><category term="ранчо"></category><category term="myspace"></category><category term="работа"></category></entry><entry><title>Я снова дома</title><link href="/posts/2010/07/19/ia-snova-doma/" rel="alternate"></link><updated>2010-07-19T22:53:35+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-07-19:posts/2010/07/19/ia-snova-doma/</id><summary type="html">&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/235304/"&gt;&lt;img alt="На Красной площади" src="http://img-fotki.yandex.ru/get/5400/imdagger.7/0_39728_85aae32d_L" title="На Красной площади"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/235304/"&gt;На Красной площади&lt;/a&gt;&lt;/p&gt;</summary><category term="Я"></category><category term="Москва"></category><category term="площадь"></category></entry><entry><title></title><link href="/posts/2010/07/16/urn:ya.ru:post/22199227/1029/" rel="alternate"></link><updated>2010-07-16T19:26:43+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-07-16:posts/2010/07/16/urn:ya.ru:post/22199227/1029/</id><summary type="html">&lt;p&gt;Собраться&lt;/p&gt;
</summary></entry><entry><title>Исправление</title><link href="/posts/2010/07/15/ispravlenie/" rel="alternate"></link><updated>2010-07-15T23:08:33+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-07-15:posts/2010/07/15/ispravlenie/</id><summary type="html">&lt;p&gt;Сегодня первый раз столкнулся с тем, что фиксил отломанное другими в
мастер-ветке. Ещё такого напряжения не испытывал, т.к. нужно всё
исправить как следует, чтобы не развалилось на ходу, а я пока человек с
небольшим опытом.&lt;/p&gt;
</summary><category term="напряжение"></category><category term="Я"></category><category term="работа"></category><category term="исправление"></category></entry><entry><title>Фаза тестирования</title><link href="/posts/2010/07/14/faza-testirovaniia/" rel="alternate"></link><updated>2010-07-14T23:30:07+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-07-14:posts/2010/07/14/faza-testirovaniia/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Никак не покину фазу тестирования. Исправил сегодня один тикет,
открылось два. Завтра просмотрю всё что я наваял и сделаю так, чтобы
больше тикетов не появилось. А то странно, что мне нужен один класс
объектов, а прогрузился другой, который в таблице проецирования не
указан и соответственно для него AMF генерируется, как для простого
Object.&lt;/p&gt;
</summary><category term="Я"></category><category term="проблема"></category><category term="работа"></category><category term="ошибка"></category></entry><entry><title>Скоро появится</title><link href="/posts/2010/07/13/skoro-poiavitsia/" rel="alternate"></link><updated>2010-07-13T22:46:59+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-07-13:posts/2010/07/13/skoro-poiavitsia/</id><summary type="html">&lt;p&gt;Скоро у игроков на MySpace появится такая же возможность, как и у
игроков на Facebook поместить найденное животное в коробку с сувенирами,
если нет пока места на ранчо. Осталось совсем немного, проверят
портированный код и фича будет введена в строй.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/228513/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3417/imdagger.7/0_37ca1_ecd733d6_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="facebook"></category><category term="myspace"></category><category term="работа"></category></entry><entry><title></title><link href="/posts/2010/07/11/urn:ya.ru:post/22199227/1023/" rel="alternate"></link><updated>2010-07-11T21:37:44+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-07-11:posts/2010/07/11/urn:ya.ru:post/22199227/1023/</id><summary type="html">&lt;p&gt;Перестройка нейронов&lt;/p&gt;
</summary></entry><entry><title>Туториал</title><link href="/posts/2010/07/11/tutorial/" rel="alternate"></link><updated>2010-07-11T21:36:54+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-07-11:posts/2010/07/11/tutorial/</id><summary type="html">&lt;p&gt;Забавно проходить туториал сразу в реальном времени. Эффективнее, чем
просто читать книжку, но конечно же не замена.&lt;/p&gt;
</summary><category term="erlang"></category><category term="туториал"></category><category term="программирование"></category></entry><entry><title>Коржик для Леськи</title><link href="/posts/2010/07/10/korzhik-dlia-leski/" rel="alternate"></link><updated>2010-07-10T16:55:29+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-07-10:posts/2010/07/10/korzhik-dlia-leski/</id><summary type="html">&lt;p&gt;Держи &lt;a class="reference external" href="http://loukat.ya.ru/"&gt;Леська Lou~katze&lt;/a&gt; модифицированного Коржика :)&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/227577/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/2814/imdagger.7/0_378f9_bf738849_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="радость"></category><category term="забавно"></category><category term="фейк"></category><category term="изображение"></category></entry><entry><title>Флеш</title><link href="/posts/2010/07/08/i-am-weak-flasher/" rel="alternate"></link><updated>2010-07-08T22:08:41+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-07-08:posts/2010/07/08/i-am-weak-flasher/</id><summary type="html">&lt;p&gt;Я осознал, что пока флешер из меня слабый. Делать-то я делаю, но
мееееедленноооо….&lt;/p&gt;
</summary><category term="Я"></category><category term="мысли"></category></entry><entry><title>Успешный день</title><link href="/posts/2010/07/07/uspeshnyi-den/" rel="alternate"></link><updated>2010-07-07T22:54:02+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-07-07:posts/2010/07/07/uspeshnyi-den/</id><summary type="html">&lt;p&gt;Сегодня день прошёл напряжённо, но успешно. Проблемы с кодом
решились к концу дня. Нужно нам ещё приложить усилия и в ранчо на
MySpace будет такая же фишка как уже есть на Facebook. Ине забыть
глянуть, где я прописал показывать всегда 10 для коробки с сувенирами, а
то уже впопыхах забыл. Я даже сегодня успел в тренажёрный зал сходить и
размяться, если бы не напарник не знаю сколько бы я возился.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/227015/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/51/imdagger.7/0_376c7_59c1a0f2_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;div class="alert alert-warning text-center compound"&gt;
&lt;p&gt;© Все права на изображение принадлежат Slide.com&lt;/p&gt;
&lt;/div&gt;</summary><category term="Я"></category><category term="myspace"></category><category term="работа"></category></entry><entry><title>Печально</title><link href="/posts/2010/07/05/pechalno/" rel="alternate"></link><updated>2010-07-05T23:19:36+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-07-05:posts/2010/07/05/pechalno/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Последнее время стал замечать, что мало времени осталось на
творческие процессы. В основном: ем, программирую, качаюсь и сплю. Нужно
как-то сократить свой сон :-/.&lt;/p&gt;
</summary><category term="Я"></category><category term="жизнь"></category><category term="печаль"></category></entry><entry><title></title><link href="/posts/2010/07/04/urn:ya.ru:post/22199227/1017/" rel="alternate"></link><updated>2010-07-04T19:19:41+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-07-04:posts/2010/07/04/urn:ya.ru:post/22199227/1017/</id><summary type="html">&lt;p&gt;Взрыв мозга от Samba4&lt;/p&gt;
</summary></entry><entry><title>Яндекс.Почта бета</title><link href="/posts/2010/07/03/iandekspochta-beta/" rel="alternate"></link><updated>2010-07-03T10:43:07+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-07-03:posts/2010/07/03/iandekspochta-beta/</id><summary type="html">&lt;p&gt;Являюсь бета-тестером новой почты от Яндекса. Пока всё устраивает,
единственное, что упал контраст сообщений и фона. Вроде только на теме с
оттенками серого удалось добиться приемлемого контраста, но мне нравится
зелёная :) Нужно или дать пользователю возможность подрегулировать
контраст или подправить его.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/224782/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/52/imdagger.7/0_36e0e_360b0efa_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="почта"></category><category term="тест"></category><category term="Яндекс"></category><category term="бета"></category></entry><entry><title>Понедельник</title><link href="/posts/2010/06/28/ponedelnik/" rel="alternate"></link><updated>2010-06-28T22:14:58+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-06-28:posts/2010/06/28/ponedelnik/</id><summary type="html">&lt;p&gt;Трудно в понедельник вспоминать, что исправлял в пятницу :-/ А ещё
труднее, если что-то пошло не так.&lt;/p&gt;
</summary><category term="Я"></category><category term="бредни"></category></entry><entry><title></title><link href="/posts/2010/06/27/urn:ya.ru:post/22199227/1014/" rel="alternate"></link><updated>2010-06-27T20:57:54+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-06-27:posts/2010/06/27/urn:ya.ru:post/22199227/1014/</id><summary type="html">&lt;p&gt;Перезагрузка мозга&lt;/p&gt;
</summary></entry><entry><title>Разобрался с MySpace</title><link href="/posts/2010/06/26/razobralsia-s-myspace/" rel="alternate"></link><updated>2010-06-26T21:24:17+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-06-26:posts/2010/06/26/razobralsia-s-myspace/</id><summary type="html">&lt;p&gt;Не совсем понял почему именно MySpace сбрасывал appParams в false
(но в пятницу я его поборол), но ему явно не нравились данные, которые я
хотел передать глубоко в мой iframe. Возможно ему не понравились всякие
&amp;#64;, -, $ в параметре, код был написан ещё до меня. Но передача параметров
в JSON помогла, я передал их как &lt;code class="code"&gt;
appParams={&amp;quot;key0&amp;quot;: &amp;quot;value0&amp;quot;, &amp;quot;key1&amp;quot;:
&amp;quot;value1&amp;quot;}&lt;/code&gt;
 в URL и всё пошло по маслу.&lt;/p&gt;
</summary><category term="Я"></category><category term="myspace"></category><category term="работа"></category></entry><entry><title></title><link href="/posts/2010/06/26/urn:ya.ru:post/22199227/1012/" rel="alternate"></link><updated>2010-06-26T20:31:52+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-06-26:posts/2010/06/26/urn:ya.ru:post/22199227/1012/</id><summary type="html">&lt;p&gt;Фак! Я пропустил ICFPC-2010, я думал он будет чуть позже как в 2009 году
:'-( :'-(&lt;/p&gt;
</summary></entry><entry><title>Java 4-ever</title><link href="/posts/2010/06/26/java-4-ever/" rel="alternate"></link><updated>2010-06-26T19:34:50+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-06-26:posts/2010/06/26/java-4-ever/</id><summary type="html">&lt;p&gt;Порадовал промо-ролик про Java с JavaZone 2010 с
&lt;a class="reference external" href="http://jz10.java.no/java-4-ever-trailer.html"&gt;http://jz10.java.no/java-4-ever-trailer.html&lt;/a&gt;&lt;/p&gt;
</summary><category term="java"></category><category term="ролик"></category></entry><entry><title>Поздравляю Яндекс.Почту</title><link href="/posts/2010/06/26/pozdravliaiu-iandekspochtu/" rel="alternate"></link><updated>2010-06-26T11:51:56+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-06-26:posts/2010/06/26/pozdravliaiu-iandekspochtu/</id><summary type="html">&lt;p&gt;Желаю быть быстрыми и вместительными ;)&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://mail.yandex.ru/promo/new/10let/"&gt;&lt;img alt="Яндекс.Почте 10 лет" src="http://mail.yandex.ru/promo/b/i/4.png" title="Яндекс.Почте 10 лет"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://mail.yandex.ru/promo/new/10let/"&gt;Я.Почта у меня 4 года&lt;/a&gt;&lt;/p&gt;</summary><category term="почта"></category><category term="Яндекс"></category><category term="день рождения"></category></entry><entry><title>Не могу понять</title><link href="/posts/2010/06/24/ne-mogu-poniat/" rel="alternate"></link><updated>2010-06-24T22:56:30+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-06-24:posts/2010/06/24/ne-mogu-poniat/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Почему-то MySpace сбрасывает параметр appParams приложения в
значение false, поэтому данные до iframe не доходят, ещё более странно,
что так происходит не во всех случаях.&lt;/p&gt;
</summary><category term="переживаю"></category><category term="работа"></category><category term="печаль"></category></entry><entry><title>Закрылки</title><link href="/posts/2010/06/22/zakrylki/" rel="alternate"></link><updated>2010-06-22T21:53:47+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-06-22:posts/2010/06/22/zakrylki/</id><summary type="html">&lt;p&gt;Добавил по-быстрому самолётику закрылки для дополнительного
управления высотой, на хвосте сделаю позднее.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/219871/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4201/imdagger.7/0_35adf_49f6ce96_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="игра"></category><category term="самолётик"></category><category term="набросок"></category></entry><entry><title>Хорошо</title><link href="/posts/2010/06/21/khorosho/" rel="alternate"></link><updated>2010-06-21T22:16:41+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-06-21:posts/2010/06/21/khorosho/</id><summary type="html">&lt;p&gt;Поработал, покачался, выпил зелёного чая с печенками, снова поработаю и
спать. Эх.. хорошо…&lt;/p&gt;
</summary><category term="Я"></category><category term="жизнь"></category></entry><entry><title>Пропеллер</title><link href="/posts/2010/06/20/propeller/" rel="alternate"></link><updated>2010-06-20T20:23:54+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-06-20:posts/2010/06/20/propeller/</id><summary type="html">&lt;p&gt;Добавил самолётику пропеллер и теперь он почти завершён :D Даже
попробовал покрутить его и вообразить, что я лечу. Главный герой
мини-игры обретает форму! Тадааам!&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/218962/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4303/imdagger.7/0_35752_a551bd43_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="мини"></category><category term="bge"></category><category term="отдых"></category><category term="blender"></category><category term="игра"></category><category term="набросок"></category></entry><entry><title></title><link href="/posts/2010/06/20/urn:ya.ru:post/22199227/986/" rel="alternate"></link><updated>2010-06-20T19:56:29+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-06-20:posts/2010/06/20/urn:ya.ru:post/22199227/986/</id><summary type="html">&lt;p&gt;Туман&lt;/p&gt;
</summary></entry><entry><title>Не знал</title><link href="/posts/2010/06/19/ne-znal/" rel="alternate"></link><updated>2010-06-19T20:23:12+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-06-19:posts/2010/06/19/ne-znal/</id><summary type="html">&lt;p&gt;До вчерашнего для не знал, что мы частично OpenSource :)&lt;/p&gt;
</summary><category term="работа"></category><category term="slide"></category></entry><entry><title>Небольшая доработка</title><link href="/posts/2010/06/19/nebolshaia-dorabotka/" rel="alternate"></link><updated>2010-06-19T14:54:15+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-06-19:posts/2010/06/19/nebolshaia-dorabotka/</id><summary type="html">&lt;p&gt;Выкроил время и ещё чуть улучшил самолётик (главный и единственный
персонаж) для мини-игры. В прошлый раз я домой пришёл и завалился спать,
а думал, что хватит сил на творческий процесс.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/216963/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4202/imdagger.7/0_34f83_f8e81287_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/216965/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/4306/imdagger.7/0_34f85_90a78a8d_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Нужно будет подумать над текстурой для него.&lt;/p&gt;</summary><category term="blender"></category><category term="игра"></category><category term="implaner"></category><category term="мини"></category><category term="изображение"></category></entry><entry><title>IMPlaner</title><link href="/posts/2010/06/17/implaner/" rel="alternate"></link><updated>2010-06-17T22:02:41+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-06-17:posts/2010/06/17/implaner/</id><summary type="html">&lt;p&gt;Начал делать модель, сделал за 10 минут. Полигонов постарался
потратить поменьше. Пойду сейчас домой, исправлю косяки (вспомню былое
:) а то уже давно не моделил никак вообще), сделаю простую логику.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/215117/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4205/imdagger.7/0_3484d_b15ff450_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="игра"></category><category term="bge"></category></entry><entry><title></title><link href="/posts/2010/06/15/urn:ya.ru:post/22199227/982/" rel="alternate"></link><updated>2010-06-15T21:34:50+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-06-15:posts/2010/06/15/urn:ya.ru:post/22199227/982/</id><summary type="html">&lt;p&gt;make -C work/&lt;/p&gt;
</summary></entry><entry><title>Концепт</title><link href="/posts/2010/06/13/kontsept/" rel="alternate"></link><updated>2010-06-13T19:04:36+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-06-13:posts/2010/06/13/kontsept/</id><summary type="html">&lt;p&gt;Вот такую я сделаю мини-игру для снятия моей депрессии: есть один
или несколько ботов, есть игрок, все управляют самолётиком, нужно сбить
противника. Выигравшим считается тот, кто больше всего набрал побед за
21 раунд. Основные пункты дизайна игры и игрового процесса:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;внизу расположено только море&lt;/li&gt;
&lt;li&gt;за границы карты вылететь нельзя&lt;/li&gt;
&lt;li&gt;игрок появляется сразу в полёте&lt;/li&gt;
&lt;li&gt;управление: вверх/вниз — руль высоты, влево/вправо —руль поворота,
пробел —ускорение, a/s — управление скоростью полёта&lt;/li&gt;
&lt;li&gt;есть базовые патроны пулемёта, они бесконечные&lt;/li&gt;
&lt;li&gt;есть звуковое предупреждение о приближающемся объекте: ракета,
самолёт&lt;/li&gt;
&lt;li&gt;при повороте, изменении высоты видно как изменяется угол закрылок&lt;/li&gt;
&lt;li&gt;вид от третьего лица&lt;/li&gt;
&lt;li&gt;в воздухе есть воображаемые кольца, через них можно пролетать в
заданном порядке и получать бонусы&lt;/li&gt;
&lt;li&gt;бонусы бывают: ускоритель, получение 1 ракеты с самонаведением, бронь&lt;/li&gt;
&lt;li&gt;у ракет короткий срок жизни&lt;/li&gt;
&lt;li&gt;ускоритель топливный, т.е. есть у него некоторый ресурс и он не
бесконечный&lt;/li&gt;
&lt;li&gt;противники и игрок имеют один тип самолётов, только разные цвета&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Набросок общей идеи самолётика:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/213785/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3909/imdagger.7/0_34319_ad02bf5a_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="мини"></category><category term="bge"></category><category term="blender"></category><category term="игра"></category><category term="идеи"></category><category term="конкурс"></category></entry><entry><title>Любовь в стиле ретро</title><link href="/posts/2010/06/12/liubov-v-stile-retro/" rel="alternate"></link><updated>2010-06-12T18:43:19+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-06-12:posts/2010/06/12/liubov-v-stile-retro/</id><summary type="html">&lt;p&gt;Надеюсь, что &lt;a class="reference external" href="http://loukat.ya.ru/"&gt;Леська Lou~katze&lt;/a&gt; простит меня, что я чуток поглумился над её фото :).
Хотя &lt;a class="reference external" href="http://tatifly.ya.ru/"&gt;=Tati=&lt;/a&gt; досталось ещё больше :), но такое я показывать не могу, там я
пересёк все рамки. Так что выкладываю мои первые шаги в GIMP… и так … «В
стиле ретро»:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/213443/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4202/imdagger.7/0_341c3_bba14b7a_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Что там за парень на фоне я не знаю :) Просто нашёл в интернете.&lt;/p&gt;</summary><category term="gimp"></category><category term="ретро"></category><category term="коллаж"></category><category term="Леська"></category><category term="фото"></category><category term="фейк"></category></entry><entry><title>Разминка</title><link href="/posts/2010/06/11/razminka/" rel="alternate"></link><updated>2010-06-11T21:55:09+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-06-11:posts/2010/06/11/razminka/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Поучаствовать чтоли в конкурсе на создание мини-игры, а то я потерял
немного вдохновение. Сделаю за пару ночей что-нибудь простенькое, а то
давно уже не сидел ночью за своей машинкой.&lt;/p&gt;
</summary><category term="blender"></category><category term="Я"></category><category term="bge"></category><category term="для души"></category></entry><entry><title></title><link href="/posts/2010/06/09/urn:ya.ru:post/22199227/966/" rel="alternate"></link><updated>2010-06-09T22:05:41+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-06-09:posts/2010/06/09/urn:ya.ru:post/22199227/966/</id><summary type="html">&lt;p&gt;Недели летят&lt;/p&gt;
</summary></entry><entry><title>Код</title><link href="/posts/2010/06/09/kod/" rel="alternate"></link><updated>2010-06-09T22:03:37+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-06-09:posts/2010/06/09/kod/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Нужно выработать для себя несколько основных правил при кодировании:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;проверять работоспособность старого кода, который даже не относится к
поставленной задаче, но пересекается с логикой поставленной задачи&lt;/li&gt;
&lt;li&gt;не доверять незнакомым функциям, если не полностью изучено их
поведение&lt;/li&gt;
&lt;li&gt;ставить проверки и принудительные преобразования типов на неизвестный
код&lt;/li&gt;
&lt;li&gt;стараться не бояться править чужой код, хотя иногда лучше создать
свою пристройку, а не ломать старый, ориентироваться на то из какого
числа точек он вызывается&lt;/li&gt;
&lt;li&gt;быть внимательным и каждый раз перед push делать diff, чтобы оценить
свежей головой, что сделано; лучше даже сделать небольшой кофе-брейк
между этими двумя процессами&lt;/li&gt;
&lt;/ul&gt;
</summary><category term="Я"></category><category term="работа"></category><category term="python"></category></entry><entry><title>Странная мысль</title><link href="/posts/2010/06/07/strannaia-mysl/" rel="alternate"></link><updated>2010-06-07T20:48:24+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-06-07:posts/2010/06/07/strannaia-mysl/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Я только недавно задумался, что у меня ж в Jabber-ростере сам Макс
Левчин, прикоооольно… Главное никогда не ошибиться окном и не написать
туда что-нибудь лишнее :) Нужно вписать это в свои правила, чего делать
нельзя.&lt;/p&gt;
</summary><category term="Я"></category><category term="работа"></category></entry><entry><title></title><link href="/posts/2010/06/07/urn:ya.ru:post/22199227/960/" rel="alternate"></link><updated>2010-06-07T10:36:34+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-06-07:posts/2010/06/07/urn:ya.ru:post/22199227/960/</id><summary type="html">&lt;p&gt;Diploma защищён :) 10&lt;/p&gt;
</summary></entry><entry><title>Возврат</title><link href="/posts/2010/06/05/vozvrat/" rel="alternate"></link><updated>2010-06-05T18:21:16+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-06-05:posts/2010/06/05/vozvrat/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Ура, я всё переставил обратно. Теперь машинки стоят на привычных для
них местах, мебель тоже, я себя чувствую уютно, комфортно и привычно. В
компаке тоже было хорошо, но там хватает места только на одного
человека, стол стоит высоко, клавиатура на коленях.&lt;/p&gt;
</summary><category term="Я"></category><category term="работа"></category><category term="радость"></category></entry><entry><title>Размышлизмы</title><link href="/posts/2010/06/04/razmyshlizmy/" rel="alternate"></link><updated>2010-06-04T21:42:37+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-06-04:posts/2010/06/04/razmyshlizmy/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Появилось у меня немного мыслей о собеседованиях на IT в серьёзные
конторы. Если человек хочет попасть в контору, то ему стоит задуматься
над такими пунктами (пункты появились в голове из наблюдений за другими
людьми, немного своих и немного прочитанного):&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;ещё раз подумать то ли это, чего Вам хочется&lt;/li&gt;
&lt;li&gt;на собеседовании никогда даже близко не полагать, что тот кто
собеседует интеллектуально не превышает Вас, вероятнее всего он
превышает ваши знания в десяток раз&lt;/li&gt;
&lt;li&gt;никогда не указывать в резюме те технологии, в которых плаваешь, их
обязательно подробно опросят&lt;/li&gt;
&lt;li&gt;не молчать, лучше сказать глупость, молчание намекает на отсутствие
ответа (не быть овощем!)&lt;/li&gt;
&lt;li&gt;ориентироваться на того, кто собеседует, он обычно даёт небольшие
подсказки, ведь его задача не засадить вопросами, а проверить умение
мыслить и реагировать&lt;/li&gt;
&lt;li&gt;рассказать то, что делал в последние годы, что интересно или не
интересно&lt;/li&gt;
&lt;li&gt;быть готовым, что придётся разъяснить почему одно интересно, а другое
— нет&lt;/li&gt;
&lt;li&gt;быть готовым отвечать на всевозможные социальные вопросы из разряда,
как будете работать в команде и заканчивая вопросами, как будете
отстаивать свою точку зрения в споре&lt;/li&gt;
&lt;/ul&gt;
</summary><category term="собеседование"></category><category term="мысли"></category><category term="работа"></category></entry><entry><title>Первое правило, если забыл</title><link href="/posts/2010/06/03/pervoe-pravilo-esli-zabyl/" rel="alternate"></link><updated>2010-06-03T22:00:57+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-06-03:posts/2010/06/03/pervoe-pravilo-esli-zabyl/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Если забыл что-нибудь мелкое, то первое правило гласит: «Нужно
посмотреть свои карманы». Если его выполнять, то не будете тупить как я.&lt;/p&gt;
</summary><category term="Я"></category><category term="туплю"></category><category term="жизнь"></category><category term="бредни"></category></entry><entry><title></title><link href="/posts/2010/06/02/urn:ya.ru:post/22199227/948/" rel="alternate"></link><updated>2010-06-02T11:49:35+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-06-02:posts/2010/06/02/urn:ya.ru:post/22199227/948/</id><summary type="html">&lt;p&gt;Нормально&lt;/p&gt;
</summary></entry><entry><title></title><link href="/posts/2010/06/01/urn:ya.ru:post/22199227/947/" rel="alternate"></link><updated>2010-06-01T22:01:19+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-06-01:posts/2010/06/01/urn:ya.ru:post/22199227/947/</id><summary type="html">&lt;p&gt;*** (сбито пушей :) )&lt;/p&gt;
</summary></entry><entry><title>RInetd</title><link href="/posts/2010/06/01/rinetd/" rel="alternate"></link><updated>2010-06-01T22:00:29+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-06-01:posts/2010/06/01/rinetd/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Давно пользуюсь этим демоном. Прекрасная пробрасывалка TCP-портов.
Всего-то написать IP для определения интерфейса, порт приёмник &amp;nbsp;на
сервере, внешний сервер для соединения и порт на нём. Затем не забыть
про Allow, разрешить соединяться нужным машинам, т.к. по-умолчанию всем
запрещено из соображений безопасности. Всё, TCP проброшен в другой
сервер, занавес.&lt;/p&gt;
</summary><category term="TCP"></category><category term="сервис"></category><category term="форвардинг"></category><category term="linux"></category><category term="порт"></category></entry><entry><title></title><link href="/posts/2010/05/30/urn:ya.ru:post/22199227/935/" rel="alternate"></link><updated>2010-05-30T19:30:32+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-05-30:posts/2010/05/30/urn:ya.ru:post/22199227/935/</id><summary type="html">&lt;p&gt;SOAD - Snowblind&lt;/p&gt;
</summary></entry><entry><title></title><link href="/posts/2010/05/30/urn:ya.ru:post/22199227/929/" rel="alternate"></link><updated>2010-05-30T18:17:20+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-05-30:posts/2010/05/30/urn:ya.ru:post/22199227/929/</id><summary type="html">&lt;p&gt;Сектор Газа - Туман&lt;/p&gt;
</summary></entry><entry><title>ЧП 3</title><link href="/posts/2010/05/30/chp-3/" rel="alternate"></link><updated>2010-05-30T17:48:11+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-05-30:posts/2010/05/30/chp-3/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Досмотрел Человека Паука 3 :), где-то с 3-4 захода. Все хотят убить
этого Питера Паркера, я тоже уже засомневался, а не должен ли я тоже
такого хотеть O_o.&lt;/p&gt;
</summary><category term="посмотрел"></category><category term="фильм"></category></entry><entry><title>Впечатления</title><link href="/posts/2010/05/30/vpechatleniia/" rel="alternate"></link><updated>2010-05-30T13:59:01+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-05-30:posts/2010/05/30/vpechatleniia/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Хэндгам хорошая игрушка. Мои субъективные и объективные впечатления
после месяца использования:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;скручивание и сжатие успокаивает&lt;/li&gt;
&lt;li&gt;растягивание и свободное течение забавляет&lt;/li&gt;
&lt;li&gt;прикольно укладывать в банку колечком&lt;/li&gt;
&lt;li&gt;прикольно ждать пока он растечётся по банке и станет гладким&lt;/li&gt;
&lt;li&gt;не жирный&lt;/li&gt;
&lt;li&gt;растворяется в спирте&lt;/li&gt;
&lt;li&gt;можно забавляться с ним, как с кастетом, амортизация сильная&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; Какие выявил недостатки и проблемы:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;прилип к волосам&lt;/li&gt;
&lt;li&gt;не часто приходится давать ему попрыгать, страшно, что упадёт на
грязный пол и пособирает пылинки и волосы на работе&lt;/li&gt;
&lt;li&gt;попал на одежду, растёкся, но при помощи спирта я его легко убрал&lt;/li&gt;
&lt;li&gt;все хотят его полапать :D и порвать&lt;/li&gt;
&lt;/ul&gt;
</summary><category term="использование"></category><category term="хэндгам"></category></entry><entry><title></title><link href="/posts/2010/05/29/urn:ya.ru:post/22199227/925/" rel="alternate"></link><updated>2010-05-29T14:27:26+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-05-29:posts/2010/05/29/urn:ya.ru:post/22199227/925/</id><summary type="html">&lt;p&gt;Сдал ГОСы, 10! :)&lt;/p&gt;
</summary></entry><entry><title>Встал с правой ноги</title><link href="/posts/2010/05/28/vstal-s-pravoi-nogi/" rel="alternate"></link><updated>2010-05-28T12:22:09+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-05-28:posts/2010/05/28/vstal-s-pravoi-nogi/</id><summary type="html">&lt;p&gt;Надеюсь, что этот день лучше пройдёт, чем вчерашний и
позавчерашний. Мой код запушили в лайв, больше трайсбэков не видно, всё
работает в лайве нормально. Это мой второй пуш; надеюсь, что всё будет
хорошо. Скоро сделаю третий тикет и будет мой третий пуш, можно будет
напиться сока :)&lt;/p&gt;
</summary><category term="Я"></category><category term="программирование"></category><category term="работа"></category></entry><entry><title>Накосячил</title><link href="/posts/2010/05/27/nakosiachil/" rel="alternate"></link><updated>2010-05-27T21:15:28+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-05-27:posts/2010/05/27/nakosiachil/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; У меня так могут разиться фобии :). Сначала один раз накосячить, а
потом рано утром сегодня ещё накосячить. Ну хоть один раз из этих трёх,
всё прошло нормально. У меня теперь фобии по поводу набора git push :) Я
теперь набираю только сначала git потом origin и имя ветки, и лишь после
этого слово push вставляю на законное место. Теперь стал в почте
пересматривать сообщения о пиках трэйсов, смотрю не мой ли код их
навыдавал. Думаю потихоньку успокоюсь и привыкну, когда уже всё для меня
будет привычно.&lt;/p&gt;
</summary><category term="переживаю"></category><category term="Я"></category><category term="работа"></category></entry><entry><title></title><link href="/posts/2010/05/25/urn:ya.ru:post/22199227/920/" rel="alternate"></link><updated>2010-05-25T22:00:24+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-05-25:posts/2010/05/25/urn:ya.ru:post/22199227/920/</id><summary type="html">&lt;p&gt;В бой!&lt;/p&gt;
</summary></entry><entry><title>Закат</title><link href="/posts/2010/05/24/zakat/" rel="alternate"></link><updated>2010-05-24T22:41:58+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-05-24:posts/2010/05/24/zakat/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/204301"&gt;&lt;img alt="Закат, из окна" src="http://img-fotki.yandex.ru/get/4210/imdagger.7/0_31e0d_6cc48278_L" title="Закат, из окна"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/204302"&gt;&lt;img alt="Панорамный вид из окна на закат" src="http://img-fotki.yandex.ru/get/4208/imdagger.7/0_31e0e_c7dca9b1_L" title="Панорамный вид из окна на закат"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Красивый был вид у неба. Жаль, что я не смог передать то, что видел.
Попробовал даже панорамно захватить (фотку стоит смотреть в оригинальном
размере, чтобы оценить панораму).&lt;/p&gt;</summary><category term="природа"></category><category term="фотки"></category><category term="небо"></category><category term="закат"></category></entry><entry><title>Переместил технику</title><link href="/posts/2010/05/23/peremestil-tekhniku/" rel="alternate"></link><updated>2010-05-23T21:55:57+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-05-23:posts/2010/05/23/peremestil-tekhniku/</id><summary type="html">&lt;p&gt;Подготовил всё к ремонтным работам осветительных приборов. Как-то
«не людно» здесь стало :) Зато в маленькой подсобке перенасыщение
техникой, любимый гул, жарко, что ещё для жизни надо…&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/194312/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4302/imdagger.7/0_31aa7_d04c8a7c_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="Я"></category><category term="работа"></category><category term="техника"></category><category term="убрал"></category></entry><entry><title>Мой малыш</title><link href="/posts/2010/05/22/moi-malysh/" rel="alternate"></link><updated>2010-05-22T11:44:01+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-05-22:posts/2010/05/22/moi-malysh/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/202834"&gt;&lt;img alt="ALIM1441.JPG" src="http://img-fotki.yandex.ru/get/4214/imdagger.7/0_31852_bef2140_L" title="ALIM1441.JPG"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Ну как?&lt;/p&gt;</summary><category term="маленький"></category><category term="ребёнок"></category></entry><entry><title>ПМК</title><link href="/posts/2010/05/22/pmk/" rel="alternate"></link><updated>2010-05-22T11:26:50+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-05-22:posts/2010/05/22/pmk/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Хм, почему врачи не захотели мне ответить про диагноз? Только и
спросили ставили ли мне когда-нибудь диагноз пролапс митрального
клапана. А какая степень у меня? Мне ж интересно, если у меня всего
первая — можно не беспокоиться; а вдруг больше, странно… зачем врач
спрашивала у другого несколько раз: «почему он так бысто закрывается»,
крутила вертела меня. Знаю, что раньше у меня одно предсердие росло
быстрее другого, были шумы в нём. Текущее моё состояние:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;боли в области сердца с вегетативными проявлениями — есть и бывают
сильные&lt;/li&gt;
&lt;li&gt;сердцебиение и перебои в работе сердца — бывает&lt;/li&gt;
&lt;li&gt;обмороки и предобморочные состояния — не было, только в глазах
темнеет от давления&lt;/li&gt;
&lt;li&gt;незначительное «беспричинное» повышение температуры — врядли&lt;/li&gt;
&lt;li&gt;головокружения — бывает и приятно :)&lt;/li&gt;
&lt;li&gt;чувство неполного вдоха — достаточно часто&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;/div&gt;
</summary><category term="здоровье"></category><category term="Я"></category></entry><entry><title>30 лет Pac-Man</title><link href="/posts/2010/05/21/30-let-pac-man/" rel="alternate"></link><updated>2010-05-21T19:04:02+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-05-21:posts/2010/05/21/30-let-pac-man/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Зайти на google.com. Нажать на промо-изображение. Подождать
некоторое время. Играть стрелками на клавиатуре. Наслаждайтесь, пятница,
а я вот потружусь :)&lt;/p&gt;
</summary><category term="pac-man"></category><category term="google"></category><category term="30"></category></entry><entry><title>Расчёты</title><link href="/posts/2010/05/20/raschioty/" rel="alternate"></link><updated>2010-05-20T22:13:04+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-05-20:posts/2010/05/20/raschioty/</id><summary type="html">&lt;p&gt;Придётся чуть подправить схему разбора параметров из бинарной
хромосомы. Т.к. n и k для плёнок не фиксированы множеством с конечным
числом элементов, но заданы интервалом. ГА всё равно с чем оперировать,
сам алгоритм поиска от этого не изменяется. Придётся ещё подправить
фитнесс функцию, но в целом диапазон значений даже лучше, чем
ограниченный набор. Меня ждёт жаркая ночь впереди после работы.&lt;/p&gt;
</summary><category term="алгоритм"></category><category term="генетический"></category><category term="физика"></category></entry><entry><title>Странно</title><link href="/posts/2010/05/19/delphi/" rel="alternate"></link><updated>2010-05-19T20:44:28+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-05-19:posts/2010/05/19/delphi/</id><summary type="html">&lt;p&gt;Что-то странное творится с моим здоровьем. Уже надоело ездить
проверять его в больнице :-/ А ещё я сегодня вспомнил, как в Delphi
можно объявлять динамические массивы (с чего бы это?). Объявляются как
имя_массива : &lt;strong&gt;array of&lt;/strong&gt; тип; Установка размера происходит при помощи
&lt;strong&gt;SetLength&lt;/strong&gt;(имя_массива, число_элементов).&lt;/p&gt;
</summary><category term="Я"></category><category term="жизнь"></category></entry><entry><title>Нормализация ID</title><link href="/posts/2010/05/17/normalizatsiia-id/" rel="alternate"></link><updated>2010-05-17T21:07:22+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-05-17:posts/2010/05/17/normalizatsiia-id/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Можно нормализовать и получить уникальный ID для пользователя в
OpenID без авторизации. В пакете openid.consumer.discover присутствует
функция discover, которая принимает URI OpenID пользователя. она
возвратит кортеж и двух объектов: строка с display_identifier и список
объектов класса &lt;strong&gt;OpenIDServiceEndpoint&lt;/strong&gt;. В доке 2.2.4 написано, что
оно вернёт просто один объект этого класса, но это враки :). А вот у
объекта есть свойства local_id и claimed_id, по ним и нужно
ориентироваться.&lt;/p&gt;
</summary><category term="python"></category><category term="openid"></category></entry><entry><title>Военкомат</title><link href="/posts/2010/05/17/voenkomat/" rel="alternate"></link><updated>2010-05-17T20:37:01+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-05-17:posts/2010/05/17/voenkomat/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Съездил в больницу от военкомата. Меня эта бюрократия убивает.
Получить справку на явку в больницу 17 в 10 утра, но на явку в военкомат
с результатами в 9 утра, поэтому продлить явку на 24 число, пойти в
больницу и получить последнее обследование на 26 число. Чёрт, снова
нужно продлить явку в военкомат! И зачем больнице проверять у меня всё,
если я жаловался только на сердце? Теперь тонну времени тратить на
всякие анализы, кровь свою тратить, нервы…&lt;/p&gt;
</summary><category term="Я"></category><category term="жизнь"></category></entry><entry><title>Пример использования</title><link href="/posts/2010/05/16/primer-ispolzovaniia/" rel="alternate"></link><updated>2010-05-16T21:04:11+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-05-16:posts/2010/05/16/primer-ispolzovaniia/</id><summary type="html">&lt;p&gt;Допустим приложение создано с использованием mod_python. Требуется
сделать OpenID авторизацию с AJAX интерфейсом. При работе с OpenID в
качестве клиента самыми основными функциями являются begin и complete.
Метод begin объекта класса Consumer возвращает объект класса
RequestAuth. Если OpenID сервер не обнаружен, то будет выброшено
соответствующее исключение. У объекта класса RequestAuth есть метод
redirectURL, первый параметр — имя серсива, который требует OpenID (т.е.
это мы, информация будет отображена при переходе к OpenID сервису) ,
второй — адрес возврата назад на наш сервер. Дополнительно можно
добавить параметр, чтобы различать один запрос от другого, если их
обслуживает один обработчик.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;mod_python&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;apache&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;util&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;Session&lt;/span&gt;
&lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-nn"&gt;cjson&lt;/span&gt; &lt;span class="pgcss-kn"&gt;as&lt;/span&gt; &lt;span class="pgcss-nn"&gt;json&lt;/span&gt;
&lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-nn"&gt;openid.consumer.discover&lt;/span&gt; &lt;span class="pgcss-kn"&gt;as&lt;/span&gt; &lt;span class="pgcss-nn"&gt;dsc&lt;/span&gt;
&lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-nn"&gt;openid.consumer.consumer&lt;/span&gt; &lt;span class="pgcss-kn"&gt;as&lt;/span&gt; &lt;span class="pgcss-nn"&gt;c&lt;/span&gt;
&lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-nn"&gt;openid.store.filestore&lt;/span&gt; &lt;span class="pgcss-kn"&gt;as&lt;/span&gt; &lt;span class="pgcss-nn"&gt;m&lt;/span&gt;
&lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-nn"&gt;openid.extensions.sreg&lt;/span&gt; &lt;span class="pgcss-kn"&gt;as&lt;/span&gt; &lt;span class="pgcss-nn"&gt;sreg&lt;/span&gt;

&lt;span class="pgcss-c"&gt;# пусть файловое хранилище будет, но есть и другие виды&lt;/span&gt;
&lt;span class="pgcss-n"&gt;openid_store&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;m&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;FileOpenIDStore&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;/tmp/openid/&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

&lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;some_handler&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;form&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;req&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt; &lt;span class="pgcss-c"&gt;# параметр form - это обработанные через mod_python&lt;/span&gt;
    &lt;span class="pgcss-c"&gt;# параметры GET и POST, req — запрос от mod_python&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;req&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;content_type&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;application/json&amp;#39;&lt;/span&gt; &lt;span class="pgcss-c"&gt;# данные JSON&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;answer&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-p"&gt;{}&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;status&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;TRYAUTH&amp;#39;&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;thesession&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;Session&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;Session&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;req&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;auth&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;c&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;Consumer&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;thesession&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;openid_store&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

    &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-o"&gt;...&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-c"&gt;# проверка какой это заход&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;try&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
            &lt;span class="pgcss-n"&gt;response&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;auth&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;begin&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;userid&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
            &lt;span class="pgcss-c"&gt;# нужны дополнительно: почта, имя, полное имя, пол&lt;/span&gt;
            &lt;span class="pgcss-n"&gt;response&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;addExtension&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;sreg&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;SRegRequest&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;
                    &lt;span class="pgcss-n"&gt;required&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;email&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;nickname&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;gender&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;fullname&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;]))&lt;/span&gt;
            &lt;span class="pgcss-n"&gt;return_to&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-o"&gt;...&lt;/span&gt; &lt;span class="pgcss-c"&gt;# адрес_возврата&lt;/span&gt;

            &lt;span class="pgcss-n"&gt;answer&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;endpoint&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;response&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;redirectURL&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;
                         &lt;span class="pgcss-o"&gt;...&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;return_to&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-bp"&gt;True&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-c"&gt;# тут_имя_сервера&lt;/span&gt;
            &lt;span class="pgcss-n"&gt;answer&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;redirect_to&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;response&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;redirectURL&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;
                         &lt;span class="pgcss-o"&gt;...&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;return_to&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-bp"&gt;False&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-c"&gt;# тут_имя_сервера&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;except&lt;/span&gt; &lt;span class="pgcss-n"&gt;dsc&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;DiscoveryFailure&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-c"&gt;# сервер не найден&lt;/span&gt;
            &lt;span class="pgcss-n"&gt;status&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;FAILURE&amp;#39;&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;else&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;form_info&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-o"&gt;...&lt;/span&gt; &lt;span class="pgcss-c"&gt;#form_преобразованная_в_dict&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;url&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;req&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;construct_url&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;req&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;uri&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
        &lt;span class="pgcss-c"&gt;# завершить запрос&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;response&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;auth&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;complete&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;form_info&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;url&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

        &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-nb"&gt;type&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;response&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-ow"&gt;is&lt;/span&gt; &lt;span class="pgcss-n"&gt;c&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;SuccessResponse&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
            &lt;span class="pgcss-n"&gt;status&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;SUCCESS&amp;#39;&lt;/span&gt;
            &lt;span class="pgcss-n"&gt;info&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;sreg&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;SRegResponse&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;fromSuccessResponse&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;response&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
            &lt;span class="pgcss-c"&gt;# получить поля&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;try&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;answer&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;email&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;info&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;email&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;answer&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;gender&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;info&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;gender&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;answer&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;nickname&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;info&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;nickname&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;answer&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;fullname&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;info&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;fullname&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;except&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
                &lt;span class="pgcss-k"&gt;pass&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;elif&lt;/span&gt; &lt;span class="pgcss-nb"&gt;type&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;response&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-ow"&gt;is&lt;/span&gt; &lt;span class="pgcss-n"&gt;c&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;CancelResponse&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;status&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;NO&amp;#39;&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;elif&lt;/span&gt; &lt;span class="pgcss-nb"&gt;type&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;response&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-ow"&gt;is&lt;/span&gt; &lt;span class="pgcss-n"&gt;c&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;FailureResponse&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;status&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;EPICFAIL&amp;#39;&lt;/span&gt;

    &lt;span class="pgcss-n"&gt;answer&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;status&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;status&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;req&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;write&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;json&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;encode&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;answer&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;

    &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-n"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;OK&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Модуль sreg помогает получить дополнительные данные о пользователе,
например, для регистрации ему аккаунта. Consumer требует dict-like
объекта для сессии, для этой цели подходит Session из mod_python :).
Метод redirectURL вызывается для immediate режима и для простого.
Мгновенный режим нужен для проверки в AJAX логина сразу после нажатия
кнопки авторизации.&lt;/p&gt;
&lt;p&gt;Т.к. XDR (кросс-доменные) запросы из Javascript не разрешены по
соображениям безопасности, то придётся выкручиваться через IFRAME, для
мгновенной проверки авторизации без перенаправления видимого
пользователю. В IFRAME приложение должно выводить специальный Javascript
код, который ответит хорошо всё или нет.&lt;/p&gt;
</summary><category term="python"></category><category term="openid"></category></entry><entry><title>Немножно про Python-OpenID</title><link href="/posts/2010/05/14/nemnozhno-pro-python-openid/" rel="alternate"></link><updated>2010-05-14T21:56:26+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-05-14:posts/2010/05/14/nemnozhno-pro-python-openid/</id><summary type="html">&lt;p&gt;Пока времени мало, поэтому запишу кратко:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;создать хранилище, лучше FileOpenIDStore&lt;/li&gt;
&lt;li&gt;взять сессию Session из mod_python&lt;/li&gt;
&lt;li&gt;передать сессию и хранилище в конструктор Consumer&lt;/li&gt;
&lt;li&gt;вызывать begin с идентификатором OpenID&lt;/li&gt;
&lt;li&gt;в AuthRequest объект установить через sreg модуль из python-openid
нужные для запроса параметры: почта, ник, пол и т.д.&lt;/li&gt;
&lt;li&gt;получить URL перенаправления, передав обратный свой URL&lt;/li&gt;
&lt;li&gt;отправить его пользователю&lt;/li&gt;
&lt;li&gt;пользователь придёт но обратному адресу&lt;/li&gt;
&lt;li&gt;вызвать complete функцию и получить результат ответа сервера&lt;/li&gt;
&lt;li&gt;разобрать тип ответа, т.е. SuccessResponse, CancelResponse и т.д.&lt;/li&gt;
&lt;/ul&gt;
</summary><category term="python"></category><category term="openid"></category></entry><entry><title></title><link href="/posts/2010/05/13/urn:ya.ru:post/22199227/872/" rel="alternate"></link><updated>2010-05-13T20:07:00+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-05-13:posts/2010/05/13/urn:ya.ru:post/22199227/872/</id><summary type="html">&lt;p&gt;Небольшая табличка сопоставления jQuery и YUI3.&lt;/p&gt;
</summary><category term="javascript"></category><category term="yui"></category><category term="jquery"></category></entry><entry><title>Девайс</title><link href="/posts/2010/05/11/devais/" rel="alternate"></link><updated>2010-05-11T19:00:09+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-05-11:posts/2010/05/11/devais/</id><summary type="html">&lt;p&gt;Приятно, что я могу на своём новом девайсе закинуть на рабочий стол
(а он на нём не один) виджет мирового времени, чтобы ориентироваться
сразу в нескольких местах:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/194312/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/9/imdagger.7/0_2f708_95a05901_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="время"></category><category term="kp500"></category><category term="виджет"></category></entry><entry><title>Выключил звук нажатий</title><link href="/posts/2010/05/11/vykliuchil-zvuk-nazhatii/" rel="alternate"></link><updated>2010-05-11T12:44:11+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-05-11:posts/2010/05/11/vykliuchil-zvuk-nazhatii/</id><summary type="html">&lt;p&gt;Выключил на своём LG KP500 вибро сигнал и звук и касаниях, я
почему-то искал эти настройки в профиле, а оказалось, что оно в
настройке сенсора: Настройки телефона → Настройки сенсора → Эффект
касания → Тип касания → Без эха.&lt;/p&gt;
</summary><category term="kp500"></category><category term="телефон"></category><category term="lg"></category><category term="звук"></category></entry><entry><title>Хэндгам</title><link href="/posts/2010/05/10/khendgam/" rel="alternate"></link><updated>2010-05-10T12:40:03+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-05-10:posts/2010/05/10/khendgam/</id><summary type="html">&lt;p&gt;Ура! Он прибыл ко мне из далёкой-далёкой страны :). Теперь я могу
его жмякать, крутить, рвать, собирать снова и он не липнет ни к чему
кроме себя самого. Его можно скатать в шар и ударить об стол и он
подпрыгнет. А в темноте он должен светиться ярко синим цветом.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/193727/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/8/imdagger.7/0_2f4bf_7bd1445e_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="радость"></category><category term="жизнь"></category><category term="хэндгам"></category></entry><entry><title>Посылка</title><link href="/posts/2010/05/09/posylka/" rel="alternate"></link><updated>2010-05-09T11:06:15+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-05-09:posts/2010/05/09/posylka/</id><summary type="html">&lt;p&gt;Ура. К мне наконец пришёл мой мелкий международный пакет. Я рад,
что он не потерялся где-то в далёкой стране :) Пойду после праздников
заберу.&lt;/p&gt;
</summary><category term="радость"></category><category term="посылка"></category></entry><entry><title>Копирование узла</title><link href="/posts/2010/05/07/kopirovanie-uzla/" rel="alternate"></link><updated>2010-05-07T21:16:04+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-05-07:posts/2010/05/07/kopirovanie-uzla/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Не знаю выбрал ли я нормальный способ клонировать узел в YUI3, я
почему-то сделал пока &lt;em&gt;Y.Node.create(node_for_cloning.innerHTML)&lt;/em&gt;. В
jQuery была функция clone, я её использовал, а тут что-то я либо
невнимательно смотрел, либо не туда смотрел.&lt;/p&gt;
</summary><category term="javascript"></category><category term="yui"></category><category term="клонирование"></category></entry><entry><title>Установка высоты в блоке</title><link href="/posts/2010/05/05/ustanovka-vysoty-v-bloke/" rel="alternate"></link><updated>2010-05-05T13:25:00+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-05-05:posts/2010/05/05/ustanovka-vysoty-v-bloke/</id><summary type="html">&lt;p&gt;С размышлениями, как в YUI установить высоту возникло немного
проблем. Т.к. я сначала пытался установить height, а потом только
включал &lt;code class="code"&gt;
node.setStyle(&amp;quot;display&amp;quot;, &amp;quot;inherit&amp;quot;)&lt;/code&gt;
, т.к. у меня в стиле был
прописал &lt;code class="code"&gt;
display: none;&lt;/code&gt;
 то это и вызывало неожиданную для меня реакцию
на установку высоты. Ещё удалось побороть противную рамочку вокруг
ссылки на изображение (не та, которая просто вокруг изображения), а
собственно тоненькая рамочка выделения в FF. Выключил так &lt;code class="code"&gt;
a:focus
{outline: none;}&lt;/code&gt;
. Т.е. при выделении никаких рамочек.&lt;/p&gt;
</summary><category term="javascript"></category><category term="yui"></category><category term="css"></category></entry><entry><title>Размер блока</title><link href="/posts/2010/05/03/razmer-bloka/" rel="alternate"></link><updated>2010-05-03T21:04:11+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-05-03:posts/2010/05/03/razmer-bloka/</id><summary type="html">&lt;p&gt;Что-то я затупил и порядочно времени потратил на поиск функционала,
который мне вернёт текущую высоту указанного &lt;em&gt;div&lt;/em&gt;. В библиотеке YUI
(3-ей версии) это делается так:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;node&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nx"&gt;Y&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;one&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s2"&gt;&amp;quot;#traceback&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;);&lt;/span&gt; &lt;span class="pgcss-c1"&gt;// один узел с id равным traceback&lt;/span&gt;
&lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;content_height&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nx"&gt;node&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;get&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s2"&gt;&amp;quot;region&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;).&lt;/span&gt;&lt;span class="pgcss-nx"&gt;height&lt;/span&gt;&lt;span class="pgcss-p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ещё оказалось, что нужно получения родителя не функция parent(),
как я предположил, а ancestor(). Мне стоило задуматься о слово предок
:).&lt;/p&gt;
</summary><category term="блок"></category><category term="размер"></category><category term="контейнер"></category><category term="элемент"></category><category term="yui"></category></entry><entry><title>Карта</title><link href="/posts/2010/05/01/karta/" rel="alternate"></link><updated>2010-05-01T18:48:51+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-05-01:posts/2010/05/01/karta/</id><summary type="html">&lt;p&gt;Перенёс в электронный вид карту земли мёртвых с листка. А то я чуть
не потерял листок, и он немного потрепался за несколько лет лежания.
Изображение формата A4, но я его уменьшил, чтобы было проще делать
предпросмотр. Пора уже размещать предметы на сцене, хватит кубикам
бегать по пустому полю :).&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/188674/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4211/imdagger.7/0_2e102_9fa2f970_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="проект"></category><category term="last_gateway_to_hell"></category><category term="карта"></category></entry><entry><title>Мои лёгкие</title><link href="/posts/2010/05/01/moi-liogkie/" rel="alternate"></link><updated>2010-05-01T09:27:57+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-05-01:posts/2010/05/01/moi-liogkie/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/188461"&gt;&lt;img alt="Мои лёгкие" src="http://img-fotki.yandex.ru/get/4311/imdagger.7/0_2e02d_438452b7_L" title="Мои лёгкие"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Снимок перевёрнут, т.к. плёнка не плоская, а немного выгнутая. Удобнее
было прижимать.&lt;/p&gt;</summary><category term="здоровье"></category><category term="лёгкие"></category></entry><entry><title>Новая машинка</title><link href="/posts/2010/04/29/novaia-mashinka/" rel="alternate"></link><updated>2010-04-29T18:39:41+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-29:posts/2010/04/29/novaia-mashinka/</id><summary type="html">&lt;p&gt;Под руками оказалась Madriva 2009, установил. Посмотрим как оно
себя будет вести. Думаю переустанавливать не буду. Не везде же Slackware
стоять. Обновлялся до 2010 долговато, но зато Emacs 23.1.1 в
репозиториях появился. Обнаружил, что если соединение не стабильное, то
лучше не обновляться прямо при установке, может остановится намертво.&lt;/p&gt;
</summary><category term="жизнь"></category></entry><entry><title>IPCS</title><link href="/posts/2010/04/27/ipcs/" rel="alternate"></link><updated>2010-04-27T21:56:17+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-27:posts/2010/04/27/ipcs/</id><summary type="html">&lt;p&gt;Когда запускаешь Apache в chroot случается, что заканчиваются
свободные семафоры. Но оно невнятно говорит, про &lt;strong&gt;space left on
device&lt;/strong&gt;. Можно поднять их число в /proc/sys/kernel/sem. А ещё есть
скрипт, который удаляет семафоры (нашёл в Интернет):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-k"&gt;for &lt;/span&gt;i in &lt;span class="pgcss-k"&gt;$(&lt;/span&gt;ipcs -s | grep apache | awk &lt;span class="pgcss-s1"&gt;&amp;#39;{print $2}&amp;#39;&lt;/span&gt;&lt;span class="pgcss-k"&gt;)&lt;/span&gt;; &lt;span class="pgcss-k"&gt;do &lt;/span&gt;ipcrm sem &lt;span class="pgcss-nv"&gt;$i&lt;/span&gt;; &lt;span class="pgcss-k"&gt;done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;У меня пользователь называется apache.&lt;/p&gt;
</summary><category term="chroot"></category><category term="apache"></category><category term="семафор"></category></entry><entry><title>Птичка</title><link href="/posts/2010/04/26/ptichka/" rel="alternate"></link><updated>2010-04-26T12:56:38+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-26:posts/2010/04/26/ptichka/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/187269"&gt;&lt;img alt="ALIM1417.JPG" src="http://img-fotki.yandex.ru/get/4214/imdagger.6/0_2db85_2eac3213_L" title="ALIM1417.JPG"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/187272"&gt;&lt;img alt="Заголовок" src="http://img-fotki.yandex.ru/get/10/imdagger.6/0_2db88_1f8082ab_L" title="Заголовок"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Поселилась маленькая птичка у меня на втором участке. Скоро посмотрю
птенчиков :) если не прозеваю.&lt;/p&gt;</summary><category term="природа"></category><category term="птицы"></category><category term="дерево"></category></entry><entry><title>Я вернулся</title><link href="/posts/2010/04/25/ia-vernulsia/" rel="alternate"></link><updated>2010-04-25T19:25:37+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-25:posts/2010/04/25/ia-vernulsia/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Сегодня вернулся я после работы с землёй. Ехал назад в дизеле и
поражался порой странному металитету нашего человека. Подошёл к перону
дизель, людей на пероне было многовато, я глянул через окно в вагон и
увидел, что там тоже много людей. Я понял, что ехать придётся как обычно
— на одной ноге :) (такое, серьёзно, однажды было со мной). Но
забравшись в вагон было обнаружено, что люди скопились только у краёв, а
в центре никого! O_o Чуть поднапрячься и вот я в цетре, ехал всю дорогу
свободно, а на каждой станции плотность с концов росла. Потом она
достигла максимума в тамбуре, когда всем пришлось выходить на конечной.
Почему они не продвигались в центр изначально, это загадка для меня :S.&lt;/p&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; Завтра выложу пару интересных фоток из деревни :).&lt;/div&gt;
&lt;/div&gt;
</summary><category term="бредни"></category><category term="жизнь"></category><category term="поезд"></category><category term="деревня"></category></entry><entry><title>Трёхпалая рука эльфа</title><link href="/posts/2010/04/24/triokhpalaia-ruka-elfa/" rel="alternate"></link><updated>2010-04-24T18:49:01+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-24:posts/2010/04/24/triokhpalaia-ruka-elfa/</id><summary type="html">&lt;p&gt;Сделал рендер руки, добавил кривые ногтики ему на руку. Материал
ногтей нужно будет позже подобрать.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/186542/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4210/imdagger.6/0_2d8ae_33e30ab6_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="эльф"></category><category term="рука"></category><category term="набросок"></category></entry><entry><title>Нужно спать</title><link href="/posts/2010/04/23/nuzhno-spat/" rel="alternate"></link><updated>2010-04-23T21:37:06+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-23:posts/2010/04/23/nuzhno-spat/</id><summary type="html">&lt;p&gt;Я сегодня опечатался и умудрился написать: «что это выражение,
&lt;strong&gt;совращающее&lt;/strong&gt; число», а хотел &lt;em&gt;возвращающее&lt;/em&gt;, несколько раз пытался
исправить и получалось тоже самое. Так.. всё! нужно отдыхать.&lt;/p&gt;
</summary><category term="устал"></category></entry><entry><title>Печально</title><link href="/posts/2010/04/22/sad-emacs-tramp/" rel="alternate"></link><updated>2010-04-22T19:54:48+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-22:posts/2010/04/22/sad-emacs-tramp/</id><summary type="html">&lt;p&gt;Жаль конечно, но в Emacs 23 мне так просто не удастся сделать TRAMP
режим асинхронным, т.к. он работает в том же потоке, что и основной
процесс. Меня не сильно это расстраивает, но хотелось бы, чтобы Emacs не
замораживался при сохранении на медленном соединении. Можно сделать
отложенное фоновое сохранение, но это сложновато, да и столько сил и
времени нету. Попробую подумать о выделении в TRAMP сохранения в
сопрограмму и после каждого блока данных в IO размораживать Emacs. Нужно
поковырять tramp.el. Вообще Emacs’у стоит обзавестись некой своей
библиотекой для параллельности и ещё лучше микропотоки на уровне
виртуальной машины.&lt;/p&gt;
</summary><category term="emacs"></category><category term="tramp"></category><category term="печаль"></category></entry><entry><title>Тернарный оператор</title><link href="/posts/2010/04/20/ternarnyi-operator/" rel="alternate"></link><updated>2010-04-20T20:08:18+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-20:posts/2010/04/20/ternarnyi-operator/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; В Python 2.4 нет тернарного оператора &lt;em&gt;выражение **if*&lt;/em&gt; выражение1
&lt;strong&gt;else&lt;/strong&gt; выражение2* (как в Python &amp;gt;=2.5). Я встретился в коде для 2.4 с
использованием &lt;em&gt;выражение **and*&lt;/em&gt; выражение1 &lt;strong&gt;or&lt;/strong&gt; выражение2*, про
такой способ я знаю достаточно давно и пользовался им раньше. Но мне не
понравилось его использование в контексте: &lt;em&gt;логическое_выражение
**and*&lt;/em&gt; 1 &lt;strong&gt;or&lt;/strong&gt; 0*. Мне кажется, что нагляднее использовать
&lt;strong&gt;*int*&lt;/strong&gt;(&lt;em&gt;логическое_выражение&lt;/em&gt;), если нужно True и False превратить
в 1 или 0. Я в таких случаях лучше буду использовать явное
преобразование, т.к. он нагляднее, чем логические операции и 1, 0.&lt;/p&gt;
</summary><category term="python"></category><category term="оператор"></category><category term="тернарный"></category></entry><entry><title>Emacs и Tramp</title><link href="/posts/2010/04/19/emacs-i-tramp/" rel="alternate"></link><updated>2010-04-19T21:31:58+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-19:posts/2010/04/19/emacs-i-tramp/</id><summary type="html">&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; tramp-mode в Emacs вещь конечно хорошая, помогает работать мне через
ssh с удалёнными файлами. Но вот пока мне в ней не хватает
асинхронности, хотелось бы, чтобы когда я сохраняю, то оно сначала
сохраняло локально на диск (как при автосохранении), а параллельно
асинхронно передавало на удалённый узел. И я в это время мог продолжать
смотреть исходный код и править локально. Но пока дел много других,
некогда пилу точить — пилить нужно.&lt;/p&gt;
</summary><category term="emacs"></category><category term="tramp"></category><category term="желание"></category></entry><entry><title>Почитал</title><link href="/posts/2010/04/17/pochital/" rel="alternate"></link><updated>2010-04-17T21:24:26+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-17:posts/2010/04/17/pochital/</id><summary type="html">&lt;p&gt;Сегодня почитал немного эту книжку из интереса где-то страниц 40-50
разных глав. Настроение от неё катастрофически ухудшается :(, я и не
думал что в жизни бывает столько проблем (хотя я в этой области
некоторые аспекты знал подробно из других источников):&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/183162/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/7/imdagger.6/0_2cb7a_70746c51_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="здоровье"></category><category term="справочник"></category></entry><entry><title></title><link href="/posts/2010/04/16/urn:ya.ru:post/22199227/838/" rel="alternate"></link><updated>2010-04-16T19:18:09+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-16:posts/2010/04/16/urn:ya.ru:post/22199227/838/</id><summary type="html">&lt;p&gt;Нормально&lt;/p&gt;
</summary></entry><entry><title>Текст</title><link href="/posts/2010/04/16/tekst/" rel="alternate"></link><updated>2010-04-16T19:15:57+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-16:posts/2010/04/16/tekst/</id><summary type="html">&lt;p&gt;Пожалуй этот файл редактировать не стоит :) Вырезал только саму
заставку, а лишние &lt;strong&gt;названия замазал&lt;/strong&gt;:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/179070/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/2914/imdagger.6/0_2bb7e_a62767ea_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="спойлер"></category><category term="забавно"></category><category term="текст"></category></entry><entry><title>VPN</title><link href="/posts/2010/04/16/vpn/" rel="alternate"></link><updated>2010-04-16T16:20:59+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-16:posts/2010/04/16/vpn/</id><summary type="html">&lt;p&gt;Удалось пробросить VPN через своего старичка 2.4.32-fw, пришлось
включить модули NAT и собрать с TUN. 10.12.2.162 это IP при соединении
по tun0 от OpenVPN на сервере. А машинки 10.0.0.100 и 10.0.0.14 они за
сервером, на котором запущен VPN клиент, который их отделяет от
интернета.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-c"&gt;# включить форвардинг&lt;/span&gt;
&lt;span class="pgcss-nb"&gt;echo &lt;/span&gt;1 &amp;gt;/proc/sys/net/ipv4/ip_forward
/usr/sbin/iptables -A FORWARD -s 10.0.0.100/32 -j ACCEPT
/usr/sbin/iptables -A FORWARD -s 10.0.0.14/32 -j ACCEPT
&lt;span class="pgcss-c"&gt;# компьютер 1&lt;/span&gt;
/usr/sbin/iptables -t nat -A POSTROUTING -s 10.0.0.100/32 -o tun0 -j
SNAT --to-source 10.12.2.162
&lt;span class="pgcss-c"&gt;# компьютер 2&lt;/span&gt;
/usr/sbin/iptables -t nat -A POSTROUTING -s 10.0.0.14/32 -o tun0 -j
SNAT --to-source 10.12.2.162
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Нужно ещё не забыть добавить роуты на самих машинках: &lt;code class="code"&gt;
route add
-net 10.10.0.0 netmask 255.255.0.0 gw 10.0.0.4&lt;/code&gt;
 и т.д. для других
пробрасываемых подсетей. Ещё нужно добавить на них в DNS соответствующий
сервер доступный через VPN. SNAT режим подменяет IP моей машинки на
общий, который прописан для /dev/net/tun0.&lt;/p&gt;
</summary><category term="проброс"></category><category term="forward"></category><category term="routing"></category><category term="openvpn"></category><category term="iptables"></category></entry><entry><title>Культ карго</title><link href="/posts/2010/04/15/kult-kargo/" rel="alternate"></link><updated>2010-04-15T11:16:26+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-15:posts/2010/04/15/kult-kargo/</id><summary type="html">&lt;p&gt;Наткнулся в комментариях на Хабре про него, впервые услышал про такой
культ :) Строить деревянные взлётно посадочные полосы забавно …&lt;/p&gt;
</summary><category term="культ"></category><category term="карго"></category></entry><entry><title></title><link href="/posts/2010/04/15/urn:ya.ru:post/22199227/830/" rel="alternate"></link><updated>2010-04-15T10:27:55+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-15:posts/2010/04/15/urn:ya.ru:post/22199227/830/</id><summary type="html">&lt;p&gt;Ещё один мне не помешает.&lt;/p&gt;
</summary></entry><entry><title>Кекс "Творожный"</title><link href="/posts/2010/04/14/keks-tvorozhnyi/" rel="alternate"></link><updated>2010-04-14T21:09:24+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-14:posts/2010/04/14/keks-tvorozhnyi/</id><summary type="html">&lt;blockquote&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/zhukov-nin/view/182757/"&gt;&lt;img alt="Кекс" src="http://img-fotki.yandex.ru/get/4314/zhukov-nin.20/0_2c9e5_a3580c5e_L" title="Кекс"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;dl class="docutils"&gt;
&lt;dt&gt;Рецепт:&lt;/dt&gt;
&lt;dd&gt;&lt;ul class="first last simple"&gt;
&lt;li&gt;200гр.масло сл.240гр.&lt;/li&gt;
&lt;li&gt;сахарный песок&lt;/li&gt;
&lt;li&gt;разрыхлитель&lt;/li&gt;
&lt;li&gt;творог300гр.&lt;/li&gt;
&lt;li&gt;4 яйца&lt;/li&gt;
&lt;li&gt;изюм&lt;/li&gt;
&lt;li&gt;500гр. муки&lt;/li&gt;
&lt;/ul&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;Вот в такой последовательности смешать продукты и положить в форму, выпекать 50мин. при температуре 150гр.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Нужно будет снова поготовить, а то что-то я давно себя сдобным не
баловал.&lt;/p&gt;</summary><category term="еда"></category><category term="кекс"></category></entry><entry><title></title><link href="/posts/2010/04/14/urn:ya.ru:post/22199227/824/" rel="alternate"></link><updated>2010-04-14T20:54:58+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-14:posts/2010/04/14/urn:ya.ru:post/22199227/824/</id><summary type="html">&lt;p&gt;Скоро узнаю, как быстро жить.&lt;/p&gt;
</summary></entry><entry><title>Разбор полёта</title><link href="/posts/2010/04/13/razbor-poliota/" rel="alternate"></link><updated>2010-04-13T17:33:39+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-13:posts/2010/04/13/razbor-poliota/</id><summary type="html">&lt;p&gt;Вот небольшой скрипт для записи видео из игрового режима по кардам в
изображения на диске:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;Rasterizer&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;makeScreenshot&lt;/span&gt;
&lt;span class="pgcss-n"&gt;cont&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;GameLogic&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;getCurrentController&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
&lt;span class="pgcss-n"&gt;owner&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;cont&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;owner&lt;/span&gt;

&lt;span class="pgcss-n"&gt;cur_time&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;owner&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;'timer'&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;
&lt;span class="pgcss-n"&gt;last_time&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;owner&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;'start time'&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;
&lt;span class="pgcss-n"&gt;end_time&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;owner&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;'end time'&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;

&lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;last_time&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="pgcss-n"&gt;end_time&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;try&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;cur_frame&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;GameLogic&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;cur_frame&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;except&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;cur_frame&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-mi"&gt;0&lt;/span&gt;

    &lt;span class="pgcss-n"&gt;delta&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-mi"&gt;1&lt;/span&gt; &lt;span class="pgcss-o"&gt;/&lt;/span&gt; &lt;span class="pgcss-n"&gt;owner&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;'per second'&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;image_name&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;owner&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;'path'&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt; &lt;span class="pgcss-s"&gt;'&lt;/span&gt;&lt;span class="pgcss-si"&gt;%04d&lt;/span&gt;&lt;span class="pgcss-s"&gt;'&lt;/span&gt;

    &lt;span class="pgcss-k"&gt;while&lt;/span&gt; &lt;span class="pgcss-n"&gt;cur_time&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pgcss-n"&gt;last_time&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;last_time&lt;/span&gt; &lt;span class="pgcss-o"&gt;+=&lt;/span&gt; &lt;span class="pgcss-n"&gt;delta&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;cur_frame&lt;/span&gt; &lt;span class="pgcss-o"&gt;+=&lt;/span&gt; &lt;span class="pgcss-mi"&gt;1&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;makeScreenshot&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;image_name&lt;/span&gt; &lt;span class="pgcss-o"&gt;%&lt;/span&gt; &lt;span class="pgcss-n"&gt;cur_frame&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

    &lt;span class="pgcss-n"&gt;GameLogic&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;cur_frame&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;cur_frame&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;owner&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;'start time'&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;last_time&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Скрипт нужно вызывать по событию изменения свойства таймера. Следующие
параметры доступны через свойства объекта и регулируют поведение
скрипта:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;timer — тип Timer, используется для вызова скрипта и определения
текущего времени в BGE&lt;/li&gt;
&lt;li&gt;start time — задаётся в секундах время начала съёмки видео,
используется также скриптом во внутренних целях, опираться на него
после запуска скрипта не стоит другим объектам, т.к. оно
увеличивается после начала съёмки&lt;/li&gt;
&lt;li&gt;per second — количество необходимых кадров в секунду&lt;/li&gt;
&lt;li&gt;end time — время, когда нужно остановить создание снимков экрана&lt;/li&gt;
&lt;li&gt;path — пусть, куда будут складываться снимки экрана вида:
0001.расширение .. NNNN.расширение, тип сохраняемого изображения
задаётся там, где и для рендеринга. Путь должен быть со / (или \ под
другой осью) на конце.&lt;/li&gt;
&lt;/ul&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/177837/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4209/imdagger.6/0_2b6ad_53d65419_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="cut"&gt;&lt;a class="h-link reference internal" data-toggle="collapse" href="#cut_45006544"&gt;А теперь по порядку как он работает:&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_45006544"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-c"&gt;# локальные имена быстрее многочисленных обращений к модулю&lt;/span&gt;
&lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;Rasterizer&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;makeScreenshot&lt;/span&gt;

&lt;span class="pgcss-c"&gt;# получение текущего объекта, т.к. его свойства — параметры системы&lt;/span&gt;
&lt;span class="pgcss-n"&gt;cont&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;GameLogic&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;getCurrentController&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
&lt;span class="pgcss-n"&gt;owner&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;cont&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;owner&lt;/span&gt;

&lt;span class="pgcss-c"&gt;# start time служит как время записи последнего кадра, а также стартовым временем&lt;/span&gt;
&lt;span class="pgcss-n"&gt;cur_time&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;owner&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;'timer'&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;
&lt;span class="pgcss-n"&gt;last_time&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;owner&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;'start time'&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;
&lt;span class="pgcss-n"&gt;end_time&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;owner&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;'end time'&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;


&lt;span class="pgcss-c"&gt;# если время последней съёмки не привысило допустимую верхнюю границу,&lt;/span&gt;
&lt;span class="pgcss-c"&gt;# то нужно ещё сделать кадров&lt;/span&gt;
&lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;last_time&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="pgcss-n"&gt;end_time&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
    &lt;span class="pgcss-c"&gt;# текущий кадр хранится в GameLogic.cur_frame, если он ещё не создан — произошло&lt;/span&gt;
    &lt;span class="pgcss-c"&gt;# исключение, то принять значение как 0&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;try&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;cur_frame&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;GameLogic&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;cur_frame&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;except&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;cur_frame&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-mi"&gt;0&lt;/span&gt;


    &lt;span class="pgcss-c"&gt;# приращение на один кадр расчитывается как обратное числу кадров в секунду&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;delta&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-mi"&gt;1&lt;/span&gt; &lt;span class="pgcss-o"&gt;/&lt;/span&gt; &lt;span class="pgcss-n"&gt;owner&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;'per second'&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;
    &lt;span class="pgcss-c"&gt;# шаблон для сохранения файла с изображением,&lt;/span&gt;
    &lt;span class="pgcss-c"&gt;# %04d принуждает добавлять лидирующие нули, если число &amp;lt;1000&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;image_name&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;owner&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;'path'&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt; &lt;span class="pgcss-s"&gt;'&lt;/span&gt;&lt;span class="pgcss-si"&gt;%04d&lt;/span&gt;&lt;span class="pgcss-s"&gt;'&lt;/span&gt;

    &lt;span class="pgcss-c"&gt;# если оказалось, что время создания последнего снимка экрана&lt;/span&gt;
    &lt;span class="pgcss-c"&gt;# было раньше, чем текущее время, то пора записать немного кадров&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;while&lt;/span&gt; &lt;span class="pgcss-n"&gt;cur_time&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pgcss-n"&gt;last_time&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
        &lt;span class="pgcss-c"&gt;# приращивается время последней съёмки и номер кадра&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;last_time&lt;/span&gt; &lt;span class="pgcss-o"&gt;+=&lt;/span&gt; &lt;span class="pgcss-n"&gt;delta&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;cur_frame&lt;/span&gt; &lt;span class="pgcss-o"&gt;+=&lt;/span&gt; &lt;span class="pgcss-mi"&gt;1&lt;/span&gt;
        &lt;span class="pgcss-c"&gt;# если получится, что скрипт отстал по какой-то причине, например компьтер&lt;/span&gt;
        &lt;span class="pgcss-c"&gt;# не достаточно производительный или что-то ему мешало, или на предыдущем&lt;/span&gt;
        &lt;span class="pgcss-c"&gt;# кадре работало что-то, что затормозило всё отрисовку, то при помощи этого&lt;/span&gt;
        &lt;span class="pgcss-c"&gt;# цикла он дополнит одинаковыми кадрами этот участок (лучше, чем самому&lt;/span&gt;
        &lt;span class="pgcss-c"&gt;# потом думать, где провалы скорости и вручную дополнять), также он&lt;/span&gt;
        &lt;span class="pgcss-c"&gt;# увеличит время последней съёмки и не позволит лишний раз вызывать&lt;/span&gt;
        &lt;span class="pgcss-c"&gt;# makeScreenshot в неподходящий момент, т.е. этот цикл позволяет делать&lt;/span&gt;
        &lt;span class="pgcss-c"&gt;# снимки синхронно с положенным временем&lt;/span&gt;

        &lt;span class="pgcss-c"&gt;# записывается кадр на диск, шаблон image\_name расширяется при помощи&lt;/span&gt;
        &lt;span class="pgcss-c"&gt;# cur_fame параметра (содержит номер текущего кадра)&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;makeScreenshot&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;image_name&lt;/span&gt; &lt;span class="pgcss-o"&gt;%&lt;/span&gt; &lt;span class="pgcss-n"&gt;cur_frame&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

    &lt;span class="pgcss-c"&gt;# локальные переменные быстрее работают, чем свойства, но их в конце стоит обратно&lt;/span&gt;
    &lt;span class="pgcss-c"&gt;# сохранить на места&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;GameLogic&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;cur_frame&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;cur_frame&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;owner&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;'start time'&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;last_time&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;</summary><category term="скринкастинг"></category><category term="bge"></category><category term="запись"></category><category term="изображение"></category></entry><entry><title>Ноги эльфа</title><link href="/posts/2010/04/12/nogi-elfa/" rel="alternate"></link><updated>2010-04-12T17:27:41+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-12:posts/2010/04/12/nogi-elfa/</id><summary type="html">&lt;p&gt;Спасибо Odin.13, сделанные им ступни я прикрутил к ногам моего
эльфа. А то в ступне было 10 вершин, а у меня 6 и ассиметрия. Вот так
было, когда я грязно и быстро их соединил, похоже, что эльф после
неудачной операции на ногах:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/177403/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4210/imdagger.6/0_2b4fb_31d4b801_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;После уменьшения в ступнях по совету до 6 вершин, всё успешно
соединилось и шов пропал:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/177404/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/4309/imdagger.6/0_2b4fc_bca43acc_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="эльф"></category><category term="ноги"></category><category term="набросок"></category></entry><entry><title>Яндекс.Почта и Opera</title><link href="/posts/2010/04/11/iandekspochta-i-opera/" rel="alternate"></link><updated>2010-04-11T20:33:43+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-11:posts/2010/04/11/iandekspochta-i-opera/</id><summary type="html">&lt;p&gt;Выходит, что это почта перестала дружить с моей Opera. Из-под FF
нормально отправляет.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/177026/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/6/imdagger.6/0_2b382_6c4e709c_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Говорит, что сообщение не может быть отослано. Но самое
интересное, &lt;strong&gt;что письмо реально отправляется&lt;/strong&gt;. Но эта менюшка мешает
прикреплять файлы, приходится ждать пока письмо не автосохранится в
черновик, а файлы при этом прикрепляются.&lt;/p&gt;</summary><category term="почта"></category><category term="проблема"></category><category term="opera"></category><category term="Яндекс"></category></entry><entry><title>Новый билд</title><link href="/posts/2010/04/11/novyi-bild/" rel="alternate"></link><updated>2010-04-11T20:22:04+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-11:posts/2010/04/11/novyi-bild/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Завёл себе отдельную
&amp;nbsp;&lt;a class="reference external" href="http://blender3d.org.ua/forum/game/145.html"&gt;ветку&lt;/a&gt; на форуме
BlenderУкраина. Туда буду выкладывать ссылки на билды, а сюда всякие
мысли и информацию по использованию. Второй
&lt;a class="reference external" href="http://blender3d.org.ua/forum/game/145.html#1"&gt;пост&lt;/a&gt; вообще должен
был быть про новый билд, но.. Яндекс.Народ почему-то сейчас принимает
файл так доооо..лго.. Говорит 58 минут ждать, но я сейчас столько ждать
не могу, поэтому пойду домой, а ссылку получу завтра и кину на форум
отдельным постом.&lt;/p&gt;
</summary><category term="возможности"></category><category term="bge"></category><category term="сборка"></category><category term="форум"></category></entry><entry><title>Странно</title><link href="/posts/2010/04/10/yandex-issue/" rel="alternate"></link><updated>2010-04-10T18:35:55+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-10:posts/2010/04/10/yandex-issue/</id><summary type="html">&lt;p&gt;Что-то Яндекс.Почта перестала работать. Говорит, что письмо не может
быть доставлено. Странно это всё.&lt;/p&gt;
</summary><category term="негодую"></category><category term="проблема"></category><category term="Яндекс"></category></entry><entry><title>Обработка ошибочной загрузки картинки</title><link href="/posts/2010/04/09/obrabotka-oshibochnoi-zagruzki-kartinki/" rel="alternate"></link><updated>2010-04-09T18:12:24+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-09:posts/2010/04/09/obrabotka-oshibochnoi-zagruzki-kartinki/</id><summary type="html">&lt;p&gt;До сегодняшнего для как-то не сильно задумывался над вопросом, что
если на клиентскую часть не прогрузится картинка. Как этот случай
отловить и сказать что-нибудь пользователю или подменить картинку или
заново пытаться грузить. Оказалось, что в HTML уже всё продумано за нас
:) Есть атрибут onerror, главное не onError, а то может IE не понять. Но
ещё лучше, если используешь jQuery:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;strong&gt;объект_изображение_jquery&lt;/strong&gt;.error(function() {&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; тут работаем с $(this)&lt;/div&gt;
&lt;div class="line"&gt;});&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Установит в качестве обработчика анонимную функцию, которая через
&lt;code class="code"&gt;
$(this)&lt;/code&gt;
 получит доступ к изображение, когда загрузится с ошибкой.&lt;/p&gt;
</summary><category term="загрузка"></category><category term="ошибка"></category><category term="javascript"></category><category term="изображение"></category></entry><entry><title>Решил проблему с риггингом</title><link href="/posts/2010/04/07/reshil-problemu-s-riggingom/" rel="alternate"></link><updated>2010-04-07T21:42:57+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-07:posts/2010/04/07/reshil-problemu-s-riggingom/</id><summary type="html">&lt;p&gt;Я использовал модификатор Mirror, чтобы было проще редактировать обе
половины сразу, т.к. этот способ не изменяет меш. В нём есть возможность
&lt;em&gt;Mirror VGroups&lt;/em&gt;, она включена по умолчанию и отражает все вершинные
группы с суффиксом &lt;strong&gt;.L&lt;/strong&gt; в такие же, но с суффиксом &lt;strong&gt;.R&lt;/strong&gt;. Я создал
арматуру, выставил названия костям подходящие, но получил вот такое:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/175259/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3806/imdagger.6/0_2ac9b_7994284c_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Т.е. анимация правых костей задевала вершины левой части. Я думал
думал, экспериментировал и осознавал, что возможность правильно сделать
есть, но я не понимаю как. Я обратился к справочнику по модификатору и
(о чудо!) обнаружил заметку об особенности модификатора Mirror:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;em&gt;эту я знал:&lt;/em&gt;&lt;/div&gt;
&lt;div class="line"&gt;First, the vertex groups you want to mirror must be named following
the usual left/right pattern (i.e. suffixed by something like “.R”,
“.right”, “.L”, etc…).&lt;/div&gt;
&lt;div class="line"&gt;&lt;em&gt;а вот то, что нужно самому создать пустые .R вершинные группы
забыл:&lt;/em&gt;&lt;/div&gt;
&lt;div class="line"&gt;&lt;strong&gt;Next, you must have the “mirrored” groups already existing (i.e.
same names suffixed by the “other side”) and completely empty (no
vertex assigned to it), else it won’t work…&lt;/strong&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;После добавки пустых вершинных групп всё заработало, как я и ожидал:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/175261/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/4307/imdagger.6/0_2ac9d_a98a32d6_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/175262/"&gt;&lt;img alt="image2" src="http://img-fotki.yandex.ru/get/3806/imdagger.6/0_2ac9e_88216c5f_L" title="image2"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="mirror"></category><category term="арматура"></category><category term="анимация"></category><category term="риггинг"></category></entry><entry><title></title><link href="/posts/2010/04/06/urn:ya.ru:post/22199227/800/" rel="alternate"></link><updated>2010-04-06T16:42:41+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-06:posts/2010/04/06/urn:ya.ru:post/22199227/800/</id><summary type="html">&lt;p&gt;Управился, можно и отдохнуть чуть-чуть&lt;/p&gt;
</summary></entry><entry><title>Не забывать</title><link href="/posts/2010/04/06/ne-zabyvat/" rel="alternate"></link><updated>2010-04-06T16:40:30+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-06:posts/2010/04/06/ne-zabyvat/</id><summary type="html">&lt;p&gt;Под действием веществ недавнего контакта с низкоуровневыми языками
чуть-чуть было временно искажено восприятие данных. Я проверял Django
формы на правильность и собирал их в список invalid_forms, если они
неправильные. Но если этот список был пустым, то нужно было создать
новые пустые формы и поместить в список forms. При этом, если
invalid_forms не пустой, то нужно его передать как forms, но не
наполнять лишними данными. Я написал как-то так:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;тут наполняем invalid_forms&lt;/div&gt;
&lt;div class="line"&gt;&lt;strong&gt;forms = invalid_forms&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;тут проверка forms и работа с ним&lt;/div&gt;
&lt;div class="line"&gt;тут отображение forms&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;А потом я смотрел десяток минут красными глазами на код и думал,
почему когда правится forms, то и invalid_forms тоже. Заменил на
копирование объектов:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;тут наполняем invalid_forms&lt;/div&gt;
&lt;div class="line"&gt;forms = []&lt;/div&gt;
&lt;div class="line"&gt;&lt;strong&gt;forms[:] = invalid_forms # копирование только данных&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;тут проверка forms и работа с ним&lt;/div&gt;
&lt;div class="line"&gt;тут отображение forms&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Поэтому голова всегда должны быть трезвой и понимать, что
копирование в Python — копирование ссылки.&lt;/p&gt;
</summary><category term="python"></category></entry><entry><title>Minimock</title><link href="/posts/2010/04/04/minimock/" rel="alternate"></link><updated>2010-04-04T19:37:56+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-04:posts/2010/04/04/minimock/</id><summary type="html">&lt;p&gt;Взял эту небольшую библиотеку прямо из pyFacebook, она с ним шла,
новую версию не стал качать. Но GAE очень не любит инструкцию print,
т.к. он её результат выдаёт не в лог, а прямо ответом клиенту и
прерывает вывод. Я так долго не мог понять почему GAEUnit не хочет
запускать мой тест, когда вызывает функцию с &lt;code class="code"&gt;
require _login()&lt;/code&gt;
, которая
использует мой Mock объект (я ей подсунул). Подправил minimock.py: убрал
print и заменил на logging.info и всё заработало!&lt;/p&gt;
</summary><category term="python"></category><category term="Mock"></category><category term="GAE"></category></entry><entry><title>Первые шаги</title><link href="/posts/2010/04/03/pervye-shagi/" rel="alternate"></link><updated>2010-04-03T17:16:31+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-03:posts/2010/04/03/pervye-shagi/</id><summary type="html">&lt;p&gt;Ура. Моё тестовое приложение уже сегодня заработало частично (я его
только сегодня начал делать и знакомится с миром объединения серверов).
Теперь осталось наделать форм проверки, почитать ещё FBML-документацию и
всё что задумано реализовать. Чтобы не заливать на GAE проект на ранней
стадии (чтобы было удобнее тестировать) я запустил его у себя и указал в
Facebook свой статический IP. Сперва прокололся на том, что забыл, что
Facebook посылает POST запрос, а не GET. От этого была ошибка 405.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/170597/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4309/imdagger.6/0_29a65_8cfdd1f9_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="python"></category><category term="facebook"></category></entry><entry><title>Они меня любят</title><link href="/posts/2010/04/03/oni-menia-liubiat/" rel="alternate"></link><updated>2010-04-03T08:24:22+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-03:posts/2010/04/03/oni-menia-liubiat/</id><summary type="html">&lt;p&gt;Они такие мягенькие и гладкие. Лапки у них немного грязные, но не
сильно, чище чем, если бы человек голыми ступнями походил по земле.
Когда клюют, то совсем не чувствуешь, делают это нежно.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/170543/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3803/imdagger.6/0_29a2f_25ef4764_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="любовь"></category><category term="Я"></category><category term="голуби"></category><category term="птицы"></category></entry><entry><title>Освежил знания</title><link href="/posts/2010/04/02/osvezhil-znaniia/" rel="alternate"></link><updated>2010-04-02T21:18:45+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-02:posts/2010/04/02/osvezhil-znaniia/</id><summary type="html">&lt;p&gt;Скачал GAE, с ним поставляется подходящая версия Django. Создал
проект для GAE, подпроект для Django, запустил и оп.. ничего. Посмотрел
в app.yaml и обнаружил, что я опечатался в названии проекта, подправил и
заработало. Порадовался админке от GAE, которая доступна как
&lt;strong&gt;http://127.0.0.1:8080/_ah/admin/&lt;/strong&gt;. Значит с хранилищем я смогу
поиграться и локально. Сейчас быстренько сделаю тестовый проект, раз
знания освежились (но придётся делать дома, т.к. уже ночь наступила).
Нужно только посмотреть про FBML (диалект XML), чтобы выводило моё
приложение данные как требуется. Зарегистрировал сегодня пачку аккаунтов
(на одном сервисе, на другом, там-сям), что аж голова разболелась (не
люблю регистрироваться). Теперь в мобильном красуется SMS от Google :).&lt;/p&gt;
</summary><category term="python"></category><category term="жизнь"></category><category term="GAE"></category></entry><entry><title>Забавно</title><link href="/posts/2010/04/01/rating-fun/" rel="alternate"></link><updated>2010-04-01T20:47:58+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-01:posts/2010/04/01/rating-fun/</id><summary type="html">&lt;p&gt;Показало, что у меня рейтинг -1 :D. Хорошая шутка от Яндекс :).
Сначала подумал: «Это почему моя карма так сильно упала, что я
предпоследний стал», а потом вспомнил, что тут нет кармы :), а потом я
всмотрелся и понял, что это не минус, а тире и я 1-ый *YAHOO*.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/170291/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4312/imdagger.6/0_29933_7fbd6ea9_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="шутит"></category><category term="Яндекс"></category></entry><entry><title>Распределение</title><link href="/posts/2010/04/01/raspredelenie/" rel="alternate"></link><updated>2010-04-01T20:41:24+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-04-01:posts/2010/04/01/raspredelenie/</id><summary type="html">&lt;p&gt;Интересная вещь это распределение. Собрались все утром, ждали не
очень долго, но всё таки постоять пришлось. Потом зашёл первый, зачитали
куда меня распределить, спросили согласие, на что я ответил, что конечно
согласен. Затем ректор сказал, что распределяет и я расписался в бумаге.
Всё… я думал, что что-то будет особенное x-D &lt;del class="del"&gt;
наивный&lt;/del&gt;
.&lt;/p&gt;
</summary><category term="университет"></category><category term="жизнь"></category></entry><entry><title></title><link href="/posts/2010/03/31/urn:ya.ru:post/22199227/787/" rel="alternate"></link><updated>2010-03-31T18:28:54+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-31:posts/2010/03/31/urn:ya.ru:post/22199227/787/</id><summary type="html">&lt;p&gt;Достучался до libastral.so&lt;/p&gt;
</summary></entry><entry><title>Травушка-муравушка</title><link href="/posts/2010/03/31/travushka-muravushka/" rel="alternate"></link><updated>2010-03-31T18:25:59+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-31:posts/2010/03/31/travushka-muravushka/</id><summary type="html">&lt;p&gt;Посмотрел туториал по созданию реалистичной травы. Решил проверить,
как знания отложились в голове. Хочу сделать для эльфа землю с деревом,
поэтому нужно потренироваться. Трава вышла конечно не такая классная,
как в примере, но я и не мог использовать столько частиц сколько там в
примере, т.к. тут машинка не сильная. Но зато в голове отложилось, как
сделать хороший переход цвета травы, что не стоит забывать включать
Strand, когда добавил систему частиц, что можно задать несколько систем
частиц на одном объекте и что можно управлять прямо из Particle System
материалом частиц. А ещё как я и думал нужно делать высокие и низкие
травинки разного цвета и добавлять различные другие растения, тогда
трава лучше. Частиц маловато, но для первого раза я более, чем доволен:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/169567/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3802/imdagger.6/0_29773_cc25de75_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="трава"></category><category term="частицы"></category><category term="набросок"></category></entry><entry><title>HTTP и BGE</title><link href="/posts/2010/03/30/http-i-bge/" rel="alternate"></link><updated>2010-03-30T21:54:12+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-30:posts/2010/03/30/http-i-bge/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Сделал небольшой пример, где из BGE посредством Python извлекается
число страниц из произвольной ветки на форуме Blender Украина.
Использовал &lt;strong&gt;urllib2&lt;/strong&gt; для получения данных посредством GET запроса и
класс &lt;strong&gt;HTMLParser&lt;/strong&gt; &amp;nbsp;из библиотеки HTMLParser (от него нужно
наследоваться) для разбора HTML и получения числа страниц в ветке.
Пример нужно дорабатывать, т.к. он блокирует BGE, пока не получит всю
страницу. Лучше использовать какой-нибудь неблокирующий способ получения
данных. Например сделать urlopen, объект сохранить в GameLogic, а затем
блоками читать данные в неблокирующем режиме, используя пульсирующий
сенсор Always. Это позволит получить порцию данных, отрисовать BGE
сцену, снова получить данные и т.д. А в конце присвоить число страниц.&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; &lt;a class="reference external" href="http://blender3d.org.ua/forum/game/45-428.html#6884"&gt;Ссылка&lt;/a&gt; на
форуме, где я приложил файл.&lt;/p&gt;
</summary><category term="bge"></category><category term="HTTP"></category><category term="пример"></category></entry><entry><title>Яндекс Почта</title><link href="/posts/2010/03/30/iandeks-pochta/" rel="alternate"></link><updated>2010-03-30T17:32:47+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-30:posts/2010/03/30/iandeks-pochta/</id><summary type="html">&lt;p&gt;Вот только что отказала. Из чего я узнал, что у них есть сервер с
nginx и Fedora :)&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/169567/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3800/imdagger.6/0_2965f_af1c0e0b_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;UPD. Они более-менее быстро ожили.&lt;/p&gt;</summary><category term="почта"></category><category term="Яндекс"></category><category term="ошибка"></category></entry><entry><title>Толстый эльф</title><link href="/posts/2010/03/30/tolstyi-elf/" rel="alternate"></link><updated>2010-03-30T14:34:25+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-30:posts/2010/03/30/tolstyi-elf/</id><summary type="html">&lt;p&gt;Odin.13 одолжил ступни моему эльфу. Получился такой толстенький
голый эльф :) Возможно это беременная эльфийка… Нужно будет сегодня
поработать над глазами. т.к. я их вчера сделал на скорую руку. Добавка
нескольких источников света заметно всё замедлило, т.к. кожа рендерится
во много проходов с SSS.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/169459/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3803/imdagger.6/0_295f3_9d98d7b6_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="эльф"></category><category term="толстый"></category><category term="набросок"></category></entry><entry><title>Беременный эльф</title><link href="/posts/2010/03/29/beremennyi-elf/" rel="alternate"></link><updated>2010-03-29T19:55:38+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-29:posts/2010/03/29/beremennyi-elf/</id><summary type="html">&lt;p&gt;Вообще на самом деле это толстый эльф 80 левела, просто я рендер
сзади не делал, где видно его попу.
&lt;a class="reference external" href="http://matrep.parastudios.de/index.php?action=view&amp;amp;material=584-skin&amp;amp;fc=6"&gt;Кожу&lt;/a&gt;
я взял из репозитория материалов с SSS и пигментными пятнами. Надеюсь
успею доделать сегодня, очень бы хотелось. Осталось вставить глаза,
кости, сделать пятки, окружение и меч в руки… да ..многовато, нужно
работать быстрее :).&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/169273/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4313/imdagger.6/0_29539_150db597_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="эльф"></category><category term="80"></category><category term="толстый"></category></entry><entry><title>Редактор</title><link href="/posts/2010/03/28/redaktor/" rel="alternate"></link><updated>2010-03-28T20:25:08+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-28:posts/2010/03/28/redaktor/</id><summary type="html">&lt;p&gt;Поставил себе Gimp-2.6, а то до этого был только XPaint, с которым я
немного наловчился работать, но если что размыть или более сложные
операции или фильтры, то приходилось оказываться или придумывать как
выкрутиться. Темы на Gtk у меня нет, т.к. экономлю на ресурсах :).&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/168705/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3801/imdagger.6/0_29301_728d9a0f_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="gimp"></category><category term="обновление"></category></entry><entry><title>Да будет свет</title><link href="/posts/2010/03/27/da-budet-svet/" rel="alternate"></link><updated>2010-03-27T21:36:05+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-27:posts/2010/03/27/da-budet-svet/</id><summary type="html">&lt;p&gt;Всё, включаю лампочку :). Что-то типа&amp;nbsp; «поэкономил» в Час Земли.&lt;/p&gt;
</summary><category term="жизнь"></category><category term="свет"></category></entry><entry><title>Час Земли</title><link href="/posts/2010/03/27/chas-zemli/" rel="alternate"></link><updated>2010-03-27T20:30:56+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-27:posts/2010/03/27/chas-zemli/</id><summary type="html">&lt;p&gt;Пойду тоже лампочку выключу, но комп не буду :).&lt;/p&gt;
</summary><category term="жизнь"></category></entry><entry><title>Мой снег</title><link href="/posts/2010/03/26/moi-sneg/" rel="alternate"></link><updated>2010-03-26T21:13:15+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-26:posts/2010/03/26/moi-sneg/</id><summary type="html">&lt;p&gt;Моя проба сделать по памяти замёрзший снег и на свой лад:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/167866/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3807/imdagger.6/0_28fba_2b89d9a5_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Немного желтовато вышло, нужно было мягкий источник сделать светлее
и дальше.&lt;/p&gt;</summary><category term="blender"></category><category term="замёрзший"></category><category term="снег"></category></entry><entry><title>Снег</title><link href="/posts/2010/03/25/sneg/" rel="alternate"></link><updated>2010-03-25T21:09:03+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-25:posts/2010/03/25/sneg/</id><summary type="html">&lt;p&gt;Заглянул в нутро снега с blender-materials.org, тот снег, что
замёрзший. Похож на то, что делаю я, но чуть интереснее и сложнее. Я
делаю снег белый, и добавляю шум, а тут аж два слоя текстуры против
моего одного.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/167449/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4314/imdagger.6/0_28e19_507f875a_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Цвет чисто белый, но Spec отражение 0.8, 0.9, 1.0 (числа хорошие,
запомнить легко):&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/167450/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/4308/imdagger.6/0_28e1a_b993bdb5_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Первый слой, это сильный шум при помощи &lt;strong&gt;Clouds&lt;/strong&gt; с &lt;strong&gt;Noise Size&lt;/strong&gt;
равным 0.0 и &lt;strong&gt;Voronoi&lt;/strong&gt; &lt;strong&gt;Crackle&lt;/strong&gt;. Она применяется с цветом &lt;em&gt;0.83,
0.9, 1.0&lt;/em&gt;. При этом для неравномерного отражения включен &lt;strong&gt;Csp&lt;/strong&gt;, чтобы
текстура регулировала блики света. Nor не большой, всего 0.5, т.к.
бугорки нужны маленькие.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/167451/"&gt;&lt;img alt="image2" src="http://img-fotki.yandex.ru/get/3812/imdagger.6/0_28e1b_d4003db3_L" title="image2"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Вторая текстура для небольшого плавного смещения, как например,
когда катаешь комы снега. Включён только Nor и достаточно сильный &lt;em&gt;2.2&lt;/em&gt;.
Для облаков (вторая текстура) включена высокая глубина и размер
побольше, чтобы не выглядело как шум.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/167452/"&gt;&lt;img alt="image3" src="http://img-fotki.yandex.ru/get/3809/imdagger.6/0_28e1c_2ff1388e_L" title="image3"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="материал"></category><category term="снег"></category></entry><entry><title></title><link href="/posts/2010/03/24/urn:ya.ru:post/22199227/769/" rel="alternate"></link><updated>2010-03-24T20:57:53+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-24:posts/2010/03/24/urn:ya.ru:post/22199227/769/</id><summary type="html">&lt;p&gt;Настроение креативное&lt;/p&gt;
</summary></entry><entry><title>Стихия ветра и воды</title><link href="/posts/2010/03/23/stikhiia-vetra-i-vody/" rel="alternate"></link><updated>2010-03-23T21:48:35+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-23:posts/2010/03/23/stikhiia-vetra-i-vody/</id><summary type="html">&lt;p&gt;Сделал работу для ежедневного конкурса. Нужно было изобразить одну
их стихий, я решил показать начало снежной бури в некоторой комичной
форме. Сначала родилась идея в голове и я её набросал на бумаге (я
всегда так делаю, чтобы не потерять идею из головы):&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/165860/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/11/imdagger.6/0_287e4_408079d7_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Различные лишние штрихи это не от данного изображения, просто
привычка исписывать листики до посинения (в прямом смысле x-D). Я только
на листками блокнота так не издеваюсь. Реализовал не так как задумывал,
т.к. времени не хватило:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/165878/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/3812/imdagger.6/0_287f6_77fcc429_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;А теперь тоже самое, но с сеткой:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/165884/"&gt;&lt;img alt="image2" src="http://img-fotki.yandex.ru/get/4308/imdagger.6/0_287fc_feb7f7df_L" title="image2"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Материалы взял с  &lt;a class="reference external" href="http://www.blender-materials.org/"&gt;http://www.blender-materials.org/&lt;/a&gt;, чтобы быстрее
завершить работу, а то поздно за неё взялся. Да и пока я не настолько
силён в материалах. Засяду, гляну как сделан снег, а то я делал снег
раньше, но он не имел шероховатости присущей снегу. А тут как раз
замёрзший снег и лёд. И думаю следует изучть подробно как сделано
окрашенное дерево.&lt;/p&gt;</summary><category term="буря"></category><category term="blender"></category><category term="домик"></category><category term="стихия"></category><category term="альпинист"></category><category term="ветер"></category></entry><entry><title>Составил</title><link href="/posts/2010/03/22/sostavil/" rel="alternate"></link><updated>2010-03-22T20:25:26+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-22:posts/2010/03/22/sostavil/</id><summary type="html">&lt;p&gt;Составил небольшое резюме о себе. Опыт у меня не большой, но я
старался писать не всё подряд, чтобы вышло по делу и не было
перегруженным. Решил разделить его на три классические части:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Кто я и как связаться со мной&lt;/li&gt;
&lt;li&gt;Мои знания и умения в технической сфере, опыт работы&lt;/li&gt;
&lt;li&gt;Образование, языки, личностные качества и хобби&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Вроде написал только о том, где «прочно укрепился», а не
поверхностно. Помню видел резюме, где описано чуть ли не несколько
десятков языков и технологий O_o.&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;strong&gt;*********&lt;/strong&gt; &lt;strong&gt;*********&lt;/strong&gt;, 22 years&lt;/div&gt;
&lt;div class="line"&gt;(Velcom) &lt;strong&gt;*******&lt;/strong&gt;, home &lt;strong&gt;******&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;e-mail: &lt;strong&gt;********&lt;/strong&gt;&amp;#64;&lt;strong&gt;**&lt;/strong&gt;.&lt;strong&gt;**&lt;/strong&gt;,&lt;/div&gt;
&lt;div class="line"&gt;&lt;strong&gt;********&lt;/strong&gt;&amp;#64;&lt;strong&gt;****&lt;/strong&gt;.&lt;strong&gt;****&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;div class="line"&gt;WORK EXPERIENCE:&lt;/div&gt;
&lt;div class="line"&gt;Engineer Programmer&lt;/div&gt;
&lt;div class="line"&gt;GSRL&lt;/div&gt;
&lt;div class="line"&gt;2006-present&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; * Proxy, email, web server administration&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; * Primary domain controller administration and upgrade from Git&lt;/div&gt;
&lt;div class="line"&gt;repository (Samba4)&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; * Keep and track image cloning software and images
(RDBL+Clonezilla)&lt;/div&gt;
&lt;div class="line"&gt;PROGRAMMING SKILLS:&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; * Programming languages known are: C, C++, Python, Lua&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; * DB and query languages: ANSI SQL, MSSQL, MySQL&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; * Version control systems: Bazaar, Git&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; * Want to lean more deeply: Erlang, LISP&lt;/div&gt;
&lt;div class="line"&gt;TECHNICAL SKILLS:&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; * Experience in administration Linux and FreeBSD&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; * Advanced Linux user (7 years experience)&lt;/div&gt;
&lt;div class="line"&gt;PARTICIPATION IN PROJECTS:&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;* Midnight Commander (language C; bug fixing)&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; * Blender GE (language C++, Python; bug fixing and coding
simple new features)&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; * Distance Learning Belarus (Java; refactoring and rewriting
old code base to Hibernate+Spring)&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; * Own little quest game project (Python; coding game logic and
connection layer with BGE API)&lt;/div&gt;
&lt;div class="line"&gt;EDUCATION:&lt;/div&gt;
&lt;div class="line"&gt;2005-2010&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; * Higher education, programmer, F. Scorina Gomel State
University, Gomel, Belarus&lt;/div&gt;
&lt;div class="line"&gt;ALSO:&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; * Foreign languages: technical English&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; * Hobbies: 3D modeling (work with Blender Internal Render and
LuxRender), game making&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; * Personal qualities: communicable, fast learner, ready to
learn new technologies, paradigms and methodologies, easily perceive
constructive criticism&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; * Microblog: imdagger.ya.ru&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; * Interests in spheres: web services, building entertainment
services and games&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Решил выбросить про разработку скриптов, протоколы и жизненные
хобби, оставил всё гиковское :)&lt;/p&gt;
</summary><category term="резюме"></category><category term="работа"></category></entry><entry><title>Нужно</title><link href="/posts/2010/03/21/concurrent-programming-skills/" rel="alternate"></link><updated>2010-03-21T20:46:01+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-21:posts/2010/03/21/concurrent-programming-skills/</id><summary type="html">&lt;p&gt;Нужно будет подкачаться в конкурентном программировании. Получше
осознать все плюсы и минусы библиотеку &lt;strong&gt;greenlet&lt;/strong&gt; для Python. А то я
знаю, умею, но чувствую опыта у меня не столько сколько я хочу.&lt;/p&gt;
</summary><category term="python"></category><category term="программирование"></category><category term="заметка"></category></entry><entry><title>100тки</title><link href="/posts/2010/03/20/100tki/" rel="alternate"></link><updated>2010-03-20T20:25:00+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-20:posts/2010/03/20/100tki/</id><summary type="html">&lt;p&gt;Рендерил мало, дык ещё и с фоном облажался … тут стоило брать тёмный
цвет, чтобы подчеркнуть яркость гвоздей. Потом пытался «замылить» все
артефакты x-D и погасить сильный шум. Вышло так, что могут глаза
выпасть!&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/163761/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3810/imdagger.6/0_27fb1_fb236f37_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="сотка"></category><category term="гвозди"></category><category term="набросок"></category></entry><entry><title>Медкомиссия для службы в армии</title><link href="/posts/2010/03/20/medkomissiia-dlia-sluzhby-v-armii/" rel="alternate"></link><updated>2010-03-20T14:38:24+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-20:posts/2010/03/20/medkomissiia-dlia-sluzhby-v-armii/</id><summary type="html">&lt;p&gt;Такое чувство, что я медкомиссию буду проходить не на этом свете x-D
Почему именно на мой призыв попал этот номер…&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/163693/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3809/imdagger.6/0_27f6d_c3637655_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="армия"></category><category term="забавно"></category><category term="номер"></category></entry><entry><title>Соединение вершин</title><link href="/posts/2010/03/19/soedinenie-vershin/" rel="alternate"></link><updated>2010-03-19T21:50:28+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-19:posts/2010/03/19/soedinenie-vershin/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Придётся в скрипте попробовать симулировать нажатие клавиш (т.е.
посылать события нажатий), иначе придётся соединения вершин делать из
скрипта. Но скрипт, кажется, не может узнать порядок, в каком были
выбраны вершины. Высплюсь, подумаю, сделаю.&lt;/p&gt;
</summary><category term="blender"></category><category term="merge"></category><category term="вершины"></category></entry><entry><title>Децимация</title><link href="/posts/2010/03/18/detsimatsiia/" rel="alternate"></link><updated>2010-03-18T19:32:05+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-18:posts/2010/03/18/detsimatsiia/</id><summary type="html">&lt;p&gt;Хм… пожалуй скрипт Mesh → Scripts → Poly Reduce достаточно хорош и я
зря на него не обращал внимания. Когда мне нужно было создать текст в
BGE мешем, но не использовать много треугольников, то я применял
модификатор Decimate (обычно я его применяю из-за того, что он не
трогает сам меш). Но в случае с текстом мне всё равно приходится его
конвертировать при помощи &lt;kbd class="kbd"&gt;
Alt + C&lt;/kbd&gt;
. Я попробовал скрипт и результат
меня впечатлил:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/161814/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3814/imdagger.6/0_27816_a68b03e6_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Первая строка — исходный меш, вторая —при помощи Decimate модификатора с
параметром 0.994 (даже при таком высоком параметре букву &lt;strong&gt;t&lt;/strong&gt; оно
испортило, я заметил, что он очень не любит буквы T и t, всё время их
норовит слить в единое целое) , а третья строка — количество полигонов
понижено с коэффициентом 0.3, т.е. было &lt;strong&gt;7681&lt;/strong&gt;, а стало &lt;strong&gt;551&lt;/strong&gt;. И на
качестве это никак не отразилось (что не скажешь про Decimate):&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/161815/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/3812/imdagger.6/0_27817_d6b5a0d8_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="децимация"></category><category term="bge"></category><category term="уменьшение"></category><category term="понижение"></category><category term="полигоны"></category><category term="blender"></category></entry><entry><title>Размял мозги</title><link href="/posts/2010/03/17/razmial-mozgi/" rel="alternate"></link><updated>2010-03-17T18:04:15+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-17:posts/2010/03/17/razmial-mozgi/</id><summary type="html">&lt;p&gt;Для разминки мозга решил пару головоломок класса кубики сома. Цитата
из Википедии про данную головоломку:&lt;/p&gt;
&lt;blockquote&gt;
&lt;strong&gt;Кубики сома&lt;/strong&gt; (англ. Soma cube) — это головоломка, являющаяся по
сути трёхмерным аналогом китайской головоломки пентамино. Придумал
кубики сома &lt;strong&gt;Пит Хейн&lt;/strong&gt; во время лекции известного учёного
&lt;strong&gt;Вернера Гейзенберга&lt;/strong&gt; по квантовой механике.
Набор состоит из 7 фигур: из них одна фигура состоит из трёх
кубиков, а остальные из четырёх кубиков. Из всех 7 фигур можно
сложить один большой куб размером 3x3x3 кубика.&lt;/blockquote&gt;
&lt;p&gt;В Blender пользователь форума belnder3d.org.ua &lt;em&gt;Remeslennik&lt;/em&gt; сделал
все необходимые кубики. Поэтому мне не пришлось самому делать :) мне бы
было слишком лениво делать кубики для головоломки, чтобы самому себе
встряхнуть мозг.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/160332/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3811/imdagger.6/0_2724c_c494d550_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Дан замок, нужно используя все фигуры построить его:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/160321/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/3911/imdagger.6/0_27241_dc0521e3_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Моё решение:&lt;/p&gt;
&lt;blockquote&gt;
Легко догадаться, что 3 детали из набора никак не уложить в
плоскость, поэтому их нужно в углы загнать, ну и помнить, что
вращать можно по всем осям, а то я так затормозил, как L повернуть.&lt;/blockquote&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/160322/"&gt;&lt;img alt="image2" src="http://img-fotki.yandex.ru/get/3807/imdagger.6/0_27242_3d7908e4_L" title="image2"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Головоломка «последовательность 3-4-5» (я её так прозвал) и моё
решение данной головоломки:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/160324/"&gt;&lt;img alt="image3" src="http://img-fotki.yandex.ru/get/3910/imdagger.6/0_27244_260c538e_L" title="image3"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/160325/"&gt;&lt;img alt="image4" src="http://img-fotki.yandex.ru/get/3812/imdagger.6/0_27245_87e5dde8_L" title="image4"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="cut"&gt;&lt;a class="h-link reference internal" data-toggle="collapse" href="#cut_46395024"&gt;а почему так?&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_46395024"&gt;
&lt;!-- --&gt;
&lt;blockquote&gt;
Вторая головоломка тоже простая:
Фигуры всего три, выбросить стоит те, которые не ложатся в
плоскость: остаются только 4 фигуры: 3-и по 4 клетки и 1-а по 3. Но
в задании 12 кубиков, и сложить их нужно тремя фигурами, простая
математика подсказывает, что нужно выбросить уголок из трёх кубиков
и далее быстренько составить результат: 3-4-5.&lt;/blockquote&gt;
&lt;p&gt;Немного посложнее головоломки из книги со всеми кубиками:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/160328/"&gt;&lt;img alt="image5" src="http://img-fotki.yandex.ru/get/3807/imdagger.6/0_27248_20f6292c_L" title="image5"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Я решил составить змейку (этот вариант я рендерил с использованием
скрипта Wired Overlay, поэтому видна сетка кубиков):&lt;/p&gt;
&lt;/div&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/160329/"&gt;&lt;img alt="image6" src="http://img-fotki.yandex.ru/get/3812/imdagger.6/0_27249_8c219779_L" title="image6"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="головоломка"></category><category term="отдых"></category><category term="кубики"></category><category term="сома"></category></entry><entry><title>Армия</title><link href="/posts/2010/03/17/armiia/" rel="alternate"></link><updated>2010-03-17T15:16:02+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-17:posts/2010/03/17/armiia/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Эх.. послезавтра в военкомат. Жаль, что эта вся машина работает не
очень оперативно и у них не было конвертов. Повестку получил 17, что
нужно явиться 16. Заверили, что всё будет хорошо, что это их вина.&lt;/p&gt;
</summary><category term="военкомат"></category><category term="армия"></category><category term="жизнь"></category></entry><entry><title></title><link href="/posts/2010/03/16/urn:ya.ru:post/22199227/745/" rel="alternate"></link><updated>2010-03-16T20:19:09+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-16:posts/2010/03/16/urn:ya.ru:post/22199227/745/</id><summary type="html">&lt;p&gt;Ура 0% потерь! Слава роботам!&lt;/p&gt;
</summary></entry><entry><title>Биг Радость</title><link href="/posts/2010/03/16/big-radost/" rel="alternate"></link><updated>2010-03-16T20:18:16+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-16:posts/2010/03/16/big-radost/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Мои мольбы были услышаны, и Яндекс и БелеТелеКом у меня теперь
работают &lt;strong&gt;хорошо&lt;/strong&gt;. Думаю я был не единственным, кто пожаловался на
соединение в этом направлении. Теперь у меня соединение не через канал
РосТелеКома, а через ЛатТелеКом. Всё работает как часы. Я очень рад.&lt;/p&gt;
</summary><category term="радость"></category><category term="соединение"></category><category term="Яндекс"></category><category term="работает"></category></entry><entry><title>Конференция</title><link href="/posts/2010/03/16/konferentsiia/" rel="alternate"></link><updated>2010-03-16T17:02:08+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-16:posts/2010/03/16/konferentsiia/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Пару часов назад она закончилась. Я своё дело сделал, теперь могу
ненадолго расслабиться и отдохнуть :). В целом я доволен, только мог бы
по моей тебе кто-нибудь собраться с силами и духом и задать вопросов,
наверное из-за того, что я в списке был предпоследним, то все уже слегка
устали.&lt;/p&gt;
</summary><category term="жизнь"></category><category term="конференция"></category></entry><entry><title>Обновление с Samba4-alpha9-GIT</title><link href="/posts/2010/03/16/obnovlenie-s-samba4-alpha9-git/" rel="alternate"></link><updated>2010-03-16T07:19:06+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-16:posts/2010/03/16/obnovlenie-s-samba4-alpha9-git/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Попробовал обновиться с 9 до 12 альфы и вылезла куча проблем, что
ldb файлы они поперемещали, изменили формат схемы. Короче я за 15 минут
не смог обновить, придётся повозиться больше. Лучше пусть пока 9
поработает, хотя она иногда такие плюшки выкидывает… может подвисать и
долго загружать профиль из AD, service samba4 restart не помогает, т.к.
это не полный перезапуск сервиса, нужно service samba4 stop, service
samba4 start. Или даже перезагрузку :(. Найду время для экспериментов (а
то сейчас всё должно работать, т.к. важное мероприятие) и обновлю.
Обновление с Samba4 alpha9 до alpha12 труднее, чем с alpha6 до alpha9,
т.к. они внесли больше изменений в работу сервиса. Жду с нетерпением
релиз кандидата.&lt;/p&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;/div&gt;
</summary><category term="samba4"></category><category term="обновление"></category><category term="глюк"></category></entry><entry><title>Схемы</title><link href="/posts/2010/03/15/skhemy/" rel="alternate"></link><updated>2010-03-15T13:50:21+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-15:posts/2010/03/15/skhemy/</id><summary type="html">&lt;p&gt;Вот схемы Qucs, который вчера никак не удалялась загрузить на Я.ру.
Сама схема мультивибратора:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/158215/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3912/imdagger.6/0_26a07_fa5cbe72_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;А вот её странный график симуляции. Похоже, что сигнал пульсирует,
но он немного странный. Когда я пытаюсь выставить правильное
сопротивление резисторов, то симуляция в Qucs прерывается.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/158216/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/3813/imdagger.6/0_26a08_864d290a_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="схема"></category><category term="симуляция"></category><category term="qucs"></category></entry><entry><title>Симуляция в Qucs</title><link href="/posts/2010/03/14/simuliatsiia-v-qucs/" rel="alternate"></link><updated>2010-03-14T20:03:43+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-14:posts/2010/03/14/simuliatsiia-v-qucs/</id><summary type="html">&lt;p&gt;Попробовал я симулировать симметричный мультивибратор на двух
транзисторах в Qucs. Построил схему, взял похожие на реальность
параметры, но почему-то получил не такой результат как ожидал :S. Скрины
не получается приложить, т.к. у долбаного Белетелекома для нас припасены
самые корявые маршрутизаторы. А ещё называется расширили канал … куда
расширили? за счёт кого и чего?&lt;/p&gt;
</summary><category term="симуляция"></category><category term="qucs"></category></entry><entry><title></title><link href="/posts/2010/03/13/urn:ya.ru:post/22199227/739/" rel="alternate"></link><updated>2010-03-13T08:18:39+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-13:posts/2010/03/13/urn:ya.ru:post/22199227/739/</id><summary type="html">&lt;p&gt;Устал от глюков провайдера, маршрутизаторов :(&lt;/p&gt;
</summary></entry><entry><title>Глюки доступа</title><link href="/posts/2010/03/13/gliuki-dostupa/" rel="alternate"></link><updated>2010-03-13T08:17:45+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-13:posts/2010/03/13/gliuki-dostupa/</id><summary type="html">&lt;p&gt;Оказывается это наш любимый &lt;del class="del"&gt;
может когда-нибудь вытянет свои
копытца&lt;/del&gt;
 общий провайдер-маршрутизатор Belpak теряет 50-80% пакетов на
пути к маршрутизатору Ростелекома. И это случается после 20:00 (а ещё
говорили, что расширили канал… расчёт чего они расширили? откуда у них
перегрузки?), в то самое время, когда мне есть чего написать, когда я
всю работу сделал, когда просто хочется сесть и написать то, что
придумал за день :( Зря я на Яндекс подумал, я проверил доступ из-за
границы, там и ping до Ростелекома хороший и потери пакетов 0% (у меня
только так до 20:00). Где ж эти нехорошие &lt;del class="del"&gt;
посылаю им луч поноса&lt;/del&gt;
 Belpak
спрятали на сайте у себя ссылку, чтобы с ними связаться?&lt;/p&gt;
&lt;p&gt;UPD Нашёл адрес суппорта, написал письмо, буду ждать ответа :(…&lt;/p&gt;
</summary><category term="негодую"></category><category term="маршрутизатор"></category><category term="зол"></category></entry><entry><title></title><link href="/posts/2010/03/11/urn:ya.ru:post/22199227/736/" rel="alternate"></link><updated>2010-03-11T15:30:46+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-11:posts/2010/03/11/urn:ya.ru:post/22199227/736/</id><summary type="html"></summary></entry><entry><title>Динамическая загрузка из скриптов</title><link href="/posts/2010/03/11/dinamicheskaia-zagruzka-iz-skriptov/" rel="alternate"></link><updated>2010-03-11T14:50:45+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-11:posts/2010/03/11/dinamicheskaia-zagruzka-iz-skriptov/</id><summary type="html">&lt;p&gt;Добавил в BGE вызов функций отложенной загрузки объектов сцены из
другого blend-файла, а также функцию отложенной выгрузки. До этого можно
было лишь пользоваться актуатором:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-n"&gt;cc&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;GameLogic&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;getCurrentController&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
&lt;span class="pgcss-n"&gt;blend_loader&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;cc&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;actuators&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;load&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;
&lt;span class="pgcss-n"&gt;blend_loader&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;scene&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;Room stuff&amp;#39;&lt;/span&gt;
&lt;span class="pgcss-n"&gt;room_number&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-mi"&gt;112&lt;/span&gt;
&lt;span class="pgcss-n"&gt;blend_loader&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;blendFileName&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;//room&lt;/span&gt;&lt;span class="pgcss-si"&gt;%s&lt;/span&gt;&lt;span class="pgcss-s"&gt;/stuff/main.blend&amp;#39;&lt;/span&gt; &lt;span class="pgcss-o"&gt;%&lt;/span&gt; &lt;span class="pgcss-n"&gt;room_number&lt;/span&gt;
&lt;span class="pgcss-n"&gt;cc&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;activate&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;blend_loader&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;blend_loader загрузит сцену из файла с относительным путём
&lt;strong&gt;//room112/stuff/main.blend&lt;/strong&gt;,&amp;nbsp;&lt;strong&gt;blendFileName&lt;/strong&gt; это свойство,
которое указывает имя файла. так способом можно загружать за одну
итерацию BGE только количество сцен равное количеству активированных
актуаторов. С выгрузкой аналогично. Такой подход может быть удобным,
если нужно по мере загрузки обновлять изображение на экране и
отрисовывать, например полосу прогресса загрузки.&lt;/p&gt;
&lt;p&gt;Но бывает нужно за один подход загрузить несколько групп объектов.
Немноог напоминает транзакции из баз данных, т.е. ничего не должно
вклиниваться между загрузкой двух сцен, ни отрисовка, ни другие события
актуаторов или сенсоров. Эту проблему решит добавка отдельного API для
загрузки не через актуаторы:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-n"&gt;room_file_name&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;//room&lt;/span&gt;&lt;span class="pgcss-si"&gt;%s&lt;/span&gt;&lt;span class="pgcss-s"&gt;/stuff/main.blend&amp;#39;&lt;/span&gt;
&lt;span class="pgcss-n"&gt;room_number&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-mi"&gt;112&lt;/span&gt;
&lt;span class="pgcss-n"&gt;GameLogic&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;mergeBlendFile&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;Room Stuff&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; \
             &lt;span class="pgcss-s"&gt;&amp;#39;//room&lt;/span&gt;&lt;span class="pgcss-si"&gt;%s&lt;/span&gt;&lt;span class="pgcss-s"&gt;/stuff/main.blend&amp;#39;&lt;/span&gt; &lt;span class="pgcss-o"&gt;%&lt;/span&gt; &lt;span class="pgcss-n"&gt;room_number&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;room_number&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-mi"&gt;115&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;GameLogic&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;unmergeBlendFile&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;Room Stuff&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; \
             &lt;span class="pgcss-n"&gt;room_file_name&lt;/span&gt; &lt;span class="pgcss-o"&gt;%&lt;/span&gt; &lt;span class="pgcss-n"&gt;room_number&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-bp"&gt;True&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Т.е. в сцену, где расположен объект, на котором исполняется данных
скрипт контроллера, добавить объекты из сцены&amp;nbsp;Room
Stuff&amp;nbsp;//room112/stuff/main.blend &lt;u class="underline"&gt;
на следующей итерации&lt;/u&gt;
. И тут же
потребовать выгрузки на следующей итерации сцены
из&amp;nbsp;//room115/stuff/main.blend, True указывает, что это &lt;strong&gt;Forced&lt;/strong&gt; режим
(когда BGE пробудет удалить и blend-файл из памяти, если никто его не
использует). False — обычный режим, BGE удаляет объекты, но blend-файл
оставляет в памяти, чтобы в следующий раз не считывать с диска (вдруг
его опять скоро попросят загрузиться).&lt;/p&gt;
&lt;p&gt;Нужно учитывать, что загрузка и выгрузка происходят на новой
итерации, но… проверка при выгрузке происходит сразу. Т.е., если
попросить загрузить &lt;strong&gt;A&lt;/strong&gt; и тут же попросить выгрузить &lt;strong&gt;A&lt;/strong&gt;, то
загрузка будет (на новой итерации), а при выгрузке скажет, что файл ещё
не загрузился (сразу после исполнения функции).&lt;/p&gt;
&lt;p&gt;Соберусь с силами и сделаю ещё один билд. Нужно подправить
функционал связанный с оверлеями :) Я рассчитываю его тоже включить в
сборку.&lt;/p&gt;
</summary><category term="blender"></category><category term="возможности"></category><category term="bge"></category></entry><entry><title>Яндекс тормозит</title><link href="/posts/2010/03/10/iandeks-tormozit/" rel="alternate"></link><updated>2010-03-10T21:52:27+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-10:posts/2010/03/10/iandeks-tormozit/</id><summary type="html">&lt;p&gt;Я ужасно зол! Яндекс тормозит! Все сервисы, кажется он нас
дискриминирует по IP, это случается вечером (и не у меня одного,
провайдера разные, но есть и те у кого провайдер совсем в другой подсети
и не тормозит). Ничего больше не тормозит, только он, т.е. эт оне
проблема зоны ru! Это не выносимо, т.к. ping-гуется быстро, Jabber
работает быстро, а 80 порт для HTTP тормозит зверски.
Через webproxy.ru работает более менее, т.е. хотя бы не по 30-40 минут
грузится 1-2 килобайта. И случается только вечером… :( А я так хотел
разного интересного написать про BGE.&lt;/p&gt;
</summary><category term="bge"></category><category term="Яндекс"></category><category term="печаль"></category><category term="blender"></category><category term="Я"></category><category term="зол"></category></entry><entry><title>Уфф</title><link href="/posts/2010/03/09/uff/" rel="alternate"></link><updated>2010-03-09T14:19:08+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-09:posts/2010/03/09/uff/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Я за последние 30 часов спал только &amp;lt;1.5 часа. Чувствую сегодня себя
как овощ, реакция медленная, постоянно клонит в сон, нужно либо сейчас
поспать либо выдержать до вечера и дома забуриться…&lt;/p&gt;
</summary><category term="устал"></category><category term="жизнь"></category></entry><entry><title>Оу ноу....</title><link href="/posts/2010/03/08/ou-nou/" rel="alternate"></link><updated>2010-03-08T17:55:22+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-08:posts/2010/03/08/ou-nou/</id><summary type="html">&lt;p&gt;Простая и увлекательная игра, но отобрала у меня около часа времени :(
которое было выделено под написание отчёта, всё нужно трудиться!&lt;/p&gt;
</summary><category term="время"></category><category term="играл"></category><category term="отдых"></category></entry><entry><title>Ещё раз</title><link href="/posts/2010/03/07/eshchio-raz/" rel="alternate"></link><updated>2010-03-07T19:12:55+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-07:posts/2010/03/07/eshchio-raz/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/150104"&gt;&lt;img alt="Ещё раз" src="http://img-fotki.yandex.ru/get/3811/imdagger.6/0_24a58_8eb657ba_L" title="Ещё раз"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Т.к. предыдущая фотка горизонтальная, то пришлось обрезать вручную,
чтобы Я.ру сам не пытался абы куда смещать фокус.&lt;/p&gt;</summary><category term="Я"></category></entry><entry><title>Решил сменить фотку, старая уже "затёрлась до дыр"</title><link href="/posts/2010/03/07/reshil-smenit-fotku-staraia-uzhe-zatiorlas-do-dyr/" rel="alternate"></link><updated>2010-03-07T17:07:39+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-07:posts/2010/03/07/reshil-smenit-fotku-staraia-uzhe-zatiorlas-do-dyr/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/148314"&gt;&lt;img alt="alim0629.jpg" src="http://img-fotki.yandex.ru/get/3811/imdagger.6/0_2435a_ee1f36ff_-2-L" title="alim0629.jpg"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Фотографировал меня Many. Это на аллее недалеко от гаражей.&lt;/p&gt;</summary><category term="Я"></category></entry><entry><title>Я забывака</title><link href="/posts/2010/03/07/ia-zabyvaka/" rel="alternate"></link><updated>2010-03-07T16:51:20+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-07:posts/2010/03/07/ia-zabyvaka/</id><summary type="html">&lt;p&gt;Бывает, что запись, которую я пишу очень длинная или я её пишу на
работе в очень поздний час. Но мне не хочется, чтобы я случайно
писал-писал запись.. а потом бах.. и уничтожил, упал на комп :) выдернул
шнур .. мало ли.. привычка ещё с машинок EC 1841 и EC 1842. Вирус Stir
(его как-то так звали) каждые 15 минут заставлял комп повиснуть, а буквы
начинали сыпаться сверху вниз. Drweb не мог вывести этот вирус у нас,
хотя и обнаруживал (классно был написан вирус и грамотно). Поэтому
выработалась привычка сохраняться часто… очень часто! Так.. о чём это я…
А о том, что я записи, когда пишу в блог стараюсь сохранять тоже часто,
но на Я.ру нету кнопочки или функционала «Сохранить как черновик». С
другой стороны я не хочу публиковать не доработанную запись, поэтому
ставлю галочку, что запись могу видеть только я и сохраняю. Когда я её
целиком дописываю, то выставляю галочку, что её могут видеть все. Но вот
я обнаружил пару казусов :)&lt;/p&gt;
&lt;p&gt;Пару дней назад я написал запись и забыл ей вернуть публичный
статус. Потом я решил просмотреть все свои записи и найти, где
различается их количество для меня и для других пользователей.
Оказалось, что есть ещё такая запись!! Аж в сентябре!! Я им вернул
правильный статус, теперь они доступны:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://imdagger.ya.ru/replies.xml?item_no=712"&gt;про Blender&lt;/a&gt; и
ещё &lt;a class="reference external" href="http://imdagger.ya.ru/replies.xml?item_no=251"&gt;про Java&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Постараюсь больше не забывать устанавливать флажок, что записи
могут видеть все. Либо нужно сделать какой-нибудь мелкий UserJS, который
будет мне об этом напоминать или реализует что-то типа сохранения
черновика. Тут нужно подумать и поискать время… или работать по-старинке
;).&lt;/p&gt;
</summary><category term="блог"></category><category term="записи"></category><category term="сохранение"></category><category term="приват"></category><category term="черновик"></category><category term="забыл"></category><category term="Яндекс"></category></entry><entry><title>Я маленький TeXник</title><link href="/posts/2010/03/07/ia-malenkii-texnik/" rel="alternate"></link><updated>2014-07-18T22:14:00+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-07:posts/2010/03/07/ia-malenkii-texnik/</id><summary type="html">&lt;p&gt;Уже несколько лет я всё собирался добавить моему шаблону возможность
выводить количество страниц с учётом, что в русском языке есть
окончания. Но раньше мне не хватало знаний и понимания ни Τεχ ни других
LaΤεχ. Но вчера я собрался с силами и духом и потратил пару часов на
эксперименты, написание кода и изучения исходников LaΤεχ. Я открыл
&lt;strong&gt;/usr/share/texmf/tex/latex/base/latex.ltx&lt;/strong&gt;. Я знал, что
\‍ref{TotPages} выводит страницы правильно и всего одно число, хоть и в
самой переменной &lt;a class="reference external" href="mailto:r&amp;#64;TotPages"&gt;r&amp;#64;TotPages&lt;/a&gt; хранится {число}{число} (оно попадает туда
aux-файла при помощи \‍newlabel{TotPages}{{23}{23}}).&lt;/p&gt;
&lt;p&gt;Я взглянул на код макроса ref:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-k"&gt;\def\‍&lt;/span&gt;ref#1&lt;span class="pgcss-nb"&gt;{&lt;/span&gt;&lt;span class="pgcss-k"&gt;\expandafter\@&lt;/span&gt;setref&lt;span class="pgcss-k"&gt;\csname&lt;/span&gt; r@#1&lt;span class="pgcss-k"&gt;\endcsname\@&lt;/span&gt;firstoftwo&lt;span class="pgcss-nb"&gt;{&lt;/span&gt;#1&lt;span class="pgcss-nb"&gt;}}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Видно, что он использует для выбора параметра из двух макрос
\&amp;#64;firstoftwo. Но я не мог понять, как оно передаёт один параметр этому
макросу. если тот требует два. А потом до меня дошло и понеслось…&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-c"&gt;%% расширить макрос \@setref только после его аргументов, а у него их 3-и&lt;/span&gt;
&lt;span class="pgcss-k"&gt;\expandafter\@&lt;/span&gt;setref
&lt;span class="pgcss-c"&gt;%%  преобразует ссылку TotPages в \‍r@TotPages&lt;/span&gt;
&lt;span class="pgcss-k"&gt;\csname&lt;/span&gt; r@#1&lt;span class="pgcss-k"&gt;\endcsname&lt;/span&gt;
&lt;span class="pgcss-c"&gt;%% макрос, при помощи которого будет выбирать аргумент для вывода&lt;/span&gt;
&lt;span class="pgcss-k"&gt;\@&lt;/span&gt;firstoftwo
&lt;span class="pgcss-c"&gt;%% название ссылки, т.е. в моём случае строка TotPages, используется для&lt;/span&gt;
&lt;span class="pgcss-c"&gt;%% вывода ошибки, если она не найдена&lt;/span&gt;
&lt;span class="pgcss-nb"&gt;{&lt;/span&gt;#1&lt;span class="pgcss-nb"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p class="cut"&gt;&lt;a class="h-link reference internal" href="#cut_45003280"data-toggle="collapse"&gt;посмотреть описание и макрос, который я написал&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_45003280"&gt;
&lt;p&gt;Тогда я решил сделать свой макрос \totpagesvalue, который в
указанный счётчик сохранит число страниц из aux-файла. Вот такой он
получился по аналогии:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-k"&gt;\def\totpagesvalue&lt;/span&gt;#1&lt;span class="pgcss-nb"&gt;{&lt;/span&gt;&lt;span class="pgcss-k"&gt;\expandafter\@&lt;/span&gt;totpagesvalue&lt;span class="pgcss-k"&gt;\csname&lt;/span&gt; r@TotPages&lt;span class="pgcss-k"&gt;\endcsname\@&lt;/span&gt;firstoftwo&lt;span class="pgcss-nb"&gt;{&lt;/span&gt;#1&lt;span class="pgcss-nb"&gt;}}&lt;/span&gt;
&lt;span class="pgcss-k"&gt;\def\@&lt;/span&gt;totpagesvalue#1#2#3&lt;span class="pgcss-nb"&gt;{&lt;/span&gt;&lt;span class="pgcss-c"&gt;%&lt;/span&gt;
  &lt;span class="pgcss-k"&gt;\ifx&lt;/span&gt;#1&lt;span class="pgcss-k"&gt;\‍&lt;/span&gt;relax
   &lt;span class="pgcss-k"&gt;\protect\G&lt;/span&gt;@refundefinedtrue
   &lt;span class="pgcss-k"&gt;\@&lt;/span&gt;latex@warning&lt;span class="pgcss-nb"&gt;{&lt;/span&gt;Reference &lt;span class="pgcss-k"&gt;\`&lt;/span&gt;TotPages&amp;#39; on page &lt;span class="pgcss-k"&gt;\thepage&lt;/span&gt; &lt;span class="pgcss-k"&gt;\space&lt;/span&gt;
                      undefined&lt;span class="pgcss-nb"&gt;}&lt;/span&gt;&lt;span class="pgcss-c"&gt;%&lt;/span&gt;
  &lt;span class="pgcss-k"&gt;\else&lt;/span&gt;
   &lt;span class="pgcss-k"&gt;\countdef\@&lt;/span&gt;pagescount=#3
   &lt;span class="pgcss-k"&gt;\expandafter\@&lt;/span&gt;pagescount=&lt;span class="pgcss-k"&gt;\expandafter&lt;/span&gt;#2#1&lt;span class="pgcss-k"&gt;\‍&lt;/span&gt;null
  &lt;span class="pgcss-k"&gt;\fi&lt;/span&gt;&lt;span class="pgcss-nb"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Таким образом, если вызвать &lt;code class="code"&gt;
 \totpagesvalue{88}&lt;/code&gt;
, то число страниц
будет помещено в счётчик &lt;code class="code"&gt;
 \count88&lt;/code&gt;
. Затем я написал команду вывода числа
и текста с правильным окончанием &lt;code class="code"&gt;
 \writewithword&lt;/code&gt;
.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-c"&gt;%% вывод числа с текстом:&lt;/span&gt;
&lt;span class="pgcss-c"&gt;%% 1. число&lt;/span&gt;
&lt;span class="pgcss-c"&gt;%% 2. для 1 (т.е. страниц-а, рисунок-0)&lt;/span&gt;
&lt;span class="pgcss-c"&gt;%% 3. для 2,3,4 (т.е. страниц-ы, рисунк-а)&lt;/span&gt;
&lt;span class="pgcss-c"&gt;%% 4. для 0, 5, 6, 7, 8, 9 (страниц-0, рисунк-ов)&lt;/span&gt;
&lt;span class="pgcss-c"&gt;%% 5. номер счётчика для временного хранения данных&lt;/span&gt;
&lt;span class="pgcss-c"&gt;%% 6. номер второго временного счётчика для расчётов&lt;/span&gt;
&lt;span class="pgcss-k"&gt;\‍&lt;/span&gt;newcommand&lt;span class="pgcss-nb"&gt;{&lt;/span&gt;&lt;span class="pgcss-k"&gt;\writewithword&lt;/span&gt;&lt;span class="pgcss-nb"&gt;}&lt;/span&gt;[6] &lt;span class="pgcss-nb"&gt;{&lt;/span&gt;
  &lt;span class="pgcss-k"&gt;\countdef\@&lt;/span&gt;pagescount=#5
  &lt;span class="pgcss-k"&gt;\@&lt;/span&gt;pagescount=#1
  &lt;span class="pgcss-k"&gt;\countdef\@&lt;/span&gt;mod=#6
  &lt;span class="pgcss-k"&gt;\@&lt;/span&gt;mod=&lt;span class="pgcss-k"&gt;\@&lt;/span&gt;pagescount
  &lt;span class="pgcss-c"&gt;%% для x11 ... x19&lt;/span&gt;
  &lt;span class="pgcss-k"&gt;\divide\@&lt;/span&gt;mod by 100
  &lt;span class="pgcss-k"&gt;\multiply\@&lt;/span&gt;mod by 100
  &lt;span class="pgcss-k"&gt;\advance\@&lt;/span&gt;mod by -&lt;span class="pgcss-k"&gt;\@&lt;/span&gt;pagescount
  &lt;span class="pgcss-k"&gt;\multiply\@&lt;/span&gt;mod by -1
  &lt;span class="pgcss-k"&gt;\ifthenelse&lt;/span&gt;&lt;span class="pgcss-nb"&gt;{&lt;/span&gt;&lt;span class="pgcss-k"&gt;\the\@&lt;/span&gt;mod&amp;gt;10 &lt;span class="pgcss-k"&gt;\and&lt;/span&gt; &lt;span class="pgcss-k"&gt;\the\@&lt;/span&gt;mod&amp;lt;20&lt;span class="pgcss-nb"&gt;}{&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;\the\@&lt;/span&gt;pagescount~#4
  &lt;span class="pgcss-nb"&gt;}{&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;\@&lt;/span&gt;mod=&lt;span class="pgcss-k"&gt;\@&lt;/span&gt;pagescount
    &lt;span class="pgcss-c"&gt;%% для x0 … x9&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;\divide\@&lt;/span&gt;mod by 10
    &lt;span class="pgcss-k"&gt;\multiply\@&lt;/span&gt;mod by 10
    &lt;span class="pgcss-k"&gt;\advance\@&lt;/span&gt;mod by -&lt;span class="pgcss-k"&gt;\@&lt;/span&gt;pagescount
    &lt;span class="pgcss-k"&gt;\multiply\@&lt;/span&gt;mod by -1
    &lt;span class="pgcss-k"&gt;\the\@&lt;/span&gt;pagescount
    &lt;span class="pgcss-k"&gt;\ifthenelse&lt;/span&gt;&lt;span class="pgcss-nb"&gt;{&lt;/span&gt;&lt;span class="pgcss-k"&gt;\equal&lt;/span&gt;&lt;span class="pgcss-nb"&gt;{&lt;/span&gt;&lt;span class="pgcss-k"&gt;\the\@&lt;/span&gt;mod&lt;span class="pgcss-nb"&gt;}{&lt;/span&gt;1&lt;span class="pgcss-nb"&gt;}}{&lt;/span&gt;#2&lt;span class="pgcss-nb"&gt;}{&lt;/span&gt;
      &lt;span class="pgcss-k"&gt;\ifthenelse&lt;/span&gt;&lt;span class="pgcss-nb"&gt;{&lt;/span&gt;&lt;span class="pgcss-k"&gt;\equal&lt;/span&gt;&lt;span class="pgcss-nb"&gt;{&lt;/span&gt;&lt;span class="pgcss-k"&gt;\the\@&lt;/span&gt;mod&lt;span class="pgcss-nb"&gt;}{&lt;/span&gt;2&lt;span class="pgcss-nb"&gt;}&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;\or&lt;/span&gt; &lt;span class="pgcss-k"&gt;\equal&lt;/span&gt;&lt;span class="pgcss-nb"&gt;{&lt;/span&gt;&lt;span class="pgcss-k"&gt;\the\@&lt;/span&gt;mod&lt;span class="pgcss-nb"&gt;}{&lt;/span&gt;3&lt;span class="pgcss-nb"&gt;}&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;\or&lt;/span&gt; &lt;span class="pgcss-k"&gt;\equal&lt;/span&gt;&lt;span class="pgcss-nb"&gt;{&lt;/span&gt;&lt;span class="pgcss-k"&gt;\the\@&lt;/span&gt;mod&lt;span class="pgcss-nb"&gt;}{&lt;/span&gt;4&lt;span class="pgcss-nb"&gt;}}&lt;/span&gt; &lt;span class="pgcss-nb"&gt;{&lt;/span&gt;#3&lt;span class="pgcss-nb"&gt;}{&lt;/span&gt;#4&lt;span class="pgcss-nb"&gt;}&lt;/span&gt;
    &lt;span class="pgcss-nb"&gt;}&lt;/span&gt;
  &lt;span class="pgcss-nb"&gt;}&lt;/span&gt;
&lt;span class="pgcss-nb"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Оставалось только объединить оба макроса в &lt;code class="code"&gt;
 \showpagecount&lt;/code&gt;
,
который выводит, например, 23 страниц&lt;strong&gt;ы&lt;/strong&gt; или 11 страни&lt;strong&gt;ц&lt;/strong&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-c"&gt;%% вывод вида: [число страниц] страниц/а/ы&lt;/span&gt;
&lt;span class="pgcss-k"&gt;\‍&lt;/span&gt;newcommand&lt;span class="pgcss-nb"&gt;{&lt;/span&gt;&lt;span class="pgcss-k"&gt;\showpagecount&lt;/span&gt;&lt;span class="pgcss-nb"&gt;}&lt;/span&gt;[5] &lt;span class="pgcss-nb"&gt;{&lt;/span&gt;
 &lt;span class="pgcss-k"&gt;\totpagesvalue&lt;/span&gt;&lt;span class="pgcss-nb"&gt;{&lt;/span&gt;#4&lt;span class="pgcss-nb"&gt;}&lt;/span&gt;
 &lt;span class="pgcss-k"&gt;\countdef\@&lt;/span&gt;pagescount=#4
 &lt;span class="pgcss-k"&gt;\writewithword&lt;/span&gt;&lt;span class="pgcss-nb"&gt;{&lt;/span&gt;&lt;span class="pgcss-k"&gt;\@&lt;/span&gt;pagescount&lt;span class="pgcss-nb"&gt;}{&lt;/span&gt;#1&lt;span class="pgcss-nb"&gt;}{&lt;/span&gt;#2&lt;span class="pgcss-nb"&gt;}{&lt;/span&gt;#3&lt;span class="pgcss-nb"&gt;}{&lt;/span&gt;#4&lt;span class="pgcss-nb"&gt;}{&lt;/span&gt;#5&lt;span class="pgcss-nb"&gt;}&lt;/span&gt;
&lt;span class="pgcss-nb"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;У меня есть файл referat.sty, который подготавливает реферат и
выводит число страниц и другую информацию по отчёту или диплому.
Используется вывод страниц в нём так:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-k"&gt;\showpagecount&lt;/span&gt;&lt;span class="pgcss-nb"&gt;{&lt;/span&gt;страница&lt;span class="pgcss-nb"&gt;}{&lt;/span&gt;страницы&lt;span class="pgcss-nb"&gt;}{&lt;/span&gt;страниц&lt;span class="pgcss-nb"&gt;}{&lt;/span&gt;48&lt;span class="pgcss-nb"&gt;}{&lt;/span&gt;47&lt;span class="pgcss-nb"&gt;}&lt;/span&gt;.
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="alert  alert-warning compound"&gt;
&lt;p&gt;Не забыть подключить пакеты &lt;code class="code"&gt;
totpages&lt;/code&gt;
 и &lt;code class="code"&gt;
ifthen&lt;/code&gt;
.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Переменная TotPages у
меня сбрасывается &lt;code class="code"&gt;
 \setcounter{TotPages}{-1}&lt;/code&gt;
, чтобы не нумеровать
титульный лист, а реферат не учитывается в страницы.&lt;/p&gt;
&lt;/div&gt;
</summary><category term="диплом"></category><category term="tex"></category><category term="программирование"></category><category term="окончания"></category><category term="страницы"></category><category term="latex"></category></entry><entry><title>Место для линзы</title><link href="/posts/2010/03/05/mesto-dlia-linzy/" rel="alternate"></link><updated>2010-03-05T21:59:42+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-05:posts/2010/03/05/mesto-dlia-linzy/</id><summary type="html">&lt;p&gt;Сделал крепление и механизм линзы для R2D2. Хтел вчера выложить, но
Яндекс уже четвёртый день тормозит по вечерам (не выносимо!). Пожалуй не
стоило включать сглаживание для всего синего материала, т.к. появились
косяки в других местах, ну ничего всё равно я ещё LuxRender не
настраивал:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/146539/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3808/imdagger.6/0_23c6b_83058a66_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="r2d2"></category></entry><entry><title></title><link href="/posts/2010/03/04/urn:ya.ru:post/22199227/711/" rel="alternate"></link><updated>2010-03-04T20:39:54+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-04:posts/2010/03/04/urn:ya.ru:post/22199227/711/</id><summary type="html">&lt;p&gt;Скоро я стану немного свободным. Долой рабство!&lt;/p&gt;
</summary></entry><entry><title>Бредни для себя</title><link href="/posts/2010/03/04/bredni-dlia-sebia/" rel="alternate"></link><updated>2010-03-04T19:33:48+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-04:posts/2010/03/04/bredni-dlia-sebia/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Нужно дописать отчёт-документацию по приложению и использованным
технологиям. А так же ссылки на литературу и форумы, где можно прочитать
тонкости. Пять страниц я уже написал, но не переработал в удобный вид.
Нужно ещё 15 написать и хватит. Как раз опишу необходимый минимум, на
котором базируется приложение. Ещё стоит пересмотреть по тегам все
записи блога по Hibernate, Tomcat и Java и включить их в отчёт, т.к. там
были интересные для меня решения и случаи. Кратки план на две первые
главы:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&amp;nbsp;Дать определения, что будет подразумеваться под понятиями: модель,
DAO и сервис, для тех кто не знает. Указать преимущества такой схемы
в данному случае.&lt;/li&gt;
&lt;li&gt;Построить UML диаграмму классов, на которой показать, кто что
использует (можно дополнительно пример ещё с Hibernate) при подходе с
DAO.&lt;/li&gt;
&lt;li&gt;Показать на примере то, что один сервис может использовать несколько
DAO, которые могут даже не работать с БД, что сервис обрабатывает
данные и выдаёт в удобном виде. Например, когда требуются
дополнительные расчётные поля, которые не могут быть получены из БД в
случае dl2ResultsCell.&lt;/li&gt;
&lt;li&gt;Кэширование должно производится на стороне сервиса, а не в DAO, слой
данных просто выдаёт информацию, но никак не управляет запросами и не
кэширует данные между ними. Схема работы с источниками и кэшем.&lt;/li&gt;
&lt;li&gt;Модель является простым POJO-объектом с базовой логикой. Например
есть пользователь, если нужно получить его фамилию, то это выполняет
сам объект, если нужно получить состояние истина/ложь по вопросу,
указал ли пользователь фамилию, то тоже объект. Если какие-то
расчёты, которые не задействуют группы других объектов, то сам. Но
если требуется проверка прав пользователя (достаточно ли их), то
обрабатывает сервис. В метод сервиса передаётся объект, внутри
решается как проверить права, например, запросить через DAO из базы
такого пользователя с такими правами. Показать на примере
spCanShowStrangerLog.&lt;/li&gt;
&lt;li&gt;Рассказать про запуск и настройку Tomcat, настройку manager, чтобы
удобно управлять загрузкой новых версий приложения.&lt;/li&gt;
&lt;li&gt;Создание нового пустого веб приложения, настройки web.xml, где
расположены классы, представления, WEB-INF и конфигурационные файлы.&lt;/li&gt;
&lt;li&gt;Основные настройки Spring: конфигурирование путей расположения
представлений, контроллеров, обход коллизии со старым кодом и
статическим контентом. На какие части разбит конфигурационный файл,
где они располагаются.&lt;/li&gt;
&lt;li&gt;Где расположены файлы проецирования для Hibernate, где SQL-запросы и
настройки подключения к БД. Описать зачем потребовалось проецирование
через XML на Native-SQL.&lt;/li&gt;
&lt;li&gt;Какие библиотеки установить в lib самого Tomcat, какие в локальный
lib приложения.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&amp;nbsp;Указать, где использовал паттерн «Декоратор» (он же «Обертка» или
«Wrapper»). Зачем применялся.&lt;/p&gt;
</summary><category term="работа"></category><category term="бредни"></category></entry><entry><title>Ретопология</title><link href="/posts/2010/03/02/retopologiia/" rel="alternate"></link><updated>2010-03-02T14:27:47+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-02:posts/2010/03/02/retopologiia/</id><summary type="html">&lt;p&gt;Оказывается функция Retopo в режиме редактирования достаточно
полезная для меня вещь. Бывает мне нужно вырезать фигуру некоторой
правильной формы на поверхности другого объекта, или просто переработать
частично сетку, если кривая (она у меня часто кривая x-D). Например,
чтобы вырезать круг на голове R2D2 (знаю, что для такой фигуры есть
скрипт, но мне не только круги приходится вырезать) под линзу я бы по
старинке сделал так: создал круг, спроецировал при помощи Shinkwrap
модификатора на поверхность объекта, применил модификатор и объединил
объекты, затем убрал лишнее и соединил. Теперь можно сделать так:&lt;/p&gt;
&lt;p&gt;Верхняя часть меша робота&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/144869/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3807/imdagger.6/0_235e5_a6b4b091_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="cut text-center"&gt;&lt;a class="h-link reference internal" data-toggle="collapse" href="#cut_45017104"&gt;смотреть далее&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_45017104"&gt;
&lt;p class="text-center"&gt;Добавление нового пустого меша&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/144870/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/3813/imdagger.6/0_235e6_1007e7c7_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;Включение режима Retopo при редактировании пустого меша&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/144874/"&gt;&lt;img alt="image2" src="http://img-fotki.yandex.ru/get/3911/imdagger.6/0_235ea_1484b9f1_L" title="image2"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;Добавка окружности&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/144875/"&gt;&lt;img alt="image3" src="http://img-fotki.yandex.ru/get/3814/imdagger.6/0_235eb_b4c1cd8e_L" title="image3"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;Правая половина убрана, т.к. меш робота уже имеет  модификатор Mirror&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/144876/"&gt;&lt;img alt="image4" src="http://img-fotki.yandex.ru/get/3907/imdagger.6/0_235ec_c20ac303_L" title="image4"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;Видно, что окружность «легла» на поверхность робота&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/144877/"&gt;&lt;img alt="image5" src="http://img-fotki.yandex.ru/get/3807/imdagger.6/0_235ed_a22f0a5a_L" title="image5"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;</summary><category term="blender"></category><category term="ретопология"></category></entry><entry><title>Три разбойника</title><link href="/posts/2010/03/01/tri-razboinika/" rel="alternate"></link><updated>2010-03-01T17:27:11+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-03-01:posts/2010/03/01/tri-razboinika/</id><summary type="html">&lt;p&gt;Посмотрел этот забавный немного психоделический рисованный мультик.
Главная злая героиня переварилась в торт, прыгнув с сироп, при этом сама
это сделала :). Вот немного кадров из мультика:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/144285/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3814/imdagger.5/0_2339d_12177448_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="cut"&gt;&lt;a class="h-link reference internal" data-toggle="collapse" href="#cut_46394448"&gt;А вот и порождения психоделического разума: ...&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_46394448"&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/144294/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/3811/imdagger.5/0_233a6_ba7ef5ad_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;А вот это полицейский в лесу увидел и сам сказал, что это всего лишь
порождение его разума&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/144295/"&gt;&lt;img alt="image2" src="http://img-fotki.yandex.ru/get/3810/imdagger.5/0_233a7_29c39a0f_L" title="image2"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;“Что ж, господа.. То чем вы здесь занимаетесь является.. эхмм..кхмм…
нарушением норм общественного порядка и … э!! алё!”, - сказал
полицейский эти милым кроликам и выписал штраф :)&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/144296/"&gt;&lt;img alt="image3" src="http://img-fotki.yandex.ru/get/3814/imdagger.5/0_233a8_6ba20220_L" title="image3"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Забавный мультфильм, настроение поднял :)&lt;/p&gt;
&lt;/div&gt;</summary><category term="радость"></category><category term="мультфильм"></category></entry><entry><title>Заметка</title><link href="/posts/2010/02/28/zametka/" rel="alternate"></link><updated>2010-02-28T20:10:01+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-28:posts/2010/02/28/zametka/</id><summary type="html">&lt;p&gt;Ещё полезная вещь &lt;kbd class="kbd"&gt;
W, Alt + 8&lt;/kbd&gt;
. Выбираешь две точки, применяешь
функцию и вуаля.. оно выбрало все вершины на пути от одной точки к
другой. Это в дополнение к Edge Loop Select и Edge Ring Select. Думаю
моя жизнь станет немного проще.&lt;/p&gt;
</summary><category term="blender"></category><category term="жизнь"></category><category term="заметка"></category></entry><entry><title>4000 samples/pix</title><link href="/posts/2010/02/28/4000-samplespix/" rel="alternate"></link><updated>2010-02-28T11:30:24+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-28:posts/2010/02/28/4000-samplespix/</id><summary type="html">&lt;p&gt;После 15 часов рендеринга LuxRender достиг 4000 samples/pix, что
очень даже быстро для моей рабочей машинки. Вот робот R2D2 с меньшим
количеством шумов. У него ещё нет: проектора, линзы, индикатора
процессора, панели с гаджетами, двух ног, зарядной системы. Есть только
минимум, думаю в течение нескольких недель (или месяцев с перерывами на
основную работу) доработаю до приемлемого вида. С чем пока у меня
туговато очень — не умею управлять LuxRender, делать хорошие материалы и
освещение, а также контраст, но думаю почитаю и научусь. Я ещё задумал
добавить окружение этой картинке, горы и песчаник, как на далёкой
далёкой галактике планете. Осознал то, что включать Subsurf в Blender не
обязательно при рендеринге LuxRender’ом, достаточно в самом люксе
включить Subsurf на материал (главное не забывать &lt;kbd class="kbd"&gt;
Ctrl+A&lt;/kbd&gt;
 применять, а то
всё съедет).&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/143966/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3910/imdagger.5/0_2325e_c75d9175_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="luxrender"></category><category term="r2d2"></category><category term="набросок"></category></entry><entry><title>R2D2</title><link href="/posts/2010/02/27/r2d2/" rel="alternate"></link><updated>2010-02-27T21:25:39+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-27:posts/2010/02/27/r2d2/</id><summary type="html">&lt;p&gt;Хотел сегодня сделать на конкурс про пылесос модель робота R2D2, из
которого будет торчать гофрированный шланг и трубка. И будет что-то в
духе: “Дроид R2D2 на службе в мирное время!”. Но вот моделирую я
медленно, поэтому через несколько часов работы я уже осознал, что не
успею завершить сё к сроку. Жаль конечно… Но я попробую доделать эту
работу потихонечку в свободное время. Сетка вышла кажется не ужасная и я
всего использовал несколько треугольников ( не знал как выкрутиться), а
в основном сетка состоит из квадов. Чему я полезному научился во время
создания робота R2D2?&lt;/p&gt;
&lt;p&gt;Понял, что больше так нельзя создавать круги, не следует
использовать треугольники при их создании, слева на рисунке как
правильно ( на мой взгляд), а справа как я делал раньше:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/143854/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3814/imdagger.5/0_231ee_f79977fa_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Треугольники и Set Smooth создают очень странные артефакты — лучше
делать без них. Потом я чуть не угробил всю свою работу, поэтому стал
периодически сохранять промежуточные версии, когда пытаюсь что-то сильно
модифицировать. В этом мне помогли клавиши &lt;strong&gt;+&lt;/strong&gt; и &lt;strong&gt;–&lt;/strong&gt; в меню
сохранения — они автоинкрементируют (декрементируют) номер в названии
файла.&lt;/p&gt;
&lt;p&gt;Облегчило и ускорило моделирование сочетание клавиш &lt;kbd class="kbd"&gt;
Ctrl+E, 7&lt;/kbd&gt;

(выбор всего пути точек по заданному ребру). Это полезная функция,
особенно когда нужно применить свойство грани к группе рёбер. Как только
я выделил цепочку вершин, то сразу нажимал &lt;kbd class="kbd"&gt;
Ctrl+E, Alt+1&lt;/kbd&gt;
 (Mark
Sharp), это позволяло бороться с &lt;strong&gt;Set Smooth&lt;/strong&gt; при помощи модификатора
&lt;strong&gt;Edge Split&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Ещё, когда мне несколько раз потребовалось спроецировать некоторый
меш на тело объекта, то я воспользовался старым добрым &lt;strong&gt;Shinkwrap&lt;/strong&gt; с
выбором типа &lt;strong&gt;projection&lt;/strong&gt; и нужно осью. Также мои нервы были спасены
непримечательной кнопкой с кубиком и подсказкой Occlude background
geometry, она запретила просвечиваться рёбрам через передние грани,
порой очень не удобно, что выбираешь «левые» точки или грани. Эта
функция спасает от таких бед.&lt;/p&gt;
&lt;p&gt;Вот мой R2D2, постобработки нет, ещё шумновато, т.к. рендерилось на
медленной машине всего минут 50.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/143856/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/3813/imdagger.5/0_231f0_224a7c2d_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="r2d2"></category><category term="робот"></category><category term="3d"></category><category term="моделирование"></category></entry><entry><title>Театр</title><link href="/posts/2010/02/26/teatr/" rel="alternate"></link><updated>2010-02-26T21:13:46+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-26:posts/2010/02/26/teatr/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Сходил на 40-летний юбилей театральной группы. Хотя я и не очень
люблю юбилеи, но там было нормально. Ушёл довольный.&lt;/p&gt;
</summary><category term="жизнь"></category></entry><entry><title></title><link href="/posts/2010/02/25/urn:ya.ru:post/22199227/702/" rel="alternate"></link><updated>2010-02-25T21:36:34+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-25:posts/2010/02/25/urn:ya.ru:post/22199227/702/</id><summary type="html">&lt;p&gt;Arrrgh!&lt;/p&gt;
</summary></entry><entry><title>Полоса прокрутки</title><link href="/posts/2010/02/25/polosa-prokrutki/" rel="alternate"></link><updated>2010-02-25T21:29:06+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-25:posts/2010/02/25/polosa-prokrutki/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Доделал код для полосы прокрутки в редакторе, в игровом режиме она
себя и так хорошо чувствовала. Теперь в редакторе можно захватить
слайдер и тащить его, при этом страница с содержимым рюкзака
обновляется. Сегодня дома почищу код скроллбара и выложу его. Возможно
расширю интерфейс объекта, который является внутренним для полосы
прокрутки, т.к. pos, scroll_down, scroll_up хватает, но выводит
кривовато: если есть новая желаемая позиция и нужно слайдер сдвинуть в
неё, если это возможно, то приходится проверять направление, затем
сдвигать в него слайдер при помощи scroll_down или scroll_up,
проверять свойство pos. Если слайдер вылазит за него, то применять
«обратный скроллинг», но контроллер рюкзака при прокрутке вызывает
обновление представления в случает необходимости. Поэтому я планирую
добавить свойства next_pos и prev_pos, чтобы определять возможность
перехода к новой позиции.&lt;/p&gt;
</summary><category term="blender"></category><category term="last_gateway_to_hell"></category></entry><entry><title>Скролл</title><link href="/posts/2010/02/24/skroll/" rel="alternate"></link><updated>2010-02-24T21:28:14+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-24:posts/2010/02/24/skroll/</id><summary type="html">&lt;p&gt;Открыл я файл с исходным кодом Blender в том месте, где должен
обрабатываться элемент интерфейса такой, как полоса прокрутки и увидел
то, что и ожидал:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-k"&gt;case&lt;/span&gt; &lt;span class="pgcss-n"&gt;SCROLL&lt;/span&gt;:
   &lt;span class="pgcss-cm"&gt;/* DrawBut(b, 1); */&lt;/span&gt;
   &lt;span class="pgcss-cm"&gt;/* do_scrollbut(b); */&lt;/span&gt;
   &lt;span class="pgcss-cm"&gt;/* DrawBut(b,0); */&lt;/span&gt;
   &lt;span class="pgcss-k"&gt;break&lt;/span&gt;&lt;span class="pgcss-p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Логично, что функция полосы прокрутки не задокументирована и не
работает. Поэтому и в LuxRender экспортёре реализуют свой класс scrollbar.
Я взял этот класс и посмотрел как он определяет позицию она и
работает в общем. Переделал его под свои нужды, т.к. в экспортёре он
высотой во всё окно и прижат к правому краю. Мне нужна произвольная
позиция и использование уже существующего класса контроллера &lt;code class="code"&gt;
Bag&lt;/code&gt;
,
который реализует метода &lt;code class="code"&gt;
scroll_up&lt;/code&gt;
, &lt;code class="code"&gt;
scroll_down&lt;/code&gt;
 и &lt;code class="code"&gt;
pos&lt;/code&gt;
. Новый класс
&lt;code class="code"&gt;
base.editor_utils.Scrollbar&lt;/code&gt;
 принимает в качестве аргумента контроллер
рюкзака, получается такое своеобразное представление-контроллер, которое
обрабатывает и события, передавая их в настоящий контроллер. Сразу
заработало перемещение ползунка при нажатии на кноки, т.к. класс себя
позиционирует как дополнительное представление контроллера рюкзака.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/142871/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3908/imdagger.5/0_22e17_8e398c87_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="bge"></category><category term="last_gateway_to_hell"></category><category term="скролл"></category></entry><entry><title>Доработка</title><link href="/posts/2010/02/23/dorabotka/" rel="alternate"></link><updated>2010-02-23T13:04:13+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-23:posts/2010/02/23/dorabotka/</id><summary type="html">&lt;p&gt;Взял я одну из своих первых удачных (т.е. ту, которую можно было
показать людям, а не держать в подполье своего винчестера) работ в
Blender (я её делал, как поздравительную открытку) и немного доработал
вчера. Поменял типы источников света, их размещение и переименовал
материалы. Сократил количество полигонов в ~5 раз! Применил SetSmooth,
но сетку не изменял (так и осталась она старая), лишь конвертировал из
треугольников в квады. Добавил ружьё и убрал поздравительную надпись :)
Вот, что получилось:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/142606/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3910/imdagger.5/0_22d0e_5bafc7a1_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Я это изображение использую для аватарки на форуме.&lt;/p&gt;</summary><category term="blender"></category><category term="доработка"></category><category term="набросок"></category></entry><entry><title>Символ &amp; в названиях альбомов</title><link href="/posts/2010/02/21/simvol-v-nazvaniiakh-albomov/" rel="alternate"></link><updated>2010-02-21T20:12:35+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-21:posts/2010/02/21/simvol-v-nazvaniiakh-albomov/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Странно, что на Я.Фотки, если создать альбом с &amp;amp; в названии оно его
конвертирует в &amp;amp;amp;. Это правильно, но… затем другая часть, которая всё
отображает, показывает мой &amp;amp; уже как &amp;amp;amp;amp;. И выходит, что я не могу
вообще вставить &amp;amp;.&lt;/p&gt;
</summary><category term="название"></category><category term="альбом"></category><category term="фотки"></category><category term="Яндекс"></category></entry><entry><title>Памятка о мультяшных материалах</title><link href="/posts/2010/02/21/pamiatka-o-multiashnykh-materialakh/" rel="alternate"></link><updated>2010-02-21T19:59:36+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-21:posts/2010/02/21/pamiatka-o-multiashnykh-materialakh/</id><summary type="html">&lt;p&gt;Это небольшая памятка для себя о том, как я добивался мультяшности в
некоторых своих 3D-работах для кожи, ткани и т.д. Сначала я создал два
классических источника света: солнце и холодную подсветку тени. Солнце
создаёт мягкую тень и блик:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/142296/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3807/imdagger.5/0_22bd8_9d6aa39a_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Чтобы не было видно вторую лампу, ей нужно выключить возможность
создавать блики, и так как она Hemi то по умолчанию не создаёт теней:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/142297/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/3810/imdagger.5/0_22bd9_5e2c11df_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Сцена состоит из трёх сфер разного цвета с применённым Set Smooth:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/142299/"&gt;&lt;img alt="image2" src="http://img-fotki.yandex.ru/get/3907/imdagger.5/0_22bdb_238e4753_L" title="image2"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Если материал стандартный и изменён только цвет, то получится во
такой результат:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/142300/"&gt;&lt;img alt="image3" src="http://img-fotki.yandex.ru/get/3808/imdagger.5/0_22bdc_cb012c_L" title="image3"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Такой материал подходит для блестящих гладких поверхностей, но не для
мультяшных тканей. Поэтому я заменил шейдер освещения на Minnaert,
который может создать по краям приятное освещение, если уменьшить Dark.
От блика тоже стоит почти полностью избавиться в параметре Spec:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/142301/"&gt;&lt;img alt="image4" src="http://img-fotki.yandex.ru/get/3911/imdagger.5/0_22bdd_73c11629_L" title="image4"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;После рендеринга той же сцены, но с изменёнными параметрами
материалов, получится результат, который ИМХО более мультяшный и
приятнее :)…&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/142302/"&gt;&lt;img alt="image5" src="http://img-fotki.yandex.ru/get/3811/imdagger.5/0_22bde_67ed4727_L" title="image5"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="материал"></category><category term="памятка"></category></entry><entry><title>Скалярная хранимая процедура</title><link href="/posts/2010/02/20/skaliarnaia-khranimaia-protsedura/" rel="alternate"></link><updated>2010-02-20T21:40:17+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-20:posts/2010/02/20/skaliarnaia-khranimaia-protsedura/</id><summary type="html">&lt;p&gt;Сегодня спроецировал процедуру, которая возвращает число 1 или 0 на
скалярную величину типа boolean. Вышло не очень сложно, но был подводный
камень. Писать нужно не Boolean, а boolean, т.е. тип из разряда
встроенных, но Hibernate вернёт объект в списке типа Boolean:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-cp"&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot;?&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-cp"&gt;&amp;lt;!DOCTYPE hibernate-mapping PUBLIC&lt;/span&gt;
&lt;span class="pgcss-cp"&gt;    &amp;quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&amp;quot;&lt;/span&gt;
&lt;span class="pgcss-cp"&gt;    &amp;quot;http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\ &amp;quot;&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;hibernate-mapping&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;sql-query&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;users.isCanReadLog&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;callable=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;true&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;return-scalar&lt;/span&gt; &lt;span class="pgcss-na"&gt;column=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;isYouCanShow&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;type=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;boolean&amp;quot;&lt;/span&gt; &lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
{ call spIsCanShowStrangerLog(:courseId, :userId) }
&lt;span class="pgcss-nt"&gt;&amp;lt;/sql-query&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;/hibernate-mapping&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Сначала я посмотрел пример, но там было написано {&lt;strong&gt;? =&lt;/strong&gt; call
spIsCanShowStrangerLog(:courseId, :userId) }, но эта запись вызывает
ошибку, т.к. я передаю два параметра, а оно хочет 3-и. Всё дело в том,
что пример не для MSSQL, для MSSQL не нужно передавать результат в
параметр. Работать нужно из DAO с данным запросом так:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-n"&gt;List&lt;/span&gt; &lt;span class="pgcss-n"&gt;result&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;getHibernateTemplate&lt;/span&gt;&lt;span class="pgcss-o"&gt;().&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;findByNamedQueryAndNamedParam&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;users.isCanReadLog&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt;
                             &lt;span class="pgcss-k"&gt;new&lt;/span&gt; &lt;span class="pgcss-n"&gt;String&lt;/span&gt;&lt;span class="pgcss-o"&gt;[]{&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;courseId&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;quot;userId&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;},&lt;/span&gt;
                             &lt;span class="pgcss-k"&gt;new&lt;/span&gt; &lt;span class="pgcss-n"&gt;Object&lt;/span&gt;&lt;span class="pgcss-o"&gt;[]{&lt;/span&gt;&lt;span class="pgcss-n"&gt;courseId&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;userId&lt;/span&gt;&lt;span class="pgcss-o"&gt;}&lt;/span&gt;
        &lt;span class="pgcss-o"&gt;);&lt;/span&gt;
&lt;span class="pgcss-n"&gt;logger&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;info&lt;/span&gt;&lt;span class="pgcss-o"&gt;((&lt;/span&gt;&lt;span class="pgcss-n"&gt;Boolean&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt; &lt;span class="pgcss-n"&gt;result&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;get&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-mi"&gt;0&lt;/span&gt;&lt;span class="pgcss-o"&gt;));&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;К встроенному boolean тип Object не конвертируется, а Hibernate
возвращает всё типа Object.&lt;/p&gt;
</summary><category term="процедура"></category><category term="проецирование"></category><category term="hibernate"></category></entry><entry><title>Adobe Flex</title><link href="/posts/2010/02/19/adobe-flex/" rel="alternate"></link><updated>2010-02-19T21:29:02+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-19:posts/2010/02/19/adobe-flex/</id><summary type="html">&lt;p&gt;Выкачал я посмотреть Adobe Flex 3.5. Забавная вещь, скачал ещё
дополнительно библиотеку Flixel, чтобы можно было делать небольшие игры
на Flash, если у меня потребность появится. Почему Flex? Он же
изначально не создан для игр? Всё потому, что он предоставляет удобное
привычное создание игр: просто писать исходный код, а ресурсы отдельно,
а ещё он работает под Linux. Я нарисовал небольшую заставку и сделал
средненький прогрессбар. Пока разобрался с AS3 потратил порядочно
времени, но всё де смог сделать :) И кода вышло не много. Правда mxmlc
компилирует .as файлы долговато. Ещё я поставил actionscript-mode для
Emacs.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/141937/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3811/imdagger.5/0_22a71_b6492bb3_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;полная загрузка в плеере&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/141938/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/3809/imdagger.5/0_22a72_845695fd_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;частичная загрузка&lt;/p&gt;
&lt;p&gt;Хотелось бы и в этом всё наловчиться работать. Вдруг кушать будет
нечего, буду делать Flash-игры :).&lt;/p&gt;</summary><category term="linux"></category><category term="flex"></category></entry><entry><title>ГА2</title><link href="/posts/2010/02/17/ga2/" rel="alternate"></link><updated>2010-02-17T20:57:29+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-17:posts/2010/02/17/ga2/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Испытания предыдущего алгоритма по подбору напыления прошли почти
успешно. Но столкнулся с проблемами, что популяция странно вырождается.
И поиск проще производить по геометрической толщине, чем по оптической.
Попробую перестроить алгоритм на битовые строки, сейчас есть просто
кортежи чисел. В Python есть в модуле random функция &lt;strong&gt;getrandbits(N
число бит)&lt;/strong&gt;, возвращает чило типа &lt;strong&gt;long&lt;/strong&gt;, которое собрано из
произвольного количества бит равного N. Таким образом я смогу создать
взаимодействие между хромосомами, в это же битовое пространство будет
помещено не только d&lt;sub&gt;i&lt;/sub&gt;, но и n&lt;sub&gt;i&lt;/sub&gt; (а далее и
k&lt;sub&gt;i&lt;/sub&gt;). Толщину стоит ограничить от 120 до 2000, и только целые
числа, всё равно дробные сложновато напылить. На крайний случай после
нахождения хорошего ответа будет произведена оптимизация, где решение
будет помещено в дробные числа.&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; UPD1 Хм.. хотя и старый алгоритм с длиной волны и оптической
толщиной ищет тоже не плохо. Сначала казалось, что популяция вымирает,
но потом оказалось, что после нескольких сотен итераций оно смогло
построить неплохое покрытие из всего двух материалов с превышением
оригинальной функции всего в сумме ~4%.&lt;/p&gt;
</summary><category term="генетический"></category><category term="покрытие"></category><category term="физика"></category><category term="оптика"></category></entry><entry><title></title><link href="/posts/2010/02/17/urn:ya.ru:post/22199227/693/" rel="alternate"></link><updated>2010-02-17T20:43:56+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-17:posts/2010/02/17/urn:ya.ru:post/22199227/693/</id><summary type="html">&lt;p&gt;*Нас* вылечит только сон :)&lt;/p&gt;
</summary></entry><entry><title>Выкроил время</title><link href="/posts/2010/02/17/vykroil-vremia/" rel="alternate"></link><updated>2010-02-17T20:42:46+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-17:posts/2010/02/17/vykroil-vremia/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Ну что ж, … готовься X-Ray к новому бою, я снова нашёл на тебя
время. Сегодня отнесу домой текущую черновую ревизию и дома немного
доработаю код и ускорю. Что и как необходимо сделать за сегодня:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Сделать наследника класса RAS_MaterialBucket, который будет
разделять &amp;nbsp;в разные списки оверлейные меши от обычных. Это позволит
уже ещё до рендеринга кадра знать: включить GL_STENCIL_TEST или
нет. Включение чуть-чуть замедлит отрисовку, но оверлейные объекты
отрисовываются два раза. Таким образом, если нет оверлея, но «никто
не пострадает»&lt;/li&gt;
&lt;li&gt;По просьбам трудящихся добавлю объекты, которые могут проявляться
поверх всего. Например, стрелочка на карте, куда идти и т.д.&lt;/li&gt;
&lt;li&gt;Попробую решить проблему с рендерингом объектов с одинаковым
приоритетом и флагом оверлейности.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; Главное это всё успеть сегодня ночью, т.к. времени в обрез, нужно
заниматься и другими делами, которые уже в жо дедлайне.&lt;/p&gt;
</summary><category term="blender"></category><category term="bge"></category><category term="x-ray"></category></entry><entry><title></title><link href="/posts/2010/02/16/urn:ya.ru:post/22199227/687/" rel="alternate"></link><updated>2010-02-16T21:43:39+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-16:posts/2010/02/16/urn:ya.ru:post/22199227/687/</id><summary type="html">&lt;p&gt;Печально и устал, апатия :(&lt;/p&gt;
</summary></entry><entry><title>Генерация поколений</title><link href="/posts/2010/02/15/generatsiia-pokolenii/" rel="alternate"></link><updated>2010-02-15T21:15:58+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-15:posts/2010/02/15/generatsiia-pokolenii/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Пришлось исключить пока длину волны из создания популяции, по
геометрической толщине алгоритм ищет субъективно лучше. Но в нём есть
ещё недоработки и промахи, т.к. он подбирает не все теоретические
графики, особенно, если ему выдано мало материалов. Есть ещё проблемы с
кроссинговером хромосом переменной длины. Нужно подумать над такой
конструкцией, чтобы вероятность выживания потомства была выше, чем
смерти. Сейчас они часто вымирают и быстро сходятся. Графики с
достаточным числом переходов и при количестве материалов &amp;gt;2 подбирает
неплохо, но это я тестировал с подбором по оптической толщине. Думаю
сделать комбинированный алгоритм, который поможет потомству
модифицироваться и выживать. Т.е. после каждой популяции запускается
функция, которая пытается жизнеприспособить её насколько возможно.&lt;/p&gt;
</summary><category term="алгоритм"></category><category term="генетический"></category><category term="физика"></category><category term="оптика"></category></entry><entry><title>ГА</title><link href="/posts/2010/02/14/ga/" rel="alternate"></link><updated>2010-02-14T18:00:58+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-14:posts/2010/02/14/ga/</id><summary type="html">&lt;p&gt;Попробую по заданным ограничениям на n&lt;sub&gt;1&lt;/sub&gt;..n&lt;sub&gt;p&lt;/sub&gt; (а
затем ещё добавятся и k&lt;sub&gt;1&lt;/sub&gt;..k&lt;sub&gt;p&lt;/sub&gt;) определить оптические
толщины слоёв d&lt;sub&gt;1&lt;/sub&gt;..d&lt;sub&gt;p&lt;/sub&gt; и их порядок, чтобы получить
заданный график отражения и пропускания волн в заданном диапазоне.
Надеюсь ГА (генетический аппарат) меня снова выручит, хоть этой теории
всего ~35 лет. Получается передо мной стоит задача оптимизации
многопараметровой сложной (с точки зрения ГА неизвестной) функции
&lt;span class="raw-latex"&gt;$math$ f_1({\lambda}_x, {\lambda}_{раб.},n_1..n_p,k_1..k_p,d_1..d_p) $/math$&lt;/span&gt;,
где p может быть ~300, т.е. у функции около 1000 параметров, чтобы она
повторила характеристики графика и чтобы одновременно была оптимальна
для второго графика функция &lt;span class="raw-latex"&gt;$math$ f_2({\lambda}_x, {\lambda}_{раб.},n_1..n_p,k_1..k_p,d_1..d_p) $/math$&lt;/span&gt;
для тех же параметров. Единственный варьируемый и известный до
оптимизации параметр функции — это λ&lt;sub&gt;x&lt;/sub&gt;.&lt;/p&gt;
&lt;p&gt;Способом отбора особей для спаривания будет метод рулетки
(roulette-wheel selection) или как его ещё зовут «метод пирога».
Скрещивание будет простым одноточечным кроссовером, а мутация
вероятностная, обычно я вероятность беру между &lt;strong&gt;0.45&lt;/strong&gt; и &lt;strong&gt;0.5&lt;/strong&gt;
(связано с распределением случайных величин). Ещё добавляю с очень
маленькой вероятностью полную стохастическую мутацию одной из особей.
Фитнесс-функцией в черновом варианте будет
&lt;span class="raw-latex"&gt;$math$ \sum_{i=1..N} |f_1({\lambda}_i, x_1..x_t) - f_2({\lambda}_i, x_1..x_t)|$/math$&lt;/span&gt;,
где x&lt;sub&gt;1&lt;/sub&gt;..x&lt;sub&gt;t&lt;/sub&gt; — хромосомы особи из текущей популяции.&lt;/p&gt;
&lt;p&gt;Посмотрим, что из этого выйдет, обычно ГА меня не подводил, даже на
тороидальном кубике Рубика, хотя фитесс фунцию я долго подбирал и
допиливал, чтобы оно грани лучше собирало в единое целое.&lt;/p&gt;
</summary><category term="программирование"></category><category term="алгоритм"></category><category term="генетический"></category><category term="просветление"></category><category term="физика"></category><category term="оптика"></category></entry><entry><title>Функция escape</title><link href="/posts/2010/02/13/funktsiia-escape/" rel="alternate"></link><updated>2010-02-13T20:22:10+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-13:posts/2010/02/13/funktsiia-escape/</id><summary type="html">&lt;p&gt;Достался мне JavaScript код по наследству, а там использовалась
функция escape для передачи аргументов этому же сервлету, но с
параметрами фильтрации. Я вдруг обнаружил, что Tomcat пропускает
параметры, в которых я пытаюсь передать русские буквы. В старом коде
использовалась кодировка CP1251, а в новом я использую UTF-8. В логах я
нашёл трэйс с ошибкой:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;13.02.2010 17:28:05 org.apache.tomcat.util.http.Parameters
processParameters&lt;/div&gt;
&lt;div class="line"&gt;WARNING: Parameters: Character decoding failed. Parameter skipped.&lt;/div&gt;
&lt;div class="line"&gt;java.io.CharConversionException: isHexDigit&lt;/div&gt;
&lt;div class="line"&gt;at org.apache.tomcat.util.buf.UDecoder.convert(UDecoder.java:88)&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Ничего не выпадает, всё работает, но такие параметры игнорируются.
Оказалось, что функции escape не стоит использовать для передачи данных
в URI. А нужно пользоваться функцией &lt;code class="code"&gt;
encodeURIComponent&lt;/code&gt;
. Она
кодирует строку подругому, в правильном для URI формате, Tomcat её
понимает.&lt;/p&gt;
</summary><category term="ошибка"></category><category term="java"></category><category term="кодировка"></category><category term="работа"></category><category term="tomcat"></category></entry><entry><title>Просветление меня и германия (Ge)</title><link href="/posts/2010/02/12/prosvetlenie-menia-i-germaniia-ge/" rel="alternate"></link><updated>2010-02-12T21:42:43+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-12:posts/2010/02/12/prosvetlenie-menia-i-germaniia-ge/</id><summary type="html">&lt;p&gt;Сегодня утром меня осенило (просветило, не будет вдаваться в
подробности почему, т.к. эта тайна покрытая мраком…) и я понял, как
правильно управляться эталонной программой для расчётов, когда толщина
оптическая. Написал черновой код на Python, который расчитывает
отражение R и пропускание T на основании длины волны с учётом, что
толщины слоёв оптические. Вся программа составила не больше, чем 150
строчек со всей отрисовкой и расчётами. Теперь у меня есть небольшой
черновой стенд и я могу испытывать подбор напыления для подложек под
заданные характеристики.&lt;/p&gt;
&lt;p&gt;Вот теоретический пример, который я нашёл, для просветления
германия при помощи трёхслойного покрытия толщинами  λ/4:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/137404/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3911/imdagger.5/0_218bc_b04e1e30_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Затем я ввёл параметры покрытия в мою программу и она построила
похожий график, значит моя программа производит расчёты верно. Теперь
остаётся составить алгоритм восстановления, т.е. её научить делать
обратную операцию данной:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/137405/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/3912/imdagger.5/0_218bd_8eb1c4b8_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;График строится «вручную» прямо в формат PDF используя библиотеку
&lt;strong&gt;reportlab.pdfgen&lt;/strong&gt; от ReportLab, чудесная, скажу, библиотека.
Достаточно простая и предоставляет множество функций через класс Canvas.
Например, для перехода на новую страницу достаточно просто вызвать метод
showPage() объекта типа Canvas.&lt;/p&gt;</summary><category term="просветление"></category><category term="покрытие"></category><category term="физика"></category><category term="оптика"></category></entry><entry><title>Суета</title><link href="/posts/2010/02/11/sueta/" rel="alternate"></link><updated>2010-02-11T21:03:53+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-11:posts/2010/02/11/sueta/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp;Сегодня до обеда пытался построить в программе просветление на стекле
с коэффициентом преломления 1.51. Смог повторить только часть графиков
для силикатных и алюминиевых плёнок. Но вот, когда дело дошло до плёнок
с коэффициентом преломления &amp;gt;2, то почему-то график стал не такой как
должен быть. Чувствую, у меня есть проблемы в понимании применения
параметров оптической толщины в этой программе, т.к. я ориентируюсь на
геометрическую толщину, что вызывает у меня вообще разрыв мозга. Как
только я смогу построить все мои теоретические графики, то тогда я сразу
же смогу разработать алгоритм восстановления покрытия, идея у меня уже
есть. Остались только проблемы в повторении процесса. Я уже и про
напыление прочитал и про просветление, ещё кучу физической теории.
Многое понял, но пока туплю, что-то не идёт, может в программе ошибка
(писал её не я)… тем более, что я там нашёл уже несколько ошибок.
Особенно было забавно случайно выставить толщину подложки, которая не
предусмотрена: добавляем слой, выставляем толщину, удаляем слой, ..
опа.. у подложки толщина.&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; Ну хотя бы вечер удался: исправил ошибку в приложении построения и
кеширования таблицы результатов для диплома. Оказалось, что ошибка не в
самом приложении, а в переходнике Resin → Tomcat. Resin старая и не
умеет быть прокси, обновить не возможно без основательной переработки
кода серверной части, т.к. всё было написано на Java 1.4. Я написал
маленький класс-переходник, получаю параметры, передаю другому сервису.
Но я получил имена параметров, а потом по ним получал значения (это Java
1.4, тут нам и Enumeration и всякое другое го депрекейтед), только вот
не учёл обстоятельство, что одно название, а значение может быть много.
Искал просто: посмотрел, что пришло в GET моему сервису, хотя я не сразу
понял, что копать нужно сюда, думал, что ошибка в коде моего приложения.&lt;/p&gt;
</summary><category term="жизнь"></category><category term="работа"></category><category term="бредни"></category></entry><entry><title>2.6.27.45</title><link href="/posts/2010/02/10/262745/" rel="alternate"></link><updated>2010-02-10T20:59:22+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-10:posts/2010/02/10/262745/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Собрал ядро версии 2.6.27.45 компилятором GCC 3-ей версии, т.к. от
текущего ядра исходники я потерял, я вообще не помню откуда я его взял
O_o. А хочу поставить старый драйвер на Riva TNT2, т.к. NVidia уже
много лет не выпускает обновлений для этих карт. После сборки только
столкнулся с двумя проблемами: забыл включить поддержку IDE винчестера и
контроллера SIS на материнской плате (от этого оно не увидело ROOT
DEVICE и запаниковало, я сначала даже подумал в другую сторону — что
забыл включить поддержку типа файловой систему прямо в ядро; но потом
вспомнил, что включал) и включил модуль evdev в ядро, а из-за этого HAL
подхватил драйвер клавиатуры. А вцелом всё прошло гладко и без проблем.&lt;/p&gt;
</summary><category term="обновление"></category><category term="ядро"></category><category term="linux"></category></entry><entry><title>Ядро</title><link href="/posts/2010/02/09/iadro/" rel="alternate"></link><updated>2010-02-09T21:33:47+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-09:posts/2010/02/09/iadro/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Собрал ядро 2.6.32.7. Хм… оно не загрузилось, видимо не стоило мне
править выделение памяти в файле vt.c, такое чувство, что оно не создало
терминал. С другой стороны, оно странно собиралось, были проблемы с
функцией kzalloc и kmalloc и только в vt.c и jfs_logmgr.c. Ладно,
завтра разберусь.&lt;/p&gt;
</summary><category term="ядро"></category><category term="linux"></category></entry><entry><title>Поздравляю</title><link href="/posts/2010/02/08/pozdravliaiu/" rel="alternate"></link><updated>2010-02-08T13:19:50+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-08:posts/2010/02/08/pozdravliaiu/</id><summary type="html">&lt;p&gt;22 года назад в этот день был тоже понедельник, и приблизительно в
13:54 я родился. Ну что же… поздравляю я тебя IMDagger, расти большой,
кушай много, но не толстей, много всяких девайсов себе желаю. Вот сделал
себе небольшой подарок по-быстрому.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/135566/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3912/imdagger.5/0_2118e_fdf5216f_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="Я"></category><category term="день рождения"></category></entry><entry><title></title><link href="/posts/2010/02/07/urn:ya.ru:post/22199227/661/" rel="alternate"></link><updated>2010-02-07T19:30:11+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-07:posts/2010/02/07/urn:ya.ru:post/22199227/661/</id><summary type="html">&lt;p&gt;Труд.. труд.. труд…&lt;/p&gt;
</summary></entry><entry><title>Черновой вариант X-Ray</title><link href="/posts/2010/02/05/chernovoi-variant-x-ray/" rel="alternate"></link><updated>2010-02-05T13:44:19+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-05:posts/2010/02/05/chernovoi-variant-x-ray/</id><summary type="html">&lt;div class="text-center"&gt;&lt;div class="yavideo" align="left"&gt;&lt;/div&gt;&lt;object id="flash" width="450" height="370" data="http://flv.video.yandex.ru/lite/imdagger/8djwqarlop.1311/" type="application/x-shockwave-flash"&gt;&lt;param value="http://flv.video.yandex.ru/lite/imdagger/8djwqarlop.1311/" name="movie"&gt;&lt;param value="high" name="quality"&gt;&lt;param value="transparent" name="wmode"&gt;&lt;param value="#ffffff" name="bgcolor"&gt;&lt;param value="true" name="allowfullscreen"&gt;&lt;param value="sameDomain" name="allowscriptaccess"&gt;&lt;param value="scale" name="scale"&gt;&lt;/object&gt;&lt;/div&gt;&lt;p&gt;Сделал вчера этот X-Ray, пока работает не полностью так хорошо, как я
хотел был, но видео записал и вцелом доволен :). Еёщ не работает
непрозрачность, фильтры и установка из свойства, приоритеты работают, но
если приоритеты одинаковые, то проявляется неадекватное поведение
оверлейных объектов (выводится один поверх другого в зависимоти от
порядка добавки, а не от дальности). Есть над чем ещё поработать и
поработать старательно.&lt;/p&gt;
</summary><category term="blender"></category><category term="скринкастинг"></category><category term="bge"></category><category term="x-ray"></category><category term="возможности"></category></entry><entry><title>Xorg 1.6.3</title><link href="/posts/2010/02/04/xorg-163/" rel="alternate"></link><updated>2010-02-04T17:01:11+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-04:posts/2010/02/04/xorg-163/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Что ещё приятного ощутил от обновления до Xorg 1.6.3 с
старенького-старенького Xorg 6-ого? Утилита для скринкастинга
recordmydesktop заработала, как мне раньше от неё и хотелось. Но на
старых X-ах она могла работать корректно только с опцией –full-shots,
при этом уже 4 кадра в секунду были тяжёлой рутиной для неё, если я
включал даже небольшое сжатие, то о запуске BGE можно было забыть. Пойду
ещё попробую ffmpeg &amp;nbsp;с опцией -f x11grab, вдруг оно тоже ещё быстрее
заработает. И тогда я смогу делать полноценное видео с рабочего стола с
более-менее нормальным fps. Мечты сбываются…&lt;/p&gt;
</summary><category term="скринкастинг"></category><category term="recordmydesktop"></category><category term="Xorg"></category></entry><entry><title>Tiny MCE на Я.ру</title><link href="/posts/2010/02/04/tiny-mce-na-iaru/" rel="alternate"></link><updated>2010-02-04T16:27:49+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-04:posts/2010/02/04/tiny-mce-na-iaru/</id><summary type="html">&lt;p&gt;Странно он себя ведёт, когда я набираю &lt;code class="code"&gt;
 \ n&lt;/code&gt;
 , то он делает из него перевод строки, но его же никто
не просил! Я же набрал текст просто в текстовом режиме. А он решил
заменить его на обычный перевод строки, даже не &amp;lt;BR&amp;gt;.&lt;/p&gt;
</summary><category term="странное поведение"></category><category term="Яндекс"></category></entry><entry><title>А ларчик просто открывался</title><link href="/posts/2010/02/04/a-larchik-prosto-otkryvalsia/" rel="alternate"></link><updated>2010-02-04T16:16:58+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-04:posts/2010/02/04/a-larchik-prosto-otkryvalsia/</id><summary type="html">&lt;p&gt;Сел вчера ночью дома за машинку. Решил основательно потестировать,
почему код, который я добавляю в отрисовку в Blender с трафаретным
буфером не работает. Написал малюсенький кусочек кода для включения
GL_STENCIL_TEST и вывода треугольника, отключил вывод мешей самого
Ketsji. Включил функцию GL_NEVER, что означало, что я хочу использовать
трафарет, но мне нужно изображение на экране. И я получил такой же
результат, как на работе — изображение выводилось и игнорировало то, что
мне нужна проверка трафарета. Тогда я добавил после каждой gl-функции
строчку &lt;code class="code"&gt;
printf(&amp;quot;%d \n&amp;quot;, glGetError());&lt;/code&gt;
. И о чудо! Я увидел код
ошибки 1280 для glEnable(GL_STENCIL_TEST), а для включения функций
были ошибки 1282. Вторая ошибка меня не смутила — мало ли, она гласит,
что это неверная операция или невозможна в данном контексте. А вот
первая посеяла в моём мозгу мысль: «Не может быть! Это же значит, что я
передал неверную константу, но она же определена в заголовочном файле
для драйвера карты!».&lt;/p&gt;
&lt;p&gt;Ещё больше меня смущало, что тест трафарета работает на моих
отдельных примерах. Но… все они создавали окно при помощи GLUT. Я нашёл
какой-то завалявшийся пример в /usr/share/doc на Perl’е для OpenGL через
SDL и добавил туда проверку трафарета. И.. опять таже ошибка, хотя на
работе Mesa говорит всё время, что ошибки нет. Самое главное и общее тут
выходит — трафарет не работает.&lt;/p&gt;
&lt;p&gt;Хорошенько выспавшись я осознал, что &amp;nbsp;нужно искать, где Blender
создаёт окно для вывода контекста. Я рылся в &lt;strong&gt;blender/source&lt;/strong&gt; и ничего
не мог найти подходящего. Но потом я нашёл весь платформозависимой код в
&lt;strong&gt;blender/intern/ghost&lt;/strong&gt;. Это был файл GHOST_WindowX11.cpp (для винды —
GHOST_WindowWin32.cpp).&lt;/p&gt;
&lt;p&gt;И стоило сказать волшебное слово &lt;code class="code"&gt;
attributes[i++] =
GLX _STENCIL _SIZE; attributes[i++] = 1;&lt;/code&gt;
 — и проверка трафарета
заработала, потому что я включил при создании окна эту возможность.
Аналогично в файле для Win32 нужно подправить массив параметров для
создания окна.&lt;/p&gt;
&lt;p&gt;P.S. Ура! Значит скоро обещанный X-Ray в BGE заработает.&lt;/p&gt;
</summary><category term="blender"></category><category term="возможности"></category><category term="bge"></category><category term="x-ray"></category></entry><entry><title></title><link href="/posts/2010/02/03/urn:ya.ru:post/22199227/654/" rel="alternate"></link><updated>2010-02-03T17:07:14+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-03:posts/2010/02/03/urn:ya.ru:post/22199227/654/</id><summary type="html">&lt;p&gt;Главное - не паниковать…&lt;/p&gt;
</summary></entry><entry><title>Stencil</title><link href="/posts/2010/02/03/stencil/" rel="alternate"></link><updated>2010-02-03T17:06:21+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-03:posts/2010/02/03/stencil/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Как-то странно ведёт себя включение трафарета, когда я его код
заношу прямо в RAS_VAOpenGLRasterizer, чтобы проверить. Функция
glGetError() возвращает 0, видимо ошибки нет. Я уже подумал, что всё
вызвано внутри glBegin()/glEnd(), но попытка закрыть при помощи glEnd
контекст не завершается успехом. Я мог бы подумать на драйвер Mesa
1.5.1, но дома вроде на GeForce тоже самое происходит. Самое интересно,
что дома и тут, если я делаю отдельное приложение, но glStencilOp
работает! Значит что-то не так в вызове именно из того класса. Времени
пока думать особенно нет, но это затормаживает разработку X-Ray, т.к.
сейчас объекты выводятся всегда, поверх всего, как только становятся
оверлейными. А это не очень хорошо, хотелось бы избирательно выводить.
Странно всё это…&lt;/p&gt;
</summary><category term="blender"></category><category term="bge"></category><category term="x-ray"></category></entry><entry><title></title><link href="/posts/2010/02/02/urn:ya.ru:post/22199227/650/" rel="alternate"></link><updated>2010-02-02T21:45:33+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-02:posts/2010/02/02/urn:ya.ru:post/22199227/650/</id><summary type="html">&lt;p&gt;Печаль подкралась незаметно, всё мне не мило, что было раньше :(&lt;/p&gt;
</summary></entry><entry><title></title><link href="/posts/2010/02/02/urn:ya.ru:post/22199227/649/" rel="alternate"></link><updated>2010-02-02T20:13:29+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-02:posts/2010/02/02/urn:ya.ru:post/22199227/649/</id><summary type="html">&lt;p&gt;Что нам стоит баг построить?!&lt;/p&gt;
</summary></entry><entry><title>Настроил</title><link href="/posts/2010/02/02/nastroil/" rel="alternate"></link><updated>2010-02-02T20:08:39+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-02:posts/2010/02/02/nastroil/</id><summary type="html">&lt;p&gt;Ура! Ускорил систему и настроил все остальные программы, как было
раньше. Единственное, что сильно изменилось — я не стал возиться с
карточкой SIS, её драйверами и ускорением (не 3D, т.к. оно доступно
только в одном дистре, который подписал контракт с SIS) для вывода, а
поставил AGP-видеокарту Riva TNT2 Model 64, &lt;del class="del"&gt;
да ну в пень этот SIS&lt;/del&gt;
 на
крайний случай прикуплю себе по дешёвке старенький Radeon или NVidia.
Eterm заработал после того, как я ему сказал использовать теже fixed
шрифты, но KOI8. Всё из-за того, что я случайно удалил весь каталог со
шрифтами, а обновил не полностью. Только Я.ру какой-то странный шрифт
похдватил в Opera, но мне он пока нравится, хотя более замыленный, чем
раньше. Внешний вид XDM вернул почти как раньше, когда я его сам
переделывал, а то обновление снесло мой конфиг, а я заранее не подумал
его сохранить.&lt;/p&gt;
</summary><category term="радость"></category><category term="работа"></category></entry><entry><title>Ура русские буквы!</title><link href="/posts/2010/02/02/ura-russkie-bukvy/" rel="alternate"></link><updated>2010-02-02T16:37:33+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-02-02:posts/2010/02/02/ura-russkie-bukvy/</id><summary type="html">&lt;p&gt;Починил раскладку. Стал я обновлять X-ы 6.8.2 до Xorg 1.6.4.
Столкнулся с проблемой, что в новых X-ах мне нужен либо HAL, которого
естественно у меня не было, либо понять почему xkbcomp ругается на то,
что подключаемый файл &lt;strong&gt;pc&lt;/strong&gt; не возможно распарсить, ошибка в первой
строке. Долго думал… думал… и случайно обнаружил, что у меня осталась
после обновления директория pc, а файла нет, т.к. невозможно
существование в одном каталоге им файла и директории с одинаковым
именем. Я стёр всё лишнее и о чудо! Заработало и перелючение раскладки и
все модификаторы из HAL, которые я там науказывал. Либо Патрику стоило
позаботится о том, чтобы удалить директорию pc и создать файл, либо
разработчикам xkbcomp стоило выводить сообщение повнятнее, чем ошибка в
первой строчке &lt;del class="del"&gt;
рррр… какая тут может быть строчка, если оно файл не
прочитало&lt;/del&gt;
.&lt;/p&gt;
&lt;p&gt;Единственно, что огорчает - упала производительность вывода в
несколько раз. И я это чувствую и вижу :(.&lt;/p&gt;
</summary><category term="радость"></category><category term="обновление"></category><category term="Xorg"></category><category term="печаль"></category></entry><entry><title>Памятка</title><link href="/posts/2010/01/31/pamiatka/" rel="alternate"></link><updated>2010-01-31T19:57:37+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-31:posts/2010/01/31/pamiatka/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Нужно сегодня ночью отладить дома функционал с трафаретом для
оверлейных объектов. А завтра уже смогу сделать скринкаст, чтобы
показать возможности :).&lt;/p&gt;
</summary><category term="blender"></category><category term="возможности"></category><category term="bge"></category><category term="памятка"></category></entry><entry><title></title><link href="/posts/2010/01/30/urn:ya.ru:post/22199227/644/" rel="alternate"></link><updated>2010-01-30T20:00:46+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-30:posts/2010/01/30/urn:ya.ru:post/22199227/644/</id><summary type="html">&lt;p&gt;Буду стараться&lt;/p&gt;
</summary></entry><entry><title>Обновил X-ы</title><link href="/posts/2010/01/30/obnovil-x-y/" rel="alternate"></link><updated>2010-01-30T19:54:27+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-30:posts/2010/01/30/obnovil-x-y/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Обновил для того, чтобы обновить Mesa, который мне нужен не ниже
версии 7.5.1, т.к. в ней поправлена проблема с трафаретом. Дома у меня
нормальный драйвер от NVidia с ускорением, а тут просто софтварный,
чтобы отлаживать новую возможность X-Ray для BGE мне требуется заточить
систему здесь :).&lt;/p&gt;
</summary><category term="обновление"></category><category term="Xorg"></category></entry><entry><title>Оверлейные объекты</title><link href="/posts/2010/01/29/overleinye-obekty/" rel="alternate"></link><updated>2010-01-29T20:50:30+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-29:posts/2010/01/29/overleinye-obekty/</id><summary type="html">&lt;p&gt;Добавил обработку, чтобы индекс и непрозрачность можно было
установить из свойства объекта. Оверлей заработал, но пока он как-то
странно реагирует на всё. Т.е. игнорирует всех и выводится всегда поверх
всех.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/129682/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3912/imdagger.5/0_1fa92_1caba2b4_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="возможности"></category><category term="bge"></category></entry><entry><title>Субактуатор Overlay Mode</title><link href="/posts/2010/01/27/subaktuator-overlay-mode/" rel="alternate"></link><updated>2010-01-27T21:23:29+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-27:posts/2010/01/27/subaktuator-overlay-mode/</id><summary type="html">&lt;p&gt;Написал код, который обрабатывает оверлеи и отрисовывает их. Но пока
ещё не тестировал из-за не созданного типа актуатора. Только недавно
добавил новый субактуатор в интерфейс Blender. Ещё завтра предстоит
написать новый класс для этого актатора, который будет сконвертирован из
Blender-структуры. Вот как выглядит ещё не доработанный интерфейс:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/128976/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4111/imdagger.5/0_1f7d0_b400103c_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="bge"></category></entry><entry><title>Сквидвард</title><link href="/posts/2010/01/27/skvidvard/" rel="alternate"></link><updated>2010-01-27T12:55:06+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-27:posts/2010/01/27/skvidvard/</id><summary type="html">&lt;p&gt;И так… Вся сцена состоит из: двух звёздочек, сделанных из Plane с
использованием SubSurf, экструдирования и SetSmoth; песчаной поверхности
созданной из обычного Plane с применением сглаживания; модели
Сквидварда, который по частях находится на других слоях на на первом —
объект группы Squidward; двух ламп (холодной Hemi и тёплой Sun) и камеры
:). В группу Squidward сходят такие элементы (персонаж к сожалению вышел
не настолько цельным как я хотел бы): рубашка, которая создана из тела
персонажа, масштаб увеличен, чтобы не касалась тела; собственно тела —
единый меш с головой, туловищем, веками, отростками для руки и ног,
который создан из цилиндра с 8 гранями и затем сглажен. Рисовал только
половину туловища, а вторую получил при помощи модификатора Mirror. Руки
и ноги управляются одной и той же группой костей Tentacle, а вот меши
слегка различаются, т.к. уровень сгиба нужен немного разный. Всё
делалось тоже из цилиндра с 8 гранями.&lt;/p&gt;
&lt;p&gt;Присоски на ногах создаются очень просто: вырезается квадратный фэйс
на щупальце, вершины экструдируются и уменьшаются, затем снова
вытягивание и подъём вверх, снова экструдирование и масштабирование,
снова вытягиваются и спускаются вглубь щупальца. Вот теперь можно
соединить всё в единое целое. Повторить столько раз, сколько присосок на
лапе. Схема похожа на создание глазниц. Нос создан тоже из цилиндра и
деформирован при помощи Lattice.&lt;/p&gt;
&lt;p&gt;Тело было создано (как и руки и ноги) в начальной нейтральной
позиции. Затем в него было помещено три кости: для головы, для шеи и для
туловища. Кость для шеи и головы чуть-чуть повернул, чтобы придать позу
со взглядом вверх. Т.к. глаза и нос — отдельные объекты, то пришлось их
тоже соединить с костью Head, чтобы двигались вслед за головой.&lt;/p&gt;
&lt;p&gt;Проблемы возникли, когда мне потребовалось соединить руки и ноги с
отростками из тела, вот тут я и протра.. ой.. потратил много времени.
Можно было смоделировать их прямо из тела и назначить кости на эти
группы (пожалуй с руками стоило так поступить, т.к. их всего две и
зеркально отражены, но я сглупил; стоило лишь к группам вершин приписать
.R для правой стороны, а затем применить две арматуры). Но вот ноги
четыре, а по одной из осей модель не симметричная из-за рук :(. Я сделал
одну ногу, а затем их подставил к отросткам. Модель отростков подгонял в
Snap Mode (магнитик такой), чтобы попасть ровно в те же вершины ,что и в
ногах. Как сделать без такого извращения я пока не знаю, если бы было
две ноги, то помог бы Mirror, но их 4 и одна из осей не может принять
Mirror. Нужно будет поискать, как решается эта проблема, если бы Mirror
можно было делать только для части вершин :S.&lt;/p&gt;
&lt;p&gt;Вот рендер с сеткой при помощи скрипта. Сетка в рубашке чуть гуще
из-за того, что когда скрипт добавил сетку для объекта и для рубашки, то
сетка объекта проступила через рубашку.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/128879/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3808/imdagger.5/0_1f76f_c94c9d18_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="сквидвард"></category></entry><entry><title>Восстановление темы</title><link href="/posts/2010/01/27/vosstanovlenie-temy/" rel="alternate"></link><updated>2010-01-27T12:35:32+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-27:posts/2010/01/27/vosstanovlenie-temy/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Вчера в спешке, когда хотел сделать развёртку объекта, то случайно
нажал не клавишу U в режиме редактирования, а сочетание Ctrl+U в
объектом режиме. А ещё по привычке пальцы нажали Enter, и только после
этого я осознал, что это было сообщение о перезаписи темы. Исправлять
времени не было нужно было рисовать дальше, поэтому я забил. Сегодня
решил спокойно всё восстановить:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Исходный файл с настройками сцены хранится в &lt;strong&gt;.B.blend&lt;/strong&gt; в домашней
директории&lt;/li&gt;
&lt;li&gt;Я его переименовал в &lt;em&gt;_.B.blend&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;Blender перестал грузить «испорченную» тему, а загрузил тему по
умолчанию&lt;/li&gt;
&lt;li&gt;В сцене с кубиком я всё настроил как раньше, поставил вывод в PNG и
настройки при работе с файлами и ещё разные мелочи, которые
приходится по сто раз делать, если настройки стандартные&lt;/li&gt;
&lt;li&gt;Сохранил в файл theme.blend&lt;/li&gt;
&lt;li&gt;Переименовал обратно &lt;em&gt;_.B.blend&lt;/em&gt; в &lt;strong&gt;.B.blend&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Перезапустил Blender и открыл файл theme.blend&lt;/li&gt;
&lt;li&gt;Настройки темы сохраняются, если открыть новый файл (если конечно он
их не сбрасывает)&lt;/li&gt;
&lt;li&gt;Сохранил этот theme.blend при помощи Ctrl+U&lt;/li&gt;
&lt;/ul&gt;
</summary><category term="blender"></category><category term="тема"></category><category term="восстановление"></category></entry><entry><title>Squidward Tentacles</title><link href="/posts/2010/01/26/squidward-tentacles/" rel="alternate"></link><updated>2010-01-26T21:49:38+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-26:posts/2010/01/26/squidward-tentacles/</id><summary type="html">&lt;p&gt;Сделал для конкурса Сквидварда из мультфильма про губку Боба :).
Подробнее, как делал расскажу уже завтра, потому что пора сдавать на
сигнализацию помещение. Использовал как обычно кости, а рисовал в
начальной позиции.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/128686/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3810/imdagger.5/0_1f6ae_5e4e7e8_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;В режиме Wire (а сетку уже завтра, т.к. меня убьют, если сдам не вовремя
на сигналку):&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/128687/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/4108/imdagger.5/0_1f6af_e97273a5_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category></entry><entry><title>Оверлейные объекты</title><link href="/posts/2010/01/25/overlay-objects-early/" rel="alternate"></link><updated>2010-01-25T21:09:04+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-25:posts/2010/01/25/overlay-objects-early/</id><summary type="html">&lt;p&gt;Добавил классу RAS_MeshSlot приватное свойство m_iOverlay типа
int. Оно означает оверлейный индекс меша для отрисовки. Если значение 0
— то трафарет не требуется и такой объект сам не является оверлейным и
запрещает отрисовку сквозь себя оверлейных объектов. Следующий индекс —
1, такие объекты разрешают оверлейным прорисовываться сквозь них. Все
индексы со второго по 255 — простые индексы для оверлейных объектов. Чем
выше индекс, тем приоритетнее отрисовка. В Blender индексы будут
выбираться с 0 по 253, но в BGE будут передаваться со смещением +2. Т.к.
glClear заполняет буфер трафарета нулями, а мне требуется чтобы всё
свободное пространство не реагировало на оверлеи по умолчанию, то
логично было отдать этот индекс для «непроницаемых». Но если
использовать функцию &lt;code class="code"&gt;
GL _GREATER&lt;/code&gt;
, то буфер будет перезаписываться,
поэтому нужно использовать &lt;code class="code"&gt;
GL _LESS&lt;/code&gt;
 и для всех объектов с индексом &lt;strong&gt;i&lt;/strong&gt;
задействовать индекс &lt;code class="code"&gt;
256 - i&lt;/code&gt;
 для трафарета.&lt;/p&gt;
&lt;p&gt;Цикл отрисовки в RAS_BucketManager пришлось чуть усложнить: после
отрисовки m_SolidBuckets и m_AlphaBuckets очищается буфер глубины,
включается режим рендеринга только оверлейных объектов и запускается
заново отрисовка&amp;nbsp;m_SolidBuckets и m_AlphaBuckets.&lt;/p&gt;
&lt;p&gt;Думаю завтра или после завтра уже сделаю тестовый образец с X-Ray,
который можно будет оценить :).&lt;/p&gt;
</summary><category term="blender"></category><category term="возможности"></category><category term="bge"></category><category term="x-ray"></category></entry><entry><title></title><link href="/posts/2010/01/23/urn:ya.ru:post/22199227/626/" rel="alternate"></link><updated>2010-01-23T21:14:40+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-23:posts/2010/01/23/urn:ya.ru:post/22199227/626/</id><summary type="html">&lt;p&gt;Хочу разрушить пространственно временной континуум!.. Упс, ладно, я
больше не буду принимать эти таблетки :)&lt;/p&gt;
</summary></entry><entry><title>Проецирование при наследовании</title><link href="/posts/2010/01/23/proetsirovanie-pri-nasledovanii/" rel="alternate"></link><updated>2010-01-23T21:09:41+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-23:posts/2010/01/23/proetsirovanie-pri-nasledovanii/</id><summary type="html">&lt;p&gt;У меня есть два класса Pupil и Team, которые являются потомками
класса User. Если я пытаюсь получить список пользователей из User, то
мне нужно, чтобы это было объединение (UNION) двух таблиц из Pupil и
Team. Ещё нужно, чтобы HQL-запросах для классов Pupil и Team в
отдельности получать результаты тоже, плюс объединение (JOIN) с другими
таблицами. Ну и на последок, что и доставило неудобвства: нужно
использовать в SQL-запросе и при этом User должен придерживаться
стратегии один класс&amp;nbsp;— одна таблица. Так вышло, что мне ещё и нужно два
свойство getName, которое есть в обоих классах, но проецируется на
разные колонки.&lt;/p&gt;
&lt;p&gt;Псевдоним на возвращаемый JOIN-присоединённый класс User к SubCell
классу был объявлен в запросе &lt;strong&gt;sql-query&lt;/strong&gt; в subcells.hbm.xml как
&lt;code class="code"&gt;
&amp;lt;return-join alias=&amp;quot;user&amp;quot; property=&amp;quot;subCell.user&amp;quot;&amp;gt;&lt;/code&gt;
, псевдоним subCell в
данном случае отсылка к объявленному возвращаемому типу объектов класса
SubCell. Когда я начал модифицировать запрос, то столкнулся с проблемой,
что у меня &lt;code class="code"&gt;
Pupil.getName&lt;/code&gt;
 и &lt;code class="code"&gt;
Team.getName&lt;/code&gt;
 возможно записать только одним
способом &lt;code class="code"&gt;
{user.name}&lt;/code&gt;
. Естественно Hibernate вместо этого псевдонима
подставил только одно значение из первого попавшегося класса (выбирал из
Pupil и Team). Вот и встала делема, как оставить свойство getName, но
при этой обратиться к скрывшемуся полю.&lt;/p&gt;
&lt;p&gt;Нашёл выход, возможно не самый лучший и красивый, но верный. Дело в
том, что через псевдоним (alias) user можно получить доступ не только к
свовствам класса User, но и Pupil, Team и других наследников. Главное,
чтобы имена не перекрывались.&lt;/p&gt;
&lt;p&gt;Выход из ситуации заключается в создании функций getName и setName,
но скрытых при помощи декоратора :D аннотации &lt;code class="code"&gt;
&amp;#64;Transient&lt;/code&gt;
. Затем
создаются функции getTeamName и setTeamName, которые используют свойство
&lt;strong&gt;name&lt;/strong&gt;, но для них указана аннотация &amp;#64;Column для проецирования на БД.&lt;/p&gt;
&lt;p&gt;Теперь, чтобы наполнять классы типа Team &amp;nbsp;нужно извлекать данные в
поле с именем &lt;code class="code"&gt;
{user.teamName}&lt;/code&gt;
, а если нужны данные для Pupil, то просто
&lt;code class="code"&gt;
{user.name}&lt;/code&gt;
 (если бы классов наследников было больше, то лучше вариант
&lt;code class="code"&gt;
{user.pupilName}&lt;/code&gt;
 и создание методов аналогично алгоритму описанному
выше).&lt;/p&gt;
</summary><category term="наследование"></category><category term="проецирование"></category><category term="hibernate"></category></entry><entry><title>Планы на завтра</title><link href="/posts/2010/01/22/plany-na-zavtra/" rel="alternate"></link><updated>2010-01-22T21:00:20+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-22:posts/2010/01/22/plany-na-zavtra/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Сегодня я поправил нэйтив запросы для БД приложения, а также вывод
ячеек в таблице с учётом того, ялвляется ли данный узел реально листовым
или нет. Добавил единоразовое считывание названий колонок в шапке
таблицы результатов для суммарных ячеек в сервисе CellService, а сам код
работы с БД разместил в CellDao.&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; Завтра время нужно разделить таким образом (а то сегодня вроде
трудился, а результат слабый):&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Добавляю сортировку по результирующим полям&lt;/li&gt;
&lt;li&gt;Добавлю выборку дополнительной информации для пользователей (расширю
дочерние классы) &amp;nbsp;и сделаю возможность выборочного вывода этих полей&lt;/li&gt;
&lt;li&gt;Набросаю пробный вариант Automark на основе текущего контроллера,
который получает результаты и обрабатывает&lt;/li&gt;
&lt;li&gt;Начну создавать код для X-Ray в BGE, т.к. идею уже продумал и код
посмотрел, чтобы знать куда и чего добавлять и править&lt;/li&gt;
&lt;/ul&gt;
</summary><category term="диплом"></category><category term="жизнь"></category><category term="работа"></category></entry><entry><title>Трафарет</title><link href="/posts/2010/01/21/trafaret/" rel="alternate"></link><updated>2010-01-21T19:19:12+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-21:posts/2010/01/21/trafaret/</id><summary type="html">&lt;p&gt;Книжку я свою по OpenGL дома не нашёл, времени искать было мало.
Поэтому стал искать в Интернете наугад то, что мне нужно для реализации
X-Ray с возможностью указывать приоритет по индексу и прозрачностью.
Оказалось это функции управления трафаретом
&lt;code class="code"&gt;
glStencilFunc&lt;/code&gt;
/&lt;code class="code"&gt;
glStencilOp&lt;/code&gt;
 и т.д. При чём вот
&lt;a class="reference external" href="http://www.opengl.org.ru/books/open_gl/chapter4.12.html"&gt;тут&lt;/a&gt;
красиво всё на русском языке изложено. В моём мозгу собралась такая
идейка как поправить &lt;em&gt;RAS_BucketManager&lt;/em&gt; и &lt;em&gt;RAS_OpenGLRasterizer&lt;/em&gt;. В
растеризер я добавлю включение и выключение трафарета, т.к. все основные
вызовы OpenGL по отрисовке происходят в этом классе и его наследниках.
Менеджер групп объектов я переделаю так, что он будет на вызов
Renderbuckets рисовать не только списки m_SolidBuckets и
m_AlphaBuckets, но и m_OverlayBuckets. Т.к. функция OrderBuckets
сортирует по дальности группы и вычисляет расстояния до камеры, то я
смогу отсекать отрисовку ненужных оверлеев и перебрасывать их в обычный
режим. Вот что происходит при отрисовке, когда есть оверлейные объекты:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Включается трафарет&lt;/li&gt;
&lt;li&gt;Отрисовывается  m_SolidBuckets и m_AlphaBuckets, когда рендерится
объект, которому разрешено показывать сквозь себя оверлейные объекты,
то в трафарете эти места помечаются индексами 1000&lt;/li&gt;
&lt;li&gt;Переключается режим трафарета, если индекс в буффере больше, чем
объекта&lt;/li&gt;
&lt;li&gt;Начинается отрисовка оверлейных объектов&lt;/li&gt;
&lt;li&gt;Происходит обход от индекса 0 и по нарастающей&lt;/li&gt;
&lt;li&gt;Если индекс изменился, то происходит очистка Z-буффера&lt;/li&gt;
&lt;li&gt;Объекты отрисовываются, но индекс в трафарет записывается как 1000 -
index - 1, если это удовлетворяет функции проверки трафарета&lt;/li&gt;
&lt;li&gt;Выключается трафарет&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;А ещё я сегодня подумал и взял самое лучше из вчерашней темы, что
поставил и темы Oceanic, вот теперь я доволен, а то оранжевый текст на
моём мониторе не достаточно контрастирует с серым фоном меню. Посмотрим…
пока я доволен, но ещё нужно посмотреть как оно у меня дома на ЖК-шке
смотрится.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/126349/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4010/imdagger.5/0_1ed8d_db9ff3_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="возможности"></category><category term="bge"></category></entry><entry><title>Тема</title><link href="/posts/2010/01/20/tema/" rel="alternate"></link><updated>2010-01-20T20:46:51+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-20:posts/2010/01/20/tema/</id><summary type="html">&lt;p&gt;Скачал вот эту тему
&lt;a class="reference external" href="http://www.graphicall.org/themes/Dark_theme]mr_bomb].py"&gt;http://www.graphicall.org/themes/Dark_theme]mr_bomb].py&lt;/a&gt;,
как раз такая контрастная для моих глаз подойдёт, а то яркость на
мониторе я всегда выкручиваю вверх и от светлых тем у меня глаза
выпадают. А эта вроде ничего :) попробую, поюзаю, подправлю места, где
контраст низкий (например в меню, что меня утомляет).&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/125667/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4101/imdagger.5/0_1eae3_6b4959dd_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Пойду на остаток того времени, что у меня есть возможность сидеть
на работе, доправлю проблемы в контроллере по отображению результатов из
дипломного проекта.&lt;/p&gt;</summary><category term="blender"></category><category term="тема"></category></entry><entry><title></title><link href="/posts/2010/01/20/urn:ya.ru:post/22199227/619/" rel="alternate"></link><updated>2010-01-20T18:40:57+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-20:posts/2010/01/20/urn:ya.ru:post/22199227/619/</id><summary type="html">&lt;p&gt;Берём 3D-бокал и наливаем 3D-жидкость, а потом 3D-пьём&lt;/p&gt;
</summary></entry><entry><title>Празднуем</title><link href="/posts/2010/01/20/prazdnuem/" rel="alternate"></link><updated>2010-01-20T18:38:47+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-20:posts/2010/01/20/prazdnuem/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; blender3d.org.ua исполнилось &lt;strong&gt;3 года&lt;/strong&gt;. Нужно чего-нибудь себе
налить, а ещё можно себе чего-нибудь вкусного купить :) или приготовить.
Заодно сегодня и билд собрал рабочий и залил. Одни радости целый день
:).&lt;/p&gt;
</summary><category term="праздник"></category><category term="радость"></category></entry><entry><title>Маловато я потрудился :(</title><link href="/posts/2010/01/19/malovato-ia-potrudilsia/" rel="alternate"></link><updated>2010-01-19T21:29:43+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-19:posts/2010/01/19/malovato-ia-potrudilsia/</id><summary type="html">&lt;p&gt;Проснулся поздно, собрал поправленный билд Blender, завтра выложу и
отправлю патч Belsagor на сборку, никак не могу найти время, чтобы
собраться духом и разобраться с лампами и GLSL. Потом по большей части
трудился над прогой для диплома, залил на боевой сервер и началось :)
стал править баги побыстрому, чтобы всё было хорошо и не заметно.
Исправил, нашёл ещё, но это уже придётся завтра править…&lt;/p&gt;
</summary><category term="диплом"></category><category term="bge"></category><category term="жизнь"></category></entry><entry><title>MB Final :)</title><link href="/posts/2010/01/18/mb-final/" rel="alternate"></link><updated>2010-01-18T21:35:50+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-18:posts/2010/01/18/mb-final/</id><summary type="html">&lt;p&gt;Динамическая загрузка вроде больше не падает, утечки памяти нашёл.
Завтра ещё раз попробую понять почему лампы в GLSL не хотят светить,
думаю я не вызываю какую-то дополнительную функцию их инициализации. Это
будет стабильный билд с динамической загрузкой надеюсь. После этого
приступаю к X-Ray объектам в BGE, сделаю как предложил &lt;strong&gt;O.din13&lt;/strong&gt;.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;img alt="image0" src="http://blender3d.org.ua/forum/game/iwe/upload/тор---Make-Object-As-Overlay.gif" title="image0"/&gt;&lt;/p&gt;
&lt;p&gt;Правда пока у меня много вопросов по поводу реализации всего этого.
Попробую делать по чуть-чуть, т.к. я пока не знаю что будет с
производительностью, если я буду проверять за какими объектами не стоит
рисовать объект как оверлей. И что делать, если объект попал
«наполовину»? :-/ Т.е. часть его за объектом, который разрешает ему быть
оверлеем, а часть — не разрешает. Думаю реализую одно из поведений, т.е.
пополам меш делить не буду, т.к. это достаточно сложно.&lt;/p&gt;</summary><category term="blender"></category><category term="bge"></category></entry><entry><title>Проблемы при наследование</title><link href="/posts/2010/01/17/problemy-pri-nasledovanie/" rel="alternate"></link><updated>2010-01-17T19:57:24+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-17:posts/2010/01/17/problemy-pri-nasledovanie/</id><summary type="html">&lt;p&gt;Сегодня утром я долго тупил над тем, почему у меня выпадает такое
исключение при попытке получения данных. У меня есть две таблицы, каждую
нужно проецировать на отдельный класс, но при этом у них должен быть
общий предок, который спроецирован на UNION этих таблиц.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;hibernate&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;WrongClassException&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt; &lt;span class="pgcss-n"&gt;Object&lt;/span&gt; &lt;span class="pgcss-n"&gt;with&lt;/span&gt; &lt;span class="pgcss-nl"&gt;id:&lt;/span&gt; &lt;span class="pgcss-mi"&gt;100105&lt;/span&gt; &lt;span class="pgcss-n"&gt;was&lt;/span&gt; &lt;span class="pgcss-n"&gt;not&lt;/span&gt; &lt;span class="pgcss-n"&gt;of&lt;/span&gt; &lt;span class="pgcss-n"&gt;the&lt;/span&gt;
                      &lt;span class="pgcss-n"&gt;specified&lt;/span&gt; &lt;span class="pgcss-nl"&gt;subclass:&lt;/span&gt; &lt;span class="pgcss-n"&gt;users&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;User&lt;/span&gt; &lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-nl"&gt;Discriminator:&lt;/span&gt; &lt;span class="pgcss-n"&gt;pupil&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;hibernate&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;loader&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;Loader&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;getInstanceClass&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Loader&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1477&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;hibernate&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;loader&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;Loader&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;instanceNotYetLoaded&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Loader&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1308&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;hibernate&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;loader&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;Loader&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;getRow&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Loader&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1230&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
&lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;hibernate&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;loader&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;Loader&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;getRowFromResultSet&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Loader&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;603&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;hibernate&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;loader&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;Loader&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;doQuery&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Loader&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;724&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Я заглянул в исходники Hibenate и увидел, что оно ищет это название
в списке уже зарегистрированных. Тогда я жадно набросился на
документацию по EJB3 и нашёл аннотацию &lt;code class="code"&gt;
&amp;#64;DiscriminatorValue&lt;/code&gt;
, которое
стоило применить к классам наследникам, в качестве параметра передаётся
строка, которая является синонимом для определения класса.&lt;/p&gt;
&lt;p&gt;На этом мои приключение не закончились. Я стал писать HQL запрос,
который пересекал базовый User класс с другим Subscriptions классом.
Долго мучался с JOIN, но плюнул и сделал декартовым произведением. Чтобы
User класс являлся UNION двух таблиц, т.е. таблиц своих потомков нужно
применить такую стратегию: базовый User класс должен быть &lt;code class="code"&gt;
&amp;#64;Entity&lt;/code&gt;
, а
стратегия выборки &lt;code class="code"&gt;
&amp;#64;Inheritance(strategy =
InheritanceType.TABLE _PER _CLASS)&lt;/code&gt;
.&lt;/p&gt;
&lt;p&gt;После этого мои NativeSQL запросы заработали и смогли извлекать
join-поля не ленивым способом, а так же заработал мой HQL, который
выбирал пользователей по определённому критерию.&lt;/p&gt;
</summary><category term="java"></category><category term="hibernate"></category></entry><entry><title>X-Ray</title><link href="/posts/2010/01/16/x-ray/" rel="alternate"></link><updated>2010-01-16T21:06:19+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-16:posts/2010/01/16/x-ray/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Нужно будет подумать, как сделать в BGE свечение объектов, если они
находятся за другими объектами. Т.к. новые хандлеры я сделал, у меня в
планах оставалось добавлять LOD (но это сложновато, хотя и возможно),
сделать наследование Logic Brick (придётся углубиться во внутренее
устройство Blender), а вот лучше я сделаю что-то в духе X-Ray. Т.к. эта
фишка мне нужна тоже и делать лазать буду в уже понятном для меня коде,
заодно поправлю немного динамическую загрузку (минибаги).&lt;/p&gt;
</summary><category term="blender"></category><category term="bge"></category><category term="x-ray"></category></entry><entry><title>Заметка про SPACEHANDLER</title><link href="/posts/2010/01/15/zametka-pro-spacehandler/" rel="alternate"></link><updated>2010-01-15T21:30:28+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-15:posts/2010/01/15/zametka-pro-spacehandler/</id><summary type="html">&lt;p&gt;Случайно экспериментально обнаружил, что на каждое представление
окон (оно же расположение окон, которое запоминается в Blender) для
3D-окна свои обработчики пространства (Space Handlers). У меня в
присоединённом файле был скрипт &lt;strong&gt;add warrior&lt;/strong&gt;, который показывал меню
добавления воина. Я его перенёс из разряда обработчиков окна в ранг
скриптлинков. Естественно я понимал, что если я уберу сначала строку
&lt;code class="code"&gt;
#SPACEHANDLER.VIEW3D.EVENT&lt;/code&gt;
, а затем попробую отключить его в основном
blend-файле, то ничего не выйдет из-за того, что Blender не покажет его
в списке, но будет продолжать использовать (т.к. ссылки сохраняются не
на имя текста, а на блок данных). Поэтому моя схема была такова:
отключить скрипт (снять галочку, что его нужно исполнять на каждое
событие в окне), поправить текст и убрать магический заголовок. Всё бы
хорошо, но я переключился на другой представление, в котором я мог
поуправлять предметами в рюкзаке и расставить воинов… тут такое
началось… меню на добавку вылазило на любое действие (что логично). В
этой ситуации действуем так: вывести курсор за область 3D окна, нажать
Esc сколько нужно раз, затем быстро нажать &lt;kbd class="kbd"&gt;
Ctrl+Q&lt;/kbd&gt;
, вернуть магический
заголовок тексту, закомментировать весь текст, вернуться в главный
blend-файл у убрать &lt;u class="underline"&gt;
все&lt;/u&gt;
 галочки (на всех рабочих «столах»), а вот теперь
уже можно и снова убрать магический комментарий и раскомментировать весь
текст. Ещё конечно можно просто сбить процесс Blender’а, но эт оне
гуманно и не исключает остальных пунктов.&lt;/p&gt;
</summary><category term="blender"></category><category term="spacehandler"></category></entry><entry><title>Перехват событий</title><link href="/posts/2010/01/15/perekhvat-sobytii/" rel="alternate"></link><updated>2010-01-15T20:08:00+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-15:posts/2010/01/15/perekhvat-sobytii/</id><summary type="html">&lt;p&gt;Мне для замены текущего нестабильного кода в редакторе, который
реализованы через… эм.. скрипты, кучу скриптлинков, которые
устанавливаются и удаляются через … эм.. тоже скрипты, пришлось добавить
пару новых видов скриптлинков: OnBGEStart, OnBGEFinish, OnSpaceAction.
Т.к. перед запуском BGE я хочу убрать все лишние объекты, а игровой
движок сам загрузит карту. После того, как BGE отработал, то хотелось бы
вернуться обратно в режим редактирования карты, поэтому нужно возвратить
всё временно удалённое обратно. Ещё очень хочется, чтобы по привычной
клавише пробел добавлялись не меши, а воины, поэтому я добавил событие
OnSpaceAction, которое перехватывает сценарий. При этом поведение меню
Add в шапке Blender не меняется, только обработчик клавиши пробел.&lt;/p&gt;
&lt;p&gt;Когда я добавлял обраточики и менял код, то попался на классическую
ошибку.. эх.. классика. Я достаточно быстро нашёл проблему, но было
приятно встретить классическую ошибку, вот какой я добавил код:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;    /* send the OnSpaceAction event */&lt;/div&gt;
&lt;div class="line"&gt;    if (G.f &amp;amp; G_DOSCRIPTLINKS) {&lt;/div&gt;
&lt;div class="line"&gt;        if (BPY_do_pyscript(&amp;amp;G.scene-&amp;gt;id,
SCRIPT_ONSPACEACTION))&lt;strong&gt;;&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;            return; // menu is handled by script&lt;/div&gt;
&lt;div class="line"&gt;    }&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;А потом сижу и думаю: “Почему код, который идёт после этой проверки
не исполняется. &lt;code class="code"&gt;
BPY _do _pyscript&lt;/code&gt;
 же вернул 0, а return сработал… О!! А
что это у нас за точка с запятой в конце оператора &lt;code class="code"&gt;
if&lt;/code&gt;
??”. Вот такая
классическая ошибка :), точки с запятой не должно быть, просто случайно
поставил.&lt;/p&gt;
&lt;p&gt;Теперь я могу добавить в проект эти возможности у убрать старый не
полностью функциональный код из редактора и заменить на такие чудесные
обработчики и результат (запускал BGE, а затем нажимал в объектном
режиме пробел):&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/122547/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4101/imdagger.5/0_1deb3_65249a2_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/122549/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/4100/imdagger.5/0_1deb5_a275f1f9_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="возможности"></category><category term="bge"></category><category term="last_gateway_to_hell"></category></entry><entry><title>Квантовая механика</title><link href="/posts/2010/01/14/kvantovaia-mekhanika/" rel="alternate"></link><updated>2010-01-14T21:59:23+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-14:posts/2010/01/14/kvantovaia-mekhanika/</id><summary type="html">&lt;p&gt;Чтобы получить 10 придётся пройти через обе щели :) Вот по-быстрому
набросал, как это должно выглядеть (вечно эти наблюдатели мешают
получать 10):&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/122334/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4108/imdagger.5/0_1ddde_870674b0_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="электрон"></category><category term="физика"></category><category term="набросок"></category></entry><entry><title>Таблица результатов</title><link href="/posts/2010/01/14/tablitsa-rezultatov/" rel="alternate"></link><updated>2010-01-14T19:09:18+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-14:posts/2010/01/14/tablitsa-rezultatov/</id><summary type="html">&lt;p&gt;Удивительно, что я уже как несколько месяцев не использую такую
классную фишку в Tomcat, как Manager. Каждый раз, когда я компилировал
классы, то чтобы перегрузить их в памяти в Tomcat, я выключал его, а
потом заново включал. Это отнимало порядочно времени, но что самое
главное — отбирало моё время на переключение с одной мысленной задачи на
другую и заставляло меня делать лишние телодвижения. Несколько месяцев
назад меня это раздражало, но потом как-то потихоньку привык. И вот я
снова стал какой-то агрессивный и решил посмотреть, что же это такое
чудо менеджер. Я обратился по адресу &lt;strong&gt;localhost:8080/manager/&lt;/strong&gt; и оно у
меня потребовало пароль, я попробовал те, что были в конфигурации. Но в
конечном счёте всё время вылазил Access denied.&lt;/p&gt;
&lt;p&gt;Я подумал сдаться и … пусть будет как было, работало же ? :) Но всё
таки что-то во мне потребовало: “А ну быстро оторвал свою * и настроил
этот менеджер, тебе же будет только легче от этого!”. В tomcat-users.xml
я добавил роли admin, manager, пользователей тоже добавил. Но Apache не
сдавался и не пускал меня на страницу. Тогда я попробовал обратиться не
как localhost, а как 127.0.0.1:8080/manager/ и у чудо! Заработало! :) В
этом простом интерфейсе было всё что мне нужно: кнопочка restart для
выбранного проекта и просмотр статуса проекта.&lt;/p&gt;
&lt;p&gt;Зря я не воспользовался раньше народной мудростью, а пошёл как раз
по пути “Мне некогда пилу точить — мне пилить надо!” . Тогда меня тоже
отпугнула ошибка доступа &lt;del class="del"&gt;
и дедлайн&lt;/del&gt;
, поэтому я решил, что разбираться
некогда x-D нужно быстрее кодить и показывать.&lt;/p&gt;
</summary><category term="диплом"></category><category term="tomcat"></category></entry><entry><title></title><link href="/posts/2010/01/12/urn:ya.ru:post/22199227/581/" rel="alternate"></link><updated>2010-01-12T19:44:38+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-12:posts/2010/01/12/urn:ya.ru:post/22199227/581/</id><summary type="html">&lt;p&gt;Путь наш не лёгок, но будем сражаться и победим&lt;/p&gt;
</summary></entry><entry><title>Динамическая загрузка</title><link href="/posts/2010/01/12/dynamic-loading-fix/" rel="alternate"></link><updated>2010-01-12T19:42:26+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-12:posts/2010/01/12/dynamic-loading-fix/</id><summary type="html">&lt;p&gt;Исправил загрузку мешей и материалов. Раньше из-за отсутствия кода,
который помечал бы материалы и меши, как не родные для сцены происходила
утечка памяти. Потом я сделал так, чтобы они помечались, но так
получилось, что материалы в Blender соединяются в группы и может быть
использован материал, который был изначально. Что приводило к краху
Blender из-за высвобождения материала, который ещё использовался.
Возможно и сейчас есть случаи падения, но утечки памяти я устранил :).
Теперь добавлю то, что нужно нам для проекта: события OnStartBGE,
OnFinishBGE и возможность перехвата клавиши Space. Но по ходу буду
подправлять и старые мои оплошности.&lt;/p&gt;
</summary><category term="blender"></category><category term="загрузка"></category><category term="bge"></category></entry><entry><title>Дни идут как сон</title><link href="/posts/2010/01/11/dni-idut-kak-son/" rel="alternate"></link><updated>2010-01-11T21:43:21+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-11:posts/2010/01/11/dni-idut-kak-son/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; За сегодня успел поставить себе OpenEXR и собрать Blender статически
с этой библиотекой. Потом сделал удаление материалов и мешей, которые
создаются при каждом новом вливании сцены в существующую сцену. Забавные
конечно имена у некоторых уже существующих функций, например, FindBucket
одновременно и ищет группу материалов и создаёт, если такой нет. Я бы
назвал её FindBucketOrCreateNew или FindBucketOrAdd. Хотя мои функции
тоже (которые добавил я) не блещут полной информативностью. То как я
вкрутил своё управление в 2.49b немного похоже на то, как это сделали в
2.5 (сегодня пошёл в SVN посмотреть, как это сделали умные люди). Там
конечно оно используется по другому, но и я мог бы создавать множество
KX_Scene и хранить ссылки в главной, что-то вроде линковки, но в BGE.
Но как сделал — так сделал. От этого у меня появилось понятие у
нескольких классов, как состояние. Оно хоть и внутреннее и приватное, но
состояние. Завтра соберу исходники с новыми правками, сделаю билд под
Linux и попрошу сделать билд под другие ОС тоже,.. это которыми я не
работаю.&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; Сегодня C++, хотя ещё вчера много кодил на Java и воевал с тем,
чтобы моё приложение быстрее работало с базой данных и оптимизировал
SQL. Завтра надеюсь доберусь до проекта и попишу на Python :).&lt;/p&gt;
</summary><category term="blender"></category><category term="возможности"></category><category term="bge"></category></entry><entry><title>Как использовать то, что я наваял</title><link href="/posts/2010/01/09/kak-ispolzovat-to-chto-ia-navaial/" rel="alternate"></link><updated>2010-01-09T20:25:50+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-09:posts/2010/01/09/kak-ispolzovat-to-chto-ia-navaial/</id><summary type="html">&lt;p&gt;Я сделал два актуатора для загрузки и выгрузки объектов в BGE, ну и
ещё со скриптлинками по мелочам. Я собрал билд под Linux, а Belsagor под
Windows (спасибо ему огромное). Теперь о том, как потестить эти билды
(они пока тестовые и там конечно же есть утечка памяти и небольшой
сегфолт под виндой, но это решу позднее).&lt;/p&gt;
&lt;p&gt;Приведу очень простой пример, без сложных мешей и детализации.
Создадим основную сцену с двумя воображаемыми уровнями и персонажем
Кубиком.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/118053/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4013/imdagger.5/0_1cd25_21374d56_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;По средине расположен сенсор, который определяет проходящие через
него объекты со свойством &lt;strong&gt;collision&lt;/strong&gt;.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/118054/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/4012/imdagger.5/0_1cd26_72347339_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Свойство-флаг &lt;strong&gt;lock&lt;/strong&gt; не позволяет срабатывать коллизии два раза:
при начале коллизии и при завершении. Нужно только определяеть первую
коллизию. Свойство &lt;strong&gt;level&lt;/strong&gt; хранит номер уровня, который уже загружен
динамически, поэтому требуется загрузка противоположного уровня и
выгрузка текущего. Актуатор &lt;strong&gt;Load Scene Objects&lt;/strong&gt; загружает объекты с
указанной сцены из указанного файла. А вот &lt;strong&gt;Remove Scene Objects&lt;/strong&gt;
обладает ещё выбором: удалить объекты или удалить объекты и выгрузить
карскас сцены из памяти (второе экономнее, если сцены не часто
подгружаются, а первое, если часто грузятся и диск может стать узким
местом).&lt;/p&gt;
&lt;p&gt;После запуска игрового  режима загрузится первый уровень (присутствуют
два странных объекта, которые являются &lt;strong&gt;DupliGroup&lt;/strong&gt;):&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/118055/"&gt;&lt;img alt="image2" src="http://img-fotki.yandex.ru/get/4114/imdagger.5/0_1cd27_72eacec0_L" title="image2"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Если перейти невидимую границу между уровнями, то первый будет
выгружен, а второй загружен (при обратном обходе, всё работает
аналогично):&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/118056/"&gt;&lt;img alt="image3" src="http://img-fotki.yandex.ru/get/4106/imdagger.5/0_1cd28_8bb0caee_L" title="image3"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Один шар является прилинкованной копией другого, они связаны
родительской связью. На большом шаре работает логика вращения, всё
движется словно спутник и планета :).&lt;/p&gt;
&lt;p&gt;Вот так простой пример, как сделать загрузку уровней и их выгрузку.
Если забыть выгрузить уровень при помощи скриптов, то движок всё равно
про него не забудет, но напомнит разработчику предупреждением в консоль.&lt;/p&gt;</summary><category term="blender"></category><category term="загрузка"></category><category term="bge"></category><category term="уровни"></category><category term="пример"></category></entry><entry><title>Ура, доработал</title><link href="/posts/2010/01/07/ura-dorabotal/" rel="alternate"></link><updated>2010-01-07T20:37:47+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-07:posts/2010/01/07/ura-dorabotal/</id><summary type="html">&lt;p&gt;Просидел до 5 утра, дописывая выгрузку объектов со сцены. Слить
сцены воедино проще, чем разъединить. Но я всё же смог, хотя ещё не
уверен, что всё абсолютно правильно и нет утечек памяти.&lt;/p&gt;
&lt;p&gt;Мне снились страшные сны с указателями :( Так всегда, когда я до
самого утра программирую. Потом меня будили, я приходил в состояние
бодрствования… AddRef на все объекты мыслей… MakeAsExternal… снова спать…
Release, … чёрт! не для всего вызвал delete!! Вот такое странное
состояние :), но это для меня нормально, не то, что в прошлый раз
приснилось, что я отладчик GDB.&lt;/p&gt;
&lt;p&gt;Вот тестовый билд
&lt;a class="reference external" href="https://yadi.sk/d/K33tnpf_UmdNU"&gt;blender-2.49b-linux-x86-py2.5-imd.tar.bz2&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Что в нём есть:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Динамическая загрузка объектов целиком из других сцен с диска&lt;/li&gt;
&lt;li&gt;Выгрузка по требованию с высвобождением памяти (есть принудительная
&lt;strong&gt;F&lt;/strong&gt;orced, выгружает даже из памяти blend-файл)&lt;/li&gt;
&lt;li&gt;Обработка события (scriptlink) после сохранения файла &lt;strong&gt;OnAfterSave&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
</summary><category term="blender"></category><category term="загрузка"></category><category term="bge"></category><category term="динамический"></category><category term="объект"></category></entry><entry><title>Удаление объектов из сцены</title><link href="/posts/2010/01/06/udalenie-obektov-iz-stseny/" rel="alternate"></link><updated>2010-01-06T21:39:52+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-06:posts/2010/01/06/udalenie-obektov-iz-stseny/</id><summary type="html">&lt;p&gt;Доработал актуатор выгрузки объектов, которые были загружены при
помощи ранее разработанного актуатора по загрузке объектов. Осталось
только лишние материалы в конвертере сцены тоже выгрузить и функционал
можно считать почти полностью готовым и удобноваримым. Поэтому где-то
завтра/после завтра сделаю билд под Linux с этим функционалом.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/117245/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4103/imdagger.5/0_1c9fd_f85d4fad_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="возможности"></category><category term="bge"></category></entry><entry><title>Доделал загрузку</title><link href="/posts/2010/01/05/dodelal-zagruzku/" rel="alternate"></link><updated>2010-01-05T21:33:17+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-05:posts/2010/01/05/dodelal-zagruzku/</id><summary type="html">&lt;div class="text-center"&gt;&lt;div class="yavideo" align="left"&gt;&lt;/div&gt;&lt;object id="flash" width="450" height="338" data="http://flv.video.yandex.ru/lite/imdagger/z4ybrsyr5b.2013/" type="application/x-shockwave-flash"&gt;&lt;param value="http://flv.video.yandex.ru/lite/imdagger/z4ybrsyr5b.2013/" name="movie"&gt;&lt;param value="high" name="quality"&gt;&lt;param value="transparent" name="wmode"&gt;&lt;param value="#ffffff" name="bgcolor"&gt;&lt;param value="true" name="allowfullscreen"&gt;&lt;param value="sameDomain" name="allowscriptaccess"&gt;&lt;param value="scale" name="scale"&gt;&lt;/object&gt;&lt;/div&gt;&lt;p&gt;Всё таки то, что я повкалывал вчерашней (сегодняшней) ночью пошло на
пользу. Я доделал динамическую загрузку объектов для BGE. Теперь можно
управлять из логических блоков, какие сцены с объектами ещё стоит
подгрузить в память. На днях доделаю выгрузку (кеширование сейчас уже
есть).&lt;/p&gt;
</summary><category term="blender"></category><category term="загрузка"></category><category term="bge"></category><category term="динамический"></category><category term="возможности"></category></entry><entry><title>Консенсус</title><link href="/posts/2010/01/04/konsensus/" rel="alternate"></link><updated>2010-01-04T21:06:03+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-04:posts/2010/01/04/konsensus/</id><summary type="html">&lt;p&gt;Уладил все противоречия в себе по поводу, куда же засунуть опцию
динамической загрузки с минимальными усилиями и разрушениями кода.
Сначала думал создать отдельный тип объекта, но потом пришёл к выводу,
что пользователь доложен сам управлять этой возможностью и не нужно его
ограничивать понятиями локаций. Потом думал создать объектам отдельное
свойство, но это вызвало бы проблемы при редактировании официальной
версией Blender и моей сборкой, т.к. моя версия требовала бы параметры,
которые не создавала другая версия. Поэтому я сошёлся на создании
отдельного вида актуатора типа &lt;strong&gt;Scene&lt;/strong&gt;. Он будет уметь загружать все
объекты с определённой сцены из другого blend-файла, а потом выгружать
по требованию. Вот поправил UI для этого дела и вставил обработчик
событий. Он пока перехватывает событие и выводит имя файла и сцены. Но
чуть позже добавлю загрузку, благо в Ketji есть для этого функции (и
конвертации и присоединение).&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/116227/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4101/imdagger.5/0_1c603_86407cee_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="возможности"></category><category term="bge"></category></entry><entry><title>Тружусь</title><link href="/posts/2010/01/03/truzhus/" rel="alternate"></link><updated>2014-07-18T23:59:00+03:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-03:posts/2010/01/03/truzhus/</id><summary type="html">&lt;p&gt;Вырасту, буду большим и грозным и много много кодить без отдыха. А пока
я ещё вот такой и нуждаюсь в перерывах :) &lt;strong&gt;Погладьте меня&lt;/strong&gt;… :D&lt;/p&gt;
&lt;p&gt;UPD 18 июля 2014: &lt;u class="underline"&gt;
“много много кодить без отдыха”&lt;/u&gt;
 — наииивный... зрение упало и
уже не могу без делать передышек&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://demotivators.to/posters/472581/malyish-milashka-.htm"&gt;&lt;img alt="Изображение малыша кролика" src="http://demotivators.to/media/posters/3855/472581_malyish-milashka-.jpg" title="Изображение малыша кролика"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="Я"></category><category term="бредни"></category></entry><entry><title>Локации</title><link href="/posts/2010/01/02/lokatsii/" rel="alternate"></link><updated>2010-01-02T21:15:56+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-02:posts/2010/01/02/lokatsii/</id><summary type="html">&lt;p&gt;Сделал отдельный тип объектов Location (а ведёт себя почти как
Sensor). И хотел сделать так, что все объекты, оболочка которых
находится внутри данного не загружались в BGE, а только по требованию.
Но возникла трудность, что проверка каждого объекта для каждой из
локаций, если писать, влоб займёт O(N * M). Поэтому пока ещё пробую
вариант, который добавит дополнительную характеристику самим объектам,
т.е. Location ID. И можно будет вручную просить загрузить все объекты с
определённым идентификатором на сцене или выгрузить, хотя тут тоже есть
свои недостатки (особенно в совместимости blend-файлов с официальной
сборкой). Отправлюсь домой обмозгую ещё раз, что именно нужно сделать и
каким путём идти.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/115237/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4105/imdagger.5/0_1c225_d47ddca0_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="bge"></category></entry><entry><title>Ковыряю BGE</title><link href="/posts/2010/01/01/kovyriaiu-bge/" rel="alternate"></link><updated>2010-01-01T19:19:45+02:00</updated><author><name>IMDagger</name></author><id>tag:,2010-01-01:posts/2010/01/01/kovyriaiu-bge/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Поковырял немного Ketsji (это так зовут текущую версию BGE).
Обнаружил, что он сохраняет ссылки на Blender-объекты в BGE-объектах.
Это очень позитивный факт, т.к. можно будет сделать загрузку
blend-файлов с последующей выборочной конвертацией объектов. Проще
говоря динамическую загрузку уже в 2.49b не дожидаясь 2.5 :)&lt;/p&gt;
</summary><category term="blender"></category><category term="возможности"></category><category term="bge"></category></entry><entry><title>2010</title><link href="/posts/2009/12/31/2010/" rel="alternate"></link><updated>2009-12-31T17:02:58+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-31:posts/2009/12/31/2010/</id><summary type="html">&lt;p&gt;Всех с наступающим! Пойду уже скоро домой, подкреплюсь, потом
высплюсь, а завтра снова приду в Великий и Могучий Интернет :)&lt;/p&gt;
</summary><category term="праздник"></category></entry><entry><title></title><link href="/posts/2009/12/30/urn:ya.ru:post/22199227/559/" rel="alternate"></link><updated>2009-12-30T21:45:22+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-30:posts/2009/12/30/urn:ya.ru:post/22199227/559/</id><summary type="html"></summary></entry><entry><title>Обои II: реинкарнация</title><link href="/posts/2009/12/30/oboi-ii-reinkarnatsiia/" rel="alternate"></link><updated>2009-12-30T20:04:43+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-30:posts/2009/12/30/oboi-ii-reinkarnatsiia/</id><summary type="html">&lt;p&gt;Сел вчера немного поделал проект. Потом решил взглянуть на мои
наработки за последние годы в Blender, такая вот ретроспекция :-/. И
меня посетила мысль оптимизировать и немного улучшить обои рабочего
стола, которые у меня уже два года не менялись :). В старой версии было
1500000 фейсов, а в новой осталось 500000 и то, лишь потому, что
сокращать дальше было лень. Новый вариант, более сглаженный,
оптимизированный:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/114309/"&gt;&lt;img alt="Slackware Linux" src="http://img-fotki.yandex.ru/get/4106/imdagger.5/0_1be85_8e8ba9a4_L" title="Slackware Linux"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="обои"></category><category term="slackware"></category><category term="linux"></category></entry><entry><title>Наша индивидуальность</title><link href="/posts/2009/12/30/nasha-individualnost/" rel="alternate"></link><updated>2009-12-30T19:18:30+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-30:posts/2009/12/30/nasha-individualnost/</id><summary type="html">&lt;p&gt;Сделал небольшую мультяшную зарисовку про индивидуальность.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/114306/"&gt;&lt;img alt="Колобки" src="http://img-fotki.yandex.ru/get/4012/imdagger.5/0_1be82_7d23dff1_L" title="Колобки"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Всего в сцене ~300000 фейсов и рендерилось на Celeron 2Ghz 16 минут.
Руки и ноги, а также пальцы деформировались арматурой. Раньше я не
использовал арматуру для конечностей, но около года назад немного
освоился и перестал её боятся. Из-за этого процесс моделирования
ускорился. Особенно чувствую облегчение, когда мне нужно поменять позу
или поправить. Моделирую в нейтральной позе, это проще чем пытаться
подогнать меши под позу вручную. Волосы сделаны частицами. Текстуру
стены взял с &lt;a class="reference external" href="http://texturez.com"&gt;http://texturez.com&lt;/a&gt;. Освещение делаю так: очень низко
ставлю светлоголубой &lt;strong&gt;Hemi&lt;/strong&gt;, а высоко жёлтый &lt;strong&gt;Sun&lt;/strong&gt;. И включаю мягкие
тени и столько сэмплов, сколько мой старый процессор на работе
позволяет. Чтобы раскрасить меш в разные цвета, использовал назначение
материалов в режиме редактирования. Для стекла очков включил небольшой
&lt;strong&gt;Ray Mirror&lt;/strong&gt;. Очень понравился шейдер Minnaert, т.к. у него есть
параметр &lt;strong&gt;Darkness&lt;/strong&gt;, за счёт которого удалось сделать такое мультяшное
свечение. Сетка для сцены:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/114307/"&gt;&lt;img alt="Сетка" src="http://img-fotki.yandex.ru/get/4013/imdagger.5/0_1be83_6722c0fb_L" title="Сетка"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="обои"></category><category term="индивидуальность"></category></entry><entry><title>Функционал Blender</title><link href="/posts/2009/12/29/funktsional-blender/" rel="alternate"></link><updated>2009-12-29T17:18:08+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-29:posts/2009/12/29/funktsional-blender/</id><summary type="html">&lt;p&gt;Сделал обработку события «после сохранения» в Blender. Т.к. без
возможности повесить скриптлинк на такое событие приходится делать так:
вешать событие onSave, затем в обработчике событий после всех операций
устанавливать новый скриптлинк динамически (в версиях &amp;lt;2.49 есть ошибка,
он не установится) на событие OnRedraw, который выполнит действия
вызовет принудительно &lt;code class="code"&gt;
Blender.Window.RedrawAll()&lt;/code&gt;
 и удалит сам себя.
Недостаток очевиден — если сохранение происходит не в 3D окне, то
Blender не посылает ему сигнал перерисовки до тех пор, пока в него не
переключишься. А из-за этого скрипт, который должен сработать после
сохранения может быть не вызван в текущий момент, и даже возможно только
при следующей загрузке. Ещё недостаток, что сам скриптлинк попадает в
blend-файл, хотя он временный. Поэтому я подправил немного исходники и
добавил ещё один тип событий.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/113649/"&gt;&lt;img alt="Меню" src="http://img-fotki.yandex.ru/get/4103/imdagger.5/0_1bbf1_415172d9_L" title="Меню"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="возможности"></category><category term="дополнительно"></category></entry><entry><title>Птички 2</title><link href="/posts/2009/12/29/ptichki-2/" rel="alternate"></link><updated>2009-12-29T12:28:28+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-29:posts/2009/12/29/ptichki-2/</id><summary type="html">&lt;p&gt;Сфотографировал снова голубей, только в этот раз они вышли почище
:). Забавные они создания, одни сидят подальше от других и никто с ними
сидеть не хочет рядом (ну это что-то типа меня), другие сидят парами и
греются, некоторые не подпускают и отталкивают и они обиженно уходят
сидеть на окраине.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/113565/"&gt;&lt;img alt="Голуби на снегу" src="http://img-fotki.yandex.ru/get/4113/imdagger.5/0_1bb9d_c737e64e_L" title="Голуби на снегу"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="снег"></category></entry><entry><title>Расширяем BGE</title><link href="/posts/2009/12/28/rasshiriaem-bge/" rel="alternate"></link><updated>2009-12-28T21:19:38+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-28:posts/2009/12/28/rasshiriaem-bge/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Загорелся я идеей чуть расширить BGE в Blender, хочу сделать так,
чтобы уже в 2.49b (а то пока этого 2.6 стабильного дождёшься, полгода
или год пройдёт, а фишка нужна сейчас) была динамическая загрузка
объектов, а ещё мне нужно в самом Blender событие onAfterSave, т.к. как
я сейчас извращаюсь с установкой Script Link’ов, то это вообще отдельная
песня. Сижу внимательно разбираю исходники на C++ и параллельно
компилирую Blender 2.49b из исходников.&lt;/p&gt;
</summary><category term="bge"></category><category term="обновление"></category></entry><entry><title>Динамическая загрузка в BGE</title><link href="/posts/2009/12/27/dinamicheskaia-zagruzka-v-bge/" rel="alternate"></link><updated>2009-12-27T20:14:00+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-27:posts/2009/12/27/dinamicheskaia-zagruzka-v-bge/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Сделал небольшой пример, как динамически загружать объекты уровней в
BGE и как превратить редактор Blender в редактор игровых уровней, а не
только статики и динамики с сохранением в blend. Попробую на днях
подробнее описать, как я перехватываю сохранение и загрузку и управляю
этим процессом. Пока что выложил черновой пример на
&lt;a class="reference external" href="http://blender3d.org.ua"&gt;blender3d.org.ua&lt;/a&gt;. Посмотрим, если тема
будет интересна и актуальна, то напишу небольшой урок, как производить
загрузку по локациям и не хранить меши всех объектов в памяти.&lt;/p&gt;
</summary><category term="blender"></category><category term="загрузка"></category><category term="bge"></category></entry><entry><title></title><link href="/posts/2009/12/26/urn:ya.ru:post/22199227/550/" rel="alternate"></link><updated>2009-12-26T19:39:51+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-26:posts/2009/12/26/urn:ya.ru:post/22199227/550/</id><summary type="html">&lt;p&gt;First they ignore you, then they laugh at you, then they fight you, then
you win. Mohandas Gandhi.&lt;/p&gt;
</summary></entry><entry><title>Динамическая загрузка</title><link href="/posts/2009/12/26/dinamicheskaia-zagruzka/" rel="alternate"></link><updated>2009-12-26T19:34:45+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-26:posts/2009/12/26/dinamicheskaia-zagruzka/</id><summary type="html">&lt;p&gt;У меня есть один __init__.py, который динамически загружает все
нижележащие модули. И собирает список классов из этих модулей. Но я не
замечал проблемы, что использование относительного пути заданного
константой, от которого нужно перемещаться по дереву, вызывает ошибку,
если директория проекта не текущая. Временно я решал эту “боль”
созданием мягкой ссылки, но сейчас применил такой трюк:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-n"&gt;items_dir&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;dirname&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;__file__&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Функция &lt;code class="code"&gt;
dirname&lt;/code&gt;
 расположена в модуле &lt;code class="code"&gt;
os.path&lt;/code&gt;
. Она возвращает
директорию без завершающего разделителя, в которой находится указанный
файл. Т.к. в Python переменная __file__ для каждого из модулей
устанавливается, как полный путь к файлу, то легко можно получить путь к
динамически загружаемым, лежащим в поддиректориях модулям пакета.&lt;/p&gt;
</summary><category term="загрузка"></category><category term="python"></category></entry><entry><title>Квотирование</title><link href="/posts/2009/12/25/kvotirovanie/" rel="alternate"></link><updated>2009-12-25T21:23:19+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-25:posts/2009/12/25/kvotirovanie/</id><summary type="html">&lt;p&gt;Создал отдельный LVM раздел, где хранятся директории пользователей.
Включил квотирование для раздела. Но я копировал эти папки со старого
сервера и естественно владельцы не могли сохраниться в Unix-правах, т.к.
предыдущий сервер был не на Samba :). Поэтому я написал скрипт, который
получает по UID пользователя его SID в AD Samba4, затем по SID получает
его домашнюю директорию, а после этих всех операций выполяет &lt;code class="code"&gt;
chown -R
код _пользователя домашняя _директория&lt;/code&gt;
. После этого файлами, которыми
владел root, и ему они засчитывались в квоту, начали обладать настоящие
хозяева. Samba4 у меня установлена в /opt, поэтому все связанные с ней в
примере начинаются на /opt. Скрипт &lt;em&gt;sidbyid.sh&lt;/em&gt;, который по UID
определяет SID пользователя:&lt;/p&gt;
&lt;blockquote&gt;
&lt;strong&gt;/opt/bin/ldbsearch&lt;/strong&gt; -H &lt;strong&gt;/opt/private/idmap.ldb&lt;/strong&gt; &amp;quot;(xidNumber=$1)&amp;quot; |
grep &amp;quot;objectSid:&amp;quot; | sed 's/objectSid: //'&lt;/blockquote&gt;
&lt;p&gt;Другой сценарий homebysid.sh определяет каталог пользователя:&lt;/p&gt;
&lt;blockquote&gt;
&lt;strong&gt;/opt/bin/ldbsearch&lt;/strong&gt; -H &lt;strong&gt;/opt/private/sam.ldb&lt;/strong&gt; &amp;quot;(objectSid=$1)&amp;quot; |
grep &amp;quot;homeDirectory:&amp;quot; | sed 's/homeDirectory: //'&lt;/blockquote&gt;
&lt;p&gt;При помощи этих утилит можно получить домашнюю директорию
пользователя с UID равным &lt;em&gt;3000016&lt;/em&gt;: &lt;code class="code"&gt;
./homebysid.sh  `./sidbyid.sh 3000016 `&lt;/code&gt;
.&lt;/p&gt;
&lt;p&gt;Возможно они не достаточно эффективны и можно сделать лучше, но мне
они потребовались всего один раз для ~1000 пользователей. Думаю
пригодятся ещё но только эпизодически и уже не для больших групп.&lt;/p&gt;
</summary><category term="samba4"></category><category term="квотирование"></category><category term="квота"></category></entry><entry><title>Samba4 и копирование ACL</title><link href="/posts/2009/12/24/samba4-i-kopirovanie-acl/" rel="alternate"></link><updated>2009-12-24T20:10:32+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-24:posts/2009/12/24/samba4-i-kopirovanie-acl/</id><summary type="html">&lt;p&gt;Samba4 сохраняет ACL права файлов и папок в их расширенные атрибуты
файловой системы, если включён параметр &lt;em&gt;user_xattr&lt;/em&gt; у неё при
монтировании. Два основных расширенных атрибута, которые появляются:
&lt;strong&gt;user.DosAttrib&lt;/strong&gt;, &lt;strong&gt;security.NTACL&lt;/strong&gt;. Список атрибутов можно получить
при помощи &lt;code class="code"&gt;
attr -l файл&lt;/code&gt;
 (для этого должна быть установлена libattr).
Проблема в том, что у меня не получилось прочитать при помощи &lt;em&gt;getfattr&lt;/em&gt;
атрибут из раздела security. Да и хотелось утилиту, которая сама
скопирует все параметры файла. Мне это нужно, чтобы переместить на
другой раздел другого LVM все папки пользователей с правами, которые
были. Простой &lt;em&gt;cp&lt;/em&gt; не хочет копировать эти атрибуты. А среди всех
программ не нашлось подходящей. И только, когда я скачал исходники
libattr, то нашёл в папке examples файл &lt;code class="code"&gt;
copyattr.c&lt;/code&gt;
. Я его
скомпилировал таким способом (это после компиляции самой библиотеки и
приложений attr, getfattr и setfattr):&lt;/p&gt;
&lt;blockquote&gt;
&lt;strong&gt;gcc&lt;/strong&gt; -DHAVE_ATTR_ERROR_CONTEXT_H -DHAVE_ATTR_LIBATTR_H
-I../include -DHAVE_ATTR_COPY_FILE &lt;strong&gt;copyattr.c&lt;/strong&gt;
../libattr/.libs/libattr.a -o &lt;strong&gt;copyattr&lt;/strong&gt;&lt;/blockquote&gt;
&lt;p&gt;Не забываем подправить исходный код утилиты, т.к. она копирует только
user.*, а нужно всё. Для этого в файле исправил функцию
&lt;strong&gt;is_user_attr&lt;/strong&gt;, пусть она возвращает всегда 1. Получившийся бинарный
файл необходимо положить в /usr/bin к остальным программам. Сначала я
скопировал все файлы обычным способом, а затем рекурсивно перекопировал
атрибуты используя утилиту find и её параметр -exec:&lt;/p&gt;
&lt;blockquote&gt;
&lt;strong&gt;find&lt;/strong&gt; директория_для_копирования &lt;strong&gt;-exec&lt;/strong&gt; /usr/bin/copyattr
\{\} путь_на_другом_винчестере_к_такой_же_дирекотрии/\{\} \;&lt;/blockquote&gt;
</summary><category term="samba4"></category><category term="acl"></category><category term="копирование"></category></entry><entry><title></title><link href="/posts/2009/12/23/urn:ya.ru:post/22199227/543/" rel="alternate"></link><updated>2009-12-23T18:30:36+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-23:posts/2009/12/23/urn:ya.ru:post/22199227/543/</id><summary type="html">&lt;p&gt;А мне Дедушка Мороз куртку новую принёс! :)&lt;/p&gt;
</summary><category term="радость"></category></entry><entry><title>Пряники</title><link href="/posts/2009/12/23/prianiki/" rel="alternate"></link><updated>2009-12-23T16:57:52+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-23:posts/2009/12/23/prianiki/</id><summary type="html">&lt;p&gt;Сделал модельки пряников (полусфера, которая сжата и её край
экструдирован), одел текстуру пряника, уменьшил &lt;strong&gt;Specularity&lt;/strong&gt;,
сфотографировал стол и текстуру разместил на меше. Поставил Area лампу,
но чтобы не засвечивала, а цвет тени сделал коричневым. Делал десяток
минут, т.е. не очень долго. Соответственно и результат такой x-D:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/111095/"&gt;&lt;img alt="Пряники" src="http://img-fotki.yandex.ru/get/4013/imdagger.5/0_1b1f7_5aa8c9b2_L" title="Пряники"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="пряник"></category><category term="набросок"></category></entry><entry><title>Radiosity</title><link href="/posts/2009/12/23/radiosity/" rel="alternate"></link><updated>2009-12-23T15:28:26+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-23:posts/2009/12/23/radiosity/</id><summary type="html">&lt;p&gt;Всё время интересовала эта иконка &lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4007/imdagger.5/0_1b1f5_34bfd90f_L" title="image0"/&gt; со значком радиации в
Blender. Оказалось, что тут регулируются параметры Radiosity рендеринга.
Т.е. можно заставить светиться объект, как лампу и излучать цветной свет
с убывающей интенсивностью. Я сделал небольшую комнатку, как в примере,
добавил меш-источник света. Жаль тени не вышли :( (буду думать).&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/111094/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/4008/imdagger.5/0_1b1f6_b239f329_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="radio"></category><category term="radiosity"></category></entry><entry><title></title><link href="/posts/2009/12/22/urn:ya.ru:post/22199227/537/" rel="alternate"></link><updated>2009-12-22T20:50:54+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-22:posts/2009/12/22/urn:ya.ru:post/22199227/537/</id><summary type="html">&lt;p&gt;Можно и расслабиться, накатил
imdagger&amp;#64;undead-20091222184739-tpbmesiy1mmfke7g ревизия 171&lt;/p&gt;
</summary><category term=""></category></entry><entry><title>Редактор рюкзака</title><link href="/posts/2009/12/22/redaktor-riukzaka/" rel="alternate"></link><updated>2009-12-22T20:36:49+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-22:posts/2009/12/22/redaktor-riukzaka/</id><summary type="html">&lt;p&gt;Доделал возможность добавки предметов (изображения в тестовой сцене
не вставлял, поэтому они отсутствуют), просмотра рюкзака, управление
предметами. Осталось только скроллбар отрегулировать. Сейчас закоммичу
новые изменения. В стандартной документации по 2.49 почему-то не нашёл
описания функции &lt;em&gt;Scrollbar&lt;/em&gt;, полазал по инету и нашёл себе небольшую
&lt;a class="reference external" href="http://download.blender.org/documentation/NaN_docs/Manual2.0/PythonScripting.html"&gt;шпаргалку&lt;/a&gt;
по его параметрам (и даже больше).&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/110831/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4111/imdagger.5/0_1b0ef_3fa05e38_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="рюкзак"></category><category term="last_gateway_to_hell"></category></entry><entry><title></title><link href="/posts/2009/12/22/urn:ya.ru:post/22199227/535/" rel="alternate"></link><updated>2009-12-22T18:52:12+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-22:posts/2009/12/22/urn:ya.ru:post/22199227/535/</id><summary type="html">&lt;p&gt;Самооценка поднялась :)&lt;/p&gt;
</summary><category term="настроение"></category></entry><entry><title>Я бдительный</title><link href="/posts/2009/12/22/ia-bditelnyi/" rel="alternate"></link><updated>2009-12-22T18:45:56+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-22:posts/2009/12/22/ia-bditelnyi/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Мне дали статус &lt;strong&gt;бдительный&lt;/strong&gt; на форуме blender.org.ua. Я даже и не
мечтал, что мне когда-нибудь дадут статус на том форуме! Но сделал дело
— обнаружил, что пользователь выложил работу без соглашения автора и
присвоил авторство зарегистрировавшись под именем автора, хотя настоящий
создатель явно не знает об этом. При чём это случилось уже второй раз.&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; Рад стараться ради любимого форума. Я ещё этот сайт полюбил, когда
он был всего лишь простой домашней страничкой Юли (я один раз включал
камеру на нём x-D, но больше не тратил их трафик зазря :) только
туториалы читал).&lt;/p&gt;
</summary><category term="Я"></category><category term="бдительный"></category><category term="форум"></category></entry><entry><title>Меню редактора</title><link href="/posts/2009/12/21/meniu-redaktora/" rel="alternate"></link><updated>2009-12-21T20:44:16+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-21:posts/2009/12/21/meniu-redaktora/</id><summary type="html">&lt;p&gt;Добавил управление рюкзаком из меню редактора. Ещё не до конца
завершено, но остались рюшечки для меню и скроллбар. А так же
возможность добавки и удаления. Главное, что все представления и
контроллеры заработали, свободно сохраняют своё состояние и загружают.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/110560/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4103/imdagger.5/0_1afe0_f7821e56_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="рюкзак"></category><category term="last_gateway_to_hell"></category></entry><entry><title>Билет</title><link href="/posts/2009/12/20/bilet/" rel="alternate"></link><updated>2009-12-20T11:02:51+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-20:posts/2009/12/20/bilet/</id><summary type="html">&lt;p&gt;Чуть-чуть и был бы 23456 x-D&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/109822/"&gt;&lt;img alt="Билет232456" src="http://img-fotki.yandex.ru/get/4112/imdagger.5/0_1acfe_549e2735_L" title="Билет232456"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="номер"></category><category term="билет"></category></entry><entry><title></title><link href="/posts/2009/12/18/urn:ya.ru:post/22199227/516/" rel="alternate"></link><updated>2009-12-18T16:17:06+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-18:posts/2009/12/18/urn:ya.ru:post/22199227/516/</id><summary type="html">&lt;p&gt;Идём в гору&lt;/p&gt;
</summary></entry><entry><title>Lazy fetch</title><link href="/posts/2009/12/18/lazy-fetch/" rel="alternate"></link><updated>2009-12-18T16:15:28+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-18:posts/2009/12/18/lazy-fetch/</id><summary type="html">&lt;p&gt;Поборол проблему, что сессия была закрыта уже перед тем, как мне
нужно было в JSTL-шаблоне получить данные. Я извлекал целую коллекцию
объектов, но подробная информация нужна была только о первом. Поэтому
пытался побороть HibernateTemplate.initialize, который принудительно
инициализирует объект. Но у меня постоянно выпадало исключение, что
&lt;strong&gt;org.hibernate.LazyInitializationException could not initialize proxy -
no Session&lt;/strong&gt;. Всё это происходило внутри метода в потомке
&lt;strong&gt;HibernateDaoSupport&lt;/strong&gt; и пришлось сделать манёвр по получению новой
сессии и привязке объекта к ней с последующим принудительным
обновлением:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;span class="pgcss-n"&gt;Session&lt;/span&gt; &lt;span class="pgcss-n"&gt;inCurrentSession&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;getSession&lt;/span&gt;&lt;span class="pgcss-o"&gt;();&lt;/span&gt;
&lt;span class="pgcss-n"&gt;inCurrentSession&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;refresh&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;rootNode&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;getInfo&lt;/span&gt;&lt;span class="pgcss-o"&gt;());&lt;/span&gt;
&lt;span class="pgcss-n"&gt;getHibernateTemplate&lt;/span&gt;&lt;span class="pgcss-o"&gt;().&lt;/span&gt;&lt;span class="pgcss-na"&gt;initialize&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;rootNode&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;getInfo&lt;/span&gt;&lt;span class="pgcss-o"&gt;());&lt;/span&gt;
&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Исключение перестало выпадать и всё заработало. rootNode —
объект-узел, который мне нужен для отображения его даты, getInfo
возвращает объект с описанием узла. Информация привязана при помощи
&lt;strong&gt;&amp;#64;OneToOne&lt;/strong&gt; и &lt;strong&gt;FetchType.LAZY&lt;/strong&gt;. Поэтому refresh обновляет и
привязывает прокси объекта к новой сессии, а initialize вынуждает
принудительно вызвать &lt;em&gt;SELECT&lt;/em&gt; и достать данные из базы.&lt;/p&gt;
</summary><category term="диплом"></category><category term="hibernate"></category><category term="lazy"></category></entry><entry><title></title><link href="/posts/2009/12/17/urn:ya.ru:post/22199227/514/" rel="alternate"></link><updated>2009-12-17T21:22:54+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-17:posts/2009/12/17/urn:ya.ru:post/22199227/514/</id><summary type="html">&lt;p&gt;Завтра буду вкручивать код, настроение будет суровое&lt;/p&gt;
</summary></entry><entry><title>Дюк и Java</title><link href="/posts/2009/12/16/diuk-i-java/" rel="alternate"></link><updated>2009-12-16T19:51:19+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-16:posts/2009/12/16/diuk-i-java/</id><summary type="html">&lt;p&gt;Когда мне кажется, что одиноко, ко мне приходит &lt;strong&gt;Дюк&lt;/strong&gt;, с которым
мы выпиваем чашечку крепкого Java. Вот так я его изобразил:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/108542/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3901/imdagger.4/0_1a7fe_8b97cb59_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Вот так я изобразил логотип для Java ;). Небольшой мэйкоф (make of):&lt;/p&gt;
&lt;p&gt;В сцене присутствует две лампы: холодная &lt;strong&gt;Hemi&lt;/strong&gt; (со светло-голубым
светом), которая висит очень низко и просвечивает всё насквозь, и тёплая
&lt;strong&gt;Sun&lt;/strong&gt; (с жёлтым светом). Я так сдал делать после прочтения уроков по
Blender Internal от &lt;a class="reference external" href="http://blender3d.org.ua/.user/Андрей%20Головин%20"&gt;Андрея
Головина&lt;/a&gt;. После
этого мои рендеры стали выглядеть чуть лучше, чем раньше. Я использовал
мягкость тени 1.2 и количество сэмплов 4. Солнце расположено справа и
таким образом, чтобы попасть на тени, которые были при фотографировании.&lt;/p&gt;
&lt;p&gt;Комната сделана из простой текстуры одетой на куб. Я взял цифровой
фотоаппарат и сфотографировал угол с разрешением &lt;em&gt;3264x2448&lt;/em&gt;. Добавил в
сцену куб, удалил в нём одну вершину так, чтобы остались только три
грани. Развернул, чтобы смотрелось не сильно косо.&lt;/p&gt;
&lt;p&gt;Все части сцены я растолкал по раным файлам и соединил в
&lt;strong&gt;full_scene.blend&lt;/strong&gt;. Добавлял объекты в группу при помощи &lt;kbd class="kbd"&gt;
Ctrl+G&lt;/kbd&gt;
, а
потом при помощи &lt;kbd class="kbd"&gt;
Shift+F1&lt;/kbd&gt;
 с выбором Link присоединял группу в основную
сцену. Группа добавляется просто: &lt;em&gt;Space → Add → Group → имя_библиотеки
→ имя_группы&lt;/em&gt;. Получились файлы: &lt;em&gt;chair.blend&lt;/em&gt; со стулом и текстом на
нём, &lt;em&gt;duke.blend&lt;/em&gt; с самим Дюком (руки, тело, нос в одной группе с именем
Duke), &lt;em&gt;items.blend&lt;/em&gt; с чашкой и миской, room.blend с уголком комнаты.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/108545/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/4010/imdagger.4/0_1a801_207584bc_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Ручка сделана при помощи &lt;strong&gt;Path&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Чтобы текст лёг на поверхность стула я сначала создал обычный текст
при помощи &lt;em&gt;Add → Text&lt;/em&gt;, а затем конвертировал его в меш (&lt;kbd class="kbd"&gt;
Alt + C&lt;/kbd&gt;
).
Затем нужно добавить модификатор &lt;strong&gt;Shinkwrap&lt;/strong&gt; (&lt;kbd class="kbd"&gt;
F9&lt;/kbd&gt;
, затем Add modifier)
для текста. Нужно указать в поле &lt;em&gt;Object&lt;/em&gt; имя крышки табуретки. Текст
прижмётся плотно к ней. Но это плохо…, следует сделать небольшой зазор
&lt;em&gt;Offset&lt;/em&gt; равный 0.04, чтобы не «проваливался».&lt;/p&gt;
&lt;p class="cut"&gt;&lt;a class="h-link reference internal" data-toggle="collapse" href="#cut_40807248"&gt;ещё немного процесса под катом&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_40807248"&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/108544/"&gt;&lt;img alt="image2" src="http://img-fotki.yandex.ru/get/4013/imdagger.4/0_1a800_29eb43d9_L" title="image2"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Позиции рук придал при помощи костей, кости назначил автоматически
при помощи &lt;strong&gt;Create From Bone Heat&lt;/strong&gt;, когда связывал меш и арматуру. Не
забыл в локте сделать уплотнение сетки, чтобы при сгибе не смотрелось
слишком страшно.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/108546/"&gt;&lt;img alt="image3" src="http://img-fotki.yandex.ru/get/4007/imdagger.4/0_1a802_c1a7e392_L" title="image3"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/108547/"&gt;&lt;img alt="image4" src="http://img-fotki.yandex.ru/get/4012/imdagger.5/0_1a803_7b4c5bc_L" title="image4"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Нос привязал к точке на теле (выбираем нос, выбирает тело Дюка,
переходим в режим редактирования по &lt;kbd class="kbd"&gt;
Tab&lt;/kbd&gt;
, выбираем вершину и &lt;kbd class="kbd"&gt;
Ctrl+P&lt;/kbd&gt;
)
при помощи вершинных родителей. Это потребовалось из-за того, что голову
Дюка и ноги для позиции сидя (да в нейтральной он у меня стоял на ногах)
модифицировал при помощи Lattice.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/108543/"&gt;&lt;img alt="image5" src="http://img-fotki.yandex.ru/get/4007/imdagger.4/0_1a7ff_498053d4_L" title="image5"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;</summary><category term="blender"></category><category term="обои"></category><category term="дюк"></category></entry><entry><title>Нужен волшебный пендель</title><link href="/posts/2009/12/15/nuzhen-volshebnyi-pendel/" rel="alternate"></link><updated>2009-12-15T20:46:17+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-15:posts/2009/12/15/nuzhen-volshebnyi-pendel/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Что-то сегодня над своими идеями непродуктивно поработал. Всё
началось ещё вчера… слишком долго ел, устал после работы и не смог сесть
за комп в полночь, а прилёг поспать. Потом я долго спал аж до 11:00,
потом сходил в универ, время шло, потом я снова ел, потом помогал
другим. Так пришло время сделать обязанности по работе, делал их и вот
только добрался до своего проекта. Пообещаю себе, что сегодня буду до
поздней ночи с ним тра…. трудится :P Сделаю всё-таки эти несколько
представлений для разных режимов рюкзака.&lt;/p&gt;
</summary><category term="last_gateway_to_hell"></category></entry><entry><title>Демотиватор</title><link href="/posts/2009/12/14/demotivator/" rel="alternate"></link><updated>2009-12-14T19:54:59+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-14:posts/2009/12/14/demotivator/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Теперь буду знать, что не стоит вставлять прямые ссылки на
демотиваторы x-D. А то они меня предупредили: «&lt;strong&gt;each time your
hotlink, God kills a kitten…&lt;/strong&gt;». Я попалилсо :)&lt;/p&gt;
</summary><category term="ссылка"></category><category term="демотиватор"></category><category term="hotlink"></category></entry><entry><title></title><link href="/posts/2009/12/14/urn:ya.ru:post/22199227/503/" rel="alternate"></link><updated>2009-12-14T19:45:24+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-14:posts/2009/12/14/urn:ya.ru:post/22199227/503/</id><summary type="html">&lt;p&gt;Всё будет хорошо? Ха! Ещё ни разу так не было! :)&lt;/p&gt;
</summary></entry><entry><title>Мясорубка</title><link href="/posts/2009/12/14/miasorubka/" rel="alternate"></link><updated>2009-12-14T19:44:28+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-14:posts/2009/12/14/miasorubka/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Сделал представление для того, чтобы в режиме редактора можно было
управлять предметами в рюкзаке. Нужно будет доотладить сегодня и
выложить завтра скриншот меню в редакторе Blender. Конечно управлять из
самой программы рюкзаком будет проще, но и редактором пользоваться будут
опытные люди /* т.е. мы :) */. Лишь бы не устал я к вечеру и не
разоспался :S.&lt;/p&gt;
</summary><category term="проект"></category><category term="last_gateway_to_hell"></category></entry><entry><title>Сижу бездельничаю, лазаю по инету, отдыхаю</title><link href="/posts/2009/12/13/sizhu-bezdelnichaiu-lazaiu-po-inetu-otdykhaiu/" rel="alternate"></link><updated>2009-12-13T18:13:53+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-13:posts/2009/12/13/sizhu-bezdelnichaiu-lazaiu-po-inetu-otdykhaiu/</id><summary type="html">&lt;p&gt;Хм… иногда попадаются на &lt;strong&gt;Демотиваторы.ру&lt;/strong&gt; интересные демы :)&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://demotivators.to/posters/360935/lyubov.htm"&gt;&lt;img alt="Демотиватор" src="http://demotivators.to/media/posters/3183/360935_lyubov.jpg" title="Демотиватор"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="демотиватор"></category></entry><entry><title>Если долго мучаться...</title><link href="/posts/2009/12/12/esli-dolgo-muchatsia/" rel="alternate"></link><updated>2009-12-12T21:08:17+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-12:posts/2009/12/12/esli-dolgo-muchatsia/</id><summary type="html">&lt;p&gt;Что-нибудь получится. Так и у меня. Я пытался при помощи native-SQL
запроса извлечь не только простые данные для POJO-объекта, но и
вложенные объекты (проще говоря JOIN для объектов). Я много разной
литературы за сегодня перечитал, всё на английском, т.к. на русском
вообще очень мало освещают тонкости мэппинга Hibernate :( Каким-то
образом я смог соединить таблицу и NamedNativeQuery при помощи аннотаций
(после прочтения информации по ссылке, которую уже выкладывал), но… но у
меня выпала ошибка при преобразовании типов данных:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-n"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;lang&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ClassCastException&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt; &lt;span class="pgcss-o"&gt;[&lt;/span&gt;&lt;span class="pgcss-n"&gt;Ljava&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;lang&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;Object&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt; &lt;span class="pgcss-n"&gt;cannot&lt;/span&gt; &lt;span class="pgcss-n"&gt;be&lt;/span&gt; &lt;span class="pgcss-n"&gt;cast&lt;/span&gt; &lt;span class="pgcss-n"&gt;to&lt;/span&gt; &lt;span class="pgcss-n"&gt;results&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;SubCell&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;results&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;CellDao&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;grouped&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;CellDao&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;68&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;results&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;CellDao&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;getCellsRowForCourse&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;CellDao&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;63&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;results&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;CellService&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;getRowCellsFor&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;CellService&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;30&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;results&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;RowDao&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;getRowsIn&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;RowDao&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;37&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;results&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;RowService&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;courseRows&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;RowService&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;80&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;results&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;RowsTableDao&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;getTableFor&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;RowsTableDao&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;28&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;results&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;RowsTableService&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;getFullResultsFor&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;RowsTableService&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;32&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;results&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;TableController&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;handleRequest&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;TableController&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;46&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;springframework&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;web&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;servlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;mvc&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;SimpleControllerHandlerAdapter&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;handle&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;SimpleControllerHandlerAdapter&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;48&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;springframework&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;web&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;servlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;DispatcherServlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;doDispatch&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;DispatcherServlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;875&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;springframework&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;web&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;servlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;DispatcherServlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;doService&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;DispatcherServlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;807&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;springframework&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;web&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;servlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;FrameworkServlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;processRequest&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;FrameworkServlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;571&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;springframework&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;web&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;servlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;FrameworkServlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;doGet&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;FrameworkServlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;501&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;javax&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;servlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;http&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;HttpServlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;service&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;HttpServlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;617&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;javax&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;servlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;http&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;HttpServlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;service&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;HttpServlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;717&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Этот крестовый поход начался ещё в ~11:00 и закончился ~21:00, а всё
из-за того, что я не заметил &lt;strong&gt;[&lt;/strong&gt;. А оно означало, что Hibernate мне
вернул не один объект а несколько объектов, т.е. Object[]. Я думал, что
он только проставит ссылки в родительский и всё, и вернёт мне
только нужный типа SubCell. Оказалось, что он мне возвращал и &lt;em&gt;SubCell&lt;/em&gt;
объект и &lt;em&gt;User&lt;/em&gt;. К этому моменту я уже успел создать пробный
createSQLQuery с addJoin… (да SQL реально такой страшноватый, но я почти
не виноват… т.к. структура такая, что приходится находить декартово
произведение с результатом процедуры)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-n"&gt;List&lt;/span&gt; &lt;span class="pgcss-n"&gt;result&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-o"&gt;((&lt;/span&gt;&lt;span class="pgcss-n"&gt;SQLQuery&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt; &lt;span class="pgcss-n"&gt;getSession&lt;/span&gt;&lt;span class="pgcss-o"&gt;().&lt;/span&gt;&lt;span class="pgcss-na"&gt;createSQLQuery&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;
    &lt;span class="pgcss-s"&gt;&amp;quot;select itemId as {subCell.contest}, ts as {subCell.version}, typeId as&lt;/span&gt;
&lt;span class="pgcss-s"&gt;     {subCell.type}, deep as {subCell.deep}, [value] as {subCell.value}, &amp;#39;SubCell&amp;#39; as&lt;/span&gt;
&lt;span class="pgcss-s"&gt;     {subCell.dtype}, userId as {subCell.user}, userId as {user.id}, &amp;#39;last&amp;#39; as {user.name},&lt;/span&gt;
&lt;span class="pgcss-s"&gt;     &amp;#39;first&amp;#39; as {user.surname} from dl2ResultsCell, dl2ResultsHeaderItemSubTree&lt;/span&gt;
&lt;span class="pgcss-s"&gt;     (:rootId, :deep, 0, 1, :date) where itemId = headerItemId order by userId,&lt;/span&gt;
&lt;span class="pgcss-s"&gt;     deep,itemIndex&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;setLong&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;rootId&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;contest&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;setParameter&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;date&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;Calendar&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;getInstance&lt;/span&gt;&lt;span class="pgcss-o"&gt;())&lt;/span&gt;
&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;setInteger&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;deep&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;deep&lt;/span&gt;&lt;span class="pgcss-o"&gt;))&lt;/span&gt;

&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;addEntity&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;subCell&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;SubCell&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;class&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;addJoin&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;user&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;quot;subCell.user&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;list&lt;/span&gt;&lt;span class="pgcss-o"&gt;();&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;В классе SubCell есть свойство user (т.е. геттер getUser и сеттер
setUser) для установки владельца яцейки. Объявлены они достаточно
просто:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kd"&gt;private&lt;/span&gt; &lt;span class="pgcss-n"&gt;User&lt;/span&gt; &lt;span class="pgcss-n"&gt;user&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;

&lt;span class="pgcss-nd"&gt;@ManyToOne&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;fetch&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-n"&gt;FetchType&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;LAZY&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
&lt;span class="pgcss-nd"&gt;@Fetch&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;FetchMode&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;JOIN&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
&lt;span class="pgcss-kd"&gt;public&lt;/span&gt; &lt;span class="pgcss-n"&gt;User&lt;/span&gt; &lt;span class="pgcss-nf"&gt;getUser&lt;/span&gt;&lt;span class="pgcss-o"&gt;()&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-n"&gt;user&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
&lt;span class="pgcss-o"&gt;}&lt;/span&gt;

&lt;span class="pgcss-kd"&gt;public&lt;/span&gt; &lt;span class="pgcss-kt"&gt;void&lt;/span&gt; &lt;span class="pgcss-nf"&gt;setUser&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;User&lt;/span&gt; &lt;span class="pgcss-n"&gt;id&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;user&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;id&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
&lt;span class="pgcss-o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;В классе User есть только одно ключевое поле, доступное при помощи getId
и setId. К геттеру применена аннотация &lt;strong&gt;&amp;#64;Id&lt;/strong&gt;.&lt;/p&gt;
</summary><category term="диплом"></category><category term="радость"></category><category term="устал"></category><category term="hibernate"></category><category term="облом"></category></entry><entry><title>Мэппинг</title><link href="/posts/2009/12/12/mepping/" rel="alternate"></link><updated>2009-12-12T09:57:56+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-12:posts/2009/12/12/mepping/</id><summary type="html">&lt;p&gt;Про мэппинг native-запросов, а так же стоит прочитать и ознакомиться с
примерами из главы 16 документации по Hibernate.&lt;/p&gt;
</summary><category term="hibernate"></category></entry><entry><title>Яндекс директ</title><link href="/posts/2009/12/11/iandeks-direkt/" rel="alternate"></link><updated>2009-12-11T20:32:09+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-11:posts/2009/12/11/iandeks-direkt/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Сабж отжигает. Стоило один раз мне поискать про биографию &lt;strong&gt;Кассиуса
Клея&lt;/strong&gt;, чтобы выяснить некоторые интересные моменты его жизни, как мне
уже рекламируют клей.. обычный простой клей… :D повсюду, где есть
Яндекс.Директ.&lt;/p&gt;
</summary><category term="реклама"></category><category term="Яндекс"></category></entry><entry><title>Удачи</title><link href="/posts/2009/12/11/udachi/" rel="alternate"></link><updated>2014-07-14T03:29:00+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-11:posts/2009/12/11/udachi/</id><summary type="html">&lt;p&gt;Удачи мегафизику (знает кто) на зачёте ;) Нарисовал тебе атом,
кривоват…, но я же не физик :P не знаю как они у вас там выглядят…&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/106915/"&gt;&lt;img alt="Мирный атом" src="http://img-fotki.yandex.ru/get/4001/imdagger.4/0_1a1a3_1e264abe_L" title="Мирный атом"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="атом"></category><category term="набросок"></category></entry><entry><title>Clanbomber</title><link href="/posts/2009/12/11/clanbomber/" rel="alternate"></link><updated>2009-12-11T18:04:36+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-11:posts/2009/12/11/clanbomber/</id><summary type="html">&lt;p&gt;Трудно оторваться от этой чудесной игры &lt;strong&gt;Clanbomber&lt;/strong&gt;… Какая
ностальгическая игра :)&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/106790/"&gt;&lt;img alt="Clanbomber" src="http://img-fotki.yandex.ru/get/4001/imdagger.4/0_1a126_2a2ce394_L" title="Clanbomber"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="играл"></category><category term="clanbomber"></category></entry><entry><title></title><link href="/posts/2009/12/11/urn:ya.ru:post/22199227/474/" rel="alternate"></link><updated>2009-12-11T16:24:08+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-11:posts/2009/12/11/urn:ya.ru:post/22199227/474/</id><summary type="html">&lt;p&gt;Устроим тотальный террор для numlock?&lt;/p&gt;
</summary></entry><entry><title>Мэппинг дерева</title><link href="/posts/2009/12/11/mepping-dereva/" rel="alternate"></link><updated>2009-12-11T16:16:51+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-11:posts/2009/12/11/mepping-dereva/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Если мне удастся впихнуть в уже существующую рабочую структуру
таблицы результатов в БД что-нибудь из этих двух алгоритмов:
&lt;a class="reference external" href="http://mikhailstadnik.com/hierarchical-data-structures-and-doctrine"&gt;иерархические
структуры&lt;/a&gt;,
то мне больше не нужно будет мэппится на NativeSQL с вызовом табличной
функции, которая рекурсивно собирает поддерево. Это бы ускорило выборку
и упростило код для получения результатов. Но нужно как-то аккуратно всё
поправить, чтобы не сломать уже рабочую среду. Но если удастся, то я
смогу свободно пересекать таблицы в HQL и производить другие удобные
манипуляции предоставленные Hibernate.&lt;/p&gt;
</summary><category term="hibernate"></category><category term="дерево"></category></entry><entry><title>С первым снегом</title><link href="/posts/2009/12/10/s-pervym-snegom/" rel="alternate"></link><updated>2009-12-10T13:11:07+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-10:posts/2009/12/10/s-pervym-snegom/</id><summary type="html">&lt;p&gt;Ура! Выпал снег, температура около нуля. На улице посветлело!&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/106608/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3905/imdagger.4/0_1a070_6fe0978f_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;А пузатики надулись от того, что холодно:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/106609/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/4105/imdagger.4/0_1a071_b3914b0d_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/106610/"&gt;&lt;img alt="image2" src="http://img-fotki.yandex.ru/get/4102/imdagger.4/0_1a072_6fae5d32_L" title="image2"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="радость"></category><category term="жизнь"></category><category term="снег"></category></entry><entry><title>И снова глаз</title><link href="/posts/2009/12/09/i-snova-glaz/" rel="alternate"></link><updated>2009-12-09T21:46:33+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-09:posts/2009/12/09/i-snova-glaz/</id><summary type="html">&lt;p&gt;После того, как узнал про стандартный скрипт &lt;strong&gt;Solidify Selection&lt;/strong&gt;,
решил переделать немного веки глазу, который я создавал. Этот элемент
будет небольшой частью моей крупномасштабной задумки.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/106580/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4106/imdagger.4/0_1a054_7a1f4b35_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Скрипт по созданию объёмности выбирается в меню во время
редактирования. Я придал толщину объекту равную &lt;strong&gt;-0.2&lt;/strong&gt;, перед этим
смоделировав веки из UV-шара 8 на 8 вершин. Потом выделил края, отметил
при помощи &lt;strong&gt;Make Sharp&lt;/strong&gt; ( &lt;kbd class="kbd"&gt;
Ctrl + E&lt;/kbd&gt;
 ), добавил модификатор &lt;strong&gt;Edge Split&lt;/strong&gt;
с указанием не использовать угол а использовать выделенные края. А вот
после этого уже был добавлен модификатор &lt;strong&gt;Subsurf&lt;/strong&gt;, который сгладил
поверхность. Скрипт до добавке толщины:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/106581/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/4102/imdagger.4/0_1a055_5604d3b7_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Чтобы тень была мягкая я увеличил количество сэмплом для Sun лампы
до 7 и &lt;strong&gt;Soft Size&lt;/strong&gt; на уровень &lt;strong&gt;1.5&lt;/strong&gt;. Кроме этой жёлтой солнечной
лампы на сцене присутствует в противоположной стороне голубая Hemi
лампа, которая не создаёт теней, то окрашивает тёмные участки
голубоватым светом. Мощность я ей выставил в 2 раза ниже «Солнца», т.е.
&lt;strong&gt;0.5&lt;/strong&gt;.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/106582/"&gt;&lt;img alt="image2" src="http://img-fotki.yandex.ru/get/3906/imdagger.4/0_1a056_25d0a380_L" title="image2"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="глаз"></category></entry><entry><title>Blender 2.5</title><link href="/posts/2009/12/08/blender-25/" rel="alternate"></link><updated>2009-12-08T16:33:01+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-08:posts/2009/12/08/blender-25/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Раз уж выпустили Alpha 0 релиз новой версии, то я решил скачать и
посмотреть на что оно похоже в жизни. Благо весит архив мало. При
запуске был приятно удивлён интерфейсом, но не порадовало то, что по
умолчанию панель с кнопками раположена вертикально, а у меня всё таки не
широкоформатник, влазит плохо… Видимо придётся настраивать рсположение
под себя. Часть клавиш куда-то переместилась, но потому отыщу их.&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; Жаль, что работать интерфейс стал медленнее на программном драйвере
графики. На глаз где-то в раз 5 медленнее, чем 2.49. Дома у меня есть
NVidia драйверы и всё будет бегать отлично, а вот на работе у машинки
видеокарта слабая, OpenGL держит плохо.&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; В целом — впечатлён, буду ждать финального релиза и потихонь
привыкать к новой версии.&lt;/p&gt;
</summary><category term="blender"></category></entry><entry><title>Игры</title><link href="/posts/2009/12/07/igry/" rel="alternate"></link><updated>2009-12-07T20:31:38+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-07:posts/2009/12/07/igry/</id><summary type="html">&lt;p&gt;Притащил на работу Circus Linux из дома :) Теперь, когда мне будет
делать нечего, то сыграю в эту чудесную игру про клоунов в цирке и
надувные шарики. Очень весёлая музыка, сразу настраивает на игру. Два
года как в неё не играл, теперь принёс и запустил на работе :).&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/106025/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4005/imdagger.4/0_19e29_68f9a879_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Я уже или забыл, то ли не знал (хотя это врядли), что в игре &lt;kbd class="kbd"&gt;
ЛКМ&lt;/kbd&gt;

меняет клоунов местами. Таким образом можно подставить свободную позицию
на качели для падающего клоуна. Было приятно обнаружить эту «фичу»
снова.&lt;/p&gt;</summary><category term="радость"></category><category term="circuslinux"></category><category term="linux"></category><category term="играл"></category></entry><entry><title></title><link href="/posts/2009/12/06/urn:ya.ru:post/22199227/463/" rel="alternate"></link><updated>2009-12-06T17:32:51+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-06:posts/2009/12/06/urn:ya.ru:post/22199227/463/</id><summary type="html">&lt;p&gt;Экономия наш друг - выключайте numlock!&lt;/p&gt;
</summary></entry><entry><title>Замки</title><link href="/posts/2009/12/05/zamki/" rel="alternate"></link><updated>2009-12-05T14:05:25+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-05:posts/2009/12/05/zamki/</id><summary type="html">&lt;p&gt;Ключей к щитовой не было, а открыть нужно. Там стоят простые замки с
маленькой «собачкой-скобой». Пришлось найти обломаный кусок ножовки
(цилиндрического ничего не нашёл, а отвёртка слишком толстая) и сколом
вскрыть замок :) Ни разу такие не открывал, т.к. над их устройством не
задумывался. Но… открыл оба с первого раза &lt;del class="del"&gt;
ура олололо!&lt;/del&gt;
, :) только тогда
закрывал щиток, то умудрился себе придавить пальцы :S. Открывается замок
просто (это, у которых такой ключик кругленький простой и нажимает на
скобу): вставить что-нибудь прочное цилиндрическое или плоское, но
небольшое в отверстие замка и надавить вправо на край предмета.
Получится рычаг — нижний конец нажмёт влево на скобу и замок откроется.&lt;/p&gt;
</summary><category term="замок"></category><category term="жизнь"></category><category term="открыл"></category></entry><entry><title>Мысль</title><link href="/posts/2009/12/05/mysl/" rel="alternate"></link><updated>2009-12-05T13:02:34+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-05:posts/2009/12/05/mysl/</id><summary type="html">&lt;p&gt;Нужно будет подумать над тем, чтобы создать генератор отчётов на
Python вместе с простыми HTML-сраницами и одним (или несколькими)
PHP-файлом. А то нужно делать одно и тоже и много, оно то не няжело, но
надоедает… Фантазия уже заканчивается на создание криводизайнов, быдло
кода и отчётов по ним.&lt;/p&gt;
</summary><category term="жизнь"></category><category term="генератор"></category><category term="работа"></category></entry><entry><title>Мой кривоэскюэль</title><link href="/posts/2009/12/04/moi-krivoeskiuel/" rel="alternate"></link><updated>2009-12-04T20:41:09+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-04:posts/2009/12/04/moi-krivoeskiuel/</id><summary type="html">&lt;p&gt;Сваял когда-то черновой native-запрос для базы, на который мэппится
класс при помощи Hibernate. Работал запрос медленно, я сразу
почувствовал, т.к. скорость приложения вцелом упала в десятки, а то и
сотни раз. Тогда отлаживать времени не было. И при том упала на запросе
с небольшим объёмом выборки данных. Был запрос с двумя &lt;strong&gt;JOIN&lt;/strong&gt;
(структуру базы я менять не могу и функцию сильно тоже):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-c1"&gt;-- тестовый запрос 1:&lt;/span&gt;
&lt;span class="pgcss-k"&gt;select&lt;/span&gt; &lt;span class="pgcss-n"&gt;tree&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;itemId&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;tree&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;deep&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;b&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;rusTitle&lt;/span&gt; &lt;span class="pgcss-k"&gt;as&lt;/span&gt; &lt;span class="pgcss-n"&gt;title&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
&lt;span class="pgcss-n"&gt;itemIndex&lt;/span&gt; &lt;span class="pgcss-k"&gt;as&lt;/span&gt; &lt;span class="pgcss-n"&gt;childId&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;count&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-o"&gt;*&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;-&lt;/span&gt; &lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-k"&gt;as&lt;/span&gt; &lt;span class="pgcss-n"&gt;childrenCount&lt;/span&gt;
&lt;span class="pgcss-k"&gt;from&lt;/span&gt; &lt;span class="pgcss-n"&gt;dl2ResultsHeaderItemSubTree&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-mi"&gt;11608&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-mi"&gt;5&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-mi"&gt;0&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s1"&gt;&amp;#39;2009-11-21&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-k"&gt;as&lt;/span&gt; &lt;span class="pgcss-n"&gt;tree&lt;/span&gt;
&lt;span class="pgcss-k"&gt;join&lt;/span&gt; &lt;span class="pgcss-n"&gt;dl2ResultsHeaderItem&lt;/span&gt; &lt;span class="pgcss-k"&gt;as&lt;/span&gt; &lt;span class="pgcss-n"&gt;b&lt;/span&gt; &lt;span class="pgcss-k"&gt;on&lt;/span&gt; &lt;span class="pgcss-n"&gt;tree&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;itemId&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;b&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;itemId&lt;/span&gt;
&lt;span class="pgcss-k"&gt;left&lt;/span&gt; &lt;span class="pgcss-k"&gt;join&lt;/span&gt; &lt;span class="pgcss-n"&gt;dl2ResultsHeaderItem&lt;/span&gt; &lt;span class="pgcss-k"&gt;as&lt;/span&gt; &lt;span class="pgcss-k"&gt;c&lt;/span&gt; &lt;span class="pgcss-k"&gt;on&lt;/span&gt; &lt;span class="pgcss-n"&gt;b&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;itemId&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-k"&gt;c&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;parentItemId&lt;/span&gt; &lt;span class="pgcss-k"&gt;or&lt;/span&gt; &lt;span class="pgcss-n"&gt;b&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;itemid&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-k"&gt;c&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;itemid&lt;/span&gt;
&lt;span class="pgcss-k"&gt;group&lt;/span&gt; &lt;span class="pgcss-k"&gt;by&lt;/span&gt; &lt;span class="pgcss-n"&gt;tree&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;itemid&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;tree&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;deep&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;b&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;rusTitle&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;itemIndex&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Пришлось на днях ускорить, а то уже не возможно было нормально
отлаживать. Один тормозной запрос превратился в быстрый кривозапрос с
одним &lt;strong&gt;JOIN&lt;/strong&gt; и одним подзапросом:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-c1"&gt;-- тестовый запрос 2:&lt;/span&gt;
&lt;span class="pgcss-k"&gt;select&lt;/span&gt; &lt;span class="pgcss-n"&gt;tree&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;itemId&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;tree&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;deep&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;b&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;rusTitle&lt;/span&gt; &lt;span class="pgcss-k"&gt;as&lt;/span&gt; &lt;span class="pgcss-n"&gt;title&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
&lt;span class="pgcss-n"&gt;itemIndex&lt;/span&gt; &lt;span class="pgcss-k"&gt;as&lt;/span&gt; &lt;span class="pgcss-n"&gt;childId&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;select&lt;/span&gt; &lt;span class="pgcss-k"&gt;count&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-o"&gt;*&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;-&lt;/span&gt; &lt;span class="pgcss-mi"&gt;1&lt;/span&gt; &lt;span class="pgcss-k"&gt;from&lt;/span&gt; &lt;span class="pgcss-n"&gt;dl2ResultsHeaderItem&lt;/span&gt; &lt;span class="pgcss-k"&gt;as&lt;/span&gt; &lt;span class="pgcss-k"&gt;c&lt;/span&gt;
  &lt;span class="pgcss-k"&gt;where&lt;/span&gt; &lt;span class="pgcss-n"&gt;tree&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;itemId&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-k"&gt;c&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;parentItemId&lt;/span&gt; &lt;span class="pgcss-k"&gt;or&lt;/span&gt; &lt;span class="pgcss-n"&gt;tree&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;itemid&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-k"&gt;c&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;itemid&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-k"&gt;as&lt;/span&gt; &lt;span class="pgcss-n"&gt;childrenCount&lt;/span&gt;
&lt;span class="pgcss-k"&gt;from&lt;/span&gt; &lt;span class="pgcss-n"&gt;dl2ResultsHeaderItemSubTree&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-mi"&gt;11608&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-mi"&gt;5&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-mi"&gt;0&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s1"&gt;&amp;#39;2009-11-21&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-k"&gt;as&lt;/span&gt; &lt;span class="pgcss-n"&gt;tree&lt;/span&gt;
&lt;span class="pgcss-k"&gt;join&lt;/span&gt; &lt;span class="pgcss-n"&gt;dl2ResultsHeaderItem&lt;/span&gt; &lt;span class="pgcss-k"&gt;as&lt;/span&gt; &lt;span class="pgcss-n"&gt;b&lt;/span&gt; &lt;span class="pgcss-k"&gt;on&lt;/span&gt; &lt;span class="pgcss-n"&gt;tree&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;itemId&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;b&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;itemId&lt;/span&gt;
&lt;span class="pgcss-k"&gt;group&lt;/span&gt; &lt;span class="pgcss-k"&gt;by&lt;/span&gt; &lt;span class="pgcss-n"&gt;tree&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;itemid&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;tree&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;deep&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;b&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;rusTitle&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;itemIndex&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;На моих данных стало работать в &lt;u class="underline"&gt;
100 раз&lt;/u&gt;
 быстрее. Думаю от того, что
пересечение было очень большое, а в случае подзапроса — мало вызовов
(такая специфика хранимой информации).&lt;/p&gt;
</summary><category term="диплом"></category><category term="sql"></category></entry><entry><title></title><link href="/posts/2009/12/03/urn:ya.ru:post/22199227/454/" rel="alternate"></link><updated>2009-12-03T17:57:45+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-03:posts/2009/12/03/urn:ya.ru:post/22199227/454/</id><summary type="html">&lt;p&gt;Глаза устали, а кодить хочется, хм.. или посмотреть фильм…&lt;/p&gt;
</summary></entry><entry><title>Недоработки</title><link href="/posts/2009/12/03/nedorabotki/" rel="alternate"></link><updated>2009-12-03T17:56:27+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-03:posts/2009/12/03/nedorabotki/</id><summary type="html">&lt;p&gt;Не силён я в тонкостях HTML, но бывает приходится кое-что поправить
посмотреть, добвить фичу в шаблон. А пару дней назад заметил, что
страничка с таблицей результатов из дипломного проекта перестала
отображаться в IE7 (возможно это даже в IE5.5+). А я всего-то написал:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;…
&lt;span class="pgcss-nt"&gt;&amp;lt;script &lt;/span&gt;&lt;span class="pgcss-na"&gt;type=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;text/javascript&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;src=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;../путь/тут_скрипт.js&amp;quot;&lt;/span&gt; &lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
…
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;После загрузки страницы в ослике ничего не отобразилось. Хотя при
просмотре исходного кода страницы всё показало. Я стал перебирать
варианты и наткнулся на то, что он не посчитал &lt;strong&gt;/&amp;gt;&lt;/strong&gt; закрытием тега.
Opera и Firefox обработали это нормально. Пришлось закрыть тег с
указанием тела:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;…
&lt;span class="pgcss-nt"&gt;&amp;lt;script &lt;/span&gt;&lt;span class="pgcss-na"&gt;type=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;text/javascript&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;src=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;../путь/тут_скрипт.js&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
…
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;А ещё я обнаружил, что моему скрипту по расширению таблиц очень не
нравится, когда в теге для расширения указаны другие аттрибуты, кроме
size. И это проявляется только в IE. Я конечно предполагал такую
проблему, но нужно подумать, как решить её достаточно красиво (сходу не
вышло). Получается, что аттрибут &lt;em&gt;colSpan&lt;/em&gt; ставится раньше, чем size, а
у меня разбиение текста по &lt;code class="code"&gt;
&amp;lt;td size&lt;/code&gt;
 :S. Остальные браузеры ставят
этот аттрибут в конец, поэтому я не замечал проблемы и спокойно добавлял
аттрибуты.&lt;/p&gt;
</summary><category term="диплом"></category><category term="javascript"></category></entry><entry><title>Забавно</title><link href="/posts/2009/12/02/zabavno/" rel="alternate"></link><updated>2009-12-02T19:16:21+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-02:posts/2009/12/02/zabavno/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Забавно, что за 1 день объём сообщений по одному из номерков
составили аж 10% от всех сообщений для этого номерка за 1,5 года. Не зря
я строил графики, считал статистику, искал закономерности и размышлял
:P. Всё таки графики не врут, они сразу показали все синусоиды и провалы
(я подумал «не лады»). Математика даже тут работает :(!&lt;/p&gt;
</summary><category term="жизнь"></category><category term="математика"></category><category term="заметка"></category></entry><entry><title></title><link href="/posts/2009/12/02/urn:ya.ru:post/22199227/451/" rel="alternate"></link><updated>2009-12-02T14:18:35+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-02:posts/2009/12/02/urn:ya.ru:post/22199227/451/</id><summary type="html">&lt;p&gt;Фу! я ужасный циник :) Мне должно быть плохо, а я вот почему-то
использую это для креатива и хоррор мира :P&lt;/p&gt;
</summary></entry><entry><title>Картинки в Scripts Window</title><link href="/posts/2009/12/02/kartinki-v-scripts-window/" rel="alternate"></link><updated>2009-12-02T13:55:03+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-02:posts/2009/12/02/kartinki-v-scripts-window/</id><summary type="html">&lt;p&gt;Сделал вспомогательный класс для возможности показа в редакторе
изображений текстур с объектов. Это нужно для удобства добавки предметов
в рюкзак воинов, т.к. весь Blender нам служит не только просто
графическим редактором, но и игровым редактором. Переодическия дописываю
в наше меню новые возможности, которые должны облегчить жизнь при
создание игрового мира.&lt;/p&gt;
&lt;p class="cut"&gt;&lt;a class="h-link reference internal" href="#cut_46218576"data-toggle="collapse"&gt;посмотреть класс&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_46218576"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-c"&gt;# -*- coding: utf-8 -*-&lt;/span&gt;
&lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;Blender.BGL&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;glEnable&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;glBlendFunc&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;\
    &lt;span class="pgcss-n"&gt;glRasterPos2f&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;glDrawPixels&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;glDisable&lt;/span&gt;
&lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;Blender.BGL&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;GL_BLEND&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;GL_BYTE&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;GL_SRC_ALPHA&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;\
    &lt;span class="pgcss-n"&gt;GL_ONE_MINUS_SRC_ALPHA&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;GL_UNSIGNED_BYTE&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;GL_RGBA&lt;/span&gt;
&lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;Blender.BGL&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;Buffer&lt;/span&gt;
&lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;Blender&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;Draw&lt;/span&gt;

&lt;span class="pgcss-k"&gt;class&lt;/span&gt; &lt;span class="pgcss-nc"&gt;TextureImage&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;object&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
    &lt;span class="pgcss-sd"&gt;&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;    Класс, объекты которого могут отрисовывать изображения&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;    текстур в окне для скриптов, при помощи которых они&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;    инициализировались.&lt;/span&gt;

&lt;span class="pgcss-sd"&gt;    Свойства:&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;    - Ширина&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;    - Высота&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;    Методы:&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;    - Отображение в заданных координатах&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;    &amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;

    &lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;__init__&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;texture&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
        &lt;span class="pgcss-sd"&gt;&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;        Инициализирует объект оболочку для отрисовки&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;        текстуры в окне для скриптов.&lt;/span&gt;

&lt;span class="pgcss-sd"&gt;        :Parameters:&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;        `texture` : Blender.Texture.Texture&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;        &amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;image&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;texture&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;getImage&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
        &lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;width&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;height&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;image&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;size&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;wh_rgba_size&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;image&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;size&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt; &lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-mi"&gt;4&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;
        &lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;_buffer&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;Buffer&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;GL_BYTE&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;wh_rgba_size&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
        &lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;_copy_from&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;image&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

    &lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;_copy_from&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;image&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
        &lt;span class="pgcss-sd"&gt;&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;        Копирует RGBA-данные из исходного изображения&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;        в специальный буффер попиксельно.&lt;/span&gt;

&lt;span class="pgcss-sd"&gt;        :Parameters:&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;        `image` : Blender.Image.Image&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;        Исходное изображение&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;        &amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;w&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;h&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;image&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;size&lt;/span&gt;
        &lt;span class="pgcss-nb"&gt;buffer&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;_buffer&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-n"&gt;y&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-nb"&gt;xrange&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;h&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-n"&gt;x&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-nb"&gt;xrange&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;w&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
                &lt;span class="pgcss-nb"&gt;buffer&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-n"&gt;y&lt;/span&gt;&lt;span class="pgcss-p"&gt;][&lt;/span&gt;&lt;span class="pgcss-n"&gt;x&lt;/span&gt;&lt;span class="pgcss-p"&gt;][:]&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;image&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;getPixelI&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;x&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;y&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

    &lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;draw&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;x&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;y&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
        &lt;span class="pgcss-sd"&gt;&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;        Отображает в окне в заданных координатах&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;        изображение, которым было сконструировано.&lt;/span&gt;

&lt;span class="pgcss-sd"&gt;        :Parameters:&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;        `x` : int&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;        Координата по оси X, задана в пикселях&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;        `y` : int&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;        Координата по оси Y, задана в пикселях&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;        &amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;glEnable&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;GL_BLEND&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;glBlendFunc&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;GL_SRC_ALPHA&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;GL_ONE_MINUS_SRC_ALPHA&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
        &lt;span class="pgcss-c"&gt;# правый нижний угол изобрадения&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;glRasterPos2f&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;x&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;y&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;glDrawPixels&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;width&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;height&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;GL_RGBA&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;\
        &lt;span class="pgcss-n"&gt;GL_UNSIGNED_BYTE&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;_buffer&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;glDisable&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;GL_BLEND&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Теперь можно достаточно просто использовать этот класс.
Инициализируется он объектом класса текстуры, поддерживает функционал
вывода на экран этого изображения. Идея взята из класса luxImage. Можно
сделать, например, так:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-n"&gt;bow1_texture&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;bpy&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;data&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;textures&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;Bow1ItemImage&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;
&lt;span class="pgcss-n"&gt;bow1_image&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;TextureImage&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;bow1_texture&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;gui&lt;/span&gt;&lt;span class="pgcss-p"&gt;():&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;bow1_image&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;draw&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-mi"&gt;510&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-mi"&gt;10&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;bow1_image&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;draw&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-mi"&gt;10&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-mi"&gt;10&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;event&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;evt&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;value&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;evt&lt;/span&gt; &lt;span class="pgcss-o"&gt;==&lt;/span&gt; &lt;span class="pgcss-n"&gt;Draw&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;ESCKEY&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;Draw&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;Exit&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;return&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;span class="pgcss-n"&gt;Draw&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;Register&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;gui&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;event&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-bp"&gt;None&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Залил ревизию &lt;strong&gt;166&lt;/strong&gt; :P, а в глобальном масштабе &lt;strong&gt;265&lt;/strong&gt;.&lt;/p&gt;
</summary><category term="blender"></category><category term="bge"></category><category term="last_gateway_to_hell"></category></entry><entry><title></title><link href="/posts/2009/12/01/urn:ya.ru:post/22199227/449/" rel="alternate"></link><updated>2009-12-01T20:49:32+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-01:posts/2009/12/01/urn:ya.ru:post/22199227/449/</id><summary type="html">&lt;p&gt;Грустно, но легче&lt;/p&gt;
</summary></entry><entry><title></title><link href="/posts/2009/12/01/urn:ya.ru:post/22199227/447/" rel="alternate"></link><updated>2009-12-01T11:17:09+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-01:posts/2009/12/01/urn:ya.ru:post/22199227/447/</id><summary type="html">&lt;p&gt;Так хорошо… я бы полетел :)&lt;/p&gt;
</summary></entry><entry><title>Да....</title><link href="/posts/2009/12/01/da/" rel="alternate"></link><updated>2009-12-01T11:16:01+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-12-01:posts/2009/12/01/da/</id><summary type="html">&lt;p&gt;Вчера так сладенько было… хорошо… Пришёл домой, лёг, закутался в
одеялко и пытался уснуть 5 часов :) Так долго не мог выгрузить мысли из
головы. Но даже не устал от того, что мало поспал, т.к. прекрасное
настроение.&lt;/p&gt;
</summary><category term="радость"></category><category term="жизнь"></category><category term="бредни"></category></entry><entry><title>Еда</title><link href="/posts/2009/11/29/eda/" rel="alternate"></link><updated>2009-11-29T19:13:08+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-29:posts/2009/11/29/eda/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Ура!!! Наконец-то я «позавтракал», спустя 12 часов после того, как
обычно завтракаю. Теперь я спокоен и не раздражён. Осталось только пару
мыслей, которые не покидают голову.&lt;/p&gt;
</summary><category term="радость"></category><category term="жизнь"></category><category term="еда"></category></entry><entry><title>Санки-катанки</title><link href="/posts/2009/11/28/sanki-katanki/" rel="alternate"></link><updated>2009-11-28T21:22:51+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-28:posts/2009/11/28/sanki-katanki/</id><summary type="html">&lt;p&gt;Рендерил рендерил, но до конца не до рендерил :). Остановлюсь скорее
всего пока на таком варианте моих саней. Что полезного узнал во время
создания санок: научился применять функцию &lt;strong&gt;Snap&lt;/strong&gt; (вызывается по &lt;kbd class="kbd"&gt;
Shift
+ Tab&lt;/kbd&gt;
), мне показалась очень полезной вещью. Теперь буду часто эту
возможность использовать. Она позволяет производить операцию (смещение,
вращение, перемещение) не относительно сетки, а относительно точек в
других объектах. Таким образом я смог впервые в жизни составить две
точки без &lt;strong&gt;Remove Doubles&lt;/strong&gt; или объединения объектов с последующим
вызовом &lt;strong&gt;N&lt;/strong&gt; для точек и правкой координат. Правда забыл включить свет
помощнее в LuxRender, всего 100W, но это если уже буду перерендеривать.
Так что пусть уже будет как есть :). Постобработку было лениво делать,
устал от дел за день, поэтому оставил как есть с шумом.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/104544/"&gt;&lt;img alt="Сани" src="http://img-fotki.yandex.ru/get/3900/imdagger.4/0_19860_3b38df65_L" title="Сани"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="luxrender"></category><category term="сани"></category></entry><entry><title>"Поля невидимки"</title><link href="/posts/2009/11/28/polia-nevidimki/" rel="alternate"></link><updated>2009-11-28T15:13:38+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-28:posts/2009/11/28/polia-nevidimki/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Как-то раньше мне уже были нужны свойства в бине, которые доступны
отовсюду (из шаблонов тоже). Я реализовывал стандартный геттер и сеттер,
но при мэппинге &lt;strong&gt;Hibernate&lt;/strong&gt; пытался эти поля тоже задействовать, что
меня напрягало. Тогда мне было некогда приостановиться и посмотреть
почему так случилось, но сейчас я посмотрел спецификацию и нашёл
аннотацию &lt;strong&gt;&amp;#64;Transient&lt;/strong&gt;. Она указывает, что метод не учавствует в
мэппинге, вроде работает :) я заюзал и счастлив.&lt;/p&gt;
</summary><category term="hibernate"></category><category term="аннотации"></category></entry><entry><title>Ширина</title><link href="/posts/2009/11/28/shirina/" rel="alternate"></link><updated>2009-11-28T15:08:21+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-28:posts/2009/11/28/shirina/</id><summary type="html">&lt;p&gt;Забавно я ошибся в метода по установке ширины:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
    &lt;span class="pgcss-kd"&gt;public&lt;/span&gt; &lt;span class="pgcss-kt"&gt;void&lt;/span&gt; &lt;span class="pgcss-nf"&gt;setWidth&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-kt"&gt;int&lt;/span&gt; &lt;span class="pgcss-n"&gt;width&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;this&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;width&lt;/span&gt; &lt;span class="pgcss-o"&gt;+=&lt;/span&gt; &lt;span class="pgcss-n"&gt;width&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;}&lt;/span&gt;
&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Сижу думаю, как получается, что после расчёта всех подузлов и
ширины, у меня выходят цифры в духе 8422134 ячеек ширина. У меня аж
челюсь уапала после этих цифр O_o. Но потом после 5 минут отладки я
увидел &lt;code class="code"&gt;
+=&lt;/code&gt;
 x-D. На такой маленькой загогулинке опечатался и всё.. сам
себя умудрился в шок ввести. Но потом я смеялся с баги, … да, я смеюсь,
когда нахожу в своём коде тупые баги :P.&lt;/p&gt;
</summary><category term="диплом"></category><category term="ошибка"></category></entry><entry><title>Санки-катанки</title><link href="/posts/2009/11/27/sanki/" rel="alternate"></link><updated>2009-11-27T21:50:43+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-27:posts/2009/11/27/sanki/</id><summary type="html">&lt;p&gt;После одного часа рендеринга и небольших поправок с прошлого раза.
Думаю шум ичезнет ещё через пару часов рендеринга.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/104386/"&gt;&lt;img alt="Сани пререндер" src="http://img-fotki.yandex.ru/get/3902/imdagger.4/0_197c2_f2295db8_L" title="Сани пререндер"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="luxrender"></category><category term="набросок"></category></entry><entry><title>Сани-сусани II</title><link href="/posts/2009/11/27/sani-susani-ii/" rel="alternate"></link><updated>2009-11-27T14:21:31+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-27:posts/2009/11/27/sani-susani-ii/</id><summary type="html">&lt;p&gt;Ужас! Где-то в 3 ночи отключили электричество и источник
песперебойного питания не выдержал так долго. Мой рендер прервался, ну
что ж… не буду горевать всё равно уже вижу на нём ошибки: низкая
контрастность (нужно почитать, что я делал не правильно, что такая
контрастность слабая), странные положения нормалей в некоторых местах и
пропало несколько элементов куда-то.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/104216/"&gt;&lt;img alt="Санки" src="http://img-fotki.yandex.ru/get/4101/imdagger.4/0_19718_b6d7091c_L" title="Санки"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="luxrender"></category><category term="набросок"></category></entry><entry><title>Сани-сусани: сетка</title><link href="/posts/2009/11/26/sani-susani-setka/" rel="alternate"></link><updated>2009-11-26T21:12:04+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-26:posts/2009/11/26/sani-susani-setka/</id><summary type="html">&lt;p&gt;Странно, что если я включаю &lt;strong&gt;Subdivision&lt;/strong&gt; в LuxBlend’е для
деревяшек, то зелёные (2 и 4-я планки) съезжают в центр. Хотя я для них
применял &lt;kbd class="kbd"&gt;
Ctrl+A&lt;/kbd&gt;
. Нужно будет подумать, где я просчитался. Вот так
выглядит сетка саней (выложу и поставлю рендериться в LuxRender, т.к.
лениво в Blender Internal настраивать метал):&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/104036/"&gt;&lt;img alt="Санки" src="http://img-fotki.yandex.ru/get/3900/imdagger.4/0_19664_997cb7f3_L" title="Санки"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Потихоньку стал разбираться в LuxRender и осознавать, как его
ускорить. Раньше мне казалось, что он работает медленно, но я понял:
просто не умею его варить.&lt;/p&gt;</summary><category term="blender"></category><category term="сани"></category></entry><entry><title></title><link href="/posts/2009/11/26/urn:ya.ru:post/22199227/432/" rel="alternate"></link><updated>2009-11-26T20:28:55+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-26:posts/2009/11/26/urn:ya.ru:post/22199227/432/</id><summary type="html">&lt;p&gt;Чувствую себя переутомлённым, непонятым и не выговорившимся.&lt;/p&gt;
</summary></entry><entry><title>Бага с 2.42 по 2.5</title><link href="/posts/2009/11/26/baga-s-242-po-25/" rel="alternate"></link><updated>2009-11-26T20:20:08+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-26:posts/2009/11/26/baga-s-242-po-25/</id><summary type="html">&lt;p&gt;При поиске ошибки перерыл исходники в svn за различные года (да… в
те года я уже использовал Blender, но даже не знал зачем этот
«фиолетовый человечек из пакмана» по F4). Выяснил, что в 2.40 пришёл на
смену Sumo движок Bullet, до версии 2.42 в Blender не было у Bulltet
Rigid Body, только в Sumo. Потом появился Rigid Body, но метод
переключения setRigidBody забыли поправить. В версии 2.5 таже проблема
(это я изучал исходники trunk из svn). Вот как выглядит сейчас trunk:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kt"&gt;void&lt;/span&gt; &lt;span class="pgcss-n"&gt;KX_BulletPhysicsController&lt;/span&gt;&lt;span class="pgcss-o"&gt;::&lt;/span&gt;&lt;span class="pgcss-n"&gt;setRigidBody&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-kt"&gt;bool&lt;/span&gt; &lt;span class="pgcss-n"&gt;rigid&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-p"&gt;{&lt;/span&gt;
 &lt;span class="pgcss-p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;А мне кажется, что должно быть:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kt"&gt;void&lt;/span&gt; &lt;span class="pgcss-n"&gt;KX_BulletPhysicsController&lt;/span&gt;&lt;span class="pgcss-o"&gt;::&lt;/span&gt;&lt;span class="pgcss-n"&gt;setRigidBody&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-kt"&gt;bool&lt;/span&gt; &lt;span class="pgcss-n"&gt;rigid&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-p"&gt;{&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;BulletPhysicsController&lt;/span&gt;&lt;span class="pgcss-o"&gt;::&lt;/span&gt;&lt;span class="pgcss-n"&gt;setRigidBody&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;rigid&lt;/span&gt;&lt;span class="pgcss-p"&gt;);&lt;/span&gt;
 &lt;span class="pgcss-p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Чёрт! Знаю, где ошибка, знаю как исправить ошибку, но не хочу
регистрироваться в трекере на blender.org, не хочу качать тонну
исходников из svn и компилировать :(. Надеюсь мне помогут и кто-нибудь,
уже зарегистрированный там и выкачавший svn, поможет отпостить патч.&lt;/p&gt;
</summary><category term="blender"></category><category term="ошибка"></category><category term="bge"></category></entry><entry><title>UBlenderJS</title><link href="/posts/2009/11/25/ublenderjs/" rel="alternate"></link><updated>2009-11-25T18:32:39+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-25:posts/2009/11/25/ublenderjs/</id><summary type="html">&lt;p&gt;Так я назвал свой UserJS для форума
&lt;a class="reference external" href="http://blender3d.org.ua"&gt;blender3d.org.ua&lt;/a&gt;. Теперь у меня появится
возможность обращаться и цитировать пользователей в один клик :). Скажем
нет лишним телодвижениям! Раз администратору некогда добавить такие
фишки в форум, то я сам постараюсь, которые можно создать на стороне
UserJS, добавить в свой UBlenderJS. Надеюсь через какое-то время такие
возможности всё-таки появятся на форуме, а пока буду довольствоваться
своим &lt;strong&gt;UBlenderJS&lt;/strong&gt;. Мой скрипт добавил &lt;em&gt;[Обратиться]&lt;/em&gt; и
&lt;em&gt;[Цитировать]&lt;/em&gt;, над ссылкой обращения находится курсор, поэтому она
выделена.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/103781/"&gt;&lt;img alt="Скриншот" src="http://img-fotki.yandex.ru/get/4001/imdagger.4/0_19565_dcf0f235_L" title="Скриншот"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="userjs"></category><category term="форум"></category></entry><entry><title>Моя дурная голова</title><link href="/posts/2009/11/24/moia-durnaia-golova/" rel="alternate"></link><updated>2009-11-24T20:40:32+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-24:posts/2009/11/24/moia-durnaia-golova/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Дурья моя башка! Сижу мучаю самодельный UserJS, не получается взять
элемент из страницы при помощи getElementById, складывается впечатление,
что скрипт вызывается до полной загрузки самой страницы. Решил поискать
информацию по этому поводу и нашёл! &lt;a class="reference external" href="http://habrahabr.ru/blogs/opera/61835/"&gt;Статья на
Хабре&lt;/a&gt;, которую я читал
(видимо невнимательно), выдержка из неё:&lt;/p&gt;
&lt;blockquote&gt;
Все userjs &lt;strong&gt;выполняются до загрузки страницы&lt;/strong&gt;, за исключением
скриптов, имя которых оканчивается на «.user.js» — &lt;strong&gt;они выполняются
после загрузки&lt;/strong&gt; страницы для совместимости с GreaseMonkey.&lt;/blockquote&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; P.S. Прежде, чем делать свой UserJS нужно было мне пойти и поискать
материал на Хабре для начинающих в этом деле.&lt;/p&gt;
</summary><category term="загрузка"></category><category term="userjs"></category><category term="opera"></category></entry><entry><title>Track to</title><link href="/posts/2009/11/24/track-to/" rel="alternate"></link><updated>2009-11-24T18:01:15+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-24:posts/2009/11/24/track-to/</id><summary type="html">&lt;p&gt;Сегодня смастерил маленький пример, как в BGE сделать, чтобы один
объект «следил» за другими. При этом поворачивался в сторону ближайшего.
Все объекты, за которыми нужно наблюдение являются динамическими с
физикой. Сначала я добавил в сцену три кубика, для которых включил
физику, из-за неё они стали падать вниз. Затем конус следящий за
кубиками:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/103542/"&gt;&lt;img alt="Конус" src="http://img-fotki.yandex.ru/get/3904/imdagger.4/0_19476_6e5def42_XL" title="Конус"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Кубики в логике не нуждаются, а вот для конуса добавил логические
кирпичики. Сенсор &lt;code class="code"&gt;
object detect&lt;/code&gt;
 определяет, что объекты попали в зону
видимости в 30.0 единиц. Python-скрипт &lt;code class="code"&gt;
orient&lt;/code&gt;
 выбирает объект, на
который нужно ориентироваться и присваивает его в свойство &lt;code class="code"&gt;
object&lt;/code&gt;

актуатора &lt;code class="code"&gt;
track to&lt;/code&gt;
. Нужно только учитывать, что у актуатора вида &lt;code class="code"&gt;
Edit
Object&lt;/code&gt;
 с &lt;code class="code"&gt;
Track to&lt;/code&gt;
 свойство object принимает именно объекты, а не
строковые имена. Хотя в логических блоках &lt;code class="code"&gt;
OB&lt;/code&gt;
 принимает названия
объектов.&lt;/p&gt;
&lt;p class="cut"&gt;&lt;a class="h-link reference internal" data-toggle="collapse" href="#cut_38840272"&gt;ещё блоки и управляющий скрипт&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_38840272"&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/103545/"&gt;&lt;img alt="Брики" src="http://img-fotki.yandex.ru/get/4101/imdagger.4/0_19479_da052e6a_L" title="Брики"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Важно не забыть включить свойство &lt;strong&gt;3D&lt;/strong&gt;, чтобы объект следил в
пространстве, а не по одной оси. Название объекта вписывать не
обязательно, т.к. сценарий его сам выбирает. Код скрипта &lt;em&gt;orient&lt;/em&gt;
представлен ниже:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-n"&gt;cc&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;GameLogic&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;getCurrentController&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
&lt;span class="pgcss-n"&gt;objects_detected&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;cc&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;sensors&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;'object detect'&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;
&lt;span class="pgcss-n"&gt;x&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;y&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;z&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;cc&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;owner&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;position&lt;/span&gt;

&lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;objects_detected&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;positive&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;min_dist&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-bp"&gt;None&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;closest&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-bp"&gt;None&lt;/span&gt;

    &lt;span class="pgcss-n"&gt;around&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;objects_detected&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;hitObjectList&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-n"&gt;obj&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-n"&gt;around&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;ox&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;oy&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;oz&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;obj&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;position&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;dist&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-p"&gt;((&lt;/span&gt;&lt;span class="pgcss-n"&gt;x&lt;/span&gt; &lt;span class="pgcss-o"&gt;-&lt;/span&gt; &lt;span class="pgcss-n"&gt;ox&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;**&lt;/span&gt; &lt;span class="pgcss-mi"&gt;2&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;y&lt;/span&gt; &lt;span class="pgcss-o"&gt;-&lt;/span&gt; &lt;span class="pgcss-n"&gt;oy&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;**&lt;/span&gt; &lt;span class="pgcss-mi"&gt;2&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;z&lt;/span&gt; &lt;span class="pgcss-o"&gt;-&lt;/span&gt; &lt;span class="pgcss-n"&gt;oz&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;**&lt;/span&gt; &lt;span class="pgcss-mi"&gt;2&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;**&lt;/span&gt; &lt;span class="pgcss-mf"&gt;0.5&lt;/span&gt;

        &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;min_dist&lt;/span&gt; &lt;span class="pgcss-ow"&gt;is&lt;/span&gt; &lt;span class="pgcss-ow"&gt;not&lt;/span&gt; &lt;span class="pgcss-bp"&gt;None&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;min_dist&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pgcss-n"&gt;dist&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;min_dist&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;dist&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;closest&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;obj&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;else&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;min_dist&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;dist&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;closest&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;obj&lt;/span&gt;

        &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;closest&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
            &lt;span class="pgcss-n"&gt;lookat&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;cc&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;actuators&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;'track to'&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;
            &lt;span class="pgcss-n"&gt;lookat&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;object&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;closest&lt;/span&gt;
            &lt;span class="pgcss-n"&gt;cc&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;activate&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;lookat&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;</summary><category term="blender"></category><category term="python"></category><category term="bge"></category><category term="track to"></category></entry><entry><title>Полочка</title><link href="/posts/2009/11/23/polochka/" rel="alternate"></link><updated>2009-11-23T18:36:37+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-23:posts/2009/11/23/polochka/</id><summary type="html">&lt;p&gt;Чем больше использую bzr, тем больше начинаю употреблять его
функционала. Потихоньку растёт список активно используемыемых мной
команд. В этот раз я модифицировал в проекте много файлов, но все
модификации были связаны с началом работы в
&lt;em&gt;concretic.items.__init__&lt;/em&gt;. Вышло, что я написал скрипт, который
загрузит эти файлы, которые правил для рекурсивного импорта. Но эти две
модификации несут разный смысл и мне нужно было сделать два коммита, а
откат при помощи &lt;strong&gt;bzr revert&lt;/strong&gt; делать не хотел (чтобы закоммитить по
отдельности). Тогда я вспомнил про &lt;strong&gt;bzr shelve&lt;/strong&gt;, что можно часть
файлов «отложить в долгий ящик». Схема коммитов:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-gp"&gt;$&lt;/span&gt; bzr shelve __init__.py
&lt;span class="pgcss-go"&gt;говорит, что запомнило модификацию под именем 1&lt;/span&gt;
&lt;span class="pgcss-go"&gt;описание можно задать при помощи опции -m&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;$&lt;/span&gt; bzr commit
&lt;span class="pgcss-go"&gt;описываю суть модификации множества файлов (всех, кроме&lt;/span&gt;
&lt;span class="pgcss-go"&gt;__init__.py)&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;$&lt;/span&gt; bzr unshelve
&lt;span class="pgcss-go"&gt;применяется сохранённая модификации на последнюю ревизию&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;$&lt;/span&gt; bzr commit
&lt;span class="pgcss-go"&gt;на этот раз описываю суть созданного скрипта&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Приятно находить что-то новое в достаточно долго используемом
инструменте. От этого любви к нему только прибавляется.&lt;/p&gt;
</summary><category term="проект"></category><category term="bazaar"></category><category term="shelve"></category></entry><entry><title></title><link href="/posts/2009/11/22/urn:ya.ru:post/22199227/421/" rel="alternate"></link><updated>2009-11-22T19:53:19+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-22:posts/2009/11/22/urn:ya.ru:post/22199227/421/</id><summary type="html">&lt;p&gt;Я социально неадаптированный индивидум :S&lt;/p&gt;
</summary></entry><entry><title>Мэппинг</title><link href="/posts/2009/11/22/mapping-static/" rel="alternate"></link><updated>2009-11-22T19:46:57+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-22:posts/2009/11/22/mapping-static/</id><summary type="html">&lt;p&gt;Стал добавлять ссылки на картинки и CSS в HTML, т.е. различные
статические данные в отличие от JSP. И вдруг обнаружил, что они не хотят
отображаться. Почесав затылок вспомнил, что в web.xml прописан мэппинг
на сервлет от Spring.&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&amp;lt;servlet-mapping&amp;gt;&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; &amp;lt;servlet-name&amp;gt;dl&amp;lt;/servlet-name&amp;gt;&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; &lt;strong&gt;&amp;lt;url-pattern&amp;gt;/&amp;lt;url-pattern&amp;gt;&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;&amp;lt;/servlet-mapping&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Получалось, что запрос &lt;a class="reference external" href="http://localhost:8080/dl/results?obid=11038"&gt;http://localhost:8080/dl/results?obid=11038&lt;/a&gt;,
обрабатывался сервлетом и передавался контроллеру, который
зарегистрирован как results. Изображения я положил в каталог images
внутри dl — директории приложения, но запрос
&lt;a class="reference external" href="http://localhost:8080/dl/images/dlb.gif"&gt;http://localhost:8080/dl/images/dlb.gif&lt;/a&gt; ругался 404. Тогда меня
посетила идея вынести скрипты в отдельный «виртуальный каталог» scripts:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&amp;lt;servlet-mapping&amp;gt;&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; &amp;lt;servlet-name&amp;gt;dl&amp;lt;/servlet-name&amp;gt;&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; &lt;strong&gt;&amp;lt;url-pattern&amp;gt;/scripts/*&amp;lt;url-pattern&amp;gt;&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;&amp;lt;/servlet-mapping&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Затем поправил в описании бина SimpleUrlHandlerMapping свойство
mappings, изменил &lt;strong&gt;results&lt;/strong&gt; на &lt;strong&gt;/results&lt;/strong&gt;. После этого все каталоги
в директории проекта (dl) стали «видны». Заодно сегодня успел пересадить
стили, вынести в отдельный файл и использовать в шаблоне, таблица
результатов стала человечнее.&lt;/p&gt;
</summary><category term="диплом"></category><category term="java"></category><category term="spring"></category><category term="web"></category></entry><entry><title>Детский телефон: возвращение</title><link href="/posts/2009/11/22/detskii-telefon-vozvrashchenie/" rel="alternate"></link><updated>2009-11-22T11:18:44+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-22:posts/2009/11/22/detskii-telefon-vozvrashchenie/</id><summary type="html">&lt;p&gt;За ночь рендеринга шум потихонечку стал исчезать. Заметил странное
поведение экспортёра в Luxrender. Если я включаю subdivide для объекта,
то он сбрасывается в начальное положение, даже если я применял &lt;kbd class="kbd"&gt;
Ctrl+A&lt;/kbd&gt;
 …
хотя … видимо нужно было применить &lt;strong&gt;Visual Transform to Objects
Loc/Scale/Rot&lt;/strong&gt;, а я только Scale и Rotation применил. Когда буду
добавлять текстуры кнопок и небольшую картинку на панель, то испытаю
этот вариант. Добавил выступ под трубкой телефона, поправил «промахи»:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/102958/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3903/imdagger.4/0_1922e_5142afd8_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;«Телефон с апгрейдом :)»&lt;/p&gt;</summary><category term="blender"></category><category term="luxrender"></category><category term="телефончик"></category></entry><entry><title>Детский телефон</title><link href="/posts/2009/11/21/detskii-telefon/" rel="alternate"></link><updated>2009-11-21T20:47:01+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-21:posts/2009/11/21/detskii-telefon/</id><summary type="html">&lt;p&gt;Поставил рендерить телефончик на более быстрой машине, чем моя
«терминалка». Немного поработав, я заметил артефакты на изображении.
Оказалось, что это мои ошибки. Рендер длился не достаточно долго,
картинка ещё сырая и зашумлённая. Проблемные места отмечены: дырочка в
поверхности телефона — случайно вырезал треугольник :), странное
затемнение провода — повёрнут на малом участке на значительный угол
вокруг своей оси. А также подумаваю затемнить отверстие под клавишу.
Потом сделаю «детские» текстуры для кнопок.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/102743/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3902/imdagger.4/0_19157_9dd688b4_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="набросок"></category></entry><entry><title>Отображение ячеек</title><link href="/posts/2009/11/20/otobrazhenie-iacheek/" rel="alternate"></link><updated>2009-11-20T21:52:58+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-20:posts/2009/11/20/otobrazhenie-iacheek/</id><summary type="html">&lt;p&gt;Сделал небольшой JSP-тег, чтобы отображать значения ячеек таблицы.
Они у меня бывают нескольких типов и отображать их нужно по разному.&lt;/p&gt;
&lt;p&gt;Почитал
&lt;a class="reference external" href="http://java.sun.com/j2ee/tutorial/1_3-fcs/doc/JSPTags5.html"&gt;руководство&lt;/a&gt;
(оно устарешнее, но мне хватило) по созданию своих JSP-тегов, написанию
классов для этих целей. Сначала мне показалось, что в руководстве есть
ошибка: в примере про простой тег вместо &lt;code class="code"&gt;
throws JspTagException&lt;/code&gt;
 должно
быть &lt;code class="code"&gt;
throws JspException&lt;/code&gt;
, но потом я нашёл, что JspTagException —
класс наследник. Оно у меня не компилировалось, … я забыл импортировать
этот класс x-D.&lt;/p&gt;
</summary><category term="диплом"></category><category term="тег"></category><category term="jsp"></category></entry><entry><title></title><link href="/posts/2009/11/20/urn:ya.ru:post/22199227/416/" rel="alternate"></link><updated>2009-11-20T16:45:28+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-20:posts/2009/11/20/urn:ya.ru:post/22199227/416/</id><summary type="html">&lt;p&gt;Деньги-деньги, дребеденьги, Позабыв покой и лень. Делай деньги, делай
деньги, А остальное всё дребедень, А остальное всё дребедебень.&lt;/p&gt;
</summary></entry><entry><title></title><link href="/posts/2009/11/19/urn:ya.ru:post/22199227/407/" rel="alternate"></link><updated>2009-11-19T19:43:14+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-19:posts/2009/11/19/urn:ya.ru:post/22199227/407/</id><summary type="html">&lt;p&gt;Хочу много знать и много уметь…&lt;/p&gt;
</summary></entry><entry><title>Кнопки 2</title><link href="/posts/2009/11/19/knopki-2/" rel="alternate"></link><updated>2009-11-19T18:50:43+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-19:posts/2009/11/19/knopki-2/</id><summary type="html">&lt;p&gt;Отрендерил за пару часов небольшой набросок тех кнопочек, что
рендерил всю ночь. Оказалось зря рендерил, я там случайно влючил
какой-то материал для проводка «аля неонки». И обнаружил странное
поведение, что если я запускаю рендер по сети, то изображение со второго
компьютера приходит темнее и обесцвеченнее :S. Придётся пока рендерить
на моём слабеньком рабочем процессоре (я вообще его только в качестве
терминалки обычно использую).&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/101706/"&gt;&lt;img alt="Детский телефон" src="http://img-fotki.yandex.ru/get/11/imdagger.4/0_18d4a_b0f54328_L" title="Детский телефон"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;«Телефончик»&lt;/p&gt;</summary><category term="blender"></category><category term="luxrender"></category><category term="кнопочки"></category><category term="набросок"></category></entry><entry><title>Кнопочки</title><link href="/posts/2009/11/18/babyphone-early-render/" rel="alternate"></link><updated>2009-11-18T20:37:38+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-18:posts/2009/11/18/babyphone-early-render/</id><summary type="html">&lt;p&gt;Поставил рендериться при помощи LuxRender небольшой игрушечный
телефончик. Посмотрю утром уже, как он выглядит. Рендеринг запустил на
двух компьютерах (на одном &lt;code class="code"&gt;
luxconsole --server&lt;/code&gt;
). Сейчас прошло только
всего минут 5, вот что успело сделать за это время на максимальных
настройках, но я забыл включить источник освещения x-D, ыы :&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/101575/"&gt;&lt;img alt="Детский телефон" src="http://img-fotki.yandex.ru/get/4004/imdagger.4/0_18cc7_6c2857e0_L" title="Детский телефон"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="luxrender"></category><category term="кнопочки"></category><category term="набросок"></category></entry><entry><title>Двойное высвобождение памяти</title><link href="/posts/2009/11/16/dvoinoe-vysvobozhdenie-pamiati/" rel="alternate"></link><updated>2009-11-16T18:21:51+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-16:posts/2009/11/16/dvoinoe-vysvobozhdenie-pamiati/</id><summary type="html">&lt;p&gt;Эта небольшая проблема началась дома где-то 1-1,5 года назад. Т.к.
это не единственная рабочая лошадка, то бага не тревожила. Ещё тогда
после какого-то обновления часть программ стала выпадать с ошибкой (это
были в основном игры), но меня это не огорчило. Потом обнаружил, что
если собрать BGE-игру в отдельный файл и запустить, то выпадает ошибка:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;*** glibc detected *** double free or corruption (out):
0xbf9819c0 ***&lt;/div&gt;
&lt;div class="line"&gt;Аварийный останов&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;И вот вчера почему-то уже и в самом Blender перестал работать
нормально запуск по &lt;strong&gt;P&lt;/strong&gt;. Я решил разобраться с проблемой. Раньше я уже
как-то смотрел и выдвинул длся себя предположение об ошибке в SDL, я
обновлял его до версии 1.2.11. Только я думал, что это связано со
звуком.&lt;/p&gt;
&lt;p&gt;Но вчера я пошёл путём методичного поиска точки с ошибкой и
бэктрэйсом стека:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-gp"&gt;#&lt;/span&gt; в одной консоли:
&lt;span class="pgcss-gp"&gt;$&lt;/span&gt; ./blender

&lt;span class="pgcss-gp"&gt;#&lt;/span&gt; в другой:
&lt;span class="pgcss-gp"&gt;$&lt;/span&gt; gdb -pid &lt;span class="pgcss-sb"&gt;`&lt;/span&gt;ps -e | grep blender | awk &lt;span class="pgcss-s1"&gt;&amp;#39; print {$1} &amp;#39;&lt;/span&gt;&lt;span class="pgcss-sb"&gt;`&lt;/span&gt;
&lt;span class="pgcss-go"&gt;(gdb) bt&lt;/span&gt;

&lt;span class="pgcss-gp"&gt;#&lt;/span&gt; … тут было про стек, free и… SDL_syscdrom.c …
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;“Странно, отладчик показывает не в SDL_mixer, значит это не звук”,
- подумал я. Стал смотреть код и отлаживать (перед этим собраз SDL с
&lt;strong&gt;-g3&lt;/strong&gt;), нашёл неправильное высвобождение памяти в &lt;strong&gt;CheckMounts&lt;/strong&gt;.
Память под mnt_dev и mnt_type выделяла SDL_stack_alloc, а
высвободить пытались при помощи SDL_free. И это ж надо!.. у меня как
раз supermount для cdrom и в этом коде ошибка. Я исправил исходник:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-gh"&gt;diff -rupN SDL-1.2.11-orig/src/cdrom/linux/SDL_syscdrom.c&lt;/span&gt;
SDL-1.2.11/src/cdrom/linux/SDL_syscdrom.c
— SDL-1.2.11-orig/src/cdrom/linux/SDL_syscdrom.c 2009-11-16
01:13:05.000000000 +0200
&lt;span class="pgcss-gi"&gt;+++ SDL-1.2.11/src/cdrom/linux/SDL_syscdrom.c 2009-11-16&lt;/span&gt;
01:04:07.000000000 +0200
&lt;span class="pgcss-gu"&gt;@@ -218,7 +218,7 @@ static void CheckMounts(const char *mtab&lt;/span&gt;
           if ( SDL_strcmp(mnt_type, MNTTYPE_SUPER) == 0 ) {
              tmp = SDL_strstr(mntent-&amp;gt;mnt_opts, &amp;quot;fs=&amp;quot;);
              if ( tmp ) {
&lt;span class="pgcss-gd"&gt;-                SDL_free(mnt_type);&lt;/span&gt;
&lt;span class="pgcss-gi"&gt;+                SDL_stack_free(mnt_type);&lt;/span&gt;
                 mnt_type = SDL_strdup(tmp + SDL_strlen(&amp;quot;fs=&amp;quot;));
                 if ( mnt_type ) {
                     tmp = SDL_strchr(mnt_type, &amp;#39;,&amp;#39;);
&lt;span class="pgcss-gu"&gt;@@ -229,7 +229,7 @@ static void CheckMounts(const char *mtab&lt;/span&gt;
              }
              tmp = SDL_strstr(mntent-&amp;gt;mnt_opts, &amp;quot;dev=&amp;quot;);
              if ( tmp ) {
&lt;span class="pgcss-gd"&gt;-                SDL_free(mnt_dev);&lt;/span&gt;
&lt;span class="pgcss-gi"&gt;+                SDL_stack_free(mnt_dev);&lt;/span&gt;
                 mnt_dev = SDL_strdup(tmp + SDL_strlen(&amp;quot;dev=&amp;quot;));
                 if ( mnt_dev ) {
                     tmp = SDL_strchr(mnt_dev, &amp;#39;,&amp;#39;);
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;А так, проблема эта уже давно решена в SDL версии выше 1.2.11.
Просто у меня не было возможности обновится в прошлую ночь, да и
прикольно решить несложную задачку по отлову баги за минут 20-30. После
правки и пересборки BGE заработал, а в довесок и набор игр :).&lt;/p&gt;
</summary><category term="blender"></category><category term="ошибка"></category><category term="bge"></category><category term="SDL"></category><category term="радость"></category></entry><entry><title>Рендеринг старой работы</title><link href="/posts/2009/11/16/rendering-staroi-raboty/" rel="alternate"></link><updated>2009-11-16T15:23:43+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-16:posts/2009/11/16/rendering-staroi-raboty/</id><summary type="html">&lt;p&gt;    Решил посмотреть, как будет выглядеть старая моя blend-модель, если
ничего не модифицировать, но включить рендеринг при помощи LuxRender.
Рендерил &lt;strong&gt;20 часов&lt;/strong&gt; на Celeron 2Ghz. Вышло довольно забавно, правда
пропали некоторые текстуры и объекты, но это из-за того, что они были
разбросаны по сценам и слоям, а я ничего не настраивал для LuxRender.
Теперь сложилось такое впечатление, что это пластиковая игрушка.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/101095/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4100/imdagger.4/0_18ae7_6f4e51f5_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;strong&gt;Стало&lt;/strong&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/101095/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/3700/imdagger.3/0_11b2e_cbcada7b_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;Было&lt;/p&gt;</summary><category term="blender"></category><category term="luxrender"></category></entry><entry><title>ШурупЪ</title><link href="/posts/2009/11/15/shurup/" rel="alternate"></link><updated>2009-11-15T15:33:34+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-15:posts/2009/11/15/shurup/</id><summary type="html">&lt;p&gt;Делал ночью. Страшно хотелось спать, материалы уже не было сил
расставить, да и не умею я их хорошо и правильно создавать. Освещение
сделано при помощи трёх источников света без отбрасывания тени и
отдельный источник только для тени.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/100864/"&gt;&lt;img alt="Мистер ШюрупЪ в опасности" src="http://img-fotki.yandex.ru/get/4002/imdagger.4/0_18a00_9bdaf896_L" title="Мистер ШюрупЪ в опасности"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="cut text-center"&gt;&lt;a class="h-link reference internal" data-toggle="collapse" href="#cut_45004048"&gt;немножко текста и картинок о процессе создания&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_45004048"&gt;
&lt;p&gt;Нарезка создавалась с использованием кривой, у которой было задано
сечение созданное в виде полукруга. Кривая была Curve Circle, которую
конвертировал в Path и разъединил концы.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/100872/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/4002/imdagger.4/0_18a08_ecb399b_L" title="image1"/&gt;&lt;/a&gt; &lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/100873/"&gt;&lt;img alt="image2" src="http://img-fotki.yandex.ru/get/3900/imdagger.4/0_18a09_a457f3a6_L" title="image2"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Cопоставил концы получившегося объекта так, чтобы после применения
модификатора Array петли образовали насечку. Главное не забыть включить
в модификаторе Merge.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/100874/"&gt;&lt;img alt="image3" src="http://img-fotki.yandex.ru/get/4100/imdagger.4/0_18a0a_613f45e2_L" title="image3"/&gt;&lt;/a&gt; &lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/100875/"&gt;&lt;img alt="image4" src="http://img-fotki.yandex.ru/get/3905/imdagger.4/0_18a0b_76cefa0c_L" title="image4"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Кольцо было преобразовано в меш ( &lt;kbd class="kbd"&gt;
Alt+C&lt;/kbd&gt;
 ), на который действовал
модификатор Array, пространтсов между кольцами было заполнено.&lt;/p&gt;
&lt;p&gt;После создания шурупа, была сделана решётка Lattice, которая стала
родительской для объекта. С её помощью шуруп был деформирован.&lt;/p&gt;
&lt;p&gt;Руки и ноги созданы двольно просто, но я наконец-то начал применять
кости для формирования поз. Отныне я рисую кисть в нормальном состоянии,
а затем провожу риггинг. А раньше я пытался сразу поделировать часть
тела в такой позции. Прогресс :)…&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/100876/"&gt;&lt;img alt="Нога" src="http://img-fotki.yandex.ru/get/4004/imdagger.4/0_18a0c_b0559a99_L" title="Нога"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/100877/"&gt;&lt;img alt="Рука" src="http://img-fotki.yandex.ru/get/4003/imdagger.4/0_18a0d_ccac473a_L" title="Рука"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Рельеф гайки образовался таким же образом, как и нарезка шурупа:
рендеринг обратной стороны курочка  нарезки.&lt;/p&gt;
&lt;/div&gt;</summary><category term="blender"></category><category term="набросок"></category></entry><entry><title>Вопросики</title><link href="/posts/2009/11/15/voprosiki/" rel="alternate"></link><updated>2014-07-14T04:24:00+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-15:posts/2009/11/15/voprosiki/</id><summary type="html">&lt;p&gt;Вместо букв при выводе информации из базы данных отображались
вопросики. Приложение у меня на Java, работает с базой данных через
Hibernate, сама база крутится на MS SQL Server. Плюс само приложение я
пишу и отлаживаю под Linux. Но кодировка в базе данных &lt;code class="code"&gt;
cp1251&lt;/code&gt;
, отчего у
меня возникло немного проблем, т.к. в Java кодировка по умолчанию UTF-8.
Вместо русских букв были одни вопросики, но поразмыслив я добавил в URL
дополнительную информацию (конфигурация происходит через Spring
посредством IoC):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-nt"&gt;&amp;lt;bean&lt;/span&gt; &lt;span class="pgcss-na"&gt;id=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;dataSource&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;class=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;org.apache.tomcat.dbcp.dbcp.BasicDataSource&amp;quot;&lt;/span&gt;
    &lt;span class="pgcss-na"&gt;destroy-method=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;close&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;
    ...
    &lt;span class="pgcss-nt"&gt;&amp;lt;property&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;url&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;value=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;jdbc:jtds:sqlserver://dl-test:1030/dldb;charset=cp1251&amp;quot;&lt;/span&gt; &lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
    ...
&lt;span class="pgcss-nt"&gt;&amp;lt;/bean&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;А ещё я заметил, что на JSP-странице я забыл тег с указанием
кодировки вывода из Java, что и было ключевой проблемой:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-k"&gt;&amp;lt;%@&lt;/span&gt; &lt;span class="pgcss-n"&gt;page&lt;/span&gt; &lt;span class="pgcss-n"&gt;language&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;java&amp;quot;&lt;/span&gt; &lt;span class="pgcss-n"&gt;contentType&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;text/html;charset=utf-8&amp;quot;&lt;/span&gt; &lt;span class="pgcss-n"&gt;pageEncoding&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;utf-8&amp;quot;&lt;/span&gt; &lt;span class="pgcss-k"&gt;%&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;После этого русские буквы отобразились.&lt;/p&gt;
</summary><category term="диплом"></category><category term="java"></category><category term="mssql"></category><category term="hibernate"></category><category term="буквы"></category><category term="кодировка"></category></entry><entry><title>Подводит железо</title><link href="/posts/2009/11/14/podvodit-zhelezo/" rel="alternate"></link><updated>2009-11-14T18:07:21+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-14:posts/2009/11/14/podvodit-zhelezo/</id><summary type="html">&lt;p&gt;Ну что ж… славный сын из &lt;strong&gt;Barracuda&lt;/strong&gt;, ты умер и оставил глубокий
след печали в моей душе. Мне будет не хватать твоих 400GiB. Тебя
постигла страшная участь — огромное число бэдов.&lt;/p&gt;
&lt;p&gt;Я поставил его проверяться при помощи «&lt;strong&gt;badblocks -nsf -o errors.dat /dev/sda&lt;/strong&gt;».
Ещё вчера на каждые 100 мегабайт винчестера
было где-то по 1 килобайту плохих секторов. Но уже сегодня проверка
первых 30GiB показала, что он рассыпался…&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/100543/"&gt;&lt;img alt="Винчестер" src="http://img-fotki.yandex.ru/get/4103/imdagger.4/0_188bf_30dde14_XL" style="width: 300px; height: 400px;" title="Винчестер"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Хотя бы одно радует: я вспомнил своё детство, когда попытался
повернуть в руках жёсткий диск (включённый) на бок, тут же проявил себя
гироскопический эффект. Можно не заботится уже ни о том, что винчестер
не припарковал головки, ни о возможных его внутренних нарушениях, можно
просто вращать и трясти сколько душе влезет.&lt;/p&gt;
&lt;p&gt;Забавно включить компьютер с этим винчестером, затем выключить,
быстро отсоединить винчестер и дать кому-нибудь в руки повращать. Он в
меру своих возможностей сопротивляется.&lt;/p&gt;</summary><category term="винчестер"></category><category term="печаль"></category></entry><entry><title>Смены статуса в Jabber</title><link href="/posts/2009/11/13/smeny-statusa-v-jabber/" rel="alternate"></link><updated>2009-11-13T16:40:29+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-13:posts/2009/11/13/smeny-statusa-v-jabber/</id><summary type="html">&lt;p&gt;Бывает, что люди ставят небольшой интервал автостатуса и сидят
что-нибудь делают за компьютером. От этого у них статус начинает
постоянно переключаться, дошло до 100-300 раз за
полчаса…away..online..do not disturbe и поехали… Emacs выгружить не
хотелось, решил подправить функции «на лету».&lt;/p&gt;
&lt;p&gt;подправил код в моём jabber_cfg.el:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;setq&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-must-ignore-presence&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;******@******&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;
&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;defun&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-change-status-notification&lt;/span&gt;
                      &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;who&lt;/span&gt; &lt;span class="pgcss-nv"&gt;oldstatus&lt;/span&gt; &lt;span class="pgcss-nv"&gt;newstatus&lt;/span&gt; &lt;span class="pgcss-nv"&gt;statustext&lt;/span&gt; &lt;span class="pgcss-nv"&gt;proposed-alert&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;when&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;not&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;member&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;format&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;quot;%s&amp;quot;&lt;/span&gt; &lt;span class="pgcss-nv"&gt;who&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-must-ignore-presence&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;
        &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;jabber-presence-osd&lt;/span&gt; &lt;span class="pgcss-nv"&gt;who&lt;/span&gt; &lt;span class="pgcss-nv"&gt;oldstatus&lt;/span&gt; &lt;span class="pgcss-nv"&gt;newstatus&lt;/span&gt;
                               &lt;span class="pgcss-nv"&gt;statustext&lt;/span&gt; &lt;span class="pgcss-nv"&gt;proposed-alert&lt;/span&gt;&lt;span class="pgcss-p"&gt;)))&lt;/span&gt;
&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;add-hook&lt;/span&gt; &lt;span class="pgcss-ss"&gt;&amp;#39;jabber-alert-presence-hooks&lt;/span&gt; &lt;span class="pgcss-ss"&gt;&amp;#39;my-change-status-notification&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Выделил текст, вызвал &lt;kbd class="kbd"&gt;
M-x eval-region&lt;/kbd&gt;
. Всё! Теперь достаточно
добавить контакт (не никнэйм) человека в список
&lt;em&gt;my-must-ignore-presence&lt;/em&gt;, и его изменения статуса меня не тревожат.&lt;/p&gt;
&lt;p&gt;Переменную &lt;em&gt;who&lt;/em&gt; пришлось преобразовать в строку при помощи format,
думаю есть более элегантные решения, но у меня нервов не хватило
смотреть, как статус моргает….&lt;/p&gt;
</summary><category term="jabber"></category><category term="emacs"></category></entry><entry><title>Винчестер</title><link href="/posts/2009/11/12/vinchester/" rel="alternate"></link><updated>2009-11-12T21:37:23+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-12:posts/2009/11/12/vinchester/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Постоял Seagate ST3400620AS, чуть-чуть поработал, потом без
напряжения стоял ещё полгода, а вот сегодня решил я на нём хранить
данные. А он почему-то посыпал ошибками и не стал работать, одни ошибки
ввода-вывода. Жаль.. 400 Гигабайт всё же…&lt;/p&gt;
</summary><category term="винчестер"></category><category term="печаль"></category></entry><entry><title></title><link href="/posts/2009/11/12/urn:ya.ru:post/22199227/391/" rel="alternate"></link><updated>2009-11-12T20:05:47+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-12:posts/2009/11/12/urn:ya.ru:post/22199227/391/</id><summary type="html">&lt;p&gt;How I can forget my sins? And don’t repeat again…&lt;/p&gt;
</summary></entry><entry><title>Проект</title><link href="/posts/2009/11/12/proekt/" rel="alternate"></link><updated>2009-11-12T19:53:15+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-12:posts/2009/11/12/proekt/</id><summary type="html">&lt;p&gt;Мысли для себя:&lt;/p&gt;
&lt;p&gt;Думаю проект разродится в ближайшем обозримом будущем, что-то типа альфа
версии с именем &lt;strong&gt;Last Gateway to hell&lt;/strong&gt;, и в репозиторий в этот день
будет занесён тег last_gateway_to_hell. Тут вот Many создал интерфейс
обмена предметами и код для работы с ним, я код контроллеров для
взаимодействия интерфейса с моделями рюкзака, тела и комбослотов.&lt;/p&gt;
&lt;p class="cut"&gt;&lt;a class="h-link reference internal" data-toggle="collapse" href="#cut_36433744"&gt;тоже интересно, что там я написал&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_36433744"&gt;
&lt;p&gt;Поправил в его сцене некоторые вещи, которые напомню ему: сделать
относительный путь к текстуре (начинающийся со &lt;strong&gt;//&lt;/strong&gt;), переименовать
сцену в BagScene, центрировать камеру, сместить одну кнопку (он помнит
про неё). Вот с этой кнопочкой вышел казус… я сразу и не въехал, как
поправить проблему. Смещаешь ryjgre, а после запуска BGE она становится
на своё место. Оказалось, что для неё кроме ключа масштабировани
сохранена позиция по X и Y. В режиме &lt;em&gt;IPO Curve Editor&lt;/em&gt; я выделил эти
кривые и при помощи клавиши &lt;strong&gt;X&lt;/strong&gt; удалил.&lt;/p&gt;
&lt;p&gt;Белые полупрозрачные квадратики — это для отладки, чтобы видеть
область возможного нажатия и выбора.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/99779/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4000/imdagger.4/0_185c3_21c60b05_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;</summary><category term="blender"></category><category term="проект"></category><category term="bge"></category><category term="last_gateway_to_hell"></category></entry><entry><title>Волна</title><link href="/posts/2009/11/11/volna/" rel="alternate"></link><updated>2009-11-11T20:39:00+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-11:posts/2009/11/11/volna/</id><summary type="html">&lt;p&gt;Вдохновлённый волнами вдруг задумался, а как можно нарисовать в 3D
волну в BGE. Придумал такую схему: есть небольшой кусочек волны
(плоскость), есть генератор волны (например Empty), генератор создаётся
новые объекты при помощи instantAddObject, но перед этим смещает все
существующие и убирает лишние.&lt;/p&gt;
&lt;p&gt;После этого эксперимента я понял, как побороть ошибку, что объект в
BGE уже уничтожен, а Python-ссылка ведёт в никуда. Оказалось:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;# нужно проверить флаг &lt;em&gt;invalid&lt;/em&gt; перед работой с BGE-объектом&lt;/div&gt;
&lt;div class="line"&gt;for obj in …&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp;if not &lt;strong&gt;obj.invalid&lt;/strong&gt;:&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;…&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Ролик, который просто демонстрирует, как я сижу за компьтером и делаю
сцену, и запускаю BGE (волны движутся так медленно потому, что записывал
с частотой &lt;strong&gt;4 кадра в секунду&lt;/strong&gt;):&lt;/p&gt;
&lt;div class="text-center"&gt;&lt;div class="yavideo" align="left"&gt;&lt;/div&gt;&lt;object id="flash" width="450" height="370" data="http://flv.video.yandex.ru/lite/imdagger/1uwv46vaaj.604/" type="application/x-shockwave-flash"&gt;&lt;param value="http://flv.video.yandex.ru/lite/imdagger/1uwv46vaaj.604/" name="movie"&gt;&lt;param value="high" name="quality"&gt;&lt;param value="transparent" name="wmode"&gt;&lt;param value="#ffffff" name="bgcolor"&gt;&lt;param value="true" name="allowfullscreen"&gt;&lt;param value="sameDomain" name="allowscriptaccess"&gt;&lt;param value="scale" name="scale"&gt;&lt;/object&gt;&lt;/div&gt;&lt;p&gt;Резкий подкат камеры к зелёной «плоскости» — режим работы с
объектом, когда все остальные пропадают, а изображение выбранного
масштабируется под область видимости (делается при помощи клавиши
&lt;kbd class="kbd"&gt;
/&lt;/kbd&gt;
, и туда и обратно).&lt;/p&gt;
</summary><category term="волна"></category><category term="bge"></category></entry><entry><title>Правило по жизни</title><link href="/posts/2009/11/11/pravilo-po-zhizni/" rel="alternate"></link><updated>2009-11-11T16:46:57+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-11:posts/2009/11/11/pravilo-po-zhizni/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Так сильно хотел ответить про BGE в форуме на
&lt;a class="reference external" href="http://blender3d.org.ua"&gt;blender3d.org.ua&lt;/a&gt;, что отступил от своих
правил. У меня есть правило — регистрироваться как можно меньше на
различных ресурсах. Если есть возможность выполнять свои обыденные
операции, то лазать под гостем. Так, например, я 3 года назад не стал
регистрироваться на Хабре, т.к. меня устраивало просто читать статьи. Но
на LOR я зарегистрировался когда-то :), т.к. хотел поучавствовать в
опросе. И вот опять повторяется … [-:&lt;/p&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;/div&gt;
</summary><category term="blender"></category><category term="жизнь"></category><category term="форум"></category></entry><entry><title></title><link href="/posts/2009/11/10/urn:ya.ru:post/22199227/386/" rel="alternate"></link><updated>2009-11-10T19:08:32+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-10:posts/2009/11/10/urn:ya.ru:post/22199227/386/</id><summary type="html">&lt;p&gt;Мне снова нужно быть роботом. Хочу не спать.&lt;/p&gt;
</summary></entry><entry><title>Сцены</title><link href="/posts/2009/11/09/stseny/" rel="alternate"></link><updated>2009-11-09T20:19:27+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-09:posts/2009/11/09/stseny/</id><summary type="html">&lt;p&gt;Вчера выкроил немного ночью времени поковыряться с Blender и вдруг
наткнулся на выпадающий список с выбором сцены. Оказалось, что можно
слинковать вместе две сцены в Blender, а не только отдельные объекты.
Порой мне этого не хватало. Но теперь я смогу делать части объекта на
нескольких сценах, рендерить их с отдельными параметрами из разных
камер, а в итоге собирать в одну сцену (создание новых сцен происходит в
верхнем правом углу, левее версии).&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/99532/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3904/imdagger.4/0_184cc_e6fd5674_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Это сцена с кубом, а к ней присоединена сцена с шаром. Вторая камера
— это из &lt;em&gt;SphereScene&lt;/em&gt;, её нельзя редактировать в &lt;strong&gt;CubeScene&lt;/strong&gt;. Сцена с
шаром имеет своё собственное описание мира, параметры рендеринга (в
данном случае 400 на 300):&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/99536/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/4106/imdagger.4/0_184d0_3fce7106_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/99533/"&gt;&lt;img alt="image2" src="http://img-fotki.yandex.ru/get/4000/imdagger.4/0_184cd_1168b8d_L" title="image2"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;А результат рендеринга общей сцены выглядит так, если включить
&lt;strong&gt;Edge&lt;/strong&gt;:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/99535/"&gt;&lt;img alt="image3" src="http://img-fotki.yandex.ru/get/4002/imdagger.4/0_184cf_86ec31e7_L" title="image3"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="сцены"></category></entry><entry><title>Разреженная таблица 2</title><link href="/posts/2009/11/08/razrezhennaia-tablitsa-2/" rel="alternate"></link><updated>2009-11-08T13:23:28+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-08:posts/2009/11/08/razrezhennaia-tablitsa-2/</id><summary type="html">&lt;p&gt;Почитал вот
&lt;a class="reference external" href="http://www.mredkj.com/tutorials/tablebasics3.html"&gt;тут&lt;/a&gt;и
&lt;a class="reference external" href="http://www.quirksmode.org/dom/innerhtml.html"&gt;тут&lt;/a&gt; материал (т.к.
вчера ночью думал об innerHTML). Переделал свой скрипт и он стал
работать на порядок быстрее. Firefox2 тратит на мою большую таблицу
около 8 секунд, IE — где-то 12 секунд, ну и моя Opera 10 — 45 секунд.
Что в любом случае вышло быстрее, чем грузить её с сервера и напрягать
его по мелочам (только Opera что-то не радует, но нужно просто
Javascript под неё заточить).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kd"&gt;function&lt;/span&gt; &lt;span class="pgcss-nx"&gt;expander&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt; &lt;span class="pgcss-p"&gt;{&lt;/span&gt;
    &lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;table&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nb"&gt;document&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;getElementById&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s2"&gt;&amp;quot;results&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;);&lt;/span&gt;
    &lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;rows&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nx"&gt;table&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;rows&lt;/span&gt;&lt;span class="pgcss-p"&gt;;&lt;/span&gt;
    &lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;realNodes&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nx"&gt;table&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;innerHTML&lt;/span&gt;&lt;span class="pgcss-p"&gt;;&lt;/span&gt;

    &lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;nodes&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nx"&gt;realNodes&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;toLowerCase&lt;/span&gt;&lt;span class="pgcss-p"&gt;();&lt;/span&gt;
    &lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;p&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-nx"&gt;lastp&lt;/span&gt;&lt;span class="pgcss-p"&gt;;&lt;/span&gt;
    &lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;strings&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-k"&gt;new&lt;/span&gt; &lt;span class="pgcss-nb"&gt;Array&lt;/span&gt;&lt;span class="pgcss-p"&gt;();&lt;/span&gt;
    &lt;span class="pgcss-nx"&gt;strings&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;push&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;);&lt;/span&gt;

    &lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;emptyCell&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s2"&gt;&amp;quot;&amp;lt;td&amp;gt;&amp;amp;nbsp;&amp;lt;/td&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;;&lt;/span&gt;
    &lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;groupOfCells&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;;&lt;/span&gt;
    &lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;groupSize&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-mi"&gt;500&lt;/span&gt;&lt;span class="pgcss-p"&gt;;&lt;/span&gt;

    &lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;i&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-mi"&gt;0&lt;/span&gt;&lt;span class="pgcss-p"&gt;;&lt;/span&gt; &lt;span class="pgcss-nx"&gt;i&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="pgcss-nx"&gt;groupSize&lt;/span&gt;&lt;span class="pgcss-p"&gt;;&lt;/span&gt; &lt;span class="pgcss-nx"&gt;i&lt;/span&gt;&lt;span class="pgcss-o"&gt;++&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
        &lt;span class="pgcss-nx"&gt;groupOfCells&lt;/span&gt; &lt;span class="pgcss-o"&gt;+=&lt;/span&gt; &lt;span class="pgcss-nx"&gt;emptyCell&lt;/span&gt;&lt;span class="pgcss-p"&gt;;&lt;/span&gt;

    &lt;span class="pgcss-k"&gt;do&lt;/span&gt; &lt;span class="pgcss-p"&gt;{&lt;/span&gt;
        &lt;span class="pgcss-nx"&gt;p&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nx"&gt;nodes&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;indexOf&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s2"&gt;&amp;quot;&amp;lt;td size&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-nx"&gt;lastp&lt;/span&gt;&lt;span class="pgcss-p"&gt;);&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;p&lt;/span&gt; &lt;span class="pgcss-o"&gt;!=&lt;/span&gt; &lt;span class="pgcss-o"&gt;-&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-p"&gt;{&lt;/span&gt;
            &lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;tagEnd&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nx"&gt;nodes&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;indexOf&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s2"&gt;&amp;quot;&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-nx"&gt;p&lt;/span&gt;&lt;span class="pgcss-p"&gt;);&lt;/span&gt;
            &lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;size&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nx"&gt;nodes&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;substring&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;p&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-nx"&gt;tagEnd&lt;/span&gt;&lt;span class="pgcss-p"&gt;);&lt;/span&gt;
            &lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;quot&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nx"&gt;size&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;indexOf&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s1"&gt;&amp;#39;&amp;quot;&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt; &lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-p"&gt;;&lt;/span&gt;
            &lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;quotEnd&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nx"&gt;size&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;indexOf&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s1"&gt;&amp;#39;&amp;quot;&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-nx"&gt;quot&lt;/span&gt;&lt;span class="pgcss-p"&gt;);&lt;/span&gt;
            &lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;size&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nx"&gt;size&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;substring&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;quot&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-nx"&gt;quotEnd&lt;/span&gt;&lt;span class="pgcss-p"&gt;);&lt;/span&gt;

            &lt;span class="pgcss-nx"&gt;strings&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;push&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;realNodes&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;substring&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;lastp&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-nx"&gt;p&lt;/span&gt;&lt;span class="pgcss-p"&gt;));&lt;/span&gt;

            &lt;span class="pgcss-nx"&gt;size&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nb"&gt;parseInt&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;size&lt;/span&gt;&lt;span class="pgcss-p"&gt;);&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;while&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;size&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;gt;&lt;/span&gt;  &lt;span class="pgcss-mi"&gt;0&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-p"&gt;{&lt;/span&gt;
                &lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;maxGet&lt;/span&gt;&lt;span class="pgcss-p"&gt;;&lt;/span&gt;
                &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;groupSize&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pgcss-nx"&gt;size&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
                    &lt;span class="pgcss-nx"&gt;maxGet&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nx"&gt;size&lt;/span&gt;&lt;span class="pgcss-p"&gt;;&lt;/span&gt;
                &lt;span class="pgcss-k"&gt;else&lt;/span&gt;
                    &lt;span class="pgcss-nx"&gt;maxGet&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nx"&gt;groupSize&lt;/span&gt;&lt;span class="pgcss-p"&gt;;&lt;/span&gt;
                &lt;span class="pgcss-nx"&gt;strings&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;push&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;groupOfCells&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;substring&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-mi"&gt;0&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
                         &lt;span class="pgcss-nx"&gt;emptyCell&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;length&lt;/span&gt; &lt;span class="pgcss-o"&gt;*&lt;/span&gt; &lt;span class="pgcss-nx"&gt;maxGet&lt;/span&gt;&lt;span class="pgcss-p"&gt;));&lt;/span&gt;
                &lt;span class="pgcss-nx"&gt;size&lt;/span&gt; &lt;span class="pgcss-o"&gt;-=&lt;/span&gt; &lt;span class="pgcss-nx"&gt;groupSize&lt;/span&gt;&lt;span class="pgcss-p"&gt;;&lt;/span&gt;
            &lt;span class="pgcss-p"&gt;}&lt;/span&gt;

            &lt;span class="pgcss-nx"&gt;p&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nx"&gt;tagEnd&lt;/span&gt;&lt;span class="pgcss-p"&gt;;&lt;/span&gt;
        &lt;span class="pgcss-p"&gt;}&lt;/span&gt; &lt;span class="pgcss-k"&gt;else&lt;/span&gt;
            &lt;span class="pgcss-nx"&gt;strings&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;push&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;realNodes&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;substring&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;lastp&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
                     &lt;span class="pgcss-nx"&gt;realNodes&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;length&lt;/span&gt;&lt;span class="pgcss-p"&gt;));&lt;/span&gt;

        &lt;span class="pgcss-nx"&gt;lastp&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nx"&gt;p&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt; &lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-p"&gt;;&lt;/span&gt;
    &lt;span class="pgcss-p"&gt;}&lt;/span&gt; &lt;span class="pgcss-k"&gt;while&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;p&lt;/span&gt; &lt;span class="pgcss-o"&gt;!=&lt;/span&gt; &lt;span class="pgcss-o"&gt;-&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-p"&gt;);&lt;/span&gt;

    &lt;span class="pgcss-nx"&gt;table&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;innerHTML&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nx"&gt;strings&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;join&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;);&lt;/span&gt;
&lt;span class="pgcss-p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Теперь скрипт перестраивает весь innerHTML, добавляет новые узлы,
замещая старые. Всё собирается в один массив, а затем при помощи join в
строку. Но IE не понивает innerHTML для table, поэтому пришлось
заключить table в тег div.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-nt"&gt;&amp;lt;body&lt;/span&gt; &lt;span class="pgcss-na"&gt;onload=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;javascript:expander();&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;
**&lt;span class="pgcss-nt"&gt;&amp;lt;div&lt;/span&gt; &lt;span class="pgcss-na"&gt;id=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;results&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;**
&lt;span class="pgcss-nt"&gt;&amp;lt;table&lt;/span&gt; &lt;span class="pgcss-na"&gt;border=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;&lt;/span&gt;Text&lt;span class="pgcss-nt"&gt;&amp;lt;/td&amp;gt;&amp;lt;td&lt;/span&gt; &lt;span class="pgcss-na"&gt;size=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;4&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;/&amp;gt;&amp;lt;td&amp;gt;&lt;/span&gt;Text2&lt;span class="pgcss-nt"&gt;&amp;lt;/td&amp;gt;&amp;lt;td&lt;/span&gt; &lt;span class="pgcss-na"&gt;size=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;/&amp;gt;&amp;lt;/tr&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;tr&amp;gt;&amp;lt;td&lt;/span&gt;
&lt;span class="pgcss-na"&gt;size=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;2&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;/&amp;gt;&amp;lt;td&amp;gt;&lt;/span&gt;Text&lt;span class="pgcss-nt"&gt;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;&lt;/span&gt;Text2&lt;span class="pgcss-nt"&gt;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;&lt;/span&gt;Text2&lt;span class="pgcss-nt"&gt;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;&lt;/span&gt;Text2&lt;span class="pgcss-nt"&gt;&amp;lt;/td&amp;gt;&amp;lt;td&lt;/span&gt;
&lt;span class="pgcss-na"&gt;size=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;/&amp;gt;&amp;lt;/tr&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;/table&amp;gt;&lt;/span&gt;
**&lt;span class="pgcss-nt"&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;**
&lt;span class="pgcss-nt"&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</summary><category term="диплом"></category><category term="javascript"></category><category term="таблица"></category></entry><entry><title>Небольшой провал</title><link href="/posts/2009/11/07/nebolshoi-proval/" rel="alternate"></link><updated>2009-11-07T21:42:20+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-07:posts/2009/11/07/nebolshoi-proval/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Функция expander, которую я написал утром, облегчила участь
веб-серверу. Отныне ему не нужно было передавать несколько сотен
килобайт «пустоты». Но возникла проблема: мой скрипт работает
&lt;strong&gt;ооооочень&lt;/strong&gt; медленно. Пойду домой, попробую его перестроить и
ускорить.&lt;/p&gt;
</summary><category term="диплом"></category><category term="javascript"></category><category term="облом"></category></entry><entry><title>Разреженная таблица</title><link href="/posts/2009/11/07/razrezhennaia-tablitsa/" rel="alternate"></link><updated>2009-11-07T12:54:36+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-07:posts/2009/11/07/razrezhennaia-tablitsa/</id><summary type="html">&lt;p&gt;Возможно это какой-то велосипед, но я ничего подходящего в интернете
не нашёл. У меня есть очень большая таблица, но она в некоторых местах
сильно разрежена. Из-за этого веб-сервер передаёт множество
&lt;code class="code"&gt;
&amp;lt;td&amp;gt;&amp;amp;nbsp;&amp;lt;/td&amp;gt;&lt;/code&gt;
 для того, чтобы ячейки были пустыми. Я решил, что можно
вместо целого ряда таких пустых ячеек передавать &lt;code class="code"&gt;
&amp;lt;td size="число" /&amp;gt;&lt;/code&gt;
, а
затем мой JavaScript на клиентской стороне расширит их до группы
«настоящих ячеек». Черновой скрипт, который ищет в DOM узел с
идентификатором &lt;strong&gt;results&lt;/strong&gt;, таблица которую нужно перестроить:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kd"&gt;function&lt;/span&gt; &lt;span class="pgcss-nx"&gt;expander&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt; &lt;span class="pgcss-p"&gt;{&lt;/span&gt;
    &lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;table&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nb"&gt;document&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;getElementById&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s2"&gt;"results"&lt;/span&gt;&lt;span class="pgcss-p"&gt;);&lt;/span&gt;

    &lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;rows&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nx"&gt;table&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;rows&lt;/span&gt;&lt;span class="pgcss-p"&gt;;&lt;/span&gt;

    &lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;i&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-mi"&gt;0&lt;/span&gt;&lt;span class="pgcss-p"&gt;;&lt;/span&gt; &lt;span class="pgcss-nx"&gt;i&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="pgcss-nx"&gt;rows&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;length&lt;/span&gt;&lt;span class="pgcss-p"&gt;;&lt;/span&gt; &lt;span class="pgcss-nx"&gt;i&lt;/span&gt;&lt;span class="pgcss-o"&gt;++&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-p"&gt;{&lt;/span&gt;
        &lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;row&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nx"&gt;rows&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-nx"&gt;i&lt;/span&gt;&lt;span class="pgcss-p"&gt;];&lt;/span&gt;
        &lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;cells&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nx"&gt;row&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;cells&lt;/span&gt;&lt;span class="pgcss-p"&gt;;&lt;/span&gt;

        &lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;j&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-mi"&gt;0&lt;/span&gt;&lt;span class="pgcss-p"&gt;;&lt;/span&gt; &lt;span class="pgcss-nx"&gt;j&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="pgcss-nx"&gt;cells&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;length&lt;/span&gt;&lt;span class="pgcss-p"&gt;;&lt;/span&gt; &lt;span class="pgcss-nx"&gt;j&lt;/span&gt;&lt;span class="pgcss-o"&gt;++&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-p"&gt;{&lt;/span&gt;
            &lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;cell&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nx"&gt;cells&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-nx"&gt;j&lt;/span&gt;&lt;span class="pgcss-p"&gt;];&lt;/span&gt;
            &lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;size&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nx"&gt;cell&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;getAttribute&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s2"&gt;"size"&lt;/span&gt;&lt;span class="pgcss-p"&gt;);&lt;/span&gt;

            &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;size&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-p"&gt;{&lt;/span&gt;
                &lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;mustAdd&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nb"&gt;parseInt&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;size&lt;/span&gt;&lt;span class="pgcss-p"&gt;);&lt;/span&gt;

                &lt;span class="pgcss-k"&gt;while&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;mustAdd&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pgcss-mi"&gt;0&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-p"&gt;{&lt;/span&gt;
                    &lt;span class="pgcss-kd"&gt;var&lt;/span&gt; &lt;span class="pgcss-nx"&gt;emptyCell&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nb"&gt;document&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;createElement&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s2"&gt;"td"&lt;/span&gt;&lt;span class="pgcss-p"&gt;);&lt;/span&gt;
                    &lt;span class="pgcss-nx"&gt;emptyCell&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;innerHTML&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s2"&gt;"&amp;amp;nbsp;"&lt;/span&gt;&lt;span class="pgcss-p"&gt;;&lt;/span&gt;

                    &lt;span class="pgcss-nx"&gt;row&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;insertBefore&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;emptyCell&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-nx"&gt;cell&lt;/span&gt;&lt;span class="pgcss-p"&gt;);&lt;/span&gt;
                    &lt;span class="pgcss-nx"&gt;mustAdd&lt;/span&gt;&lt;span class="pgcss-o"&gt;--&lt;/span&gt;&lt;span class="pgcss-p"&gt;;&lt;/span&gt;
                &lt;span class="pgcss-p"&gt;}&lt;/span&gt;

                &lt;span class="pgcss-nx"&gt;row&lt;/span&gt;&lt;span class="pgcss-p"&gt;.&lt;/span&gt;&lt;span class="pgcss-nx"&gt;removeChild&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nx"&gt;cell&lt;/span&gt;&lt;span class="pgcss-p"&gt;);&lt;/span&gt;
            &lt;span class="pgcss-p"&gt;}&lt;/span&gt;
        &lt;span class="pgcss-p"&gt;}&lt;/span&gt;
    &lt;span class="pgcss-p"&gt;}&lt;/span&gt;
&lt;span class="pgcss-p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;И простейшая таблица в 6 колонок и 2 ряда:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-nt"&gt;&amp;lt;body&lt;/span&gt; &lt;span class="pgcss-na"&gt;onload=&lt;/span&gt;&lt;span class="pgcss-s"&gt;"javascript:expander();"&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;table&lt;/span&gt; &lt;span class="pgcss-na"&gt;id=&lt;/span&gt;&lt;span class="pgcss-s"&gt;"results"&lt;/span&gt; &lt;span class="pgcss-na"&gt;border=&lt;/span&gt;&lt;span class="pgcss-s"&gt;"1"&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;&lt;/span&gt;Text&lt;span class="pgcss-nt"&gt;&amp;lt;/td&amp;gt;&amp;lt;td&lt;/span&gt; &lt;span class="pgcss-na"&gt;size=&lt;/span&gt;&lt;span class="pgcss-s"&gt;"4"&lt;/span&gt;&lt;span class="pgcss-nt"&gt;/&amp;gt;&amp;lt;td&amp;gt;&lt;/span&gt;Text2&lt;span class="pgcss-nt"&gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;tr&amp;gt;&amp;lt;td&lt;/span&gt; &lt;span class="pgcss-na"&gt;size=&lt;/span&gt;&lt;span class="pgcss-s"&gt;"2"&lt;/span&gt;&lt;span class="pgcss-nt"&gt;/&amp;gt;&amp;lt;td&amp;gt;&lt;/span&gt;Text&lt;span class="pgcss-nt"&gt;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;&lt;/span&gt;Text2&lt;span class="pgcss-nt"&gt;&amp;lt;/td&amp;gt;&amp;lt;td&lt;/span&gt; &lt;span class="pgcss-na"&gt;size=&lt;/span&gt;&lt;span class="pgcss-s"&gt;"2"&lt;/span&gt;&lt;span class="pgcss-nt"&gt;/&amp;gt;&amp;lt;/tr&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;/table&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Была расширена при помощи вставки insertBefore пустых ячеек до
ячейки &lt;code class="code"&gt;
&amp;lt;td size="число" /&amp;gt;&lt;/code&gt;
, а затем удаления «расширяемой» ячейки из
ряда.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3903/imdagger.4/0_181b4_fb5c8ab2_L" title="image0"/&gt;&lt;/p&gt;</summary><category term="диплом"></category><category term="javascript"></category><category term="таблица"></category></entry><entry><title>Кости</title><link href="/posts/2009/11/06/kosti/" rel="alternate"></link><updated>2009-11-06T20:58:01+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-06:posts/2009/11/06/kosti/</id><summary type="html">&lt;p&gt;Из-за немощности моего рабочего компа (в остновном я его использую,
как терминалку к серверам) пришлось найти компромис между большими
объёмами данных (и потерями при запими на винчестер) и процессорным
временем на сжатие. Как наиболее оптимальный я выбрал &lt;em&gt;qtrle&lt;/em&gt;. Опция
&lt;strong&gt;xga&lt;/strong&gt; указывает на разрешение записываемого ролика, т.е. 1024x768.
Опция &lt;em&gt;-r&lt;/em&gt; задаёт частоту записи равную 4 кадрам в секунду (замедления
ощущаются, но они равномерные, а не рывками как при recordmydesktop).
Устройство для захвата это X-овая сессия &lt;strong&gt;:0.0&lt;/strong&gt;, кодек для захвата
x11grab (должен присутствовать в ffmpeg -formats).&lt;/p&gt;
&lt;blockquote&gt;
&lt;strong&gt;ffmpeg -f x11grab -s xga -r 4 -i :0.0 -vcodec qtrle result.mov&lt;/strong&gt;&lt;/blockquote&gt;
&lt;p&gt;На выходе получился ролик приблизительно 34МiB. И
продолжительностью около 4 минут. Я решил перекодировать его другим
кодеком, который хорошо сожмёт, но не потребует изменения масштаба или
создаст сильную потерю качества. Кодек mpeg4 “набросал много грязи”, а
h264 потребовал другое соотношение сторон. Но я заметил в списке
поддерживаемых (ffmpeg -formats) кодек для flash.&lt;/p&gt;
&lt;blockquote&gt;
&lt;strong&gt;ffmpeg -ss 2 -t 00:03:57 -i result.mov -vcodec flashsv
result2.flv&lt;/strong&gt;&lt;/blockquote&gt;
&lt;p&gt;Он сжал ролик до 7MiB. Меня это удовлетворяло и он оставил качество
на таком уровне, что когда я смотрел, то на пару секунд забыл, что это
видео, а не живая система:&lt;/p&gt;
&lt;div class="yavideo" align="center"&gt;&lt;object id="flash" width="450" height="338" data="http://flv.video.yandex.ru/lite/imdagger/m4sjpx6t7h.1108/" type="application/x-shockwave-flash"&gt;&lt;param value="http://flv.video.yandex.ru/lite/imdagger/m4sjpx6t7h.1108/" name="movie"&gt;&lt;param value="high" name="quality"&gt;&lt;param value="transparent" name="wmode"&gt;&lt;param value="#ffffff" name="bgcolor"&gt;&lt;param value="true" name="allowfullscreen"&gt;&lt;param value="sameDomain" name="allowscriptaccess"&gt;&lt;param value="scale" name="scale"&gt;&lt;/object&gt;&lt;/div&gt;&lt;p&gt;Сначала я создаю основу Body, затем две кости Left и Right, но
убираю ссылку на предка. Переворачиваю их и устанавливаю ограничители
такие, чтобы «ножки смотрели» всегда на основу и далеко не отрывались.&lt;/p&gt;
&lt;p&gt;P.S. Курсор у меня в системе на самом деле чёрный с белой окантовкой, но
он аппаратный, поэтому ffmpeg создаёт свой при записи, который белый с
чёрной каймой.&lt;/p&gt;
</summary><category term="blender"></category><category term="скринкастинг"></category><category term="bge"></category><category term="кость"></category></entry><entry><title>Сглаживание</title><link href="/posts/2009/11/05/sglazhivanie/" rel="alternate"></link><updated>2014-07-14T04:49:00+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-05:posts/2009/11/05/sglazhivanie/</id><summary type="html">&lt;p&gt;Только обратил внимание на кнопку &lt;strong&gt;Set Smooth&lt;/strong&gt; в Blender.
Оказалось, что оно и в BGE работает, производит расчёт освещённости
каждого полигона поверхности меша на основании соседних. Думаю, что для
достаточно гладких поверхностей мне эта возможность в BGE очень даже
пригодится, а то приходилось «одевать» текстуру высокополигонального
объекта даже при минимальной необходимости.&lt;/p&gt;
&lt;p&gt;Для примера я создал обычную UV-сферу 32 на 32.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/98456/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4000/imdagger.4/0_18098_c848c4e1_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="cut text-center"&gt;&lt;a class="h-link reference internal" data-toggle="collapse" href="#cut_45019280"&gt;смотреть дальше&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_45019280"&gt;
&lt;p&gt;Затем выделил левую половину сферы&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/98457/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/4105/imdagger.4/0_18099_c16429b_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Нажал кнопку Set Smooth (вкладка Editing по &lt;kbd class="kbd"&gt;
F9&lt;/kbd&gt;
), которая
применила сглаживание освещения для выбранных полигонов:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/98459/"&gt;&lt;img alt="image2" src="http://img-fotki.yandex.ru/get/4002/imdagger.4/0_1809b_59d09d3_L" title="image2"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;При переходе обратно в объектный режим результат изменений стал
сразу же очевиден:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/98460/"&gt;&lt;img alt="image3" src="http://img-fotki.yandex.ru/get/3905/imdagger.4/0_1809c_528821a6_L" title="image3"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;При этом, в игровом режиме BGE сфера отображалась таким же образом,
т.е. такой тип расчёта освещения допускал и внутренний игровой движок.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/98461/"&gt;&lt;img alt="image4" src="http://img-fotki.yandex.ru/get/4105/imdagger.4/0_1809d_d711d4cd_L" title="image4"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Но мне показалось этого мало :). Я решил создать два меша типа
&lt;strong&gt;Monkey&lt;/strong&gt; и поэкспериментировать с ними. Слева и справа два абсолюто
идентичных объекта.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/98462/"&gt;&lt;img alt="image5" src="http://img-fotki.yandex.ru/get/4106/imdagger.4/0_1809e_c095fd3d_L" title="image5"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Но к левой обезьянке затем был применён Set Smooth и запущен BGE.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/98463/"&gt;&lt;img alt="image6" src="http://img-fotki.yandex.ru/get/4106/imdagger.4/0_1809f_d25dd552_L" title="image6"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Ещё лучше стала видна разница после применения к обоим мешам
модификатора SubSurf всего лишь 1-ого уровня (на рисунке включён Shaded
Draw Type).&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/98465/"&gt;&lt;img alt="image7" src="http://img-fotki.yandex.ru/get/3906/imdagger.4/0_180a1_e73f2b5c_L" title="image7"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Нашёл ещё пару ссылок по данной тематике:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://www.blender.org/documentation/htmlI/x2681.html"&gt;Из документации&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://feeblemind.tuxfamily.org/dotclear/index.php/2007/08/13/88-how-to-solve-blenders-smoothing-problems"&gt;Заметка о возможных проблемах при Set
Smooth&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;</summary><category term="blender"></category><category term="bge"></category><category term="сглаживание"></category></entry><entry><title>Скринкасты</title><link href="/posts/2009/11/04/skrinkasty/" rel="alternate"></link><updated>2009-11-04T21:26:46+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-04:posts/2009/11/04/skrinkasty/</id><summary type="html">&lt;p&gt;Скачал &lt;strong&gt;ffmpeg&lt;/strong&gt; попробовать. Сейчас сижу компилирую его с опцией
--x11grab (главное не забыть --enable-gpl). Хочу попробовать его для
записи того, как я расставлял кости в Blender для резистора из
Resistance, ну и интересно разнообразить формат заметок из своего мозга.
Пробовал &lt;strong&gt;recordmydesktop&lt;/strong&gt;, всё было конечно круто, но… работало
только с опцией --full-shots, что катастрофически тормозило систему даже
для небольшого число кадов в секунду. Потом я попробовал &lt;strong&gt;Wink&lt;/strong&gt; (пусть
у него и закрытые исходники), но… он бешено поедает память, если мне
нужно долгое видео и много кадров в секунду, а ещё рендерит всё в SWF,
если бы не память я бы на нём остановился (процессор нагружает мало, но
лаги в результирующем видео порядочные ;) что меня не смутило).&lt;/p&gt;
</summary><category term="скринкастинг"></category><category term="ffmpeg"></category></entry><entry><title>Сфера</title><link href="/posts/2009/11/03/sfera/" rel="alternate"></link><updated>2009-11-03T19:38:06+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-03:posts/2009/11/03/sfera/</id><summary type="html">&lt;p&gt;Решил посетить SPOJ (Sphere Online Judge), давно я там не решал.
Иногда, когда на душе грустно, то можно что-нибудь поделать из раздела
Challenge. Обычно это всевозможные весёлые задачи и что главное — в
таблице результатов есть «пиписькометр». Т.е. всегда можно улучшать своё
решение и как такового единственно верного нет. Мой взор пал на задачу
&lt;a class="reference external" href="https://www.spoj.pl/problems/SLEXSORT/"&gt;SLEXSORT&lt;/a&gt;. Кратко:&lt;/p&gt;
&lt;p&gt;Дано число тестов, тесты разделяются одной пустой строкой. Каждый
тест — число слов (по одному в строке), алфавит в порядке возрастания
букв, а затем сами слова (гарантируют, что входной поток каждого из
тестов не превысит 4*10&lt;sup&gt;6&lt;/sup&gt;). Нужно для каждого теста
отсортировать слова в соответствии с алфавитом и вывести их. При этом
исходный код программы должен быть как можно &lt;strong&gt;меньше&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Пока я 27-ой в &lt;a class="reference external" href="https://www.spoj.pl/ranks/SLEXSORT/start=20"&gt;таблице результатов по
задаче&lt;/a&gt;, делал я на
Python, больше ужать не выходит:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-n"&gt;r&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-k"&gt;lambda&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-nb"&gt;raw_input&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;rstrip&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
&lt;span class="pgcss-n"&gt;d&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-nb"&gt;xrange&lt;/span&gt;
&lt;span class="pgcss-n"&gt;y&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-nb"&gt;sorted&lt;/span&gt;
&lt;span class="pgcss-n"&gt;t&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-k"&gt;lambda&lt;/span&gt; &lt;span class="pgcss-n"&gt;a&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;&lt;span class="pgcss-n"&gt;b&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;join&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;b&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-n"&gt;a&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;index&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;i&lt;/span&gt;&lt;span class="pgcss-p"&gt;)]&lt;/span&gt;&lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;i&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-n"&gt;a&lt;/span&gt; &lt;span class="pgcss-k"&gt;else&lt;/span&gt; &lt;span class="pgcss-n"&gt;i&lt;/span&gt; &lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-n"&gt;i&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-nb"&gt;map&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;chr&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;d&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-mi"&gt;256&lt;/span&gt;&lt;span class="pgcss-p"&gt;)))&lt;/span&gt;
&lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-n"&gt;_&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-n"&gt;d&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;int&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;r&lt;/span&gt;&lt;span class="pgcss-p"&gt;())):&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;a&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-n"&gt;r&lt;/span&gt;&lt;span class="pgcss-p"&gt;();&lt;/span&gt;&lt;span class="pgcss-n"&gt;b&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-n"&gt;y&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;a&lt;/span&gt;&lt;span class="pgcss-p"&gt;);&lt;/span&gt;&lt;span class="pgcss-n"&gt;s&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;&lt;span class="pgcss-n"&gt;s2&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-n"&gt;t&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;a&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;b&lt;/span&gt;&lt;span class="pgcss-p"&gt;),&lt;/span&gt;&lt;span class="pgcss-n"&gt;t&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;b&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;a&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;print&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39; &amp;#39;&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;join&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;y&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;r&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;translate&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;s&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; \ &lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-n"&gt;_&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-n"&gt;d&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;int&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;r&lt;/span&gt;&lt;span class="pgcss-p"&gt;()))))&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;translate&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;s2&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;&lt;span class="pgcss-o"&gt;+&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39; &amp;#39;&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;r&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Это решение занимает 276 байт, можно сделать и меньше, его можно ещё
чуть-чуть ужать, если убрать пробелы, но в целом у меня больше пока не
получается сжать. Нужно менять идею…&lt;/p&gt;
</summary><category term="python"></category><category term="задача"></category><category term="spoj"></category></entry><entry><title>Нашёл старые скрины</title><link href="/posts/2009/11/02/nashiol-starye-skriny/" rel="alternate"></link><updated>2009-11-02T16:49:40+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-11-02:posts/2009/11/02/nashiol-starye-skriny/</id><summary type="html">&lt;p&gt;Нашёл и смахнул скупую слезу, т.к. вспомнил, что как-то в 2005 году
я запускал Flatout 1, немножко проходил уровни. Но как обычно я не очень
хорошо играю и поэтому никак не мог там прийти к финишу
удовлетворительно только зарабатывал деньги на разрушениях. Но к концу
счастливого дня я случайно на этой машинке «боком заскочил» под
контейнеры, дал задний ход и сбросил его на трассу. Забавно, что
контейнер невозможно было уже сдвинуть с места. Он закрыл всю дорогу, и
боты не могли его объехать, а я объехал. Вот так я и пришёл к финишу
первым, а больше никто не пришёл… x-D&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/97152/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4103/imdagger.3/0_17b80_bd934b79_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;Вот так я вытащил это «зернохранилище» на трассу&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/97153/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/4103/imdagger.4/0_17b81_982cd4b9_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;А вот так боты «долбились» в него&lt;/p&gt;
&lt;p&gt;Проблема в том, куда я его сбросил, там был очень узкий коридор
трассы и всё застряло. Я долго смеялся тогда так: «Мухвахвахваха!».&lt;/p&gt;</summary><category term="Я"></category><category term="воспоминание"></category><category term="играл"></category></entry><entry><title>Что-то не выходит</title><link href="/posts/2009/10/31/chto-to-ne-vykhodit/" rel="alternate"></link><updated>2009-10-31T20:50:03+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-31:posts/2009/10/31/chto-to-ne-vykhodit/</id><summary type="html">&lt;p&gt;&amp;nbsp; Всего лишь три кости в этом мистере-резисторе, а не получается
правильно его проанимировать так, как я хочу. Нужно побольше почитать
про Constraints, и может ещё потребуется создать дополнительные кости…&lt;/p&gt;
</summary><category term="blender"></category></entry><entry><title>Resistance</title><link href="/posts/2009/10/30/resistance/" rel="alternate"></link><updated>2009-10-30T21:33:16+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-30:posts/2009/10/30/resistance/</id><summary type="html">&lt;p&gt;Хочу сделать в BGE небольшую программку, где игрок будет управлять
переключателем, который ездит вверх и вниз, а на него по плате движутся
различные враги. Движутся они разными способами, но карта разделена на
слоты, т.е. все враги движутся только по слотам. Переключатель отделён
барикадой микросхем от основного поля, он ездит туда-сюда и подаёт
напряжение на некоторые контакты. От этого враги погибают. Если ещё всё
это завуалировать и над каждым врагом приделать маленькую тыквочку, то
тогда можно объяснить, что на материской плате в Хэллоуин все резисторы,
диоды, конденсаторы, микроконтроллеры вышли из под контроля и теперь
процессор в опасности и его защищает простой переключатель. Так они
выглядят увеличенные в игровом режиме BGE:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/96536/"&gt;&lt;img alt="Резистор" src="http://img-fotki.yandex.ru/get/4001/imdagger.3/0_17918_afa194eb_L" title="Резистор"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;«Мистер-резистор» (у него ещё будет собрат поОмнее)&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/96537/"&gt;&lt;img alt="Конденсатор" src="http://img-fotki.yandex.ru/get/4006/imdagger.3/0_17919_5b5054b7_L" title="Конденсатор"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;Конденсатор. Может заряжаться и перелетать несколько позиций&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/96538/"&gt;&lt;img alt="Микросхема" src="http://img-fotki.yandex.ru/get/3804/imdagger.3/0_1791a_8e9345a9_L" title="Микросхема"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;Микросхема. Нужно уничтожить все ножки&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/96539/"&gt;&lt;img alt="Рендер микросхемы" src="http://img-fotki.yandex.ru/get/4003/imdagger.3/0_1791b_f4583791_L" title="Рендер микросхемы"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;А это рендер микросхемы&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/96540/"&gt;&lt;img alt="Светодиод" src="http://img-fotki.yandex.ru/get/3906/imdagger.3/0_1791c_e709f896_L" title="Светодиод"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;Светодиод. Стреляет «лучами смерти»&lt;/p&gt;
&lt;p&gt;Даже, если не сделаю (а то времени нынче мало), то хоть модельки
низкополигональные поучусь делать для BGE. Хочу ещё запечь завтра
текстуры с высокополигональных и одеть на эти. Особенно на светодиод :),
а то шероховатый он.&lt;/p&gt;</summary><category term="blender"></category><category term="bge"></category><category term="3d"></category></entry><entry><title>Глоток неба над домом</title><link href="/posts/2009/10/30/glotok-neba-nad-domom/" rel="alternate"></link><updated>2009-10-30T13:15:03+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-30:posts/2009/10/30/glotok-neba-nad-domom/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/96415"&gt;&lt;img alt="Глоток неба над домом" src="http://img-fotki.yandex.ru/get/4001/imdagger.3/0_1789f_2c6dee92_L" title="Глоток неба над домом"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/96419"&gt;&lt;img alt="Глоток неба над домом" src="http://img-fotki.yandex.ru/get/3904/imdagger.3/0_178a3_6834031c_L" title="Глоток неба над домом"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Делать было нечего, сидел кушал батончики “Смак” (в шоколадной глазури).&lt;/p&gt;</summary><category term="небо"></category></entry><entry><title>Курсовая</title><link href="/posts/2009/10/28/kursovaia/" rel="alternate"></link><updated>2009-10-28T19:52:57+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-28:posts/2009/10/28/kursovaia/</id><summary type="html">&lt;p&gt;Доделал курсовую, которую писал человеку (ужасно не выспался за эти
пару дней). Жаль конечно, что пришлось собрать текст в формат doc, т.к.
мне не нужны переработки :). А если преподаватель заподозрит, что тот
человек вообще всё не сам делал, он же начнёт методично искать ошибки в
работе. Работа заключается в создании игрового приложения «Морской бой»
в среде Delphi (да-да! я чуть вспомнил, как на нём программировать x-D).
Я для написания текста несколько глав, чтобы ускорить процесс
скопипастил одолжил из других публичных и бесплатных курсовых работ,
поэтому тоже выкладываю то, что получилось. Вдруг кто-нибудь,
когда-нибудь сюда попадёт из поисковика и найдёт эту работу, а сам не
успевает уже написать курсовую, то пусть берёт эту даром :).&lt;/p&gt;
&lt;p&gt;Вот &lt;a class="reference external" href="https://yadi.sk/d/K33tnpf_UmdNU"&gt;архив&lt;/a&gt;,
там и программа и текст с описанием (исходник вставлен не полность, хоть
требования к оформлению указывали, что нужно, но мне тогда придётся
потратится на 100 листов бумаги против 30).&lt;/p&gt;
&lt;p&gt;P.S. Не советую пробовать прочитать текст курсовой работы или
смотреть прогу тем, кто разбирается в программировании, т.к. такие и
сами могут с лёгкостью написать такую работу. Искусственный интеллект
написан за 1 час — он мутный, но работает, даже пару раз выиграл.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="https://yadi.sk/d/K33tnpf_UmdNU"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4001/imdagger.3/0_17614_1dfcf752_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;P.S.S. Чтобы сделать эту курсовую пришлось найти компьютер у
человека, у которого есть винда :(. Но что же поделаешь: «&lt;strong&gt;Ales non
olet&lt;/strong&gt;».&lt;/p&gt;</summary><category term="курсовая"></category><category term="работа"></category><category term="даром"></category></entry><entry><title></title><link href="/posts/2009/10/28/urn:ya.ru:post/22199227/369/" rel="alternate"></link><updated>2009-10-28T16:15:38+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-28:posts/2009/10/28/urn:ya.ru:post/22199227/369/</id><summary type="html">&lt;p&gt;Деньги-деньги, дребеденьги, Позабыв покой и лень. Делай деньги, делай
деньги, А остальное всё дребедень, А остальное всё дребедебень.&lt;/p&gt;
</summary></entry><entry><title>Стоит задуматься</title><link href="/posts/2009/10/27/stoit-zadumatsia/" rel="alternate"></link><updated>2009-10-27T20:56:10+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-27:posts/2009/10/27/stoit-zadumatsia/</id><summary type="html">&lt;p&gt;Виртуальное кладбище&lt;/p&gt;
</summary><category term="смерть"></category></entry><entry><title>Немножко 3D</title><link href="/posts/2009/10/26/nemnozhko-3d/" rel="alternate"></link><updated>2009-10-26T22:02:42+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-26:posts/2009/10/26/nemnozhko-3d/</id><summary type="html">&lt;p&gt;Что-то я проникся эти морским боем и решил набросать небольшой
вариант подводной лодки. Вообще, сначала я делал его, чтобы отрендерить
в 35x35 пикселей для программы, но потом подумал, что мне придётся
делать сегодня ещё эсминец, крейсер и линкор, а я не успею. Так
выглядить прямо в редакторе:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/95081/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/4002/imdagger.3/0_17369_a42bb2b4_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="cut text-center"&gt;&lt;a class="h-link reference internal" data-toggle="collapse" href="#cut_44007568"&gt;ещё картинки&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_44007568"&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/95082/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/4005/imdagger.3/0_1736a_892729c0_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/95083/"&gt;&lt;img alt="image2" src="http://img-fotki.yandex.ru/get/3801/imdagger.3/0_1736b_ccc3d898_L" title="image2"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/95084/"&gt;&lt;img alt="image3" src="http://img-fotki.yandex.ru/get/3806/imdagger.3/0_1736c_bb5e8441_L" title="image3"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/95085/"&gt;&lt;img alt="image4" src="http://img-fotki.yandex.ru/get/4005/imdagger.3/0_1736d_dee9cdf9_L" title="image4"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;</summary><category term="blender"></category><category term="3d"></category><category term="набросок"></category></entry><entry><title></title><link href="/posts/2009/10/26/urn:ya.ru:post/22199227/363/" rel="alternate"></link><updated>2009-10-26T16:39:31+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-26:posts/2009/10/26/urn:ya.ru:post/22199227/363/</id><summary type="html">&lt;p&gt;Я разучился говорить, а ещё и писАть ручкой (-:&lt;/p&gt;
</summary></entry><entry><title>Вся жизнь в морском бое</title><link href="/posts/2009/10/26/vsia-zhizn-v-morskom-boe/" rel="alternate"></link><updated>2009-10-26T16:28:05+02:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-26:posts/2009/10/26/vsia-zhizn-v-morskom-boe/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Взялся я неделю назад помочь сделать курсовую (естественно не по
доброте душевной, а из корыстных целей), но там нужно разработать
программу «Морской бой» на Delphi, но я почти всё время «просадил» на
написание модуля на Java для своего диплома. А ещё я уже подзабыл и язык
и среду, и библиотеку компонентов VCL, но… всё же программу я написал
быстро, всего за пару часов с интеллектом для бота. А вот текст писать
очень лениво, да и отдавать завтра уже, пришлось обратиться к Гуглу и
нарыть немножко чужих текстов (такой особенный катализатор для моего
дела). Собрав ещё материал из Википедии и свой, который я осилил
написать, я получил полную сборку. Теперь меня ожидает только ночь
переработки и оформления. Завтра уже будет всё готово.&lt;/p&gt;
&lt;p&gt;Правила для для атаки вышли такие (символ минуса — тело, а буква —
выстрел):&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Однозначно определить корабли &lt;strong&gt;x--x&lt;/strong&gt;, и вертикальные такие же, но
это правило не применять к кораблям размером 1x1;&lt;/li&gt;
&lt;li&gt;После определения добавить «ореолы» для кораблей на карту пометок, а
сами тела отметить как проверенные, т.е. заполнить при помощи
«&lt;strong&gt;x&lt;/strong&gt;».&lt;/li&gt;
&lt;li&gt;Произвести поиск кораблей, которые определяются однозначно по длине,
т.е. если обнаружен вида &lt;strong&gt;---&lt;/strong&gt; или &lt;strong&gt;x---&lt;/strong&gt;, или &lt;strong&gt;---x&lt;/strong&gt;, или их
вертикальные аналоги, но корабль длиной на 1 больше, чем это поле,
был уже использован, то с кораблём поступают как в пункте 2. Эта
операция делается от 4 → 1 до первой неоднозначности, т.е. размер
области меньше, чем возможно размещаемый корабль (который требуется
отыскать).&lt;/li&gt;
&lt;li&gt;Производится ход (удар в край), чтобы устранить неоднозначность и
выяснить размеры корабля.&lt;/li&gt;
&lt;li&gt;Если ничего не нашлось, то для каждой клетки при помощи волнового
алгоритма находится площадь области, которой клетка принадлежит.
Выбирается предполагаемый корабль-жертва, всевозможными способами
нужно попробовать его разместить на карте (это не долго и не много,
т.к. корабли изгибать нельзя и вращать можно только на 90 градусов, а
поле всего 10x10). Площадь корабля делится на площадь области для
клетки и это число прибавляется к её весу. В конце находится
наибольший вес, по этой клетке и нужно произвести атаку.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Для защиты можно воспользоваться стратегией &lt;strong&gt;Перельмана Я.И.&lt;/strong&gt;&lt;/p&gt;
</summary><category term="горе"></category><category term="радость"></category><category term="delphi"></category><category term="жизнь"></category></entry><entry><title>Патч</title><link href="/posts/2009/10/24/patch/" rel="alternate"></link><updated>2009-10-24T21:52:46+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-24:posts/2009/10/24/patch/</id><summary type="html">&lt;p&gt;Потратил сегодня несколько часов для того, чтобы исправить все
ошибки, которые я нашёл фоновом копировании, а так же новые добавленные
мной. Теперь окончательный патч для ветки 1500-ого тикета выглядит
&lt;a class="reference external" href="https://www.midnight-commander.org/attachment/ticket/1500/0001-Fixed-problems.patch"&gt;так&lt;/a&gt;.
Он исправляет проблему, что процессы не исчезают после завершения из
списка по &lt;kbd class="kbd"&gt;
C-x j&lt;/kbd&gt;
, а также предупреждение и перезапись по умолчанию
при фоновом копировании. Теперь появляется сообщение, но оно может
появится и в момент, когда не ожидаешь ;), т.к. файл, который
обрабатывается в фоне может, например, не удастся записать.&lt;/p&gt;
&lt;p&gt;Посмотрел параметры и как работать с &lt;strong&gt;waitpid&lt;/strong&gt; в *nix, а то
раньше не приходилось сталкиваться. Заюзал полезную функцию &lt;strong&gt;getpid&lt;/strong&gt;,
чтобы фоновые процессы могли узнать, кто они и отправить сигнал предку
на дерегистрацию себя.&lt;/p&gt;
&lt;p&gt;P.S. А так весь день воевал с модулем для диплома.&lt;/p&gt;
</summary><category term="патч"></category><category term="midnight commander"></category></entry><entry><title>Чтение данных</title><link href="/posts/2009/10/23/chtenie-dannykh/" rel="alternate"></link><updated>2009-10-23T21:58:59+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-23:posts/2009/10/23/chtenie-dannykh/</id><summary type="html">&lt;p&gt;Да пожалуй не стоит внутри BaseHTTPRequestHandler делать вот так:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-k"&gt;class&lt;/span&gt; &lt;span class="pgcss-err"&gt;...&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-err"&gt;... (...):&lt;/span&gt;
        &lt;span class="pgcss-o"&gt;...&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;answer&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;urllib&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;urlopen&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;тут http путь&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;answer_data&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;answer&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;read&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
        &lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;wfile&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;write&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;answer_data&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Чревато тем, что функция read пытается прочитать всё  из ответа сервера,
а это может быть очень много, и весь этот промежуток времени HTTP-прокси
сервер не отвечает своему клиенту, сам считывая данные. Нужно поменять
такой код, например на:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-k"&gt;class&lt;/span&gt; &lt;span class="pgcss-err"&gt;...&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-err"&gt;... (...):&lt;/span&gt;
        &lt;span class="pgcss-o"&gt;...&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;answer&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;urllib&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;urlopen&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;тут http путь&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;answer_data&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-bp"&gt;True&lt;/span&gt;

        &lt;span class="pgcss-k"&gt;while&lt;/span&gt; &lt;span class="pgcss-n"&gt;answer_data&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
            &lt;span class="pgcss-n"&gt;answer_data&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;answer&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;read&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-mi"&gt;4096&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
            &lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;wfile&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;write&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;answer_data&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Таким образом получается блочное чтение и сервер «не замерзает». Python
считает &lt;strong&gt;’’&lt;/strong&gt; при проверке на истинность ложью, а read возвращает
&lt;strong&gt;’’&lt;/strong&gt;, если ничего не считал (это две кавычки, т.е. пустая строка).&lt;/p&gt;
</summary><category term="python"></category><category term="HTTP"></category></entry><entry><title>Размял мозг</title><link href="/posts/2009/10/22/razmial-mozg/" rel="alternate"></link><updated>2009-10-22T20:01:06+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-22:posts/2009/10/22/razmial-mozg/</id><summary type="html">&lt;p&gt;Пришёл тут rework по поводу моего патча к
&lt;a class="reference external" href="https://www.midnight-commander.org/ticket/1500"&gt;1500&lt;/a&gt; тикету (а я
же не могу спать, когда мои патчи не кормлены), который я когда-то
создавал. Ура! Наконец-то его посмотрели и сказали, что в нём есть
небольшая бага: при попытке перезаписать файл в &lt;strong&gt;фоновом копировании&lt;/strong&gt;,
Midnight Commander выводит предупреждение и перезаписывает файл без
запроса к пользователю. Оказалось, что в исходниках просто присваивалось
&lt;code class="code"&gt;
ctx-&amp;gt;ui = NULL&lt;/code&gt;
, если процесс фоновый, в принципе это было отчати
логично, чтобы дочерние процессы сами не пытались отображать информацию.
Поэтому пришлось частично инициализировать этот контекст операции, в
случае do_bg равного истине, ещё до того, как произошёл fork. Наваял
такой
&lt;a class="reference external" href="https://www.midnight-commander.org/attachment/ticket/1500/background_fix_assert.diff"&gt;патч&lt;/a&gt;,
буду ждать ответа (или схожу на канал), а то там уже даже ветку
1500_segfault_on_bg_copy создали, которую я так долго ждал :). Нужно
будет ещё исправить проблему с &lt;kbd class="kbd"&gt;
C-x j&lt;/kbd&gt;
, где-то я накосячил…&lt;/p&gt;
&lt;p&gt;Заметил, что все как-то красиво вставляют чейнжсет в &lt;strong&gt;Trac&lt;/strong&gt;, а я
не знаю как, поэтому перечитал документацию по работе с его Wiki.
Оказалось, что он сам обнаруживает в тексте упоминания чейнжсетов и
делает ссылки, т.е. пишешь просто
(c75ebb2ab9b9002bc26741968092d32dc048104d), а получаешь:
(&lt;a class="reference external" href="https://www.midnight-commander.org/changeset/c75ebb2ab9b9002bc26741968092d32dc048104d"&gt;c75ebb2ab9b9002bc26741968092d32dc048104d&lt;/a&gt;).&lt;/p&gt;
</summary><category term="патч"></category><category term="тикет"></category><category term="midnight commander"></category><category term="копирование"></category></entry><entry><title></title><link href="/posts/2009/10/21/urn:ya.ru:post/22199227/358/" rel="alternate"></link><updated>2009-10-21T21:09:47+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-21:posts/2009/10/21/urn:ya.ru:post/22199227/358/</id><summary type="html">&lt;p&gt;Нужно себе вбить гвоздик (в голову!!) с надписью: “Не сравнивать в Java
объекты типа Long при помощи == и !=”.&lt;/p&gt;
</summary></entry><entry><title>Мысли в слух</title><link href="/posts/2009/10/20/mysli-v-slukh/" rel="alternate"></link><updated>2009-10-20T21:55:14+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-20:posts/2009/10/20/mysli-v-slukh/</id><summary type="html">&lt;p&gt;&lt;strong&gt;На заметку себе:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Стоит ввести интерфейс IVersioned с методом getVersion(), т.к.
сейчас и Cell и SubCell, BaseSubCell, Row, RowsTable данный метод
реализуют, но как бы ничего общего не имеют. Из-за отсутствия такого
интерфейса существует проблема, что при наличии CellDao и CellService
класс Row всё же завязан чуть-чуть на методе класса Cell, что является
не очень хорошей практикой.&lt;/p&gt;
</summary><category term="Я"></category><category term="заметка"></category></entry><entry><title>Наследование, Hibernate и NativeSQL</title><link href="/posts/2009/10/20/nasledovanie-hibernate-i-nativesql/" rel="alternate"></link><updated>2009-10-20T20:38:55+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-20:posts/2009/10/20/nasledovanie-hibernate-i-nativesql/</id><summary type="html">&lt;p&gt;Всё было хорошо, пока был всего один класс и для него был свой
NativeSQL. Но потом я унаследовал от него другой, расширенный класс и
создал для него свой SQL. И тут такое началось, ругалось в логах чем-то
таким (точн оуже не помню, вчера это было):&lt;/p&gt;
&lt;blockquote&gt;
67770 [http-8080-1] ERROR org.hibernate.util.JDBCExceptionReporter -
Invalid column name DTYPE.&lt;/blockquote&gt;
&lt;p&gt;Пришлось в SQL добавить при выборке ещё одно поле &lt;strong&gt;‘имя класса’ as
DTYPE&lt;/strong&gt;. А в родительский класс:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;span class="pgcss-nd"&gt;@NamedNativeQuery&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;name&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;quot;лалала&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;resultClass&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;BaseClass&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;class&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-o"&gt;...)&lt;/span&gt;
&lt;span class="pgcss-kd"&gt;class&lt;/span&gt; &lt;span class="pgcss-nc"&gt;BaseClass&lt;/span&gt; &lt;span class="pgcss-o"&gt;...&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;
&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
    &lt;span class="pgcss-nd"&gt;@Column&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;name&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;DTYPE&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;insertable&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-kc"&gt;false&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;updateable&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-kc"&gt;false&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-kd"&gt;public&lt;/span&gt; &lt;span class="pgcss-n"&gt;String&lt;/span&gt; &lt;span class="pgcss-nf"&gt;getDtype&lt;/span&gt;&lt;span class="pgcss-o"&gt;()&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-n"&gt;dtype&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;}&lt;/span&gt;
    &lt;span class="pgcss-kd"&gt;public&lt;/span&gt; &lt;span class="pgcss-kt"&gt;void&lt;/span&gt; &lt;span class="pgcss-nf"&gt;setDtype&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;String&lt;/span&gt; &lt;span class="pgcss-n"&gt;dtype&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;this&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;dtype&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;dtype&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;}&lt;/span&gt;
&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;span class="pgcss-o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Вроде пока работает, но нужно подумать, как «выровнять» это всё, а то
как-то некрасиво в SQL вписывать ещё раз имя класса.&lt;/p&gt;
</summary><category term="наследование"></category><category term="hibernate"></category></entry><entry><title>КУ</title><link href="/posts/2009/10/18/ku/" rel="alternate"></link><updated>2009-10-18T14:40:26+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-18:posts/2009/10/18/ku/</id><summary type="html">&lt;p&gt;Гы.. набрал КУ равный своему возрасту, прикольно. Следующая цель 256КУ
(такое круглое число), да-да я люблю красивые числа (&lt;del class="del"&gt;
извращённые
склонности к математике&lt;/del&gt;
).&lt;/p&gt;
</summary><category term="Яндекс"></category><category term="бредни"></category></entry><entry><title>Мочкинизм</title><link href="/posts/2009/10/17/mochkinizm/" rel="alternate"></link><updated>2009-10-17T20:35:32+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-17:posts/2009/10/17/mochkinizm/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Как только я получу хоть один комментарий или завтра напишу запись,
то у меня будет 21КУ :). Ура!! Будет ровно столько, сколько мне лет
(главное получить 22КУ до 22 лет, а это уже скоро, надеюсь доживу :S).
Нет я не мочкинист, не стараюсь набивать КУ, но мне *стыдно*, хоть и
выйдет хорошее и радужное число :).&lt;/p&gt;
</summary><category term="Яндекс"></category></entry><entry><title>Рабочая заметка</title><link href="/posts/2009/10/17/rabochaia-zametka/" rel="alternate"></link><updated>2009-10-17T19:49:12+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-17:posts/2009/10/17/rabochaia-zametka/</id><summary type="html">&lt;ul class="simple"&gt;
&lt;li&gt;TableController создаёт небольшую обёртку-итератор, которая итерирует
по рядам таблицы и возвращает только те, которые входят в
отображаемую группу пользователей.&lt;/li&gt;
&lt;li&gt;С фильтрацией колонок нужно поступить аналогично. Для итерации
возвращается обёртка, которая берёт только ячейки требуемого типа.&lt;/li&gt;
&lt;li&gt;Таблица с отображением рядов с результирующими ячейками наследована
от базовой RowsTable. Ряды в такой таблице являются объектами класса
наследованного от Row, возвращающего дополнительую ячейку при
итерации (это ячейка суммы).&lt;/li&gt;
&lt;/ul&gt;
</summary><category term="диплом"></category></entry><entry><title>Слепой мастер</title><link href="/posts/2009/10/17/slepoi-master/" rel="alternate"></link><updated>2009-10-17T15:00:23+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-17:posts/2009/10/17/slepoi-master/</id><summary type="html">&lt;div class="alert  alert-danger compound"&gt;
&lt;p&gt;&lt;strong&gt;Осторожно мои бредни!&lt;/strong&gt; Чревато разрывом мозга, капли которого
могут попасть на клавиатуру и закоротить компьютер. Возможны и иные виды
травм. Во время бредописания не пострадал ни один человеческий мозг,
лишь мозг автора, но он и так воспалён и болен.&lt;/p&gt;
&lt;/div&gt;
&lt;p class="cut"&gt;&lt;a class="h-link reference internal" href="#cut_44065616"data-toggle="collapse"&gt;мой мозг сильный, ручаюсь, что выдержу&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_44065616"&gt;
&lt;p&gt;В одной далёкой деревушке на окраине в шалаше проживал слепой
мастер Астерсон. Он любил собирать различные устройства для людей, но
всю жизнь хотел построить дом. А научится этому делу будучи слепым было
сложно. Поэтому он старался создавать то, что у него получалось хорошо —
механизмы. Мастер часто общался с одним жителем деревни по имени Туриан,
одним из немногих, который его понимал и жалел. Остальные лишь
пользовались услугами мастера, но не чувствовали уважения к нему. В знак
благодарности Астерсон всё же решился попробовать построить дом для
него, но приподнести это как сюрприз.&lt;/p&gt;
&lt;p&gt;Набрав целый воз кирпича он поплёлся ночью к Туриану. Бедный мастер
не знал, что у жителя уже есть кирпичный дом, ему давно построили жильё,
но он это увидеть не мог. Астерсон положил первый кирпич на землю и
намазал его глиной, пробормотав про себя: “Кое-что и тут я умею. Вроде
всё так просто. Вот Туриан обрадуется, когда проснётся!”.&lt;/p&gt;
&lt;p&gt;И со счастливой улыбкой на лице он продолжал кое-как класть кирпичи,
даже не создав фундамент. Слепой мастер не мог оценить взором свой труд,
но свято верил, что он движется в верном направлении: “Ещё чуть-чуть,
вот … ещё кирпичик… ещё капелька, всё!”.&lt;/p&gt;
&lt;p&gt;Пришло утро и Туриан проснулся. Астерсон кемарил возле своей
постройки. Первое, что житель прокричал на всю деревню было: “Это, что
ещё за  #&amp;#64;!44## стоит у меня на земле !!?”. Вокруг дома красовался
огромный толстый и кривой кирпичный забор, который загородил свет во все
окна. Он долго хотел накричать на мастера, готов был просто разорвать
его на куски. Но не сделал из-за своей излишней вежливости. Нет.. Туриан
просто так не стоял, он начал рушить забор ничего не объяснив, делая это
в полной тишине. Только звук столкнувшихся лоб в лоб молотка и кирпича
отзывался эхом повсюду.&lt;/p&gt;
&lt;p&gt;Астерсон так ничего и не понял, он хотел объяснений, но решил что
лучше просто уйти и не раздражать.  Он просто исчез из этого мира… нууу…
нет! всё было не так. На самом деле теперь последний житель деревни
изчез из слепого мастера. Других он уже давно не видел.&lt;/p&gt;
&lt;p&gt;Даже, если ты строишь большое и чистое, просторное, то не забывай
проверять: может там уже внутри дом, а ты лишь строишь забор без основы,
да и тот раздражает жителя. И порой будучи слепым лучше промахнутся и
построить не в том месте, чем потом узнать гнев Туриана… пусть он лучше
посмеётся просто над твоей глупостью и неловкостью.&lt;/p&gt;
&lt;/div&gt;
</summary><category term="рассказ"></category><category term="бредни"></category></entry><entry><title></title><link href="/posts/2009/10/17/urn:ya.ru:post/22199227/337/" rel="alternate"></link><updated>2009-10-17T11:46:01+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-17:posts/2009/10/17/urn:ya.ru:post/22199227/337/</id><summary type="html">&lt;p&gt;Наконец мысли собрались в единое целое, теперь даты, слова, действия,
они осознаны… связаны. Теперь проще, почти всё ясно.&lt;/p&gt;
</summary></entry><entry><title></title><link href="/posts/2009/10/16/urn:ya.ru:post/22199227/334/" rel="alternate"></link><updated>2009-10-16T19:58:31+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-16:posts/2009/10/16/urn:ya.ru:post/22199227/334/</id><summary type="html">&lt;p&gt;Трудно штурмовать крепость, когда ты страшнейший враг и не знаешь
подходов&lt;/p&gt;
</summary></entry><entry><title>Кеширование</title><link href="/posts/2009/10/16/keshirovanie/" rel="alternate"></link><updated>2009-10-16T19:55:03+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-16:posts/2009/10/16/keshirovanie/</id><summary type="html">&lt;p&gt;&lt;a class="reference external" href="http://smajliki.ru/smilie-322805799.html"&gt;&lt;img alt="image0" src="http://s3.rimg.info/7cf3029812efca5d67443a7c072fd417.gif" title="image0"/&gt;&lt;/a&gt; Можно конечно попробовать для кеширования страниц настроить Apache
(остальные данные я кеширую при помощи EhCache, как и положено), но
нашёл ещё один вариант, ктоторый мне тоже нравится: кешировать страницы
при помощи EhCache. Благо есть класс &lt;strong&gt;SimplePageCachingFilter&lt;/strong&gt;. Нужно
будет только в web.xml добавить настройки фильтра:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-nt"&gt;&amp;lt;filter&amp;gt;&lt;/span&gt;
    &lt;span class="pgcss-nt"&gt;&amp;lt;filter-name&amp;gt;&lt;/span&gt;CacheFilter&lt;span class="pgcss-nt"&gt;&amp;lt;/filter-name&amp;gt;&lt;/span&gt;
    &lt;span class="pgcss-nt"&gt;&amp;lt;filter-class&amp;gt;&lt;/span&gt;net.sf.ehcache.construct.web.filter.SimplePageCachingFilter&lt;span class="pgcss-nt"&gt;&amp;lt;/filter-class&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;/filter&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Попробую, когда допишу кеширование таблицы. Кеширования рядов по
пользователям уже сделал.&lt;/p&gt;</summary><category term="EhCache"></category><category term="кеширование"></category></entry><entry><title>Прокол</title><link href="/posts/2009/10/15/prokol/" rel="alternate"></link><updated>2009-10-15T20:00:23+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-15:posts/2009/10/15/prokol/</id><summary type="html">&lt;p&gt;Когда я делал черновой класс Cell, то добавил туда метод
getVersionObject, который возвращал объект версии ячейки (SQL-сервер сам
увеличивал это значение у себя):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kd"&gt;public&lt;/span&gt; &lt;span class="pgcss-n"&gt;Version&lt;/span&gt; &lt;span class="pgcss-nf"&gt;getVersionObject&lt;/span&gt;&lt;span class="pgcss-o"&gt;()&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-k"&gt;new&lt;/span&gt; &lt;span class="pgcss-nf"&gt;Version&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;timeStamp&lt;/span&gt;&lt;span class="pgcss-o"&gt;);&lt;/span&gt;
&lt;span class="pgcss-o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;На что радостно при загрузке страницы Apache заявил, что не может
найти метод set для versionObject. Поразмыслив я пришёл в выводу, что
это же bean и Hibernate пытается инициализировать и это поле потому, что
название метода начинается на get. Я попытался добавить setVersionObject
(хотя мне это не требовалось, просто добавил для проверки), но Hibernate
заявил, что не знает как инициализировать versionObject на основании
запроса, т.к. такого поля в таблице нет. Чтобы решить эту проблему я
переименовал метод в versionObject. После этого библиотека перестала
думать, что этот метод относится к бину.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kd"&gt;public&lt;/span&gt; &lt;span class="pgcss-n"&gt;Version&lt;/span&gt; &lt;span class="pgcss-nf"&gt;versionObject&lt;/span&gt;&lt;span class="pgcss-o"&gt;()&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-k"&gt;new&lt;/span&gt; &lt;span class="pgcss-nf"&gt;Version&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;timeStamp&lt;/span&gt;&lt;span class="pgcss-o"&gt;);&lt;/span&gt;
&lt;span class="pgcss-o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p class="cut"&gt;&lt;a class="h-link reference internal" href="#cut_44194576"data-toggle="collapse"&gt;но это не всё&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_44194576"&gt;
&lt;p&gt;Потом я прокололся на том, что передал в JSP представление объект
класса Row, который реализует интерфейс Iterable. Но выпала ошибка:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-n"&gt;javax&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;servlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;jsp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;JspTagException&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt; &lt;span class="pgcss-n"&gt;Don&lt;/span&gt;&lt;span class="pgcss-err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="pgcss-n"&gt;t&lt;/span&gt; &lt;span class="pgcss-n"&gt;know&lt;/span&gt; &lt;span class="pgcss-n"&gt;how&lt;/span&gt; &lt;span class="pgcss-n"&gt;to&lt;/span&gt; &lt;span class="pgcss-n"&gt;iterate&lt;/span&gt; &lt;span class="pgcss-n"&gt;over&lt;/span&gt; &lt;span class="pgcss-n"&gt;supplied&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;quot;items&amp;quot;&lt;/span&gt; &lt;span class="pgcss-n"&gt;in&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="pgcss-n"&gt;lt&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;&lt;span class="pgcss-n"&gt;forEach&lt;/span&gt;&lt;span class="pgcss-o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="pgcss-n"&gt;gt&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
  &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;taglibs&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;standard&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;tag&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;common&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;core&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ForEachSupport&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;toForEachIterator&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ForEachSupport&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;274&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
  &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;taglibs&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;standard&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;tag&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;common&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;core&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ForEachSupport&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;supportedTypeForEachIterator&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ForEachSupport&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;238&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
&lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;taglibs&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;standard&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;tag&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;common&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;core&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ForEachSupport&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;prepare&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ForEachSupport&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;155&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;А нужно было передать не объект, а его итератор:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-n"&gt;modelAndView&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;addObject&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;row&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;oneRow&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;iterator&lt;/span&gt;&lt;span class="pgcss-o"&gt;());&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Но на этом мучения не закончились. Возникла проблема, что объекты
кешировались при помощи EhCache, но мой код каждый раз считал данные
оттуда устаревшими. Постепенно подозрения стали падать на небольшой
класс Version, я никак не хотел верить, что там есть ошибка &lt;del class="del"&gt;
да-да я его
почти не тестировал, он же черновой&lt;/del&gt;
...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-nd"&gt;@Override&lt;/span&gt;
&lt;span class="pgcss-kd"&gt;public&lt;/span&gt; &lt;span class="pgcss-kt"&gt;int&lt;/span&gt; &lt;span class="pgcss-nf"&gt;compareTo&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Object&lt;/span&gt; &lt;span class="pgcss-n"&gt;o&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;Version&lt;/span&gt; &lt;span class="pgcss-n"&gt;other&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Version&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt; &lt;span class="pgcss-n"&gt;o&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
    &lt;span class="pgcss-kt"&gt;byte&lt;/span&gt;&lt;span class="pgcss-o"&gt;[]&lt;/span&gt; &lt;span class="pgcss-n"&gt;ovs&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;other&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;get&lt;/span&gt;&lt;span class="pgcss-o"&gt;();&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-kt"&gt;int&lt;/span&gt; &lt;span class="pgcss-n"&gt;i&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-mi"&gt;0&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt; &lt;span class="pgcss-n"&gt;i&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="pgcss-n"&gt;ts&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;length&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt; &lt;span class="pgcss-n"&gt;i&lt;/span&gt;&lt;span class="pgcss-o"&gt;++)&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ts&lt;/span&gt;&lt;span class="pgcss-o"&gt;[&lt;/span&gt;&lt;span class="pgcss-n"&gt;i&lt;/span&gt;&lt;span class="pgcss-o"&gt;]&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="pgcss-n"&gt;ovs&lt;/span&gt;&lt;span class="pgcss-o"&gt;[&lt;/span&gt;&lt;span class="pgcss-n"&gt;i&lt;/span&gt;&lt;span class="pgcss-o"&gt;])&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-o"&gt;-&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;else&lt;/span&gt; &lt;span class="pgcss-nf"&gt;if&lt;/span&gt; &lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ts&lt;/span&gt;&lt;span class="pgcss-o"&gt;[&lt;/span&gt;&lt;span class="pgcss-n"&gt;i&lt;/span&gt;&lt;span class="pgcss-o"&gt;]&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pgcss-n"&gt;ovs&lt;/span&gt;&lt;span class="pgcss-o"&gt;[&lt;/span&gt;&lt;span class="pgcss-n"&gt;i&lt;/span&gt;&lt;span class="pgcss-o"&gt;])&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;}&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-mi"&gt;0&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
 &lt;span class="pgcss-o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Да, названия переменных кривые x-D, но оно и сделано по-быстрому,
проверить прототип. Казалось проблемы нет, но я же забыл, что в Java
значения типа byte лежат на отрезке &lt;code class="code"&gt;
-128 … 127&lt;/code&gt;
. Поэтому мои массивы
сравнивались неверно, а обнаружил лишь благодаря тому, что в рабочей
базе оказались два значения отличающиеся только последним байтом: в
одном &lt;code class="code"&gt;
0x81&lt;/code&gt;
, а во втором &lt;code class="code"&gt;
0x7F&lt;/code&gt;
 :P. И моя функция говорила, что
первое меньше второго. Пришлось поправить её, но в Java нет беззнаковых
типов, поэтому решил вопрос временно так:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-nd"&gt;@Override&lt;/span&gt;
&lt;span class="pgcss-kd"&gt;public&lt;/span&gt; &lt;span class="pgcss-kt"&gt;int&lt;/span&gt; &lt;span class="pgcss-nf"&gt;compareTo&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Object&lt;/span&gt; &lt;span class="pgcss-n"&gt;o&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;Version&lt;/span&gt; &lt;span class="pgcss-n"&gt;other&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Version&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt; &lt;span class="pgcss-n"&gt;o&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
    &lt;span class="pgcss-kt"&gt;byte&lt;/span&gt;&lt;span class="pgcss-o"&gt;[]&lt;/span&gt; &lt;span class="pgcss-n"&gt;ovs&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;other&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;get&lt;/span&gt;&lt;span class="pgcss-o"&gt;();&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-kt"&gt;int&lt;/span&gt; &lt;span class="pgcss-n"&gt;i&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-mi"&gt;0&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt; &lt;span class="pgcss-n"&gt;i&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="pgcss-n"&gt;ts&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;length&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt; &lt;span class="pgcss-n"&gt;i&lt;/span&gt;&lt;span class="pgcss-o"&gt;++)&lt;/span&gt;  &lt;span class="pgcss-o"&gt;{&lt;/span&gt;
        &lt;span class="pgcss-kt"&gt;int&lt;/span&gt; &lt;span class="pgcss-n"&gt;tsByte&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-o"&gt;((&lt;/span&gt;&lt;span class="pgcss-kt"&gt;int&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;&lt;span class="pgcss-n"&gt;ts&lt;/span&gt;&lt;span class="pgcss-o"&gt;[&lt;/span&gt;&lt;span class="pgcss-n"&gt;i&lt;/span&gt;&lt;span class="pgcss-o"&gt;]&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt; &lt;span class="pgcss-mi"&gt;256&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;%&lt;/span&gt; &lt;span class="pgcss-mi"&gt;256&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
        &lt;span class="pgcss-kt"&gt;int&lt;/span&gt; &lt;span class="pgcss-n"&gt;ovsByte&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-o"&gt;((&lt;/span&gt;&lt;span class="pgcss-kt"&gt;int&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;&lt;span class="pgcss-n"&gt;ovs&lt;/span&gt;&lt;span class="pgcss-o"&gt;[&lt;/span&gt;&lt;span class="pgcss-n"&gt;i&lt;/span&gt;&lt;span class="pgcss-o"&gt;]&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt; &lt;span class="pgcss-mi"&gt;256&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;%&lt;/span&gt; &lt;span class="pgcss-mi"&gt;256&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;tsByte&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="pgcss-n"&gt;ovsByte&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-o"&gt;-&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
         &lt;span class="pgcss-k"&gt;else&lt;/span&gt; &lt;span class="pgcss-nf"&gt;if&lt;/span&gt; &lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;tsByte&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pgcss-n"&gt;ovsByte&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;}&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-mi"&gt;0&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
&lt;span class="pgcss-o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
</summary><category term="java"></category></entry><entry><title>Обновился</title><link href="/posts/2009/10/15/obnovilsia/" rel="alternate"></link><updated>2009-10-15T15:27:53+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-15:posts/2009/10/15/obnovilsia/</id><summary type="html">&lt;p&gt;Обновился до новой версии Opera, теперь у меня 10-я :). И заодно
обновил Flash Player до 10 версии. Теперь буду смотреть, как оно у меня
фурычит.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/92170/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3901/imdagger.3/0_1680a_6c76c18e_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="обновление"></category><category term="opera"></category></entry><entry><title></title><link href="/posts/2009/10/14/urn:ya.ru:post/22199227/327/" rel="alternate"></link><updated>2009-10-14T20:14:50+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-14:posts/2009/10/14/urn:ya.ru:post/22199227/327/</id><summary type="html">&lt;p&gt;Нужен душевный взрыв, который простимулирует все творческие и
технические процессы&lt;/p&gt;
</summary></entry><entry><title>Сушу сухари</title><link href="/posts/2009/10/14/sushu-sukhari/" rel="alternate"></link><updated>2009-10-14T20:11:55+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-14:posts/2009/10/14/sushu-sukhari/</id><summary type="html">&lt;p&gt;Пришёл декан и попугал всех распределением. Теперь руки думают
собирать все бумажки, чтобы остаться там, где работаю. Ноги, ноги… они
так висят без дела, иногда бегают в универ, точнее таскают то, что
приросло к ним сверху. Туловище пытается отапливать все части так, чтобы
я не окочурился дома, где нет ещё тепла (может стоит жить на работе
O_o?, тут жарко и весело). Голова всем органам сказала, чтобы
угомонились, у неё самая важная задача. Это: поспать, поесть (&lt;del class="del"&gt;
да,
головой, как ни прискорбно, я ем&lt;/del&gt;
), думать диплом, работу, учёбу (ну тут
всё просто) и пытаться улучшить жизнь. Остальные всякие придаточные
органы и не спрашивали x-D.&lt;/p&gt;
&lt;p&gt;Ну и конечно же:&lt;/p&gt;
&lt;p&gt;Наконец набросал для диплома классы Cell, CellDao, CellService, Row,
RowDao, RowService, интерфейсы ICellDao, ICellService, IRowDao,
IRowService и контроллер TableController. Осталось реализовать класс
таблицы, вкрутить в его сервис кеширование&amp;nbsp;тоже (одно уже есть на уровне
рядов). Вообщем чуть выбился из графика, но это из-за того, что пишу
обычно на Python, а тут на Java. И мне приходится осваиваться с
Hibernate и Spring.&lt;/p&gt;
</summary><category term="жизнь"></category><category term="бредни"></category></entry><entry><title>Clonezilla</title><link href="/posts/2009/10/13/clonezilla/" rel="alternate"></link><updated>2009-10-13T20:53:07+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-13:posts/2009/10/13/clonezilla/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Ура! Оно наконец-то стало восстанавливать по broadcat’у образ с
почти такой же скоростью, как и один компьютер. Выходит для упакованного
образа 3GiB (6GiB не сжатый) установить его за ~20 минут по 100Mib сети.
Всего-то стоило подёргать коннекторы в свиче и сервере x-D.&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; Теперь сижу накатываю новый образ, даже хватило времени сюда что-то
написать.&lt;/p&gt;
</summary><category term="clonezilla"></category><category term="broadcast"></category></entry><entry><title>Бедный мой ДНК</title><link href="/posts/2009/10/13/bednyi-moi-dnk/" rel="alternate"></link><updated>2009-10-13T20:27:15+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-13:posts/2009/10/13/bednyi-moi-dnk/</id><summary type="html">&lt;p&gt;Как и следовало ожидать ошибка в моём ДНК :). Предыдущая проблема с
&lt;strong&gt;SSL&lt;/strong&gt; была связана с тем, что к моему «сервису» приходил от браузера
HTTPS-запрос с методом &lt;strong&gt;CONNECT&lt;/strong&gt;, а я ожидал HTTPS-запрос. Пришлось
перенести логику с SSL :), т.к. браузер &lt;a class="reference external" href="https://"&gt;https://&lt;/a&gt; запросы делал через
прокси, посылая первый открытым способом &lt;del class="del"&gt;
остальные пока не знаю&lt;/del&gt;
.&lt;/p&gt;
</summary><category term="python"></category><category term="ssl"></category></entry><entry><title>pyOpenSSL</title><link href="/posts/2009/10/12/pyopenssl/" rel="alternate"></link><updated>2009-10-12T20:34:20+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-12:posts/2009/10/12/pyopenssl/</id><summary type="html">&lt;p&gt;Что-то пока не вышло сделать нормальный HTTPS редиректор (это что-то
типа моего самопального хитрого прокси :P). Почему-то SSL законючил и
сказал:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-x"&gt;… начало …&lt;/span&gt;
  File &lt;span class="pgcss-nb"&gt;&amp;quot;/usr/lib/python2.5/BaseHTTPServer.py&amp;quot;&lt;/span&gt;, line &lt;span class="pgcss-m"&gt;316&lt;/span&gt;, in &lt;span class="pgcss-n"&gt;handle&lt;/span&gt;
&lt;span class="pgcss-gr"&gt;  self.handle_one_request()&lt;/span&gt;
&lt;span class="pgcss-gr"&gt;  File &amp;quot;redirector.py&amp;quot;, line 107, in handle_one_request&lt;/span&gt;
&lt;span class="pgcss-gr"&gt;  self.raw_requestline = self.rfile.readline()&lt;/span&gt;
&lt;span class="pgcss-gr"&gt;  File &amp;quot;/usr/lib/python2.5/socket.py&amp;quot;, line 345, in readline&lt;/span&gt;
&lt;span class="pgcss-gr"&gt;  data = self._sock.recv(self._rbufsize)&lt;/span&gt;
&lt;span class="pgcss-gr"&gt;Error&lt;/span&gt;: &lt;span class="pgcss-n"&gt;[(&amp;#39;SSL routines&amp;#39;, &amp;#39;SSL23_GET_CLIENT_HELLO&amp;#39;, &amp;#39;https proxy request&amp;#39;)]&lt;/span&gt;
&lt;span class="pgcss-x"&gt;----------------------------------------&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Я  дорабатывал свой уже рабочит HTTP-код, затачивал для работы через
SSL из pyOpenSSL:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-c"&gt;# … это __init__ TCP-сервера …&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;kwargs&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;get&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;ssl_option&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;del&lt;/span&gt; &lt;span class="pgcss-n"&gt;kwargs&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;ssl_option&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;context&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;SSL&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;Context&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;SSL&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;SSLv23_METHOD&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;context&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;use_privatekey_file&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;private.key&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;context&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;use_certificate_file&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;local.cert&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
        &lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;socket&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;SSL&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;Connection&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;context&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
               &lt;span class="pgcss-n"&gt;socket&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;socket&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;address_family&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
                              &lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;socket_type&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;
        &lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;server_bind&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
        &lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;server_activate&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Но при попытке браузера отправить запрос через этот прокси,
выпадает ошибка :(. Завтра забрерусь.&lt;/p&gt;
</summary><category term="python"></category><category term="ssl"></category></entry><entry><title></title><link href="/posts/2009/10/12/urn:ya.ru:post/22199227/316/" rel="alternate"></link><updated>2009-10-12T12:45:14+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-12:posts/2009/10/12/urn:ya.ru:post/22199227/316/</id><summary type="html"></summary></entry><entry><title>LDAP</title><link href="/posts/2009/10/12/ldap/" rel="alternate"></link><updated>2009-10-12T12:39:26+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-12:posts/2009/10/12/ldap/</id><summary type="html">&lt;p&gt;Чтобы работать с PDC Samba4 скачал JXplorer
(&lt;a class="reference external" href="http://jxplorer.org/"&gt;тут&lt;/a&gt; и  написан на Java, правда давно не
обновлялся, но надеюсь, что в нём уже основное и так допилено), а то
надоело править через ldbedit и ldbadd и так база только пользователей
уже 80MiB.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/91337/"&gt;&lt;img alt="JXplorer" src="http://img-fotki.yandex.ru/get/3713/imdagger.3/0_164c9_16bac1b7_L" title="JXplorer"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="samba4"></category><category term="ldap"></category></entry><entry><title>Я негодую</title><link href="/posts/2009/10/10/ia-negoduiu/" rel="alternate"></link><updated>2009-10-10T19:42:36+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-10:posts/2009/10/10/ia-negoduiu/</id><summary type="html">&lt;p&gt;Часть серверов Yandex подтормаживает, работать не реально. Надесь, что
это просто проблемы моего провайдера до зоны &lt;strong&gt;.RU&lt;/strong&gt;. Т.к. с частью
сервисов уже несколько часов не могу работать.&lt;/p&gt;
</summary><category term="негодую"></category><category term="Яндекс"></category></entry><entry><title>Пользовательские типы</title><link href="/posts/2009/10/09/polzovatelskie-tipy/" rel="alternate"></link><updated>2009-10-09T19:37:10+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-09:posts/2009/10/09/polzovatelskie-tipy/</id><summary type="html">&lt;p&gt;Про то, как создавать свои типы данных в Hibernate. Довольно понятное и
подробное описание на русском языке.&lt;/p&gt;
</summary><category term="hibernate"></category></entry><entry><title>Для френдзонщиков :)</title><link href="/posts/2009/10/08/dlia-frendzonshchikov/" rel="alternate"></link><updated>2009-10-08T21:08:35+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-08:posts/2009/10/08/dlia-frendzonshchikov/</id><summary type="html">&lt;div class="line-block"&gt;
&lt;div class="line"&gt;Да я знаю, я только лишь друг&lt;/div&gt;
&lt;div class="line"&gt;И не хочется верить мне в это,&lt;/div&gt;
&lt;div class="line"&gt;А хотел я поверить, что вдруг&lt;/div&gt;
&lt;div class="line"&gt;В твоём сердце есть тёплое лето.&lt;/div&gt;
&lt;div class="line"&gt;Жаль, что это не так — я не нужен,&lt;/div&gt;
&lt;div class="line"&gt;Ждёт меня там дождливая осень,&lt;/div&gt;
&lt;div class="line"&gt;Тихо ходит блуждая по лужам,&lt;/div&gt;
&lt;div class="line"&gt;Лишь оставит следы и не спросит,&lt;/div&gt;
&lt;div class="line"&gt;Почему во мне след так болит,&lt;/div&gt;
&lt;div class="line"&gt;И не дал этой ране зажить&lt;/div&gt;
&lt;div class="line"&gt;Даже, если сердечко горит,&lt;/div&gt;
&lt;div class="line"&gt;Не могу туда больше пустить.&lt;/div&gt;
&lt;div class="line"&gt;Но вот разум решил победить,&lt;/div&gt;
&lt;div class="line"&gt;Когда понял намёки молчаний,&lt;/div&gt;
&lt;div class="line"&gt;Мои чувства могли навредить&lt;/div&gt;
&lt;div class="line"&gt;Или взглядом во время прощаний.&lt;/div&gt;
&lt;div class="line"&gt;Стану снова, как раньше спокойным&lt;/div&gt;
&lt;div class="line"&gt;Превратив все эмоции в грани.&lt;/div&gt;
&lt;div class="line"&gt;Всё сломав мне не выйти достойным,&lt;/div&gt;
&lt;div class="line"&gt;Не зажить той зияющей ране.&lt;/div&gt;
&lt;div class="line"&gt;Не позволю лишиться общения,&lt;/div&gt;
&lt;div class="line"&gt;Всё припрячу, уже не забрать.&lt;/div&gt;
&lt;div class="line"&gt;Как ребёнок прижму без стеснения,&lt;/div&gt;
&lt;div class="line"&gt;Сберегу, что смогла мне ты дать.&lt;/div&gt;
&lt;div class="line"&gt;Ну, а если растает однажды&lt;/div&gt;
&lt;div class="line"&gt;Огорчусь, но ты не узнаешь.&lt;/div&gt;
&lt;div class="line"&gt;Одна радость была, но не важно&lt;/div&gt;
&lt;div class="line"&gt;Ведь я чувствую — ты отбираешь.&lt;/div&gt;
&lt;div class="line"&gt;А возможно бы просто заплакал,&lt;/div&gt;
&lt;div class="line"&gt;Вот такая вот детская слабость,&lt;/div&gt;
&lt;div class="line"&gt;Через маску бы тихо закапал&lt;/div&gt;
&lt;div class="line"&gt;Прямиком на поддельную радость.&lt;/div&gt;
&lt;div class="line"&gt;Или я весь пропитан жестокостью?&lt;/div&gt;
&lt;div class="line"&gt;И не смыслю в делах таких нежных,&lt;/div&gt;
&lt;div class="line"&gt;И не знаю подходов всех с тонкостью&lt;/div&gt;
&lt;div class="line"&gt;Результатов деяний небрежных.&lt;/div&gt;
&lt;div class="line"&gt;Мои чувства внутри обитали —&lt;/div&gt;
&lt;div class="line"&gt;Поделом за такую ошибку.&lt;/div&gt;
&lt;div class="line"&gt;Строю вечный замок печали,&lt;/div&gt;
&lt;div class="line"&gt;Не вернуть себе снова улыбку.&lt;/div&gt;
&lt;/div&gt;
</summary><category term="Я"></category><category term="печаль"></category><category term="сердце"></category><category term="бредни"></category></entry><entry><title>Я брежу</title><link href="/posts/2009/10/08/ia-brezhu/" rel="alternate"></link><updated>2009-10-08T20:22:39+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-08:posts/2009/10/08/ia-brezhu/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; В саду росла чудесная роза, к ней прилетали бабочки и нежно
топтались своими лапками и собирали нектар. Роза себя чувствовала нужной
и полезной, в ней царила гармония и спокойствие. Но однажды рядом стал
прорастать вьюнок, он груб и прост, но он тоже хотел любви. Роза ему
очень понравилась и он решил, что это его судьба и можно взять так
просто и прорасти. Она иногда разрешала ему расти, но всё чаще пыталась
ранить шипами. Он стал изо дня в день оплетать её, не понимая, что
губит… Он просто хотел цвести вместе, наслаждаться тем, что для неё было
всегда. Но разрушив розу, он и сам погиб, потому что не мог существовать
без неё :(.&lt;/p&gt;
</summary><category term="бредни"></category></entry><entry><title></title><link href="/posts/2009/10/07/urn:ya.ru:post/22199227/286/" rel="alternate"></link><updated>2009-10-07T21:10:59+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-07:posts/2009/10/07/urn:ya.ru:post/22199227/286/</id><summary type="html">&lt;p&gt;настроение что-то типа SOAD “Question!”&lt;/p&gt;
</summary></entry><entry><title>Ууупс...</title><link href="/posts/2009/10/07/uuups/" rel="alternate"></link><updated>2009-10-07T17:39:31+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-07:posts/2009/10/07/uuups/</id><summary type="html">&lt;p&gt;Я очень невнимательный &lt;strong&gt;:S&lt;/strong&gt; и когда рендерил это изображение в
прошлый раз, то забыл (&lt;del class="del"&gt;
т.к. на самом деле пришлось скопировать файлы на
более мощную машинку&lt;/del&gt;
) включить слой с лампочкой. И от этого нос пропал и
меня мучали вопросы: «Что в нём изменилось в сравнении с первоначальным
вариантом?», но мне подсказали и я наконец-то добавил. Вот окончательный
результат:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/89181/"&gt;&lt;img alt='Робот "с носом"' src="http://img-fotki.yandex.ru/get/3800/imdagger.3/0_15c5d_77e7a4ed_XL" style="width: 400px; height: 300px;" title='Робот "с носом"'/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="обои"></category><category term="робот"></category></entry><entry><title>Ошибка в моей ДНК-цепочке</title><link href="/posts/2009/10/06/oshibka-v-moei-dnk-tsepochke/" rel="alternate"></link><updated>2009-10-06T18:52:08+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-06:posts/2009/10/06/oshibka-v-moei-dnk-tsepochke/</id><summary type="html">&lt;p&gt;Сегодня снова воевал с jTDS и MSSQL. Нужно было, чтобы моё
приложение, которое было написано ещё в прошлом году на Jython, было
немного модифицировано и работало на другом компьютере. Но как и в
прошлый раз (моя глупая голова забыла все прошлогодние шишки) я
вспоминал куда нужно положить этот ntlmauth.dll. Снача оно мне сказало:
&lt;code class="code"&gt;
Native SSPI library not loaded. Check the java.library.path system
property&lt;/code&gt;
. Поэтому я проверил его значение:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;java.lang&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;System&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-n"&gt;System&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;getProperty&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;java.library.path&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-go"&gt;тут оно выдало директории&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Но я решил вместо того, чтобы скопировать файл ntlm.dll, а затем
запустить приложение, загрузил Jython и подкючил классы для соединения с
базой, а во время этого скопировал динамическую библиотеку (даже в
jdk/bin и jre/bin положил x-D):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;com.ziclix.python.sql&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;zxJDBC&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-n"&gt;url&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;jdbc:jtds:sqlserver://&lt;/span&gt;&lt;span class="pgcss-si"&gt;%s&lt;/span&gt;&lt;span class="pgcss-s"&gt;/&lt;/span&gt;&lt;span class="pgcss-si"&gt;%s&lt;/span&gt;&lt;span class="pgcss-s"&gt;;domain=&lt;/span&gt;&lt;span class="pgcss-si"&gt;%s&lt;/span&gt;&lt;span class="pgcss-s"&gt;;piped=true&amp;#39;&lt;/span&gt; &lt;span class="pgcss-o"&gt;%&lt;/span&gt;\
&lt;span class="pgcss-go"&gt;             (&amp;#39;SERVER&amp;#39;, &amp;#39;WorkDB&amp;#39;, &amp;#39;DOMAIN&amp;#39;)&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-n"&gt;db&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;zxJDBC&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;connect&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;url&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;  &lt;span class="pgcss-c"&gt;# имя и пароль не нужны из-за NTLM&lt;/span&gt;
&lt;span class="pgcss-go"&gt;             &amp;#39;net.sourceforge.jtds.jdbc.Driver&amp;#39;,&lt;/span&gt;
&lt;span class="pgcss-go"&gt;             CHARSET=&amp;#39;utf-8&amp;#39;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;На что оно мне радостно заявило исключением, я даже пытался создать
вручную загрузку библиотеки при помощи &lt;code class="code"&gt;
SSPIJNIClient.getInstance()&lt;/code&gt;
, но
каждый раз натыкался на &lt;code class="code"&gt;
java.lang.Exception: Native SSPI library not
loaded&lt;/code&gt;
. Тогда я  нашёл исходники jTDS, отыскал класс SSPIJNIClient и
понял, что он лишь один раз пытается инициализировать свои статические
методы и загрудить ntlmauth:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kd"&gt;static&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;try&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;System&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;loadLibrary&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;ntlmauth&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;);&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;SSPIJNIClient&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;libraryLoaded&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-kc"&gt;true&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;}&lt;/span&gt; &lt;span class="pgcss-k"&gt;catch&lt;/span&gt; &lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;UnsatisfiedLinkError&lt;/span&gt; &lt;span class="pgcss-n"&gt;err&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;Logger&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;println&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;Unable to load library: &amp;quot;&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt; &lt;span class="pgcss-n"&gt;err&lt;/span&gt;&lt;span class="pgcss-o"&gt;);&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;}&lt;/span&gt;
&lt;span class="pgcss-o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Поэтому всё решилось просто выходом из оболочки Jython и загрузкой
заново x-D.&lt;/p&gt;
</summary><category term="python"></category><category term="jython"></category><category term="SSPI"></category><category term="jtds"></category></entry><entry><title>Мучаюсь</title><link href="/posts/2009/10/05/muchaius/" rel="alternate"></link><updated>2009-10-05T20:41:47+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-05:posts/2009/10/05/muchaius/</id><summary type="html">&lt;p&gt;Эх, приходится переносить комплексные запросы на Hibernate и
мучаться. Но всё же нашёл кое-какое решение для создания объектов,
оказывается можно в HQL писать &lt;code class="code"&gt;
select new MyMegaClass(параметры, …)
from OtherClass left join и т.д.&lt;/code&gt;
. Что позволит мне создавать
объекты другого типа.&lt;/p&gt;
&lt;p&gt;Я как-то не обращал на это внимание, пока не наткнулся
&lt;a class="reference external" href="http://www.javalobby.org/articles/hibernate-query-101/"&gt;тут&lt;/a&gt;.&lt;/p&gt;
</summary><category term="java"></category><category term="hibernate"></category></entry><entry><title></title><link href="/posts/2009/10/05/urn:ya.ru:post/22199227/279/" rel="alternate"></link><updated>2009-10-05T17:37:44+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-05:posts/2009/10/05/urn:ya.ru:post/22199227/279/</id><summary type="html">&lt;p&gt;УряУряУря&lt;/p&gt;
</summary></entry><entry><title>Глюки</title><link href="/posts/2009/10/04/gliuki/" rel="alternate"></link><updated>2009-10-04T18:19:05+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-04:posts/2009/10/04/gliuki/</id><summary type="html">&lt;p&gt;Собрал Midnight Commander с Ncurses, но появились проблемы: после
выполнения команды &lt;strong&gt;reset&lt;/strong&gt; прямо из mc, в нём исчезала вся
псевдографика (т.е. вертикальные, горизонтальные линии и т.д.) и
появлялись вместо них буквы «x», а вторая проблема заключалась в
зависании Midnight Commander’а и загрузке процессора на 100% при
закрытии терминала, &lt;u class="underline"&gt;
а не выхода по&lt;/u&gt;
 &lt;kbd class="kbd"&gt;
F10&lt;/kbd&gt;
. Решились они обе установкой
S-Lang и сборкой с ним (по умолчанию с libslang и собирается, но я
принудительно задавал &lt;strong&gt;--with-screen=ncurses&lt;/strong&gt;).&lt;/p&gt;
</summary><category term="slang"></category><category term="ncurses"></category><category term="midnight commander"></category></entry><entry><title>Я компилирую еду</title><link href="/posts/2009/10/03/ia-kompiliruiu-edu/" rel="alternate"></link><updated>2009-10-03T09:03:27+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-03:posts/2009/10/03/ia-kompiliruiu-edu/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/87034"&gt;&lt;img alt="Компилирую еду" src="http://img-fotki.yandex.ru/get/3709/imdagger.3/0_153fa_421f48a4_L" title="Компилирую еду"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/87035"&gt;&lt;img alt="Компилирую еду" src="http://img-fotki.yandex.ru/get/3714/imdagger.3/0_153fb_4929183b_L" title="Компилирую еду"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Вот приготовил яблочный пирог по рецепту. Получилось вкусно, только
пришлось применить не 3 стакана муки (как в рецепте), а 5 стаканов,
наверное, в рецепте не гранёными меряли :).
Заметка:
В следующий раз отжать сок из яблок, т.к. они пустили сок на противень,
и он потом грелся и булькал, а в конце превратился в нечто среднее между
джемом и мармеладом :P.&lt;/p&gt;</summary><category term="яблочный"></category><category term="пирог"></category><category term="еда"></category><category term="кухня"></category></entry><entry><title>Яблочный пирог</title><link href="/posts/2009/10/02/iablochnyi-pirog/" rel="alternate"></link><updated>2009-10-02T13:49:46+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-02:posts/2009/10/02/iablochnyi-pirog/</id><summary type="html">&lt;p class="row photo-item text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/nad94506725/view/117022/"&gt;&lt;img alt="Пирог" src="http://img-fotki.yandex.ru/get/3806/nad94506725.e/0_1c91e_6f06eff9_M" title="Пирог"/&gt;&lt;/a&gt;&lt;/p&gt;
 
&lt;blockquote&gt;
&lt;dl class="docutils"&gt;
&lt;dt&gt;Тесто:&lt;/dt&gt;
&lt;dd&gt;&lt;ol class="first last arabic simple"&gt;
&lt;li&gt;1 стакан кефира&lt;/li&gt;
&lt;li&gt;250г маргарина&lt;/li&gt;
&lt;li&gt;1 ч.л. соды неполная,без горки&lt;/li&gt;
&lt;li&gt;мука приблизительно 3 стакана, чтобы получилось тесто густое, очень мягкое и эластичное&lt;/li&gt;
&lt;li&gt;два яйца&lt;/li&gt;
&lt;/ol&gt;
&lt;/dd&gt;
&lt;dt&gt;Приготовление:&lt;/dt&gt;
&lt;dd&gt;Соду погасить в кефире, добавить растопленый маргарин, муку, яйца,
(не забыть соль и сахар по вкусу) и замесить густое тесто. Разделить тесто
на 2 части, раскатать пласт, положить начинку, сверху накрыть вторым пластом
и защипнуть края (если начинка сочная (как в данном случае, хотя можно и пофантазировать
с выбором начинки) нужно сделать надрезы на верхнем слое теста перед
прищипкой, или проколы,чтобы паром не разорвало пирог) смазать яйцом
и печь около 40 минут при температуре 220C.&lt;/dd&gt;
&lt;/dl&gt;
&lt;/blockquote&gt;
&lt;p&gt;Нужно будет попробовать сделать.&lt;/p&gt;</summary><category term="пирог"></category></entry><entry><title>Странно</title><link href="/posts/2009/10/01/stranno/" rel="alternate"></link><updated>2009-10-01T21:26:13+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-01:posts/2009/10/01/stranno/</id><summary type="html">&lt;p&gt;Странно, что при передаче POST-запроса при помощи httplib (из
стандартной поставки Python), данные формы отправляются как-то позже,
только после уничтожения объекта соединения, а не во время вызова
&lt;em&gt;request&lt;/em&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-n"&gt;conn&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;httplib&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;HTTPConnection&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;localhost&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-mi"&gt;8080&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-n"&gt;params&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;urllib&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;urlencode&lt;/span&gt;&lt;span class="pgcss-p"&gt;({&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;а тут данные много-много&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;})&lt;/span&gt;
&lt;span class="pgcss-n"&gt;headers&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-p"&gt;{&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;Content&amp;#39;&lt;/span&gt;&lt;span class="pgcss-o"&gt;-&lt;/span&gt;&lt;span class="pgcss-nb"&gt;type&lt;/span&gt; &lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;application/x-www-form-urlencoded&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;Accept&amp;#39;&lt;/span&gt; &lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;text&amp;#39;&lt;/span&gt;&lt;span class="pgcss-o"&gt;/&lt;/span&gt;&lt;span class="pgcss-n"&gt;plain&lt;/span&gt;&lt;span class="pgcss-p"&gt;}&lt;/span&gt;
&lt;span class="pgcss-n"&gt;conn&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;request&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;POST&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;/test/test.jsp&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;params&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;headers&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-n"&gt;response&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;conn&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;getresponse&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
&lt;span class="pgcss-n"&gt;data&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;response&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;read&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Но read возвращает данные от скрипта будто параметры и не
передавались при помощи POST. Методом проб и ошибок я понял, что тело
HTTP запроса не отправляется. И заменил на другой код с использованием
urllib, который к счастью заработал:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-n"&gt;params&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;urllib&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;urlencode&lt;/span&gt;&lt;span class="pgcss-p"&gt;({&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;а тут данные много-много&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;})&lt;/span&gt;
&lt;span class="pgcss-n"&gt;response&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;urllib&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;urlopen&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;http://localhost:8080/test/test.jsp&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;params&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-n"&gt;data&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;response&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;read&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;И оп! Он смог переслать тело запроса через сокет. А почему с httplib
не получилось я даже пока не знаю.&lt;/p&gt;
&lt;p&gt;P.S. Давно что-то я про Python не писал :)&lt;/p&gt;
</summary><category term="python"></category><category term="HTTP"></category></entry><entry><title>Тортик</title><link href="/posts/2009/10/01/tortik/" rel="alternate"></link><updated>2009-10-01T20:35:02+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-10-01:posts/2009/10/01/tortik/</id><summary type="html">&lt;p&gt;Полторы недели назад кушал вкусный тортик, который сделала мама. Масса
его была ~7кг. Цветок и лепестки сделаны из сахара.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/86328/"&gt;&lt;img alt="Торт" src="http://img-fotki.yandex.ru/get/3802/imdagger.3/0_15138_951b13a1_XL" style="width: 400px; height: 300px;" title="Торт"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/86327/"&gt;&lt;img alt="Торт" src="http://img-fotki.yandex.ru/get/3714/imdagger.3/0_15137_40a6e763_XL" style="width: 400px; height: 300px;" title="Торт"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="торт"></category></entry><entry><title>Буквенное печенье</title><link href="/posts/2009/09/30/bukvennoe-pechene/" rel="alternate"></link><updated>2014-07-13T16:45:00+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-30:posts/2009/09/30/bukvennoe-pechene/</id><summary type="html">&lt;p&gt;Вчера вечером сделал овсяное печенье. Приготовилось всё очень
быстро.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/85512/"&gt;&lt;img alt="Печенье IMDagger" src="http://img-fotki.yandex.ru/get/3712/imdagger.3/0_14e08_8bf120d1_-1-XL.jpg" style="width: 400px; height: 251px;" title="Печенье IMDagger"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Чем-то я себе напомнил Шелдона Купера из «Теории большого взрыва»,
только я умею хорошо готовить яичницу и несколькими способами ;)… Я
приготовил печенье, затем порпобовал кусочек, пошёл записал заметку в
трофейный блокнот, потом пошёл за фотоаппаратом, сфотографировал
печенье, снова его попробовал, пошёл сделал заметку в трофейную записную
книгу:&lt;/p&gt;
&lt;p&gt;Запомнить:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;В следующий раз сократить количество маргарина с 300гр до 150гр;&lt;/li&gt;
&lt;li&gt;Не использовать бумагу для выпечки и не смазывать её маргарином;&lt;/li&gt;
&lt;li&gt;Ложить прямо на противень, после того, как появится слабая корочка
вокруг печенья, то добавить на него кусочек маргарина.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Сделал верно:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;В моей духовке 150C оптимальная температура, хоть и в рецепте
написано 200C;&lt;/li&gt;
&lt;li&gt;Гашеная сода сама приподнимает центр печенья (это видно на
кругленьких).&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;И вообще все мои действия напоминают мне &lt;del class="del"&gt;
Шелдона Купера&lt;/del&gt;
 кого-то. Я
знал, что я &lt;strong&gt;geek&lt;/strong&gt;, но не думал, что я настолько соответствую шуткам
:). Получилось вкусно, но хочу отточить навыки и ещё потренируюсь.&lt;/p&gt;</summary><category term="печенье"></category><category term="готовлю"></category><category term="еда"></category><category term="овсяное"></category><category term="кухня"></category></entry><entry><title></title><link href="/posts/2009/09/29/urn:ya.ru:post/22199227/265/" rel="alternate"></link><updated>2009-09-29T20:01:06+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-29:posts/2009/09/29/urn:ya.ru:post/22199227/265/</id><summary type="html">&lt;p&gt;SOAD “Lonely Day”&lt;/p&gt;
</summary></entry><entry><title>Клонирование образов</title><link href="/posts/2009/09/28/klonirovanie-obrazov/" rel="alternate"></link><updated>2009-09-28T14:16:11+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-28:posts/2009/09/28/klonirovanie-obrazov/</id><summary type="html">&lt;p&gt;В моей ситуации PDC сервером является &lt;strong&gt;Samba 4.0.0-alpha9&lt;/strong&gt; из GIT.
А клиентские компьютеры под управлением Window$ XP. Был сделан новый
образ с одного компьютера, чтобы поставить его на все остальные
(разметка таже, только операционная система обновлена). Я решил, что
удобнее хранить на сервере одну копию образа и восстанавливать её по
сети, используя PXE для загрузки.&lt;/p&gt;
&lt;p&gt;Первая проблема, которая встала передо мной — при попытке
восстановления образа выпадала ошибка, что не удалось клонировать sda2
(но mbr &lt;del class="del"&gt;
сволочь&lt;/del&gt;
 всё таки Clonezilla заменила). Забавно было, что
разбивка на компьютерах одна и также, но я заметил, что создавал образ с
&lt;strong&gt;sda1&lt;/strong&gt;, а пытался восстановить на &lt;strong&gt;sda2&lt;/strong&gt; такой же по размеру и
&lt;u class="underline"&gt;
начинающийся в тех же секторах&lt;/u&gt;
. Тогда я залез в папку с образом (у меня
/home/partimag) и поправил файлы:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;/home/partimag/имя-образа/parts:&lt;/div&gt;
&lt;div class="line"&gt;было &lt;strong&gt;sda1&lt;/strong&gt; стало &lt;strong&gt;sda2&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;/home/partimag/имя-образа/sda-pt.parted&lt;/div&gt;
&lt;div class="line"&gt;Поменял номера разделов (поле Number)&lt;/div&gt;
&lt;div class="line"&gt;&lt;strong&gt;1&lt;/strong&gt; &amp;lt;-&amp;gt; &lt;strong&gt;2&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;/home/partimag/имя-образа/sda-pt.sf&lt;/div&gt;
&lt;div class="line"&gt;Обменял &lt;strong&gt;sda1&lt;/strong&gt; &amp;lt;-&amp;gt; &lt;strong&gt;sda2&lt;/strong&gt; (&lt;strong&gt;sda1&lt;/strong&gt; - это диск D:)&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;После этих хитрых манипуляций образ поставился, но система наотрез
отказалась запускаться ссылаясь на «повреждённый hal.dll». Снова
поразмыслив, я написал небольшой скрипт и положил его в
&lt;strong&gt;/opt/drbl/share/drbl/postrun&lt;/strong&gt;, чтобы после успешного клонирования был
он вызван и исправил в boot.ini на диске строки partition(1) на
partition(&lt;strong&gt;id&lt;/strong&gt;), где id — номер раздела, который загрузочный.&lt;/p&gt;
&lt;div class="alert  alert-danger compound"&gt;
&lt;p&gt;&lt;strong&gt;Осторожно!&lt;/strong&gt; Если не понятно, что делает этот скрипт, то не при каких
обстоятельствах его не использовать, т.к. он производит слишком
мало проверок на корректность своих действий (и обрабатывает только
sda1, sda2, hda1, hda2 и только ntfs), а также пользуется пакетом
ntfsprogs, который должен быть &lt;strong&gt;обязательно установлен&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p class="cut"&gt;&lt;a class="h-link reference internal" href="#cut_40697936"data-toggle="collapse"&gt;хочу узреть программу!&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_40697936"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-c"&gt;#! /bin/sh&lt;/span&gt;
&lt;span class="pgcss-k"&gt;for &lt;/span&gt;id in 1 2; &lt;span class="pgcss-k"&gt;do&lt;/span&gt;
&lt;span class="pgcss-k"&gt;   for &lt;/span&gt;hdd in hda sda; &lt;span class="pgcss-k"&gt;do&lt;/span&gt;
&lt;span class="pgcss-k"&gt;      &lt;/span&gt;&lt;span class="pgcss-nv"&gt;disk&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-nv"&gt;$hdd$id&lt;/span&gt;
      &lt;span class="pgcss-nb"&gt;echo&lt;/span&gt; &lt;span class="pgcss-s2"&gt;&amp;quot;Trying $disk ...&amp;quot;&lt;/span&gt;

      &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-o"&gt;[&lt;/span&gt; ! -z &lt;span class="pgcss-sb"&gt;`&lt;/span&gt;ntfsls -f /dev/&lt;span class="pgcss-nv"&gt;$disk&lt;/span&gt; &lt;span class="pgcss-se"&gt;\|&lt;/span&gt; grep boot.ini&lt;span class="pgcss-sb"&gt;`&lt;/span&gt; &lt;span class="pgcss-o"&gt;]&lt;/span&gt;; &lt;span class="pgcss-k"&gt;then&lt;/span&gt;
&lt;span class="pgcss-k"&gt;         &lt;/span&gt;&lt;span class="pgcss-nb"&gt;echo&lt;/span&gt; &lt;span class="pgcss-s2"&gt;&amp;quot;Found primary boot disk ...&amp;quot;&lt;/span&gt;
         ntfscat -f /dev/&lt;span class="pgcss-nv"&gt;$disk&lt;/span&gt; boot.ini &amp;gt;/root/boot.ini
         &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-o"&gt;[&lt;/span&gt; -z &lt;span class="pgcss-sb"&gt;`&lt;/span&gt;cat /root/boot.ini&lt;span class="pgcss-sb"&gt;`&lt;/span&gt; &lt;span class="pgcss-o"&gt;]&lt;/span&gt;; &lt;span class="pgcss-k"&gt;then&lt;/span&gt;
&lt;span class="pgcss-k"&gt;            &lt;/span&gt;&lt;span class="pgcss-nb"&gt;echo&lt;/span&gt; &lt;span class="pgcss-s2"&gt;&amp;quot;Error!&amp;quot;&lt;/span&gt;
            &lt;span class="pgcss-nb"&gt;exit &lt;/span&gt;1;
         &lt;span class="pgcss-k"&gt;fi&lt;/span&gt;

&lt;span class="pgcss-k"&gt;         &lt;/span&gt;&lt;span class="pgcss-nb"&gt;echo&lt;/span&gt; &lt;span class="pgcss-s2"&gt;&amp;quot;Try to fix disk ...&amp;quot;&lt;/span&gt;
         ntfsfix /dev/&lt;span class="pgcss-nv"&gt;$disk&lt;/span&gt;
         sed &lt;span class="pgcss-s2"&gt;&amp;quot;s/\(.*\)partition([01234]\?)\(.*\)/\1partition($id)\2/&amp;quot;&lt;/span&gt; /root/boot.ini &amp;gt;/root/boot_new.ini
         &lt;span class="pgcss-nb"&gt;echo&lt;/span&gt; &lt;span class="pgcss-s2"&gt;&amp;quot;Replace boot.ini by new&amp;quot;&lt;/span&gt;
         ntfscp -f /dev/&lt;span class="pgcss-nv"&gt;$disk&lt;/span&gt; /root/boot_new.ini boot.ini
      &lt;span class="pgcss-k"&gt;else&lt;/span&gt;
&lt;span class="pgcss-k"&gt;         &lt;/span&gt;&lt;span class="pgcss-nb"&gt;echo&lt;/span&gt; &lt;span class="pgcss-s2"&gt;&amp;quot;Not found boot.ini&amp;quot;&lt;/span&gt;
      &lt;span class="pgcss-k"&gt;fi&lt;/span&gt;
&lt;span class="pgcss-k"&gt;   done&lt;/span&gt;
&lt;span class="pgcss-k"&gt;done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Вуаля и о чудо, винда загрузилась… Но… при попытке ввести в домен
выпала ошибка «Именам пользователей не сопоставлены коды защиты данных».
Я заглянул на сервер в LDAP-директорию и обнаружил компьютер 2-5-9 с
CN=2-5-0, а именем 2-5-9. Ясно, что из-за одинакового имени всех
компьютеров из образа — 2-5-0 (можно было раздавать имена средствами
Clonezilla, там есть даже галочка для этого, но мне было лень делать
список MAC-адресов). Тогда, чтобы эта ошибка не выпадала, я:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Удалил запись 2-5-0 из LDAP от Samba4;&lt;/li&gt;
&lt;li&gt;Переименовывал машины без ввода в домен и с перезагрузкой;&lt;/li&gt;
&lt;li&gt;Только после перезагрузки вводил в домен.&lt;/li&gt;
&lt;li&gt;И вот всё заработало как надо.&lt;/li&gt;
&lt;/ol&gt;
</summary><category term="clonezilla"></category><category term="samba4"></category><category term="восстановление"></category><category term="boot"></category><category term="drbl"></category></entry><entry><title>Мозг</title><link href="/posts/2009/09/28/mozg/" rel="alternate"></link><updated>2009-09-28T06:38:26+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-28:posts/2009/09/28/mozg/</id><summary type="html">&lt;p&gt;Мозг проснулся в 5:20 и сказал: «Бе-бе-бе хочу спать! Спать!». Но я
решил, что он и так достаточно поспал 5 часов, и пора работать. Солнце
ещё не поднялось, а я уже на работе :(. Нужно починить машинки, чтобы
они в 8:20 уже работали…&lt;/p&gt;
</summary><category term="работа"></category></entry><entry><title>Автоматическое тестирование</title><link href="/posts/2009/09/27/avtomaticheskoe-testirovanie/" rel="alternate"></link><updated>2009-09-27T19:41:46+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-27:posts/2009/09/27/avtomaticheskoe-testirovanie/</id><summary type="html">&lt;p&gt;Для автотестирования Web-приложений из Java-кода.
А ещё там есть ссылка на Selenium.&lt;/p&gt;
</summary><category term="java"></category><category term="тестирование"></category></entry><entry><title></title><link href="/posts/2009/09/26/urn:ya.ru:post/22199227/257/" rel="alternate"></link><updated>2009-09-26T18:28:55+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-26:posts/2009/09/26/urn:ya.ru:post/22199227/257/</id><summary type="html">&lt;p&gt;Душа растерзана, мозг потоптан, эх…&lt;/p&gt;
</summary></entry><entry><title>Как я покорял табличные функции</title><link href="/posts/2009/09/26/kak-ia-pokorial-tablichnye-funktsii/" rel="alternate"></link><updated>2009-09-26T17:35:17+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-26:posts/2009/09/26/kak-ia-pokorial-tablichnye-funktsii/</id><summary type="html">&lt;p&gt;Во-первых, я хотел постараться проделать всю работу через аннотации
&lt;strong&gt;JPA&lt;/strong&gt; и &lt;strong&gt;Hibernate&lt;/strong&gt;. Но мне требовалось промэппить пробный класс
&lt;em&gt;HeaderItem&lt;/em&gt; не только на таблицу &lt;em&gt;dl2ResultsHeaderItem&lt;/em&gt;, но и на
результат функции из базы данных. А функция
&lt;em&gt;dl2ResultsHeaderItemSubTree&lt;/em&gt; требует 5 параметров и возвращает таблицу
из 3 параметров, у которой не все названия совпадают с
dl2ResultsHeaderItem.&lt;/p&gt;
&lt;p&gt;Поискав во «всемирной паутине» ответ на свой вопрос, как сделать
такую операцию, я нашёл ответ только для хранимых процедур, а мне нужна
была хранимая функция. Причём всё, что я находил похожее для моих нужд,
оно почему-то у меня не работало.&lt;/p&gt;
&lt;p&gt;Поэтому я нашёл способ реализовать задуманное через аннотацию
NamedNativeQuery из javax.persistence, я его переделал из примера для
хранимых процедур:&lt;/p&gt;
&lt;p class="cut"&gt;&lt;a class="h-link reference internal" href="#cut_41155920"data-toggle="collapse"&gt;и как оно выглядит?&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_41155920"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kn"&gt;package&lt;/span&gt; &lt;span class="pgcss-n"&gt;results&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
&lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-nn"&gt;java.io.Serializable&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
&lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-nn"&gt;javax.persistence.*&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
&lt;span class="pgcss-nd"&gt;@Entity&lt;/span&gt;
&lt;span class="pgcss-nd"&gt;@NamedNativeQuery&lt;/span&gt; &lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;name&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;quot;headerItem.forSubTree&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;resultClass&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;HeaderItem&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;class&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;query&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;quot;select itemId, itemIndex as childIndex, deep from dl2ResultsHeaderItemSubTree&lt;/span&gt;
&lt;span class="pgcss-s"&gt;                  (:rootId, :deep, :leavesOnly, :includeRoot, :date)&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;hints&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;&lt;span class="pgcss-nd"&gt;@QueryHint&lt;/span&gt; &lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;name&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;quot;org.hibernate.callable&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;value&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;quot;true&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;),&lt;/span&gt; &lt;span class="pgcss-o"&gt;*&lt;/span&gt;&lt;span class="pgcss-c1"&gt;// Бага!!!*&lt;/span&gt;
                 &lt;span class="pgcss-nd"&gt;@QueryHint&lt;/span&gt; &lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;name&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;quot;org.hibernate.readOnly&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;value&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;quot;true&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
        &lt;span class="pgcss-o"&gt;}&lt;/span&gt;
&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
&lt;span class="pgcss-nd"&gt;@Table&lt;/span&gt; &lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;name&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;dl2ResultsHeaderItem&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
&lt;span class="pgcss-kd"&gt;public&lt;/span&gt; &lt;span class="pgcss-kd"&gt;class&lt;/span&gt; &lt;span class="pgcss-nc"&gt;HeaderItem&lt;/span&gt; &lt;span class="pgcss-kd"&gt;implements&lt;/span&gt; &lt;span class="pgcss-n"&gt;Serializable&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;
    &lt;span class="pgcss-kd"&gt;private&lt;/span&gt; &lt;span class="pgcss-n"&gt;Long&lt;/span&gt; &lt;span class="pgcss-n"&gt;id&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
    &lt;span class="pgcss-kd"&gt;private&lt;/span&gt; &lt;span class="pgcss-n"&gt;Long&lt;/span&gt; &lt;span class="pgcss-n"&gt;index&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
    &lt;span class="pgcss-kd"&gt;private&lt;/span&gt; &lt;span class="pgcss-kt"&gt;int&lt;/span&gt; &lt;span class="pgcss-n"&gt;deep&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;

    &lt;span class="pgcss-kd"&gt;public&lt;/span&gt; &lt;span class="pgcss-nf"&gt;HeaderItem&lt;/span&gt;&lt;span class="pgcss-o"&gt;()&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;};&lt;/span&gt;

    &lt;span class="pgcss-nd"&gt;@Id&lt;/span&gt;
    &lt;span class="pgcss-nd"&gt;@Column&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;name&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;itemId&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-kd"&gt;public&lt;/span&gt; &lt;span class="pgcss-n"&gt;Long&lt;/span&gt; &lt;span class="pgcss-nf"&gt;getId&lt;/span&gt;&lt;span class="pgcss-o"&gt;()&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-n"&gt;id&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;};&lt;/span&gt;

    &lt;span class="pgcss-kd"&gt;public&lt;/span&gt; &lt;span class="pgcss-kt"&gt;void&lt;/span&gt; &lt;span class="pgcss-nf"&gt;setId&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Long&lt;/span&gt; &lt;span class="pgcss-n"&gt;id&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;this&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;id&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;id&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;};&lt;/span&gt;

    &lt;span class="pgcss-nd"&gt;@Column&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;name&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;childIndex&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-kd"&gt;public&lt;/span&gt; &lt;span class="pgcss-n"&gt;Long&lt;/span&gt; &lt;span class="pgcss-nf"&gt;getIndex&lt;/span&gt;&lt;span class="pgcss-o"&gt;()&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-n"&gt;index&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;};&lt;/span&gt;

    &lt;span class="pgcss-kd"&gt;public&lt;/span&gt; &lt;span class="pgcss-kt"&gt;void&lt;/span&gt; &lt;span class="pgcss-nf"&gt;setIndex&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Long&lt;/span&gt; &lt;span class="pgcss-n"&gt;index&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;this&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;index&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;index&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;};&lt;/span&gt;

    &lt;span class="pgcss-nd"&gt;@Column&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;name&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;deep&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-kd"&gt;public&lt;/span&gt; &lt;span class="pgcss-kt"&gt;int&lt;/span&gt; &lt;span class="pgcss-nf"&gt;getDeep&lt;/span&gt;&lt;span class="pgcss-o"&gt;()&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-n"&gt;deep&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;};&lt;/span&gt;

    &lt;span class="pgcss-kd"&gt;public&lt;/span&gt; &lt;span class="pgcss-kt"&gt;void&lt;/span&gt; &lt;span class="pgcss-nf"&gt;setDeep&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-kt"&gt;int&lt;/span&gt; &lt;span class="pgcss-n"&gt;id&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;this&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;deep&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;deep&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;};&lt;/span&gt;
&lt;span class="pgcss-o"&gt;};&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Запрос &lt;em&gt;select itemId, itemIndex as childIndex, deep ...&lt;/em&gt; выбирает
данные таким образом, чтобы поля возвращаемой таблицы совпадали с
указанным в классе мэппингом.&lt;/p&gt;
&lt;p&gt;Жаль, но таблицу и хранимую функцию делал не я, а за долго до
меня. Поэтому их ломать нельзя (слишком много эксплуатируемого кода на
них висит). Я довольно долго боролся с Hibernate, т.к. выпадало
исколючение в jTDS вида: &lt;code class="code"&gt;
11410 [http-8080-1] INFO
org.hibernate.type.CalendarType - could not bind value ‘2009-09-26
16:30:13’ to parameter: 5; Invalid parameter index 5&lt;/code&gt;
. Я долго думал, как
так может быть, что параметров вроде 5, передаю 5 такой конструкцией
(&lt;del class="del"&gt;
собранной на скорую руку&lt;/del&gt;
):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-n"&gt;List&lt;/span&gt; &lt;span class="pgcss-n"&gt;result&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt;
&lt;span class="pgcss-n"&gt;getHibernateTemplate&lt;/span&gt;&lt;span class="pgcss-o"&gt;().&lt;/span&gt;&lt;span class="pgcss-na"&gt;findByNamedQueryAndNamedParam&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;headerItem.forSubTree&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;new&lt;/span&gt; &lt;span class="pgcss-n"&gt;String&lt;/span&gt;&lt;span class="pgcss-o"&gt;[]&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;rootId&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;quot;deep&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;quot;leavesOnly&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;quot;includeRoot&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;quot;date&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;},&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;new&lt;/span&gt; &lt;span class="pgcss-n"&gt;Object&lt;/span&gt;&lt;span class="pgcss-o"&gt;[]&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;&lt;span class="pgcss-n"&gt;rootId&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;deep&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;leavesOnly&lt;/span&gt;&lt;span class="pgcss-o"&gt;,&lt;/span&gt; &lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;includeRoot&lt;/span&gt; &lt;span class="pgcss-o"&gt;?&lt;/span&gt; &lt;span class="pgcss-mi"&gt;1&lt;/span&gt; &lt;span class="pgcss-o"&gt;:&lt;/span&gt; &lt;span class="pgcss-mi"&gt;0&lt;/span&gt;&lt;span class="pgcss-o"&gt;),&lt;/span&gt; &lt;span class="pgcss-n"&gt;date&lt;/span&gt;&lt;span class="pgcss-o"&gt;});&lt;/span&gt; &lt;span class="pgcss-c1"&gt;// date типа java.util.Calendar&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Но потом до меня дошло, что мешает &lt;code class="code"&gt;
&amp;#64;QueryHint(name =
&amp;quot;org.hibernate.callable&amp;quot;, value = &amp;quot;true&amp;quot;)&lt;/code&gt;
, который предполагает, что это
процедура и первый параметр забирает под её нужды.&lt;/p&gt;
&lt;p&gt;Проблема решилась банально — я убрал эту запись и всё заработало.&lt;/p&gt;
&lt;/div&gt;
</summary><category term="spring"></category><category term="hibernate"></category><category term="аннотации"></category></entry><entry><title>Пусть земля будет пухом</title><link href="/posts/2009/09/24/pust-zemlia-budet-pukhom/" rel="alternate"></link><updated>2009-09-24T14:52:35+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-24:posts/2009/09/24/pust-zemlia-budet-pukhom/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/83761"&gt;&lt;img alt="Пусть земля будет пухом" src="http://img-fotki.yandex.ru/get/3804/imdagger.3/0_14731_11fe5928_L" title="Пусть земля будет пухом"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/83762"&gt;&lt;img alt="Пусть земля будет пухом" src="http://img-fotki.yandex.ru/get/3806/imdagger.3/0_14732_ac9656b_L" title="Пусть земля будет пухом"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/83763"&gt;&lt;img alt="Пусть земля будет пухом" src="http://img-fotki.yandex.ru/get/3714/imdagger.3/0_14733_ed6c586a_L" title="Пусть земля будет пухом"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/83764"&gt;&lt;img alt="Пусть земля будет пухом" src="http://img-fotki.yandex.ru/get/3709/imdagger.3/0_14734_8f97da7e_L" title="Пусть земля будет пухом"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Покойся с миром славный сын из рода Samsung, пусть земля будет тебе
пухом. Твои 80Gb принесли много радости и счастья, тебя и твоих битов
нам ничто не заменит…&lt;/p&gt;</summary><category term="пожар"></category><category term="винчестер"></category></entry><entry><title></title><link href="/posts/2009/09/23/urn:ya.ru:post/22199227/252/" rel="alternate"></link><updated>2009-09-23T17:45:07+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-23:posts/2009/09/23/urn:ya.ru:post/22199227/252/</id><summary type="html">&lt;p&gt;Появилась небольшая апатия, хотя я знаю почему :)&lt;/p&gt;
</summary></entry><entry><title>Стены крепости построены</title><link href="/posts/2009/09/23/steny-kreposti-postroeny/" rel="alternate"></link><updated>2009-09-23T17:20:17+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-23:posts/2009/09/23/steny-kreposti-postroeny/</id><summary type="html">&lt;p&gt;Прочитав
&lt;a class="reference external" href="http://samolisov.blogspot.com/2009/06/hibernate-spring.html"&gt;блог&lt;/a&gt;
сурового челябинского программиста и
&lt;a class="reference external" href="http://maestric.com/doc/java/spring/mvc"&gt;туториал&lt;/a&gt;, как работать со
&lt;strong&gt;SpringFramework&lt;/strong&gt;, я всё же смог настроить тандем Spring+Hibernate.
Т.к. я сначала настраивал &lt;strong&gt;Hibernate&lt;/strong&gt; отдельно, а затем прикручивал
Spring, то вышло, что часть настроек из конфигов нужно было перенести в
другое место из-за того, что в связке настройку будет производить
фреймворк, а не ORM. Пришлось убрать файл context.xml из META-INF,
который описывал параметры подключения Hibernate3 к базе данных через
драйвер &lt;strong&gt;jTDS&lt;/strong&gt;. Настройки web.xml в WEB-INF стали выглядеть таким
образом:&lt;/p&gt;
&lt;p class="cut"&gt;&lt;a class="h-link reference internal" href="#cut_45018832"data-toggle="collapse"&gt;а как?&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_45018832"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;...
&lt;span class="pgcss-nt"&gt;&amp;lt;web-app&lt;/span&gt; &lt;span class="pgcss-na"&gt;xmlns=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;http://java.sun.com/xml/ns/javaee&amp;quot;&lt;/span&gt;
  &lt;span class="pgcss-na"&gt;xmlns:xsi=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;&lt;/span&gt;
  &lt;span class="pgcss-na"&gt;xsi:schemaLocation=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&amp;quot;&lt;/span&gt;
  &lt;span class="pgcss-na"&gt;version=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;2.5&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;servlet&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;servlet-name&amp;gt;&lt;/span&gt;dl&lt;span class="pgcss-nt"&gt;&amp;lt;/servlet-name&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;servlet-class&amp;gt;&lt;/span&gt;
      &lt;strong&gt;org.springframework.web.servlet.DispatcherServlet&lt;/strong&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;/servlet-class&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;load-on-startup&amp;gt;&lt;/span&gt;1&lt;span class="pgcss-nt"&gt;&amp;lt;/load-on-startup&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;/servlet&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;servlet-mapping&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;servlet-name&amp;gt;&lt;/span&gt;dl&lt;span class="pgcss-nt"&gt;&amp;lt;/servlet-name&amp;gt;&lt;/span&gt;
  &lt;strong&gt;&lt;span class="pgcss-nt"&gt;&amp;lt;url-pattern&amp;gt;&lt;/span&gt;/&lt;span class="pgcss-nt"&gt;&amp;lt;/url-pattern&amp;gt;&lt;/span&gt;&lt;/strong&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;/servlet-mapping&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;context-param&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;param-name&amp;gt;&lt;/span&gt;contextConfigLocation&lt;span class="pgcss-nt"&gt;&amp;lt;/param-name&amp;gt;&lt;/span&gt;
  &lt;strong&gt;&lt;span class="pgcss-nt"&gt;&amp;lt;param-value&amp;gt;&lt;/span&gt;/WEB-INF/dl-servlet.xml&lt;span class="pgcss-nt"&gt;&amp;lt;/param-value&amp;gt;&lt;/span&gt;&lt;/strong&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;/context-param&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;listener&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;listener-class&amp;gt;&lt;/span&gt;
      &lt;strong&gt;org.springframework.web.context.ContextLoaderListener&lt;/strong&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;/listener-class&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;/listener&amp;gt;&lt;/span&gt;
&lt;strong&gt;...&lt;/strong&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;/web-app&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Тег servlet указывает Apache Tomcat, что нужно загрузить сервлет
&lt;strong&gt;org.springframework.web.servlet.DispatcherServlet&lt;/strong&gt; для обработки
запросов. В директории WEB-INFнаходится файл dl-servlet.xml, который
описывает настройки сервлета:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-cp"&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;beans&lt;/span&gt; &lt;span class="pgcss-na"&gt;xmlns=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;http://www.springframework.org/schema/beans&amp;quot;&lt;/span&gt;
  &lt;span class="pgcss-na"&gt;xmlns:xsi=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;&lt;/span&gt;
  &lt;span class="pgcss-na"&gt;xmlns:aop=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;http://www.springframework.org/schema/aop&amp;quot;&lt;/span&gt;
  &lt;span class="pgcss-na"&gt;xsi:schemaLocation=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;http://www.springframework.org/schema/beans&lt;/span&gt;
&lt;span class="pgcss-s"&gt;  http://www.springframework.org/schema/beans/spring-beans-2.0.xsd&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;strong&gt;&lt;span class="pgcss-nt"&gt;&amp;lt;import&lt;/span&gt; &lt;span class="pgcss-na"&gt;resource=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;/dl-context/main-context.xml&amp;quot;&lt;/span&gt; &lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;&lt;/strong&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;/beans&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Он подключает из каталога dl-context различные параметры настройки. Пока
у меня всего один файл, но скоро я разобью опции на несколько файлов по
типам. Настройка основного контекста описана в main-context.xml:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-cp"&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;beans&lt;/span&gt; &lt;span class="pgcss-na"&gt;xmlns=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;http://www.springframework.org/schema/beans&amp;quot;&lt;/span&gt;
  &lt;span class="pgcss-na"&gt;xmlns:xsi=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;&lt;/span&gt;
  &lt;span class="pgcss-na"&gt;xmlns:aop=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;http://www.springframework.org/schema/aop&amp;quot;&lt;/span&gt;
  &lt;span class="pgcss-na"&gt;xsi:schemaLocation=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-c"&gt;&amp;lt;!-- This config contains main info about application mappings and view resolvers--&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;bean&lt;/span&gt; &lt;span class="pgcss-na"&gt;id=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;dataSource&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;class=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;&lt;strong&gt;org.apache.tomcat.dbcp.dbcp.BasicDataSource&lt;/strong&gt;&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;destroy-method=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;close&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;property&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;driverClassName&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;value=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;&lt;strong&gt;net.sourceforge.jtds.jdbc.Driver&lt;/strong&gt;&amp;quot;&lt;/span&gt; &lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;property&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;url&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;value=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;&lt;strong&gt;jdbc:jtds:sqlserver://dl-test:1030/dldb&lt;/strong&gt;&amp;quot;&lt;/span&gt; &lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;property&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;username&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;value=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;&lt;strong&gt;пользователь-базы&lt;/strong&gt;&amp;quot;&lt;/span&gt; &lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;property&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;password&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;value=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;&lt;strong&gt;пароль&lt;/strong&gt;&amp;quot;&lt;/span&gt; &lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;/bean&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;bean&lt;/span&gt; &lt;span class="pgcss-na"&gt;id=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;sessionFactory&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;class=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;org.springframework.orm.hibernate3.LocalSessionFactoryBean&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;property&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;dataSource&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;ref=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;dataSource&amp;quot;&lt;/span&gt; &lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;property&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;configLocation&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;value=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;classpath:/hibernate.cfg.xml&amp;quot;&lt;/span&gt; &lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;property&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;configurationClass&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;value=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;org.hibernate.cfg.AnnotationConfiguration&amp;quot;&lt;/span&gt; &lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;property&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;hibernateProperties&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;props&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;prop&lt;/span&gt; &lt;span class="pgcss-na"&gt;key=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;hibernate.dialect&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;${hibernate.dialect}&lt;span class="pgcss-nt"&gt;&amp;lt;/prop&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;/props&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;/bean&amp;gt;&lt;/span&gt;
&lt;strong&gt;&lt;span class="pgcss-nt"&gt;&amp;lt;bean&lt;/span&gt; &lt;span class="pgcss-na"&gt;id=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;cellDAO&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;class=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;results.CellDao&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;property&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;sessionFactory&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;ref=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;sessionFactory&amp;quot;&lt;/span&gt; &lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;/bean&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;bean&lt;/span&gt; &lt;span class="pgcss-na"&gt;id=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;cellService&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;class=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;results.CellService&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;property&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;dao&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;ref=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;cellDAO&amp;quot;&lt;/span&gt; &lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;/bean&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;bean&lt;/span&gt; &lt;span class="pgcss-na"&gt;id=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;resultsTableController&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;class=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;results.TableController&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;property&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;cellService&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;ref=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;cellService&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;/bean&amp;gt;&lt;/span&gt;&lt;/strong&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;bean&lt;/span&gt; &lt;span class="pgcss-na"&gt;id=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;simpleUrlHandler&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;class=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;org.springframework.web.servlet.handler.SimpleUrlHandlerMapping&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;property&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;order&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&amp;lt;value&amp;gt;&lt;/span&gt;0&lt;span class="pgcss-nt"&gt;&amp;lt;/value&amp;gt;&amp;lt;/property&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;property&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;mappings&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;props&amp;gt;&lt;/span&gt;
  &lt;strong&gt;&lt;span class="pgcss-nt"&gt;&amp;lt;prop&lt;/span&gt; &lt;span class="pgcss-na"&gt;key=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;results&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;resultsTableController&lt;span class="pgcss-nt"&gt;&amp;lt;/prop&amp;gt;&lt;/span&gt;&lt;/strong&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;/props&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;/bean&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;bean&lt;/span&gt; &lt;span class="pgcss-na"&gt;id=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;viewResolver&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;class=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;org.springframework.web.servlet.view.InternalResourceViewResolver&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;property&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;cache&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;value=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;false&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;property&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;viewClass&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&amp;lt;value&amp;gt;&lt;/span&gt;org.springframework.web.servlet.view.JstlView&lt;span class="pgcss-nt"&gt;&amp;lt;/value&amp;gt;&amp;lt;/property&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;property&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;prefix&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&amp;lt;value&amp;gt;&lt;/span&gt;/WEB-INF/pages/jsp/&lt;span class="pgcss-nt"&gt;&amp;lt;/value&amp;gt;&amp;lt;/property&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;property&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;suffix&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&amp;lt;value&amp;gt;&lt;/span&gt;.jsp&lt;span class="pgcss-nt"&gt;&amp;lt;/value&amp;gt;&amp;lt;/property&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;/bean&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;/beans&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Сервер баз данных у меня внешний MSSQL 2005 Express Edition (к
сожалению у меня нету выбора и приходится работать с этим, т.к. я лишь
рефакторю код существующей большой системы, которую просто так нельзя
сломать). Запускаю же Tomcat у себя на Linux.&lt;/p&gt;
&lt;p&gt;В бине (не путать с бинами из Java, это другое понятие бина, оно из
Spring) &lt;strong&gt;dataSource&lt;/strong&gt; указываются параметры подключения к серверу БД и
класс драйвера JDBC. В sessionFactory указано, что при создании объекта
из этого бина, нужно создать объект dataSource, для этого написана
ссылка &amp;lt;property name=&amp;quot;dataSource&amp;quot; ref=&amp;quot;dataSource&amp;quot; /&amp;gt;.&lt;/p&gt;
&lt;p&gt;CellDao, CellService и ResultsTableController — это мои пробные
классы для работы с ячейками таблицы результатов. Маппинг &amp;lt;prop
key=&amp;quot;results&amp;quot;&amp;gt;resultsTableController&amp;lt;/prop&amp;gt; позволяет, при переходе по
адресу &lt;strong&gt;http://localhost:8080/dl/results&lt;/strong&gt;, передавать управление
контроллеру ResultsTableController, котрый в свою очередь создаёт
представление:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;span class="pgcss-o"&gt;...&lt;/span&gt; &lt;span class="pgcss-k"&gt;new&lt;/span&gt; &lt;span class="pgcss-n"&gt;ModelAndView&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;&lt;strong&gt;index&lt;/strong&gt;&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Я сделал это, чтобы проверить мэппинг. Сами JSP-файлы (в частности и
index.jsp) хранятся в WEB-INF/pages/jsp/, эта информация настривается в
бине &lt;strong&gt;viewResolver&lt;/strong&gt;. В скором будущем я добавлю класс XsltViewer,
который будет использовать не JSP, а XSLT.Это связано с потребностью в
отображении HTML-данных и XML API-интерфейсе одновременно, но при
отсутствии дублирования кода.&lt;/p&gt;
&lt;/div&gt;
</summary><category term="dl"></category><category term="java"></category><category term="spring"></category><category term="hibernate"></category></entry><entry><title></title><link href="/posts/2009/09/22/urn:ya.ru:post/22199227/248/" rel="alternate"></link><updated>2009-09-22T07:46:15+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-22:posts/2009/09/22/urn:ya.ru:post/22199227/248/</id><summary type="html">&lt;p&gt;Йэх! Как хорошо :)&lt;/p&gt;
</summary></entry><entry><title>Магия русалок</title><link href="/posts/2009/09/20/magiia-rusalok/" rel="alternate"></link><updated>2009-09-20T19:44:21+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-20:posts/2009/09/20/magiia-rusalok/</id><summary type="html">&lt;p&gt;Недавно начал настраивать Spring Framework 3 в связке с Apache
Tomcat 6 и столкнулся с проблемой, что вроде все мэппинги правильно
указал, а страница никак не открывается. И в логе видно предупреждение:
&lt;code class="code"&gt;
[http-8080-1] WARN org.springframework.web.servlet.PageNotFound - No
mapping found for HTTP request with URI [/dl/index] in DisptcherServlet
with name ‘dl’&lt;/code&gt;
. Порыскав на просторах Великого и Могучего, я нашёл
ответ на свой вопрос на
&lt;a class="reference external" href="http://stackoverflow.com/questions/1266303/no-mapping-found-for-http-request-with-uri-web-inf-pages-apiform-jsp"&gt;stackoverflow&lt;/a&gt;.
Оказалось, что стоит сменить в моём &lt;strong&gt;web.xml&lt;/strong&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;строки с:
&lt;span class="pgcss-nt"&gt;&amp;lt;servlet-mapping&amp;gt;&lt;/span&gt;
    &lt;span class="pgcss-nt"&gt;&amp;lt;servlet-name&amp;gt;&lt;/span&gt;dl&lt;span class="pgcss-nt"&gt;&amp;lt;/servlet-name&amp;gt;&lt;/span&gt;
    &lt;span class="pgcss-nt"&gt;&amp;lt;url-pattern&amp;gt;&lt;/span&gt;/*&lt;span class="pgcss-nt"&gt;&amp;lt;url-pattern&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;/servlet-mapping&amp;gt;&lt;/span&gt;
на:
&lt;span class="pgcss-nt"&gt;&amp;lt;servlet-mapping&amp;gt;&lt;/span&gt;
    &lt;span class="pgcss-nt"&gt;&amp;lt;servlet-name&amp;gt;&lt;/span&gt;dl&lt;span class="pgcss-nt"&gt;&amp;lt;/servlet-name&amp;gt;&lt;/span&gt;
    &lt;span class="pgcss-nt"&gt;&amp;lt;url-pattern&amp;gt;&lt;/span&gt;/&lt;span class="pgcss-nt"&gt;&amp;lt;url-pattern&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;/servlet-mapping&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;И ссылка &lt;a class="reference external" href="http://localhost:8080/dl/index"&gt;http://localhost:8080/dl/index&lt;/a&gt; стала открываться ;).&lt;/p&gt;
</summary><category term="java"></category><category term="spring"></category></entry><entry><title></title><link href="/posts/2009/09/20/urn:ya.ru:post/22199227/245/" rel="alternate"></link><updated>2009-09-20T18:08:53+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-20:posts/2009/09/20/urn:ya.ru:post/22199227/245/</id><summary type="html">&lt;p&gt;В моей душе воют голодные волки&lt;/p&gt;
</summary></entry><entry><title>Spring</title><link href="/posts/2009/09/20/spring/" rel="alternate"></link><updated>2009-09-20T18:07:50+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-20:posts/2009/09/20/spring/</id><summary type="html">&lt;p&gt;Мой ущербный мозг забыл, где находится пакет &lt;code class="code"&gt;
javax.servlet&lt;/code&gt;
. Я
поискал быстренько в гугле, и он мне напомнил про каталог lib в моём
apache-tomcat-6.0.20. Там лежал файл &lt;u class="underline"&gt;
servlet-api.jar&lt;/u&gt;
, который и
поставлял необходимый функционал.&lt;/p&gt;
</summary><category term="tomcat"></category><category term="java"></category></entry><entry><title>Буфер обмена</title><link href="/posts/2009/09/20/bufer-obmena/" rel="alternate"></link><updated>2009-09-20T15:18:46+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-20:posts/2009/09/20/bufer-obmena/</id><summary type="html">&lt;p&gt;Чтобы копировать в буфер обмена из Emacs в X-ы можно было простым
привычным для Emacs нажатием &lt;kbd class="kbd"&gt;
M-w&lt;/kbd&gt;
.&lt;/p&gt;
</summary><category term="emacs"></category><category term="буфер"></category></entry><entry><title>Себе на заметку</title><link href="/posts/2009/09/19/sebe-na-zametku/" rel="alternate"></link><updated>2009-09-19T18:59:37+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-19:posts/2009/09/19/sebe-na-zametku/</id><summary type="html">&lt;p&gt;Если после создания в следующем году новой группы на тестирующей
системе возникнут проблемы, что после перестройки таблицы, результаты в
ней отсутствуют (нет ни суммы, ни посылок и все на одном «общем месте»),
то не забыть установить правильное значение &lt;code class="code"&gt;
java.ProcessLogId&lt;/code&gt;
 в
таблице &lt;strong&gt;Properties&lt;/strong&gt;. Вся проблема в том, что SQL-код обновления
таблиц результатов обновляет только всё до &lt;code class="code"&gt;
&amp;#64;ProcessLogId&lt;/code&gt;
.&lt;/p&gt;
</summary><category term="dl"></category><category term="заметка"></category></entry><entry><title></title><link href="/posts/2009/09/18/urn:ya.ru:post/22199227/241/" rel="alternate"></link><updated>2009-09-18T21:07:53+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-18:posts/2009/09/18/urn:ya.ru:post/22199227/241/</id><summary type="html">&lt;p&gt;Забавная вещь этот Kido… распространяется словно огонь&lt;/p&gt;
</summary></entry><entry><title>Война с Timestamp</title><link href="/posts/2009/09/17/voina-s-timestamp/" rel="alternate"></link><updated>2009-09-17T21:17:33+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-17:posts/2009/09/17/voina-s-timestamp/</id><summary type="html">&lt;p&gt;В MSSQL 2005 Timestamp он же RowVersion — 16-байтовое поле, которое
отражает «версию изменений» ряда. Но если требуется промэппить это поле
на метод POJO-объекта, то возникает вопрос: «Какой тип выбрать?». Сперва
пришла мысль взять &lt;code class="code"&gt;
java.sql.Timestamp&lt;/code&gt;
, но… Hibernate выдавал ошибку,
что нельзя преобразовать &lt;code class="code"&gt;
[B&lt;/code&gt;
 в &lt;code class="code"&gt;
Timestamp&lt;/code&gt;
. Поэтому пришлось решить
эту проблему, указав тип &lt;code class="code"&gt;
byte[]&lt;/code&gt;
.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-nd"&gt;@Id&lt;/span&gt;
&lt;span class="pgcss-nd"&gt;@Column&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;name&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;ts&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
&lt;span class="pgcss-kd"&gt;public&lt;/span&gt; &lt;span class="pgcss-kt"&gt;byte&lt;/span&gt;&lt;span class="pgcss-o"&gt;[]&lt;/span&gt; &lt;span class="pgcss-nf"&gt;getVersion&lt;/span&gt;&lt;span class="pgcss-o"&gt;()&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-n"&gt;version&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
&lt;span class="pgcss-o"&gt;};&lt;/span&gt;
&lt;span class="pgcss-kd"&gt;public&lt;/span&gt; &lt;span class="pgcss-kt"&gt;void&lt;/span&gt; &lt;span class="pgcss-nf"&gt;setVersion&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-kt"&gt;byte&lt;/span&gt;&lt;span class="pgcss-o"&gt;[]&lt;/span&gt; &lt;span class="pgcss-n"&gt;ts&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;{&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;version&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;ts&lt;/span&gt;&lt;span class="pgcss-o"&gt;;&lt;/span&gt;
&lt;span class="pgcss-o"&gt;};&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Не уверен, что мне нужен будет &lt;code class="code"&gt;
setVersion&lt;/code&gt;
, да и скорее всего я
запрещу обновлять это поле и добавлять, при помощи параметров в
аннотации &lt;code class="code"&gt;
&amp;#64;Column&lt;/code&gt;
.&lt;/p&gt;
</summary><category term="msssql"></category><category term="hibernate"></category></entry><entry><title></title><link href="/posts/2009/09/17/urn:ya.ru:post/22199227/237/" rel="alternate"></link><updated>2014-07-14T14:56:00+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-17:posts/2009/09/17/urn:ya.ru:post/22199227/237/</id><summary type="html">&lt;p&gt;Просто “эпик фэйл”, я переоткатил на тестирующей системе &lt;strong&gt;21000&lt;/strong&gt;
решений, теперь буду несколько дней ждать пока машинка 2Ghz + 1GiB RAM
перетестирует это счастье :(.&lt;/p&gt;
</summary><category term=""></category></entry><entry><title>Hibernate</title><link href="/posts/2009/09/16/hibernate/" rel="alternate"></link><updated>2009-09-16T11:13:35+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-16:posts/2009/09/16/hibernate/</id><summary type="html">&lt;p&gt;Вчера добрался снова до &lt;strong&gt;Hibernate&lt;/strong&gt; и &lt;strong&gt;Apache Tomcat&lt;/strong&gt;. Решил понять
почему моё Java-приложение соединяется с базой, но при попытке загрузки
объекта через ORM из базы данных выпадает ошибка вида, что не может
найти мой класс &lt;code class="code"&gt;
results.Cell&lt;/code&gt;
; вот развёртка стека:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;hibernate&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;MappingException&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt; &lt;span class="pgcss-n"&gt;Unknown&lt;/span&gt; &lt;span class="pgcss-nl"&gt;entity:&lt;/span&gt; &lt;span class="pgcss-n"&gt;results&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;Cell&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;hibernate&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;impl&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;SessionFactoryImpl&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;getEntityPersister&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;SessionFactoryImpl&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;628&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;hibernate&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;event&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;def&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;DefaultLoadEventListener&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;onLoad&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;DefaultLoadEventListener&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;91&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;hibernate&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;impl&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;SessionImpl&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;fireLoad&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;SessionImpl&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;906&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;hibernate&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;impl&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;SessionImpl&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;load&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;SessionImpl&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;823&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;hibernate&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;impl&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;SessionImpl&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;load&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;SessionImpl&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;816&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;sun&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;reflect&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;NativeMethodAccessorImpl&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;invoke0&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Native&lt;/span&gt; &lt;span class="pgcss-n"&gt;Method&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;sun&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;reflect&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;NativeMethodAccessorImpl&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;invoke&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;NativeMethodAccessorImpl&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;39&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;sun&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;reflect&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;DelegatingMethodAccessorImpl&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;invoke&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;DelegatingMethodAccessorImpl&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;25&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;lang&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;reflect&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;Method&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;invoke&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Method&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;597&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;hibernate&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;context&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ThreadLocalSessionContext&lt;/span&gt;&lt;span class="pgcss-n"&gt;$TransactionProtectionWrapper&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;invoke&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ThreadLocalSessionContext&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;342&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;$Proxy0&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;load&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Unknown&lt;/span&gt; &lt;span class="pgcss-n"&gt;Source&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;jsp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;index_jsp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;_jspService&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;index_jsp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;63&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;jasper&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;runtime&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;HttpJspBase&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;service&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;HttpJspBase&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;70&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;javax&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;servlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;http&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;HttpServlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;service&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;HttpServlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;717&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;jasper&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;servlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;JspServletWrapper&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;service&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;JspServletWrapper&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;374&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;jasper&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;servlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;JspServlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;serviceJspFile&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;JspServlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;342&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;jasper&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;servlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;JspServlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;service&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;JspServlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;267&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;javax&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;servlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;http&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;HttpServlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;service&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;HttpServlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;717&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;catalina&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;core&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ApplicationFilterChain&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;internalDoFilter&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ApplicationFilterChain&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;290&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;catalina&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;core&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ApplicationFilterChain&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;doFilter&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ApplicationFilterChain&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;206&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;catalina&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;core&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;StandardWrapperValve&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;invoke&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;StandardWrapperValve&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;233&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;catalina&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;core&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;StandardContextValve&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;invoke&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;StandardContextValve&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;191&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;catalina&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;core&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;StandardHostValve&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;invoke&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;StandardHostValve&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;128&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;catalina&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;valves&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ErrorReportValve&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;invoke&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ErrorReportValve&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;102&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;catalina&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;core&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;StandardEngineValve&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;invoke&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;StandardEngineValve&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;109&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;catalina&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;connector&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;CoyoteAdapter&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;service&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;CoyoteAdapter&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;293&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;coyote&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;http11&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;Http11Processor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;process&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Http11Processor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;849&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;coyote&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;http11&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;Http11Protocol&lt;/span&gt;&lt;span class="pgcss-n"&gt;$Http11ConnectionHandler&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;process&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Http11Protocol&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;583&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;tomcat&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;util&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;net&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;JIoEndpoint&lt;/span&gt;&lt;span class="pgcss-n"&gt;$Worker&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;run&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;JIoEndpoint&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;454&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;lang&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;Thread&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;run&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Thread&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;619&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p class="cut"&gt;&lt;a class="h-link reference internal" href="#cut_39983952"data-toggle="collapse"&gt;а что было дальше?&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_39983952"&gt;
&lt;p&gt;Класс Cell у меня очень простой и лежит как и положено в classes в
пакете results. Единственное, что маппинг сделан не через XML, а через
аннотации Java. Т.к. я не хотел делать через XML, то решил посмотреть,
где выпадает это исключение (благо у меня есть исходники Hibernate).
Нашёл эту строчку и понял, что всё дело в отсутсвии описания класса в
XML-файле. Я не мог понять как же его описать, если в
&lt;strong&gt;hibernate.cfg.xml&lt;/strong&gt; описываются только ссылки на XML-мэппинги. Но
погуглив и почитав документацию, я обратил внимание, что можно вместо
названия XML-файла указывать название класса и Hibernate сам разберётся,
что к чему. Поэтому я добавил строку между &lt;code class="code"&gt;
&amp;lt;session-factory&amp;gt;&lt;/code&gt;
 и
&lt;code class="code"&gt;
&amp;lt;/session-factory&amp;gt;&lt;/code&gt;
:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-nt"&gt;&amp;lt;mapping&lt;/span&gt; &lt;span class="pgcss-na"&gt;class=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;results.Cell&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;И всё почти заработало :). Только вот выпала снова ошибка, что оно не
может произвести мэппинг класса:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;hibernate&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;MappingException&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt; &lt;span class="pgcss-n"&gt;An&lt;/span&gt; &lt;span class="pgcss-n"&gt;AnnotationConfiguration&lt;/span&gt; &lt;span class="pgcss-n"&gt;instance&lt;/span&gt; &lt;span class="pgcss-n"&gt;is&lt;/span&gt; &lt;span class="pgcss-n"&gt;required&lt;/span&gt; &lt;span class="pgcss-n"&gt;to&lt;/span&gt; &lt;span class="pgcss-n"&gt;use&lt;/span&gt; &lt;span class="pgcss-o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="pgcss-n"&gt;mapping&lt;/span&gt; &lt;span class="pgcss-n"&gt;class&lt;/span&gt;&lt;span class="pgcss-o"&gt;=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;results.Cell&amp;quot;&lt;/span&gt;&lt;span class="pgcss-o"&gt;/&amp;gt;&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;hibernate&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;cfg&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;Configuration&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;parseMappingElement&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Configuration&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1648&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;hibernate&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;cfg&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;Configuration&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;parseSessionFactory&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Configuration&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1603&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;hibernate&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;cfg&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;Configuration&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;doConfigure&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Configuration&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1582&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;hibernate&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;cfg&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;Configuration&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;doConfigure&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Configuration&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1556&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;hibernate&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;cfg&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;Configuration&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;configure&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Configuration&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1476&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;hibernate&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;cfg&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;Configuration&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;configure&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Configuration&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;1462&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;jsp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;index_jsp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;_jspService&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;index_jsp&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;64&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;jasper&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;runtime&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;HttpJspBase&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;service&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;HttpJspBase&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;70&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;javax&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;servlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;http&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;HttpServlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;service&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;HttpServlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;717&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;jasper&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;servlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;JspServletWrapper&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;service&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;JspServletWrapper&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;374&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;jasper&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;servlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;JspServlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;serviceJspFile&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;JspServlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;342&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;jasper&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;servlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;JspServlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;service&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;JspServlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;267&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;javax&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;servlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;http&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;HttpServlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;service&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;HttpServlet&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;717&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;catalina&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;core&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ApplicationFilterChain&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;internalDoFilter&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ApplicationFilterChain&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;290&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;catalina&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;core&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ApplicationFilterChain&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;doFilter&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ApplicationFilterChain&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;206&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;catalina&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;core&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;StandardWrapperValve&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;invoke&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;StandardWrapperValve&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;233&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;catalina&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;core&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;StandardContextValve&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;invoke&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;StandardContextValve&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;191&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;catalina&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;core&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;StandardHostValve&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;invoke&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;StandardHostValve&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;128&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;catalina&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;valves&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;ErrorReportValve&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;invoke&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ErrorReportValve&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;102&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;catalina&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;core&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;StandardEngineValve&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;invoke&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;StandardEngineValve&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;109&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;catalina&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;connector&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;CoyoteAdapter&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;service&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;CoyoteAdapter&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;293&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;coyote&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;http11&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;Http11Processor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;process&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Http11Processor&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;849&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;coyote&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;http11&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;Http11Protocol&lt;/span&gt;&lt;span class="pgcss-n"&gt;$Http11ConnectionHandler&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;process&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Http11Protocol&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;583&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;org&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;apache&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;tomcat&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;util&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;net&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;JIoEndpoint&lt;/span&gt;&lt;span class="pgcss-n"&gt;$Worker&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;run&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;JIoEndpoint&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;454&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
 &lt;span class="pgcss-n"&gt;at&lt;/span&gt; &lt;span class="pgcss-n"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;lang&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;Thread&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;run&lt;/span&gt;&lt;span class="pgcss-o"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Thread&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-na"&gt;java&lt;/span&gt;&lt;span class="pgcss-o"&gt;:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;619&lt;/span&gt;&lt;span class="pgcss-o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;И снова я заглянул в код функции &lt;code class="code"&gt;
parseMappingElement&lt;/code&gt;
. И что же я
увидел? Увидел то, что эта функция ничего не умеет кроме, как вызывать
throw и гадить выбрасывать исключения. Тут-то до меня и дошло, что я
создаю объект класса Configuration, а нужно AnnotationConfiguration (о
чём оно мне гордо заявляло), потому что Configuration - это что-то типа
базового «класса-пустышки». Поэтому я сделал:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-c1"&gt;// было:&lt;/span&gt;
&lt;span class="pgcss-n"&gt;SessionFactory&lt;/span&gt; &lt;span class="pgcss-n"&gt;sess&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-k"&gt;new&lt;/span&gt; &lt;span class="pgcss-n"&gt;AnnotationConfiguration&lt;/span&gt;&lt;span class="pgcss-o"&gt;().&lt;/span&gt;&lt;span class="pgcss-na"&gt;configure&lt;/span&gt;&lt;span class="pgcss-o"&gt;().&lt;/span&gt;&lt;span class="pgcss-na"&gt;buildSessionFactory&lt;/span&gt;&lt;span class="pgcss-o"&gt;();&lt;/span&gt;
&lt;span class="pgcss-c1"&gt;// стало:&lt;/span&gt;
&lt;span class="pgcss-n"&gt;&lt;strong&gt;SessionFactory&lt;/span&gt; &lt;span class="pgcss-n"&gt;sess&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-k"&gt;new&lt;/span&gt; &lt;span class="pgcss-n"&gt;Configuration&lt;/span&gt;&lt;span class="pgcss-o"&gt;().&lt;/span&gt;&lt;span class="pgcss-na"&gt;configure&lt;/span&gt;&lt;span class="pgcss-o"&gt;().&lt;/span&gt;&lt;span class="pgcss-na"&gt;buildSessionFactory&lt;/span&gt;&lt;span class="pgcss-o"&gt;();&lt;/span&gt;&lt;span class="pgcss-n"&gt;$$&lt;/span&gt;&lt;span class="pgcss-o"&gt;/&lt;/span&gt;&lt;span class="pgcss-n"&gt;strong$$&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;После чего мой код заработал :) и я возрадовался.&lt;/p&gt;
&lt;/div&gt;
</summary><category term="ошибка"></category><category term="java"></category><category term="hibernate"></category></entry><entry><title></title><link href="/posts/2009/09/15/urn:ya.ru:post/22199227/231/" rel="alternate"></link><updated>2009-09-15T16:19:41+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-15:posts/2009/09/15/urn:ya.ru:post/22199227/231/</id><summary type="html">&lt;p&gt;Мне уже на порядок лучше&lt;/p&gt;
</summary></entry><entry><title>ru_comicstrip</title><link href="/posts/2009/09/15/ru_comicstrip/" rel="alternate"></link><updated>2009-09-15T16:16:44+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-15:posts/2009/09/15/ru_comicstrip/</id><summary type="html">&lt;p&gt;Понравился переведённый комикс &lt;strong&gt;x-D&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="image0" src="http://media.trafficgods.ws/c/1555492274/09-08-07.gif" title="image0"/&gt;&lt;/p&gt;
&lt;p&gt;оригинал перевода
&lt;a class="reference external" href="http://community.livejournal.com/ru_comicstrip/469410.html"&gt;здесь&lt;/a&gt;&lt;/p&gt;</summary><category term="комиксы"></category></entry><entry><title>Мой ответ</title><link href="/posts/2009/09/15/moi-otvet/" rel="alternate"></link><updated>2009-09-15T07:25:46+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-15:posts/2009/09/15/moi-otvet/</id><summary type="html">&lt;p&gt;Я ж сказал, что напишу зарисовку, где он чего-нибудь отчебучит. Вот
дружеский шарж на
&lt;a class="reference external" href="http://loukat.ya.ru/replies.xml?item_no=56"&gt;запись&lt;/a&gt; от &lt;a class="reference external" href="http://loukat.ya.ru/"&gt;Леська Lou~kat(ze)&lt;/a&gt;:&lt;/p&gt;
&lt;div class="alert  alert-danger compound"&gt;
&lt;p&gt;&lt;strong&gt;Внимание!&lt;/strong&gt; Следующий текст является просто троллингом созданным по мотивам
другого текста, но может всё равно вызывать повреждения мозга.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Она стояла одиноко на остановке, ждала последний автобус. Ветер
завывал, словно злобное создание насмехается рядом над её горем. В
пальцах слегка покалывало, и снежинки медленно опадали у умирали на её
руках. Но ей было уже всё равно потому, что больше никто не понимает её
в этом мире. Только одна мысль пронзала голову, как тысяча иголок:
«Зачем? зачем?…». Иногда она тихо угасала и казалось, что она не где-то
тут, тут… на этой заброшенной остановке, где старая обветшалая лавочка,
где деревья, которые видели тысячу печальных и счастливых лиц. И вот..
вот… ещё одно… но оно не печальное, оно .. просто остывшее, будто это не
снег падает на него, ложится на ресницы, губы; а может весь этот холод и
вьюга исходят из её стеклянных глаз?&lt;/p&gt;
&lt;p&gt;Но когда сознание вновь возвращалось, то она вспоминала, как им было
хорошо, что он был таким нежным. Но вдруг загоралась искорка ярости и
растапливала снежинки на руках: «Зачем?! зачем он это сделал?». Теперь
ей казалось, что этот мир жесток и несправедлив, а она готова его
разрушить. Но лунное сияние возвращало спокойствие в душу, охлаждало, и
она была похожа на снежную королеву. И приходили другие, печальные
мысли… апатия, полная апатия, ей ничего не нужно, ведь всё, что она
могла отдать ему — она отдала. Самое дорогое, что было, протянула в
тогда ещё тёплых ладонях, она отдала ему сердце! Такое горячее, которое
согрело бы их двоих, но … он предпочёл другое:&lt;/p&gt;
&lt;p&gt;«Как он мог? Съесть моё сердце!! Изверг…», — думала она.&lt;/p&gt;
&lt;p&gt;А он в этот момент наслаждался ароматом жареного мяса, вкусом
подливки. А может он был просто жестоким коллекционером сердец? И это
пополнило его меню?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;От меня:&lt;/strong&gt; «Да-да-да и ещё раз да!!! Я же обещал шарж про
поедателя сердец и жестокого коллекционера x-D, раз кто-то в своём блоге
не захотел добавить мои правки из комментариев, а ещё выдвинул
претензии, мол “сам пиши, раз такой умный”, то вот нате… кушать подано,
садитесь жрать :)».&lt;/p&gt;
</summary><category term="рассказ"></category><category term="ответ"></category><category term="бредни"></category></entry><entry><title></title><link href="/posts/2009/09/14/urn:ya.ru:post/22199227/226/" rel="alternate"></link><updated>2009-09-14T20:43:55+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-14:posts/2009/09/14/urn:ya.ru:post/22199227/226/</id><summary type="html">&lt;p&gt;Я слишком раздражительный последние дни, наверное “ко мне приехала тётя
Ирма” (см. IT Crowd)&lt;/p&gt;
</summary></entry><entry><title>Овсяное печенье</title><link href="/posts/2009/09/14/ovsianoe-pechene/" rel="alternate"></link><updated>2009-09-14T20:41:40+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-14:posts/2009/09/14/ovsianoe-pechene/</id><summary type="html">&lt;p class="row photo-item text-center"&gt;&lt;a class="reference external" href="http://clubs.ya.ru/4611686018427387998/replies.xml?item_no=34323"&gt;&lt;img alt="Печенье" src="http://img-fotki.yandex.ru/get/3702/nat-27.1/0_31396_be475739_L" title="Печенье"/&gt;&lt;/a&gt;&lt;/p&gt;
 
&lt;blockquote&gt;
&lt;p&gt;Состав: геркулес 3 стакана, яйцо 2 шт, сахар 1,5 стакана, маргарин 300 г.,
мука 2 стакана, мед 1 столовая ложка, сода 1 чайная ложка, погасить уксусом, ваниль, соль.&lt;/p&gt;
&lt;p&gt;Геркулес подсушить в микроволновке или на сухой сковородке, измельчить в муку.
Все ингредиенты смешать до однородной массы. Влажными руками скатать небольшие шарики и
выложить на противень, застеленный бумагой для выпечки. Выпекать при
температуре 200 градусов до румяной корочки.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Как раз есть лишний геркулес :) Нужно будет попробовать свои силы…&lt;/p&gt;</summary><category term="печенье"></category><category term="еда"></category></entry><entry><title>Emacs и уведомления в трее</title><link href="/posts/2009/09/14/emacs-i-uvedomleniia-v-tree/" rel="alternate"></link><updated>2009-09-14T18:06:52+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-14:posts/2009/09/14/emacs-i-uvedomleniia-v-tree/</id><summary type="html">&lt;p&gt;Т.к. &lt;strong&gt;Emacs&lt;/strong&gt; не поддерживает загрузку динамических библиотек (а
оно ему и не нужно), то иконку в трее и изменение её статуса будет
отображать отдельное небольшое приложение, которое соединяется пайпами с
Emacs. Я модифицировал существующее такое приложение (описывал его
раньше),
&lt;a class="reference external" href="https://yadi.sk/d/lAg5SLN8UmdLG"&gt;tray_daemon.c&lt;/a&gt; - это
версия, которая умеет:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Отложенное создание иконки (полезно, если иконка нужна только по
время соединения)&lt;/li&gt;
&lt;li&gt;Скрытие/показ и мерцание в трее&lt;/li&gt;
&lt;li&gt;Установка изображения иконки (чтобы можно было передавать из файла
конфигурации Emacs’а, а не была вшита намертво)&lt;/li&gt;
&lt;li&gt;Уничтожение иконки&lt;/li&gt;
&lt;li&gt;Возможность отдельной иконки для каждого процесса Emacs, или
множество различных иконок для одного процесса Emacs, т.к. работает
через пайпы и только со своим родительским процессом&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Вот так оно выглядит:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/80430/"&gt;&lt;img alt="Панель" src="http://img-fotki.yandex.ru/get/3707/imdagger.3/0_13a2e_da2dfe6b_L" title="Панель"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="cut"&gt;&lt;a class="h-link reference internal" data-toggle="collapse" href="#cut_31577232"&gt;дальше много текста и пояснений&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_31577232"&gt;
&lt;p&gt;Процесс, отображающий иконку в трее:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Дублирует при помощи dup стандартный поток ввода (stdin)&lt;/li&gt;
&lt;li&gt;Устанавливает значение названия файла иконки по умолчанию равное
&lt;strong&gt;“icon.png”&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Переходит к считыванию команд&lt;/li&gt;
&lt;li&gt;Т.к. &lt;strong&gt;stdin&lt;/strong&gt; находится в режиме блокировки, то &lt;strong&gt;read&lt;/strong&gt; будет
ожидать хотя бы одного символа на входном потоке&lt;/li&gt;
&lt;li&gt;Ожидает символы либо &lt;strong&gt;‘I’&lt;/strong&gt;, либо &lt;strong&gt;‘s’&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Если пришло сообщение &lt;strong&gt;‘s’&lt;/strong&gt;, то следующие за ним символы — название
файла с изображением (эту команду возможно вызывать только до
инициализации и сколько угодно раз)&lt;/li&gt;
&lt;li&gt;Если пришла команда-символ &lt;strong&gt;‘I’&lt;/strong&gt;, то вызывается инициализация
&lt;strong&gt;Gtk&lt;/strong&gt; и разблокировка потока (добавляется &lt;em&gt;O_NONBLOCK&lt;/em&gt;)&lt;/li&gt;
&lt;li&gt;Если инициализация уже была произведена ранее, то в режиме
неблокирующего потока приложение ожидает команды &lt;strong&gt;‘b’&lt;/strong&gt;, &lt;strong&gt;‘B’&lt;/strong&gt;,
&lt;strong&gt;‘v’&lt;/strong&gt;, &lt;strong&gt;‘V’&lt;/strong&gt;, &lt;strong&gt;‘Q’&lt;/strong&gt;, которыми и управляется&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Описание команд:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;‘I’&lt;/strong&gt; — инициализация gtk и показ в трее&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;‘s’ символы_однобайтные&lt;/strong&gt; — установка исходного изображения, название
не обязательно завершать терминирующим нулём&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;‘b’&lt;/strong&gt; — выключить мерцание&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;‘B’&lt;/strong&gt; — включить мерцание&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;‘v’&lt;/strong&gt; — спрятать иконку&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;‘V’&lt;/strong&gt; — показать иконку&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;‘Q’&lt;/strong&gt;  — завершение процесса, уничтожение иконки&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Затем для этого приложения был написан на Elisp’е код, который связал
&lt;strong&gt;ejabber.el&lt;/strong&gt; и «демона трея». Разберём по порядку. Функция
&lt;code class="code"&gt;
my-tray-icon-send-command&lt;/code&gt;
 умеет отправлять набор символов дочернему
процессу tray_daemon.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;defun&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-send-command&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;command&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;process-send-string&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-process&lt;/span&gt; &lt;span class="pgcss-nv"&gt;command&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;process-send-eof&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-process&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Функция &lt;code class="code"&gt;
process-send-string&lt;/code&gt;
 отправляет строку command процессу
&lt;code class="code"&gt;
my-tray-icon-process&lt;/code&gt;
, она встроенная в Emacs. А функция
&lt;code class="code"&gt;
process-senf-eof&lt;/code&gt;
 отправляет сигнал &lt;strong&gt;EOF&lt;/strong&gt; во входной поток процесса,
что позволяет процирующему потоку понять, что запись
завершена. &lt;code class="code"&gt;
my-tray-icon-send-command&lt;/code&gt;
 будет использована, как
базовая для всех функций управления.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;defun&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-set&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;icon-path&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;my-tray-icon-send-command&lt;/span&gt; &lt;span class="pgcss-s"&gt;"s"&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;my-tray-icon-send-command&lt;/span&gt; &lt;span class="pgcss-nv"&gt;icon-path&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Функция &lt;em&gt;my-tray-icon-set&lt;/em&gt; устанавливает путь к изображению иконки.
Для этого сначала посылается байт ‘s’, а затем строка байтов из
icon-path.&lt;/p&gt;
&lt;p&gt;Далее показан код функций для управления демоном в трее и смысл их
аналогичен посылаемому символьному коду:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;defun&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-init&lt;/span&gt; &lt;span class="pgcss-p"&gt;()&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;my-tray-icon-send-command&lt;/span&gt; &lt;span class="pgcss-s"&gt;"I"&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;

&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;defun&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-destroy&lt;/span&gt; &lt;span class="pgcss-p"&gt;()&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;my-tray-icon-send-command&lt;/span&gt; &lt;span class="pgcss-s"&gt;"Q"&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;

&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;defun&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-show&lt;/span&gt; &lt;span class="pgcss-p"&gt;()&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;my-tray-icon-send-command&lt;/span&gt; &lt;span class="pgcss-s"&gt;"V"&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;

&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;defun&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-hide&lt;/span&gt; &lt;span class="pgcss-p"&gt;()&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;my-tray-icon-send-command&lt;/span&gt; &lt;span class="pgcss-s"&gt;"v"&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;

&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;defun&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-blink&lt;/span&gt; &lt;span class="pgcss-p"&gt;()&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;my-tray-icon-send-command&lt;/span&gt; &lt;span class="pgcss-s"&gt;"B"&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;

&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;defun&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-no-blink&lt;/span&gt; &lt;span class="pgcss-p"&gt;()&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;my-tray-icon-send-command&lt;/span&gt; &lt;span class="pgcss-s"&gt;"b"&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Теперь потребуется описать функцию, которая создаст дочерний
процесс, инициализирует и сконфигурирует демона и установит переменную
&lt;em&gt;my-tray-icon-process&lt;/em&gt; с названием процесса:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;defun&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-start&lt;/span&gt; &lt;span class="pgcss-p"&gt;()&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;setq&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-process&lt;/span&gt; &lt;span class="pgcss-s"&gt;"*tray_icon*"&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;get-process&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-process&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
      &lt;span class="pgcss-p"&gt;()&lt;/span&gt;
     &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;start-process&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-process&lt;/span&gt; &lt;span class="pgcss-no"&gt;nil&lt;/span&gt; &lt;span class="pgcss-s"&gt;"~/.emacs.d/tray_daemon"&lt;/span&gt;&lt;span class="pgcss-p"&gt;)))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Демон будет иметь уникальное имя *tray_icon* в Emacs, а при
помощи &lt;em&gt;get-process&lt;/em&gt; проверяется, чтобы процесс не был уже запущен, т.к.
нет смысла в двух одинаковых. Но если &lt;strong&gt;*tray_icon*&lt;/strong&gt; отсутствует, то
при помощи встроенной функции &lt;em&gt;start-process&lt;/em&gt; он запускается. Формат
вызова &lt;em&gt;start-process&lt;/em&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;start-process&lt;/span&gt; &lt;span class="pgcss-err"&gt;имя&lt;/span&gt;&lt;span class="pgcss-nb"&gt;-&lt;/span&gt;&lt;span class="pgcss-err"&gt;процесса&lt;/span&gt;&lt;span class="pgcss-nb"&gt;-&lt;/span&gt;&lt;span class="pgcss-err"&gt;в&lt;/span&gt;&lt;span class="pgcss-nv"&gt;-Emacs&lt;/span&gt; &lt;span class="pgcss-err"&gt;буфер&lt;/span&gt;&lt;span class="pgcss-nb"&gt;-&lt;/span&gt;&lt;span class="pgcss-err"&gt;обмена&lt;/span&gt; &lt;span class="pgcss-s"&gt;"путь_к_файлу_на_диске"&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Т.к. обмен с процессом будет происходить последством каналов, то
буфер нужно установить равным nil.&lt;/p&gt;
&lt;p&gt;Для того, чтобы обрабатывать прочитанные сообщения и выключать
мерцание иконки в трее я создал функцию &lt;em&gt;my-tray-icon-mesagge-handler&lt;/em&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;defun&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-mesagge-handler&lt;/span&gt; &lt;span class="pgcss-p"&gt;()&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;when&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;and&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;get-process&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-process&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;equal&lt;/span&gt; &lt;span class="pgcss-nv"&gt;jabber-activity-count-string&lt;/span&gt; &lt;span class="pgcss-s"&gt;"0"&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;my-tray-icon-no-blink&lt;/span&gt;&lt;span class="pgcss-p"&gt;)))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;В jabber.el написано, что переменная &lt;code class="code"&gt;
jabber-activity-count-string&lt;/code&gt;

содержит строковое значение текущего количества пользователей, сообщения
которых ещё не прочитаны. Поэтому нужно её проверить на равество “0” и,
если это так, то убрать мерцание. Этот обработчик вешается как хук на
обновление активности:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;add-hook&lt;/span&gt; &lt;span class="pgcss-ss"&gt;'jabber-activity-update-hook&lt;/span&gt;
  &lt;span class="pgcss-ss"&gt;'my-tray-icon-mesagge-handler&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Функция обновления активности вызывается в случае, если число
непрочитанных сообщений изменилось. Теперь как только наше приложение
смогло не мерцать, то следует его научить мерцать:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;defun&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-show-notification&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;from&lt;/span&gt; &lt;span class="pgcss-nv"&gt;buffer&lt;/span&gt; &lt;span class="pgcss-nv"&gt;text&lt;/span&gt; &lt;span class="pgcss-nv"&gt;proposed-alert&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;when&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;not&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;equal&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;get-buffer-window&lt;/span&gt; &lt;span class="pgcss-nv"&gt;buffer&lt;/span&gt; &lt;span class="pgcss-ss"&gt;'visible&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;selected-window&lt;/span&gt;&lt;span class="pgcss-p"&gt;)))&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;jabber-message-osd&lt;/span&gt; &lt;span class="pgcss-nv"&gt;from&lt;/span&gt; &lt;span class="pgcss-nv"&gt;buffer&lt;/span&gt; &lt;span class="pgcss-nv"&gt;text&lt;/span&gt; &lt;span class="pgcss-nv"&gt;proposed-alert&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;my-tray-icon-blink&lt;/span&gt;&lt;span class="pgcss-p"&gt;)))&lt;/span&gt;

&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;add-hook&lt;/span&gt; &lt;span class="pgcss-ss"&gt;'jabber-alert-message-hooks&lt;/span&gt;
  &lt;span class="pgcss-ss"&gt;'my-show-notification&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Обязательно нужно, чтобы функция-обработчик пришедшего сообщения,
которая применяется как хук к &lt;code class="code"&gt;
jabber-alert-message-hooks&lt;/code&gt;
, принимала 4
параметра: от кого, буфер для общения с этим человеком, текст сообщения,
тип сообщения (отошёл, текст, отключён и т.д.). Чтобы иконка не начинала
мерцать в тот момент, когда пользователь и так видит окно чата с
человеком, то вызывается &lt;code class="code"&gt;
(get-buffer-window buffer 'visible)&lt;/code&gt;
, с
параметром visible она проверяет виден ли буфер (учитывает даже факт,
что окно свёрнуто, но не учитывает множество рабочих
столов). &lt;code class="code"&gt;
(jabber-message-osd from buffer text proposed-alert)&lt;/code&gt;
 я
использую, чтобы xosd (треубется скачать osd.el) отображал от кого
пришло сообщение на экране:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/80432/"&gt;&lt;img alt="Новое сообщение" src="http://img-fotki.yandex.ru/get/3711/imdagger.3/0_13a30_8fd4035a_L" title="Новое сообщение"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Ну и на закуску мой полный jabber_cfg.el:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-c1"&gt;;; а пароль вводить ручками при к каждом коннекте&lt;/span&gt;
&lt;span class="pgcss-c1"&gt;;; ну не доверяю я хранить его в открытов виде тут&lt;/span&gt;
&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;setq&lt;/span&gt; &lt;span class="pgcss-nv"&gt;jabber-account-list&lt;/span&gt;
 &lt;span class="pgcss-o"&gt;'&lt;/span&gt;&lt;span class="pgcss-p"&gt;((&lt;/span&gt;&lt;span class="pgcss-s"&gt;"имя@ya.ru/emacs"&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-ss"&gt;:network-server&lt;/span&gt; &lt;span class="pgcss-o"&gt;.&lt;/span&gt; &lt;span class="pgcss-s"&gt;"сервер"&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-ss"&gt;:connection-type&lt;/span&gt; &lt;span class="pgcss-o"&gt;.&lt;/span&gt; &lt;span class="pgcss-nv"&gt;ssl&lt;/span&gt;&lt;span class="pgcss-p"&gt;))))&lt;/span&gt;

&lt;span class="pgcss-c1"&gt;;; раскомментировать, если будет говорить, что переменная&lt;/span&gt;
&lt;span class="pgcss-c1"&gt;;; my-tray-icon-process не объявлена&lt;/span&gt;
&lt;span class="pgcss-c1"&gt;;; (setq my-tray-icon-process "*tray_icon*")&lt;/span&gt;

&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;defun&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-send-command&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;command&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;process-send-string&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-process&lt;/span&gt; &lt;span class="pgcss-nv"&gt;command&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;process-send-eof&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-process&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;

&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;defun&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-set&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;icon-path&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;my-tray-icon-send-command&lt;/span&gt; &lt;span class="pgcss-s"&gt;"s"&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;my-tray-icon-send-command&lt;/span&gt; &lt;span class="pgcss-nv"&gt;icon-path&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;

&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;defun&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-init&lt;/span&gt; &lt;span class="pgcss-p"&gt;()&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;my-tray-icon-send-command&lt;/span&gt; &lt;span class="pgcss-s"&gt;"I"&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;

&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;defun&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-destroy&lt;/span&gt; &lt;span class="pgcss-p"&gt;()&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;my-tray-icon-send-command&lt;/span&gt; &lt;span class="pgcss-s"&gt;"Q"&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;

&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;defun&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-show&lt;/span&gt; &lt;span class="pgcss-p"&gt;()&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;my-tray-icon-send-command&lt;/span&gt; &lt;span class="pgcss-s"&gt;"V"&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;

&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;defun&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-hide&lt;/span&gt; &lt;span class="pgcss-p"&gt;()&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;my-tray-icon-send-command&lt;/span&gt; &lt;span class="pgcss-s"&gt;"v"&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;

&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;defun&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-blink&lt;/span&gt; &lt;span class="pgcss-p"&gt;()&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;my-tray-icon-send-command&lt;/span&gt; &lt;span class="pgcss-s"&gt;"B"&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;

&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;defun&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-no-blink&lt;/span&gt; &lt;span class="pgcss-p"&gt;()&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;my-tray-icon-send-command&lt;/span&gt; &lt;span class="pgcss-s"&gt;"b"&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;

&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;defun&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-start&lt;/span&gt; &lt;span class="pgcss-p"&gt;()&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;setq&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-process&lt;/span&gt; &lt;span class="pgcss-s"&gt;"*tray_icon*"&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;get-process&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-process&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
      &lt;span class="pgcss-p"&gt;()&lt;/span&gt;
    &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;start-process&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-process&lt;/span&gt; &lt;span class="pgcss-no"&gt;nil&lt;/span&gt; &lt;span class="pgcss-s"&gt;"~/.emacs.d/tray_daemon"&lt;/span&gt;&lt;span class="pgcss-p"&gt;)))&lt;/span&gt;

&lt;span class="pgcss-c1"&gt;;; подключение скачанной библиотеки&lt;/span&gt;
&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;require&lt;/span&gt; &lt;span class="pgcss-ss"&gt;'osd&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

&lt;span class="pgcss-c1"&gt;;; настройки для xosd&lt;/span&gt;
&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;setq&lt;/span&gt; &lt;span class="pgcss-nv"&gt;osd-program-args&lt;/span&gt;
  &lt;span class="pgcss-o"&gt;'&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;"--pos"&lt;/span&gt; &lt;span class="pgcss-s"&gt;"bottom"&lt;/span&gt;
  &lt;span class="pgcss-s"&gt;"--offset"&lt;/span&gt; &lt;span class="pgcss-s"&gt;"7"&lt;/span&gt;
  &lt;span class="pgcss-s"&gt;"--align"&lt;/span&gt; &lt;span class="pgcss-s"&gt;"left"&lt;/span&gt;
  &lt;span class="pgcss-s"&gt;"--indent"&lt;/span&gt; &lt;span class="pgcss-s"&gt;"18"&lt;/span&gt;
  &lt;span class="pgcss-s"&gt;"--delay"&lt;/span&gt; &lt;span class="pgcss-s"&gt;"3"&lt;/span&gt;
  &lt;span class="pgcss-s"&gt;"--color"&lt;/span&gt; &lt;span class="pgcss-s"&gt;"red"&lt;/span&gt;
  &lt;span class="pgcss-s"&gt;"--shadow"&lt;/span&gt; &lt;span class="pgcss-s"&gt;"2"&lt;/span&gt;
  &lt;span class="pgcss-s"&gt;"--shadowcolour"&lt;/span&gt; &lt;span class="pgcss-s"&gt;"#1e2320"&lt;/span&gt;
  &lt;span class="pgcss-s"&gt;"--lines"&lt;/span&gt; &lt;span class="pgcss-s"&gt;"3"&lt;/span&gt;
  &lt;span class="pgcss-s"&gt;"--font"&lt;/span&gt;
  &lt;span class="pgcss-s"&gt;"-*-times new roman-medium-r-*-*-24-*-*-*-*-*-*-*"&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;

&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;require&lt;/span&gt; &lt;span class="pgcss-ss"&gt;'jabber-autoloads&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;defun&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-mesagge-handler&lt;/span&gt; &lt;span class="pgcss-p"&gt;()&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;when&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;and&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;get-process&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-tray-icon-process&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;equal&lt;/span&gt; &lt;span class="pgcss-nv"&gt;jabber-activity-count-string&lt;/span&gt; &lt;span class="pgcss-s"&gt;"0"&lt;/span&gt;&lt;span class="pgcss-p"&gt;))&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;my-tray-icon-no-blink&lt;/span&gt;&lt;span class="pgcss-p"&gt;)))&lt;/span&gt;

&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;add-hook&lt;/span&gt; &lt;span class="pgcss-ss"&gt;'jabber-activity-update-hook&lt;/span&gt;
  &lt;span class="pgcss-ss"&gt;'my-tray-icon-mesagge-handler&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;add-hook&lt;/span&gt; &lt;span class="pgcss-ss"&gt;'jabber-post-connect-hooks&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;lambda&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;connection&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;my-tray-icon-start&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;my-tray-icon-set&lt;/span&gt; &lt;span class="pgcss-s"&gt;"/home/imdagger/.emacs.d/icon.png"&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;my-tray-icon-init&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;my-tray-icon-show&lt;/span&gt;&lt;span class="pgcss-p"&gt;)))&lt;/span&gt;

&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;add-hook&lt;/span&gt; &lt;span class="pgcss-ss"&gt;'jabber-post-disconnect-hook&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;lambda&lt;/span&gt; &lt;span class="pgcss-p"&gt;()&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;my-tray-icon-hide&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;my-tray-icon-destroy&lt;/span&gt;&lt;span class="pgcss-p"&gt;)))&lt;/span&gt;

&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;defun&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-show-notification&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;from&lt;/span&gt; &lt;span class="pgcss-nv"&gt;buffer&lt;/span&gt; &lt;span class="pgcss-nv"&gt;text&lt;/span&gt; &lt;span class="pgcss-nv"&gt;proposed-alert&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;when&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;not&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;equal&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;get-buffer-window&lt;/span&gt; &lt;span class="pgcss-nv"&gt;buffer&lt;/span&gt; &lt;span class="pgcss-ss"&gt;'visible&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;selected-window&lt;/span&gt;&lt;span class="pgcss-p"&gt;)))&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;jabber-message-osd&lt;/span&gt; &lt;span class="pgcss-nv"&gt;from&lt;/span&gt; &lt;span class="pgcss-nv"&gt;buffer&lt;/span&gt; &lt;span class="pgcss-nv"&gt;text&lt;/span&gt; &lt;span class="pgcss-nv"&gt;proposed-alert&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;my-tray-icon-blink&lt;/span&gt;&lt;span class="pgcss-p"&gt;)))&lt;/span&gt;

&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;add-hook&lt;/span&gt; &lt;span class="pgcss-ss"&gt;'jabber-alert-message-hooks&lt;/span&gt;
  &lt;span class="pgcss-ss"&gt;'my-show-notification&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

&lt;span class="pgcss-c1"&gt;;; хуки на изменение статуса и отображение через xosd&lt;/span&gt;
&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;add-hook&lt;/span&gt; &lt;span class="pgcss-ss"&gt;'jabber-alert-muc-hooks&lt;/span&gt; &lt;span class="pgcss-ss"&gt;'jabber-muc-osd&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;add-hook&lt;/span&gt; &lt;span class="pgcss-ss"&gt;'jabber-alert-presence-hooks&lt;/span&gt; &lt;span class="pgcss-ss"&gt;'jabber-presence-osd&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

&lt;span class="pgcss-c1"&gt;;; нам не нужная отладочная информация&lt;/span&gt;
&lt;span class="pgcss-c1"&gt;;; включим, когда будем что-то дорабатывать в jabber.el&lt;/span&gt;
&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;setq&lt;/span&gt; &lt;span class="pgcss-nv"&gt;fsm-debug&lt;/span&gt; &lt;span class="pgcss-no"&gt;nil&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

&lt;span class="pgcss-c1"&gt;;; параметры для истории, вида и др.&lt;/span&gt;
&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;setq&lt;/span&gt; &lt;span class="pgcss-nv"&gt;jabber-history-enabled&lt;/span&gt; &lt;span class="pgcss-no"&gt;t&lt;/span&gt;
  &lt;span class="pgcss-nv"&gt;jabber-use-global-history&lt;/span&gt; &lt;span class="pgcss-no"&gt;nil&lt;/span&gt;
  &lt;span class="pgcss-nv"&gt;jabber-history-dir&lt;/span&gt; &lt;span class="pgcss-s"&gt;"~/.emacs.d/jabber/"&lt;/span&gt;
  &lt;span class="pgcss-nv"&gt;jabber-chatstates-confirm&lt;/span&gt; &lt;span class="pgcss-no"&gt;t&lt;/span&gt;
  &lt;span class="pgcss-nv"&gt;jabber-events-confirm-composing&lt;/span&gt; &lt;span class="pgcss-no"&gt;t&lt;/span&gt;
  &lt;span class="pgcss-nv"&gt;jabber-chat-time-format&lt;/span&gt; &lt;span class="pgcss-s"&gt;"%a %d %b %H:%M:%S"&lt;/span&gt;
  &lt;span class="pgcss-nv"&gt;jabber-backlog-number&lt;/span&gt; &lt;span class="pgcss-mi"&gt;50&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

&lt;span class="pgcss-c1"&gt;;; быстрое переключение к буфферу с сообщением&lt;/span&gt;
&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;global-set-key&lt;/span&gt; &lt;span class="pgcss-nv"&gt;[S-f12]&lt;/span&gt; &lt;span class="pgcss-ss"&gt;'jabber-activity-switch-to&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;</summary><category term="emacs"></category><category term="трей"></category></entry><entry><title>День программиста</title><link href="/posts/2009/09/13/den-programmista/" rel="alternate"></link><updated>2009-09-13T18:36:15+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-13:posts/2009/09/13/den-programmista/</id><summary type="html">&lt;p&gt;Первый раз задействовал арматуры при создании кистей рук, раньше
как-то просто моделил сразу разные меши. Смоделил всё где-то за 1 час
:S. Да долговато, но я ещё намучался с узлами композиции… Пришлось
выстроить сложную схему объединения слоёв, но всё же напортачил там-сям
:).&lt;/p&gt;
&lt;p&gt;Мой ответ на поздравление:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/79930/"&gt;&lt;img alt="Робот, спасибо" src="http://img-fotki.yandex.ru/get/3704/imdagger.3/0_1383a_b17155fa_L" title="Робот, спасибо"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="праздник"></category></entry><entry><title>Hibernate</title><link href="/posts/2009/09/12/hibernate-timestamp/" rel="alternate"></link><updated>2009-09-12T18:48:33+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-12:posts/2009/09/12/hibernate-timestamp/</id><summary type="html">&lt;p&gt;Чтобы промэппировать в Hibernate тип базы данных &lt;code class="code"&gt;
TIMESTAMP&lt;/code&gt;
, то
следует использовать аннотацию &lt;code class="code"&gt;
&amp;#64;Version&lt;/code&gt;
.&lt;/p&gt;
</summary><category term="java"></category><category term="hibernate"></category></entry><entry><title></title><link href="/posts/2009/09/11/urn:ya.ru:post/22199227/215/" rel="alternate"></link><updated>2009-09-11T20:11:38+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-11:posts/2009/09/11/urn:ya.ru:post/22199227/215/</id><summary type="html">&lt;p&gt;Я в панике :)&lt;/p&gt;
</summary></entry><entry><title>Java</title><link href="/posts/2009/09/11/java/" rel="alternate"></link><updated>2009-09-11T20:10:58+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-11:posts/2009/09/11/java/</id><summary type="html">&lt;p&gt;Скачал:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Apache Tomcat 6.0.20&lt;/li&gt;
&lt;li&gt;Spring framework 2.5.6&lt;/li&gt;
&lt;li&gt;Hibernate 3.3.2&lt;/li&gt;
&lt;li&gt;EhCache 1.6.2&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Всё это мне потребуется для написания диплома. Нужно уже взяться и
переписать кусочек (отрефакторить) старого кода DL, но… но… сначала я
составлю тесты, предже чем творить (&lt;del class="del"&gt;
дада! старый код не тестировался
никак&lt;/del&gt;
). Буду работать по методу … не помню как называется, кажется про
него Фаулер писал. Про то, как рефакторить старый ужасный код, который
писал не ты, да ещё разработчика этого кода уже не найти; и этот код
работает и его нужно не сломать, а поэтапно “выровнять”. А переписать с
нуля не представляется возможным :(, т.к.: &lt;strong&gt;413&lt;/strong&gt; JSP-файлов, &lt;strong&gt;1050&lt;/strong&gt;
Java-классов и &lt;strong&gt;200&lt;/strong&gt; ASP-файлов с кодом… Поэтому потихотьну,
помаленьку.. не надрываясь, думая головой и ощущая &lt;del class="del"&gt;
тоннель&lt;/del&gt;
 свет впереди.&lt;/p&gt;
</summary><category term="dl"></category><category term="java"></category></entry><entry><title></title><link href="/posts/2009/09/10/urn:ya.ru:post/22199227/213/" rel="alternate"></link><updated>2009-09-10T15:03:24+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-10:posts/2009/09/10/urn:ya.ru:post/22199227/213/</id><summary type="html">&lt;p&gt;Буду читать и набираться знаний в мою пустую голову :).&lt;/p&gt;
</summary></entry><entry><title>Существо из Сожа</title><link href="/posts/2009/09/09/sushchestvo-iz-sozha/" rel="alternate"></link><updated>2009-09-09T20:29:05+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-09:posts/2009/09/09/sushchestvo-iz-sozha/</id><summary type="html">&lt;p&gt;Теперь буду знать, что эта “штука” из моего видео зовётся Щитень :).&lt;/p&gt;
</summary><category term="щитень"></category><category term="сож"></category><category term="создание"></category></entry><entry><title>Лолз Delphi vs Java</title><link href="/posts/2009/09/09/lolz-delphi-vs-java/" rel="alternate"></link><updated>2009-09-09T20:07:41+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-09:posts/2009/09/09/lolz-delphi-vs-java/</id><summary type="html">&lt;p&gt;Вчера немного спрорили с преподом о том, что я не хочу писать на
Delphi (он хочет, чтобы мы в курсе лабораторной дописали его прогу :D).
А т.к. этот препод любит только Delphi (я предложил ему, что я напишу
заново его &lt;del class="del"&gt;
мегапупер&lt;/del&gt;
 прогу, но не на Delphi), то конечно против Java и
других языков он выдвинул &lt;del class="del"&gt;
ужаснувший меня до глубины души&lt;/del&gt;
 неоспоримый
&lt;del class="del"&gt;
хехе наивный&lt;/del&gt;
 факт: &amp;quot;&lt;strong&gt;Java — проделки имериалистов&lt;/strong&gt;&amp;quot; (c) Препод. А
дальше &lt;del class="del"&gt;
мой мозг взорвался/отключился от этих теорий мегазаговоров&lt;/del&gt;
 и
слушал я про то, как Java мешает нам получать деньги и про то, что они
её специально придумали, чтобы сделать нам плохо :D.&lt;/p&gt;
</summary><category term="java"></category><category term="delphi"></category><category term="перлы"></category><category term="лол"></category></entry><entry><title></title><link href="/posts/2009/09/09/urn:ya.ru:post/22199227/207/" rel="alternate"></link><updated>2009-09-09T20:00:18+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-09:posts/2009/09/09/urn:ya.ru:post/22199227/207/</id><summary type="html">&lt;p&gt;Мозг перегружен, желание кодить огромное, впереди туча работы :)&lt;/p&gt;
</summary></entry><entry><title>Апельсин vs Помидор</title><link href="/posts/2009/09/09/apelsin-vs-pomidor/" rel="alternate"></link><updated>2009-09-09T19:47:00+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-09:posts/2009/09/09/apelsin-vs-pomidor/</id><summary type="html">&lt;p&gt;Они: "Ну и кто из нас помидор, а кто &lt;del class="del"&gt;
огурец&lt;/del&gt;
 апельсин?"&lt;/p&gt;
&lt;p&gt;Я: “Тише, тише… всё равно я вас скоро съем! Тут один умный кабачок уже
договорился, сейчас расправлюсь с ним и займусь вами ;)”&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/78482/"&gt;&lt;img alt="Померяемся" src="http://img-fotki.yandex.ru/get/3703/imdagger.3/0_13292_e5488bf7_XL.jpg" style="width: 400px; height: 300px;" title="Померяемся"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/78484/"&gt;&lt;img alt="Друг на дружке" src="http://img-fotki.yandex.ru/get/3009/imdagger.3/0_13294_b9d942cd_XL.jpg" style="width: 400px; height: 300px;" title="Друг на дружке"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Это реально помидор, сорт просто такой — оранжевый.&lt;/p&gt;</summary><category term="помидор"></category><category term="апельсин"></category><category term="еда"></category></entry><entry><title>Университет</title><link href="/posts/2009/09/08/universitet/" rel="alternate"></link><updated>2009-09-08T20:15:47+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-08:posts/2009/09/08/universitet/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Никогда не стоит смеяться с программ, которые сделали преподы, даже
если ты на 5 курсе и его программа реально просто смешная. Глючит,
выпадает, сделана как практическая часть к диссертации, но у препода
находится оправдание каждой баге x-D… повисло — медленный компьютер, не
работает — так иногда бывает, выпала — это что-то неверно установилось.
А ещё хочет, чтобы в рамках лабораторной её дописали :D.&lt;/p&gt;
</summary><category term="университет"></category></entry><entry><title>Samba4-alpha6 в alpha9</title><link href="/posts/2009/09/07/samba4-alpha6-v-alpha9/" rel="alternate"></link><updated>2009-09-07T21:55:38+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-07:posts/2009/09/07/samba4-alpha6-v-alpha9/</id><summary type="html">&lt;p&gt;Если посчастливилось обновляться с &lt;strong&gt;Samba4&lt;/strong&gt; 6-ой альфы на 9-ую, то
следует помнить, что для поддержки &lt;strong&gt;Win2008&lt;/strong&gt; появился параметр
&lt;strong&gt;parentGUID&lt;/strong&gt;. Т.к. у меня была уже сконфигурированная alpha6 и там уже
было 400 активных пользователей, десятки рабочих машин и где-то ещё 300
не постоянных пользователей, то не хотелось нарушить её
работоспособность. Но при обновлении на &lt;strong&gt;9-ку&lt;/strong&gt; появились проблемы с
тем, что она стала загружаться медленнее и перестали вводится машины в
домен с ошибкой &amp;quot;&lt;em&gt;База данных защиты повреждена&lt;/em&gt;&amp;quot; (позднее я выяснил,
что это проблемы со схемой после обновления). Я обратил внимание на
&lt;strong&gt;samba.log&lt;/strong&gt; и увидел запись, что в схеме &lt;u class="underline"&gt;
отсутствует аттрибут
parentGUID&lt;/u&gt;
 при попытке добавки новой записи. Это связано с тем, что
&lt;strong&gt;alpha9&lt;/strong&gt; обновляет parentGUID, а в схеме его нету (она старая от
6-ки). Тут-то я и осознал, что код Samba я обновил, а &lt;strong&gt;schema.ldb&lt;/strong&gt; —
нет. Тогда я выполнил следующие действия:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Остановил сервис Samba&lt;/li&gt;
&lt;li&gt;Переименовал каталоги etc, var и private (&lt;u class="underline"&gt;
т.к. сценарий будет
перезаписывать там данные&lt;/u&gt;
)&lt;/li&gt;
&lt;li&gt;Создал пустые etc, var, private (тут самое важное — пользователи!!)&lt;/li&gt;
&lt;li&gt;Запустил Python-скрипт &lt;strong&gt;provision&lt;/strong&gt; из share/setup&lt;/li&gt;
&lt;li&gt;Программа создала всё необходимое и конфигурационный файл&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Из-за того, что у меня сервер уже был настроен до обновления, то я
заменил только файлы &lt;strong&gt;schema.ldb&lt;/strong&gt; и &lt;strong&gt;sam.ldb&lt;/strong&gt;. Запустил сервис
Samba4. Больше ошибка с введением в домен &lt;em&gt;пока не появлялась&lt;/em&gt;.&lt;/p&gt;
</summary><category term="samba4"></category><category term="ошибка"></category><category term="обновление"></category></entry><entry><title>Лолз</title><link href="/posts/2009/09/07/lolz/" rel="alternate"></link><updated>2009-09-07T20:10:11+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-07:posts/2009/09/07/lolz/</id><summary type="html">&lt;p&gt;Сегодня меня спросили:“как можно пароль забить на сайт что бы не
ломали?”, я долго думал, что от меня хотят и как помочь :).&lt;/p&gt;
</summary><category term="перлы"></category><category term="лол"></category></entry><entry><title>PUT и POST</title><link href="/posts/2009/09/05/put-i-post/" rel="alternate"></link><updated>2009-09-05T20:13:23+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-05:posts/2009/09/05/put-i-post/</id><summary type="html">&lt;p&gt;Нужно будет запомнить эти мысли о том, как использовать эти методы при
REST. Скоро они мне помогут и дадут почву и пищу для (уже) моих
размышлений.&lt;/p&gt;
</summary><category term="REST"></category><category term="dl"></category><category term="PUT"></category><category term="HTTP"></category><category term="POST"></category></entry><entry><title></title><link href="/posts/2009/09/05/urn:ya.ru:post/22199227/200/" rel="alternate"></link><updated>2009-09-05T20:00:05+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-05:posts/2009/09/05/urn:ya.ru:post/22199227/200/</id><summary type="html">&lt;p&gt;Жуть! Сколько меня ещё ждёт впереди работы! :)&lt;/p&gt;
</summary></entry><entry><title>REST</title><link href="/posts/2009/09/05/rest/" rel="alternate"></link><updated>2009-09-05T19:51:32+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-05:posts/2009/09/05/rest/</id><summary type="html">&lt;p&gt;Когда буду описывать &lt;strong&gt;REST&lt;/strong&gt;-интерфейс для DL, то воспользуюсь такими
мыслями:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Если нужно сделать удаление нескольких элементов, например, 3, 9 и
45, то запрос будет выглядеть как &lt;strong&gt;DELETE /tasks/3;9;45&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Если нужно будет получить список последних 30 отсылок начиная с 930,
то запрос будет вида &lt;strong&gt;GET /log/930-900&lt;/strong&gt;, если параметр 930-900 не
задан, то возвращаются просто последние N записей от текущей даты.&lt;/li&gt;
&lt;li&gt;Если потребовалось убрать решение №4334 с тестирования, то &lt;strong&gt;DELETE
/solution/4334&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Если требуется отправить решение для задачи 23094 на DL с указанием
Дельты (например, delta2 и компилятор G++), то использовать запрос
&lt;strong&gt;POST /task/23094/solution{delta2,g++}&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
</summary><category term="REST"></category><category term="dl"></category><category term="идеи"></category></entry><entry><title>Яндекс.Почта</title><link href="/posts/2009/09/05/iandekspochta/" rel="alternate"></link><updated>2009-09-05T18:29:24+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-05:posts/2009/09/05/iandekspochta/</id><summary type="html">&lt;p&gt;Приятно, что люди оперативно реагируют на твои запросы :). Только
написал в пожеланиях почты “ложку дёгтя”, что дальше 2-ой страницы не
доступны письма при группировке, &amp;lt;даже забыл сказать, что группировал
:)&amp;gt;, как через меньше, чем один день всё поправили. Пустяк, но приятно,
а то приходилось переключаться между режимами.&lt;/p&gt;
</summary><category term="Яндекс"></category></entry><entry><title>Гетерогенная среда</title><link href="/posts/2009/09/04/geterogennaia-sreda/" rel="alternate"></link><updated>2009-09-04T19:36:41+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-04:posts/2009/09/04/geterogennaia-sreda/</id><summary type="html">&lt;p&gt;Если среда гетерогенная и клиенты &lt;strong&gt;Window$ XP&lt;/strong&gt; и &lt;strong&gt;Window$ 2000&lt;/strong&gt;,
а PDC — &lt;strong&gt;Samba4.0.0alpha9-GIT-fced9df&lt;/strong&gt; (&lt;del class="del"&gt;
да-да я знаю, что её нельзя
ещё юзать в продакшн&lt;/del&gt;
 x-D), то можно иногда столкнуться с проблемой при
вводе компьютера в домен. При этом Window$ выдаёт сообщение &lt;u class="underline"&gt;
&amp;quot;База данных
защиты повреждена&amp;quot;&lt;/u&gt;
, а стандартная утилита из комплекта системы коворит,
что с базой всё хорошо; то возможно это случай, с которым в 50% я
научился бороться:&lt;/p&gt;
&lt;blockquote&gt;
$ ldbedit -H &lt;a class="reference external" href="ldap://localhost"&gt;ldap://localhost&lt;/a&gt; -U administrator&lt;/blockquote&gt;
&lt;p&gt;Найти запись для компьютера вида &lt;strong&gt;CN=имя_компьютера,DN=…&lt;/strong&gt;,
удалить &lt;u class="underline"&gt;
всю запись&lt;/u&gt;
 (если $EDITOR равен &lt;strong&gt;vi&lt;/strong&gt;, то поиск — &lt;kbd class="kbd"&gt;
/&lt;/kbd&gt;
, а
удаление одной строки — &lt;kbd class="kbd"&gt;
dd&lt;/kbd&gt;
). Попробовать ввести компьютер снова.
Эта проблема иногда возникает, если компьютер был введён и не выведен из
домена.&lt;/p&gt;
</summary><category term="samba4"></category><category term="ошибка"></category><category term="домен"></category></entry><entry><title>Работа</title><link href="/posts/2009/09/04/rabota/" rel="alternate"></link><updated>2009-09-04T07:09:23+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-04:posts/2009/09/04/rabota/</id><summary type="html">&lt;p&gt;Опять рано встал :S в 5:00, приехал на работу к 7 часам. Эх… устал я,
хочу чтобы всё заработало и мне несколько лет не пришлось ничего
особенного делать.&lt;/p&gt;
</summary><category term="устал"></category><category term="работа"></category></entry><entry><title>DRBL</title><link href="/posts/2009/09/03/drbl/" rel="alternate"></link><updated>2009-09-03T20:31:13+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-03:posts/2009/09/03/drbl/</id><summary type="html">&lt;p&gt;Если используется &lt;strong&gt;DRBL&lt;/strong&gt; для загрузки операционной системы по сети
через PXE, а после запуска системы на клиенте вызывается &amp;quot;&lt;em&gt;dd
if=винчестер1 of=винчестер2&lt;/em&gt;&amp;quot;, особенно порциями (как я - по 100MiB,
чтобы можно было следить за процессом), то не стоит забывать о &lt;strong&gt;sync&lt;/strong&gt;,
а то я за это поплатился потраченным впустую временем. Да ещё и DMA на
PATA не поднялся, поэтому копирование 80GiB было весёлым занятием, а ещё
было веселее, когда я понял, что не синхронизировал и перегрузился
(может даже разделы были подмонтированы в которые я писал :D, вот и
нажил себе проблем). Так что с дурной головой работы рукам только больше
:(.&lt;/p&gt;
</summary><category term="клонирование"></category></entry><entry><title></title><link href="/posts/2009/09/03/urn:ya.ru:post/22199227/190/" rel="alternate"></link><updated>2009-09-03T16:46:29+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-03:posts/2009/09/03/urn:ya.ru:post/22199227/190/</id><summary type="html">&lt;p&gt;Немного устал, хочу спать :S&lt;/p&gt;
</summary></entry><entry><title>Неведомое</title><link href="/posts/2009/09/03/nevedomoe/" rel="alternate"></link><updated>2009-09-03T16:35:03+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-03:posts/2009/09/03/nevedomoe/</id><summary type="html">&lt;p&gt;Не знаю, что это такое, но думаю просто малораспространённое создание
для наших мест. Но всё же забавно, что это поймали у нас в реке :).&lt;/p&gt;
&lt;div class="text-center"&gt;&lt;div class="yavideo" align="left"&gt;&lt;/div&gt;&lt;object id="flash" width="450" height="338" data="http://flv.video.yandex.ru/lite/imdagger/9f69imbjtt.1204/" type="application/x-shockwave-flash"&gt;&lt;param value="http://flv.video.yandex.ru/lite/imdagger/9f69imbjtt.1204/" name="movie"&gt;&lt;param value="high" name="quality"&gt;&lt;param value="transparent" name="wmode"&gt;&lt;param value="#ffffff" name="bgcolor"&gt;&lt;param value="true" name="allowfullscreen"&gt;&lt;param value="sameDomain" name="allowscriptaccess"&gt;&lt;param value="scale" name="scale"&gt;&lt;/object&gt;&lt;/div&gt;</summary><category term="создание"></category></entry><entry><title></title><link href="/posts/2009/09/03/urn:ya.ru:post/22199227/187/" rel="alternate"></link><updated>2009-09-03T14:54:36+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-03:posts/2009/09/03/urn:ya.ru:post/22199227/187/</id><summary type="html">&lt;p&gt;Тут&lt;/p&gt;
</summary></entry><entry><title>Такая рань</title><link href="/posts/2009/09/03/takaia-ran/" rel="alternate"></link><updated>2009-09-03T07:06:04+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-03:posts/2009/09/03/takaia-ran/</id><summary type="html">&lt;p&gt;Уже было 6:50, а я пришёл на работу. Это ж нужно было вчера так запороть
тачку :(. Я — псих. Никогда не буду браться что-то делать важное в 21:00
:), а то приходится приезжать до учёбы на работу.&lt;/p&gt;
</summary><category term="жизнь"></category><category term="работа"></category></entry><entry><title>Баги</title><link href="/posts/2009/09/02/bagi/" rel="alternate"></link><updated>2009-09-02T21:30:16+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-02:posts/2009/09/02/bagi/</id><summary type="html">&lt;p&gt;Приходится вводить часто клиентские window$-машины в домен. Но порой
сталкиваюсь с проблемой: “База данных защиты повреждена”. Кое-что нашёл
по запросу “window$ security database corruption” в Google, но мне
перечисленные варианты не подошли :(. Пока не знаю как решать такую
проблему, знаю лишь, что это связано с тем, что остались старые SID’ы
внутри системы (с новыми образами вроде всё ok), случилось это после
переноса на новый домен.&lt;/p&gt;
</summary><category term="samba4"></category><category term="домен"></category></entry><entry><title></title><link href="/posts/2009/09/01/urn:ya.ru:post/22199227/184/" rel="alternate"></link><updated>2009-09-01T19:56:24+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-01:posts/2009/09/01/urn:ya.ru:post/22199227/184/</id><summary type="html">&lt;p&gt;Обожаю Python&lt;/p&gt;
</summary></entry><entry><title>Python и сокеты</title><link href="/posts/2009/09/01/python-i-sokety/" rel="alternate"></link><updated>2009-09-01T19:44:23+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-09-01:posts/2009/09/01/python-i-sokety/</id><summary type="html">&lt;p&gt;У Samba 4 всё ещё почему-то нет поддержки RPC для net user, чтобы менять
пароли удалённо с виндовой машины. Т.к. людям это очень нужно было, то я
был вынужден сделать небольшой сервис, который принимал бы запросы на
смену пароля от моего самодельного Java клиента со Swing интерфейсом.
Сервер смены пароля написан на основе &lt;em&gt;setpassword&lt;/em&gt; (чтобы не
разбираться как работать с ldb-backend :) ) из стандартной поставки
вместе с Samba. Мне оставалось лишь написать часть, которая бы работала
с сокетами. Сначала я начал писать свой велосипед на основе
&lt;code class="code"&gt;
socket.socket&lt;/code&gt;
, но потом обратил внимание на модуль &lt;code class="code"&gt;
SocketServer&lt;/code&gt;
.
Этот модуль предоставляет классы для удобной работы с сокетами
различными способами, и он достаточно гибок. Сначала я взял за основу
&lt;code class="code"&gt;
TCPServer&lt;/code&gt;
, начал в нём перегружать методы. Потом подумал, что мне
нужно обслуживать много клиентов сразу, поэтому нашёл в исходниках
модуля класс &lt;code class="code"&gt;
ForkingTCPServer&lt;/code&gt;
 (есть и &lt;code class="code"&gt;
ThreadingTCPServer&lt;/code&gt;
),
который использует &lt;code class="code"&gt;
fork&lt;/code&gt;
 для каждого нового соединения. Но я понял,
что в связи с тем, что мне нужно просто обработать довольно несложный
запрос, то мне не стоит перекрывать методы этих классов. Для таких целей
вторым параметром для инициализации объекта класса ForkingTCPServer
передаётся класс обработчика. Мне показался удобным
&lt;code class="code"&gt;
StreamRequestHandler&lt;/code&gt;
 (есть и другие, например, для UDP), поэтому я
его взял за основу:&lt;/p&gt;
&lt;p class="cut"&gt;&lt;a class="h-link reference internal" href="#cut_36328912"data-toggle="collapse"&gt;читать далее&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_36328912"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;span class="pgcss-k"&gt;class&lt;/span&gt; &lt;span class="pgcss-nc"&gt;PasswordChanger&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;StreamRequestHandler&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;...&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;handle&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
        &lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;span class="pgcss-n"&gt;config&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-mi"&gt;3333&lt;/span&gt;
&lt;span class="pgcss-n"&gt;server&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;ForkingTCPServer&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;config&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;PasswordChanger&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-n"&gt;server&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;serve_forever&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Класс StreamRequestHandler предоставляет свойства &lt;code class="code"&gt;
rfile&lt;/code&gt;
 и &lt;code class="code"&gt;
wfile&lt;/code&gt;
.
Первое — поток для чтения (данные от клиента), а второе — поток для
передачи ответа клиенту. Самое приятное, что они поддерживают интерфейс
стандартного типа &lt;code class="code"&gt;
file&lt;/code&gt;
. Т.е. можно работать будто это просто файлы
на диске! В методе &lt;code class="code"&gt;
handle&lt;/code&gt;
 нужно произвести чтение данных от клиента и
записать в поток ответ (можно и не делать этого :), но никто читать за
нас их не будет).&lt;/p&gt;
&lt;p&gt;Я столкнулся с тем, что сокет не переиспользовался, и система не давала
открыть сокет, если я завершил программу по &lt;kbd class="kbd"&gt;
Ctrl+C&lt;/kbd&gt;
. Но для этого у
класса &lt;code class="code"&gt;
ForkingTCPServer&lt;/code&gt;
 есть свойство &lt;code class="code"&gt;
allow _reuse _address&lt;/code&gt;
.
Пришлось его выставить в значение &lt;strong&gt;True&lt;/strong&gt;. Т.к. этот сервис будет
единственным на таком порту, но можно не беспокоиться, что вторая копия
переоткроет порт.&lt;/p&gt;
&lt;/div&gt;
</summary><category term="python"></category><category term="сокет"></category></entry><entry><title>Фильм</title><link href="/posts/2009/08/31/film/" rel="alternate"></link><updated>2009-08-31T18:42:57+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-31:posts/2009/08/31/film/</id><summary type="html">&lt;p&gt;Посмотрел &lt;strong&gt;StarDust&lt;/strong&gt;. Если бы там развили сильнее тему с пиратами, то
мог бы получится хороший стимпанк с оттенком фэнтэзи. Есть довольно
забавные шутки и приятно, что в фильме не делали сильный акцент на
драки, сражение и увечья. Только вот одного не могу понять… зачем было
делать капитана пиратского воздушного судна нетрадиционной ориентации??
Я конечно понимаю, что там прикольно, всё такое… дань моде, но можно
было обойтись и без этого, т.к. в сюжете это не создаёт поворотных
моментов.&lt;/p&gt;
</summary><category term="фильм"></category><category term="звёздная пыль"></category></entry><entry><title>Камасутра на Python</title><link href="/posts/2009/08/28/kamasutra-na-python/" rel="alternate"></link><updated>2009-08-28T20:21:04+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-28:posts/2009/08/28/kamasutra-na-python/</id><summary type="html">&lt;p&gt;Воспалённый больной мозг придумал начало Камасутры для программиста на
Python:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;strong&gt;oo&lt;/strong&gt; = &amp;quot;&lt;strong&gt;(.)&lt;/strong&gt;&amp;quot;, &amp;quot;&lt;strong&gt;(.)&lt;/strong&gt;&amp;quot;&lt;/div&gt;
&lt;div class="line"&gt;&amp;gt;&amp;gt;&amp;gt; def touch_by_hands(left_right):&lt;/div&gt;
&lt;div class="line"&gt;. . . &amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;strong&gt;(o)&lt;/strong&gt; = 'it' is True&lt;/div&gt;
&lt;div class="line"&gt;. . . &amp;nbsp; &amp;nbsp; &amp;nbsp;for nipple in [left_right][&lt;strong&gt;(o)&lt;/strong&gt;:&lt;strong&gt;(o)&lt;/strong&gt;]:&lt;/div&gt;
&lt;div class="line"&gt;. . .&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; gently_bite(nipple)&lt;/div&gt;
&lt;div class="line"&gt;&amp;gt;&amp;gt;&amp;gt; touch_by_hands(&lt;strong&gt;oo&lt;/strong&gt;)&lt;/div&gt;
&lt;div class="line"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;strong&gt;Y&lt;/strong&gt; = &lt;strong&gt;&amp;quot;censored&amp;quot;&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;&amp;gt;&amp;gt;&amp;gt; dir(&lt;strong&gt;(Y)&lt;/strong&gt;)&lt;/div&gt;
&lt;div class="line"&gt;['join', 'strip', 'isspace', 'zfill']&lt;/div&gt;
&lt;div class="line"&gt;&amp;gt;&amp;gt;&amp;gt; def enter_to&lt;strong&gt;(_)&lt;/strong&gt;:&lt;/div&gt;
&lt;div class="line"&gt;. . . &amp;nbsp; &amp;nbsp; &amp;nbsp; her = &lt;strong&gt;{_:_}&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;. . . &amp;nbsp; &amp;nbsp; &amp;nbsp; her.get('for pleasure')&lt;/div&gt;
&lt;div class="line"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;strong&gt;_&lt;/strong&gt;, &lt;strong&gt;_&lt;/strong&gt; = &lt;strong&gt;&amp;quot;buttocks&amp;quot;&lt;/strong&gt;, &lt;strong&gt;2&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;&amp;gt;&amp;gt;&amp;gt; enter_to&lt;strong&gt;(_*_)&lt;/strong&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
</summary><category term="python"></category><category term="камасутра"></category></entry><entry><title>PCI-X</title><link href="/posts/2009/08/26/pci-x/" rel="alternate"></link><updated>2009-08-26T19:59:34+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-26:posts/2009/08/26/pci-x/</id><summary type="html">&lt;p&gt;&amp;nbsp; &amp;nbsp; Поднял вторую сетевую карту на машине, чтобы один канал отдать для
Clonezilla, а то когда оно тянет образ по 100Mbit-ке, то канал полностью
ложиться, а нужно ещё и другим машинкам с ней работать. Единственное,
что у этого компа все слоы &lt;strong&gt;PCI-X&lt;/strong&gt; (PCI-Express), но как приятно, что
оставлена обратная совместимость… и можно воткнуть туда PCI сетевую
карту (немного остаётся свободных контактов в слоте, которые не
задействует PCI и, что отличает его от PCI-X, но можно безбоязненно
подключать, ничего не сгорит, может только упасть производительность
PCI-X шины (и то не всегда)).&lt;/p&gt;
</summary><category term="pci"></category><category term="pci-x"></category></entry><entry><title>Иллюзия с лицами (круто!)</title><link href="/posts/2009/08/25/illiuziia-s-litsami-kruto/" rel="alternate"></link><updated>2009-08-25T21:06:19+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-25:posts/2009/08/25/illiuziia-s-litsami-kruto/</id><summary type="html">&lt;p&gt;Вкратце в чём иллюзия и что там написано на иностранном языке:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Посмотреть картинку с монитора;&lt;/li&gt;
&lt;li&gt;А теперь нужно отодвинутся на сантиметров 40 от текущей дистанции
назад и посмотреть лица снова ;)&lt;/li&gt;
&lt;/ol&gt;
</summary><category term="иллюзия"></category></entry><entry><title></title><link href="/posts/2009/08/25/urn:ya.ru:post/22199227/172/" rel="alternate"></link><updated>2009-08-25T20:54:12+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-25:posts/2009/08/25/urn:ya.ru:post/22199227/172/</id><summary type="html">&lt;p&gt;Всё больше пропитываюсь духом Emacs :)&lt;/p&gt;
</summary></entry><entry><title>PXE</title><link href="/posts/2009/08/25/pxe/" rel="alternate"></link><updated>2009-08-25T20:44:47+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-25:posts/2009/08/25/pxe/</id><summary type="html">&lt;p&gt;Я “счастливый” обладатель 30 компов с материнской платой &lt;strong&gt;ASUS P5VD2-VM
SE&lt;/strong&gt;. Но я никогда не задумывался, куда можно засунуть настройку PXE
загрузки, т.к. на моей домашней тачке он включён по дефолту. А тут
пришлось повозиться… Оказалось PXE включается так (в &lt;em&gt;AMIBIOS&lt;/em&gt;):
&lt;strong&gt;Advanced→Chipset→SouthBridge VIA VT8237S Configuration→LAN Option
ROM→Enabled&lt;/strong&gt;. Это мне помогло грузить Clonezilla SE по сети используя
PXE.&lt;/p&gt;
</summary><category term="pxe"></category><category term="asus"></category></entry><entry><title></title><link href="/posts/2009/08/25/urn:ya.ru:post/22199227/167/" rel="alternate"></link><updated>2009-08-25T20:01:11+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-25:posts/2009/08/25/urn:ya.ru:post/22199227/167/</id><summary type="html">&lt;p&gt;Есть&lt;/p&gt;
</summary></entry><entry><title>Clonezilla SE</title><link href="/posts/2009/08/25/clonezilla-se/" rel="alternate"></link><updated>2009-08-25T19:26:14+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-25:posts/2009/08/25/clonezilla-se/</id><summary type="html">&lt;p&gt;Описание установки и настройки DRBL и Clonezilla, которое мне помогло
решить часть проблем с запуском сервера dcs.&lt;/p&gt;
</summary><category term="clonezilla"></category><category term="клонирование"></category><category term="drbl"></category></entry><entry><title>TriadVesuvius</title><link href="/posts/2009/08/24/triadvesuvius/" rel="alternate"></link><updated>2009-08-24T20:53:20+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-24:posts/2009/08/24/triadvesuvius/</id><summary type="html">&lt;p&gt;О великий &lt;strong&gt;Bazaar&lt;/strong&gt;, кланяюсь тебе, проставь тег triad_vesuvius в наш
репозиторий:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-gp"&gt;$&lt;/span&gt; bzr tag triad_vesuvius
&lt;span class="pgcss-go"&gt;Created tag triad_vesuvius.&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;$&lt;/span&gt; bzr tags
&lt;span class="pgcss-go"&gt;triad_vesuvius 130&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Это 130 ревизия и 220 &lt;em&gt;bzr&lt;/em&gt;-коммит. А ещё 150 &lt;em&gt;git&lt;/em&gt;-коммитов до этого и
где-то 500 без репозитория x-D. Всё, что было запланировано — выполнено.
Где-то в ноябре будет альфа версия.&lt;/p&gt;
</summary><category term="triad_vesuvius"></category><category term="проект"></category><category term="программирование"></category></entry><entry><title></title><link href="/posts/2009/08/24/urn:ya.ru:post/22199227/164/" rel="alternate"></link><updated>2009-08-24T18:25:01+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-24:posts/2009/08/24/urn:ya.ru:post/22199227/164/</id><summary type="html">&lt;p&gt;Пришёл час TriadVesuvius для Мясорубки с ручным приводом, ура!!!&lt;/p&gt;
</summary></entry><entry><title>Emacs, шрифты и тормоза</title><link href="/posts/2009/08/23/emacs-shrifty-i-tormoza/" rel="alternate"></link><updated>2009-08-23T17:26:45+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-23:posts/2009/08/23/emacs-shrifty-i-tormoza/</id><summary type="html">&lt;p&gt;У меня до сегодняшнего дня библиотека fontconfig была довольно старая. Я
сначала думал, что это Emacs тормозит при скроллинге и перемещению по
тексту. Но потом заметил, что большинство тормозов связано в моих
текстах, где докстринги на русском описывают суть кода. И Emacs 23.1.1
не собрался с моим fontconfig (а Emacs 23.0.95.1 собирался), тогда я
решил обновиться… От этого &lt;u class="underline"&gt;
решилась проблема&lt;/u&gt;
, что русские буквы в Emacs
не имели наклона и частично исчезли сильные тормоза. Остались только
небольшие замедления из-за того, что X-ы староваты, но меня это уже не
сильно напрягает x-D.&lt;/p&gt;
</summary><category term="emacs"></category><category term="fontconfig"></category></entry><entry><title></title><link href="/posts/2009/08/23/urn:ya.ru:post/22199227/162/" rel="alternate"></link><updated>2009-08-23T17:10:08+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-23:posts/2009/08/23/urn:ya.ru:post/22199227/162/</id><summary type="html">&lt;p&gt;Обновился до Emacs 23.1&lt;/p&gt;
</summary></entry><entry><title>День рождения Elfarion</title><link href="/posts/2009/08/23/den-rozhdeniia-elfarion/" rel="alternate"></link><updated>2009-08-23T14:44:27+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-23:posts/2009/08/23/den-rozhdeniia-elfarion/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/72494"&gt;&lt;img alt="21" src="http://img-fotki.yandex.ru/get/3700/imdagger.3/0_11b2e_cbcada7b_L" title="21"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Поздравляю тебя, теперь ты такой же взрослый, как и я :D. Оставайся
таким же счастливым и весёлым :P&lt;/p&gt;</summary><category term="blender"></category><category term="патрик"></category><category term="elfarion"></category><category term="3d"></category><category term="день рождения"></category></entry><entry><title></title><link href="/posts/2009/08/23/urn:ya.ru:post/22199227/160/" rel="alternate"></link><updated>2009-08-23T13:35:04+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-23:posts/2009/08/23/urn:ya.ru:post/22199227/160/</id><summary type="html">&lt;p&gt;Emacs + jabber.el + небольшая донастройка - это кайф, наконец-то в чате
работает автодополнение слов по M - x!&lt;/p&gt;
</summary></entry><entry><title>Emacs и ссылки</title><link href="/posts/2009/08/22/emacs-i-ssylki/" rel="alternate"></link><updated>2009-08-22T20:10:02+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-22:posts/2009/08/22/emacs-i-ssylki/</id><summary type="html">&lt;p&gt;Сделал, чтобы открывался из Emacs не браузер &lt;strong&gt;lynx&lt;/strong&gt; при &lt;kbd class="kbd"&gt;
M-x
browse-url&lt;/kbd&gt;
, а мой браузер &lt;strong&gt;Opera&lt;/strong&gt;. А остальные утилиты пусть всё же
используют lynx и поэтому я не стал трогать переменную среды.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;setq&lt;/span&gt; &lt;span class="pgcss-nv"&gt;browse-url-generic-program&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;executable-find&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;quot;opera&amp;quot;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
        &lt;span class="pgcss-nv"&gt;browse-url-browser-function&lt;/span&gt; &lt;span class="pgcss-ss"&gt;&amp;#39;browse-url-generic&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;А вообще на
&lt;a class="reference external" href="http://www.emacswiki.org/cgi-bin/wiki/BrowseUrl"&gt;EmacsWiki&lt;/a&gt; всё
хорошо расписано на английском :).&lt;/p&gt;
</summary><category term="emacs"></category><category term="opera"></category><category term="web"></category></entry><entry><title></title><link href="/posts/2009/08/22/urn:ya.ru:post/22199227/152/" rel="alternate"></link><updated>2009-08-22T12:25:40+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-22:posts/2009/08/22/urn:ya.ru:post/22199227/152/</id><summary type="html">&lt;p&gt;уже скоро наступит эпохальное событие, осталось ещё немного всё
подтолкнуть, последний рывок&lt;/p&gt;
</summary></entry><entry><title>Emacs и Jabber</title><link href="/posts/2009/08/21/emacs-i-jabber/" rel="alternate"></link><updated>2009-08-21T20:33:15+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-21:posts/2009/08/21/emacs-i-jabber/</id><summary type="html">&lt;p&gt;Почти доделал поддержку Jabber в Emacs путём тюнинга jabber.el.
Теперь иконка моргает, когда пришло новое сообщение, &lt;strong&gt;xosd&lt;/strong&gt; напоминает
сообщением на экране. Заодно я запустил &lt;strong&gt;Emacs&lt;/strong&gt; в &lt;strong&gt;--daemon&lt;/strong&gt; режиме,
что позволило оставлять соединения даже после закрытия всех клиентов
Emacs.&lt;/p&gt;
&lt;p&gt;Пришлось кое-что добавить, чтобы сообщение &lt;strong&gt;xosd&lt;/strong&gt; появлялось
только, если я не общаюсь на данный момент с этим человеком. А то
обработчик вызывался на каждое событие даже тогда, когда я уже в этом
буффере. Пришлось сменить обработчик на такой:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;defun&lt;/span&gt; &lt;span class="pgcss-nv"&gt;my-show-notification&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;from&lt;/span&gt; &lt;span class="pgcss-nv"&gt;buffer&lt;/span&gt; &lt;span class="pgcss-nv"&gt;text&lt;/span&gt; &lt;span class="pgcss-nv"&gt;proposed-alert&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
  &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;when&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;not&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;equal&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;get-buffer-window&lt;/span&gt; &lt;span class="pgcss-nv"&gt;buffer&lt;/span&gt; &lt;span class="pgcss-ss"&gt;&amp;#39;visible&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
                      &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;selected-window&lt;/span&gt;&lt;span class="pgcss-p"&gt;)))&lt;/span&gt;
     &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;jabber-message-osd&lt;/span&gt; &lt;span class="pgcss-nv"&gt;from&lt;/span&gt; &lt;span class="pgcss-nv"&gt;buffer&lt;/span&gt; &lt;span class="pgcss-nv"&gt;text&lt;/span&gt; &lt;span class="pgcss-nv"&gt;proposed-alert&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
     &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;my-tray-icon-blink&lt;/span&gt;&lt;span class="pgcss-p"&gt;)))&lt;/span&gt;

&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nv"&gt;add-hook&lt;/span&gt; &lt;span class="pgcss-ss"&gt;&amp;#39;jabber-alert-message-hooks&lt;/span&gt;
                &lt;span class="pgcss-ss"&gt;&amp;#39;my-show-notification&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Функция &lt;code class="code"&gt;
my-tray-icon-blink&lt;/code&gt;
 вызывает мерциние иконки, чтобы я
обратил внимание, а то я бывает, когда не пишу код, а страдаю ерундой,
то могу не обратить внимание на сообщение (а оно может быть для меня
очень срочным).&lt;/p&gt;
</summary><category term="jabber"></category><category term="emacs"></category></entry><entry><title></title><link href="/posts/2009/08/19/urn:ya.ru:post/22199227/147/" rel="alternate"></link><updated>2009-08-19T20:19:15+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-19:posts/2009/08/19/urn:ya.ru:post/22199227/147/</id><summary type="html">&lt;p&gt;пробую ion3, двоякое впечатление, т.к. ещё не настроено и непривычно&lt;/p&gt;
</summary></entry><entry><title>Извещения в трее от Emacs</title><link href="/posts/2009/08/19/izveshcheniia-v-tree-ot-emacs/" rel="alternate"></link><updated>2009-08-19T18:11:16+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-19:posts/2009/08/19/izveshcheniia-v-tree-ot-emacs/</id><summary type="html">&lt;p&gt;Небольшое, но полезное описание того, как сделать, чтобы была иконка
Emacs в трее (при помощи дополнительной утилиты), и чтобы её состоянием
можно было управлять. Можно сделать, чтобы она моргала. Может что-нибудь
добавлю в неё для моего jabber.el (в духе попап меню, котрое показывает
количество сообщений от пользователя).&lt;/p&gt;
</summary><category term="emacs"></category><category term="трей"></category></entry><entry><title>Прошёл тест на определение словарного запаса</title><link href="/posts/2009/08/19/proshiol-test-na-opredelenie-slovarnogo-zapasa/" rel="alternate"></link><updated>2009-08-19T15:37:07+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-19:posts/2009/08/19/proshiol-test-na-opredelenie-slovarnogo-zapasa/</id><summary type="html">&lt;p&gt;Результатом я не очень доволен :). Но что поделаешь, я реально не знал
определения некоторых слов, вот в них и ошибся. Посмотрел правильные
ответы после проходения, теперь буду знать.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://jokesland.net.ru/test/zapas.php"&gt;&lt;img alt="image0" src="http://www.joksland.ru/test/i/kot.jpg" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;table border="1" class="docutils"&gt;
&lt;colgroup&gt;
&lt;col width="25%"&gt;&lt;/col&gt;
&lt;col width="6%"&gt;&lt;/col&gt;
&lt;col width="69%"&gt;&lt;/col&gt;
&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td&gt;&lt;strong&gt;ВАШ СЛОВАРНЫЙ ЗАПАС - Результаты теста&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;img alt="image2" src="http://www.joksland.ru/test/i/p4half.gif" title="image2"/&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Ваш словарный запас на высоком уровне! Великолепный результат. Вы ответили правильно на 28 вопросов из 35! Поздравляем!&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;a class="reference external" href="http://jokesland.net.ru/test/zapas.php"&gt;Пройти “Тест на определение словарного запаса”
здесь&lt;/a&gt;&lt;/p&gt;</summary><category term="словарный запас"></category><category term="тест"></category></entry><entry><title>Скрипты или модули</title><link href="/posts/2009/08/18/skripty-ili-moduli/" rel="alternate"></link><updated>2009-08-18T20:42:24+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-18:posts/2009/08/18/skripty-ili-moduli/</id><summary type="html">&lt;p&gt;Из-за того, что я использую систему контроля версий, а именно —
Bazaar (который NG), то не очень удобно хранить файлы, которые
достаточно часто изменяются, внутри blend. По в тоже время, если вынести
данные из скриптов, то &lt;strong&gt;Blender 2.48a&lt;/strong&gt; не мог считывать их каждый раз
с диска в игровом движке. Но в &lt;strong&gt;2.49a&lt;/strong&gt; этот недостатот исправили и я
смог наконец-то вынести часть скриптов в отдельные модули, и при каждом
изменении коммитить только diff между текстами, а не весь blend-файл. Но
возникла одна небольшая проблема: в список путей к модулям добавляется
только папка с данным blend-файлом, что иногда создавало мне проблемы
при тестировании и подключении вышележащих модулей. Поэтому я создал
__init__.py в текущей директории, всё в нём подключил, как удобнее
будет логическим блокам из blend-библиотеки, и вышло вот так:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/71159/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3707/imdagger.3/0_115f7_7843755e_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="python"></category><category term="bge"></category><category term="triad_vesuvius"></category></entry><entry><title>Замыкания</title><link href="/posts/2009/08/17/zamykaniia/" rel="alternate"></link><updated>2009-08-17T19:45:35+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-17:posts/2009/08/17/zamykaniia/</id><summary type="html">&lt;p&gt;Всё же очень хорошая и полезная вещь эти замыкания, если
пользоваться ими с толком. Мне нужно было сделать, так, чтобы при вызове
&lt;code class="code"&gt;
handle _event&lt;/code&gt;
 с генератором в качестве параметра выполнялся метод
&lt;code class="code"&gt;
 _enter _process&lt;/code&gt;
, а после того, как генератор завершится (но это уже
будет сделано вышестоящим кодом), вызывался метод &lt;code class="code"&gt;
 _exit _process&lt;/code&gt;
, но
для объекта, для которого был вызвал &lt;code class="code"&gt;
handle _event&lt;/code&gt;
. Я сделал так,
чтобы метод &lt;code class="code"&gt;
handle _event&lt;/code&gt;
 создавал на каждый вызов функцию
&lt;code class="code"&gt;
with _exit&lt;/code&gt;
 (а она захватывала окружение, и self тоже), которая
исполнит сначала необходимый процесс, а затем не забудет вызвать функцию
выхода процесса. Вышло что-то вроде такого:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-k"&gt;class&lt;/span&gt; &lt;span class="pgcss-nc"&gt;Warrior&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;GameObject&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;...&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;handle_event&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;process&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;with_exit&lt;/span&gt;&lt;span class="pgcss-p"&gt;():&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-n"&gt;info&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-n"&gt;process&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
                &lt;span class="pgcss-k"&gt;yield&lt;/span&gt; &lt;span class="pgcss-n"&gt;info&lt;/span&gt;
            &lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;_exit_process&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;

        &lt;span class="pgcss-bp"&gt;self&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;_enter_process&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
        &lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Всё это дело я снабдил комментариями у себя и докстрингами, как
полагается ;). Думаю я доволен тем, что наваял :). Теперь я могу не
бояться забыть вызвать (до этого такое уже было x-[ ) эти
функции-обрамления, &lt;code class="code"&gt;
handle _event&lt;/code&gt;
 сама позаботится.&lt;/p&gt;
</summary><category term="python"></category></entry><entry><title></title><link href="/posts/2009/08/16/urn:ya.ru:post/22199227/142/" rel="alternate"></link><updated>2009-08-16T20:31:57+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-16:posts/2009/08/16/urn:ya.ru:post/22199227/142/</id><summary type="html">&lt;p&gt;креативненько! человечки нормально уже “мочат” друг-друга, наконец-то
заработал receive&lt;/p&gt;
</summary></entry><entry><title>Прокололся</title><link href="/posts/2009/08/15/prokololsia/" rel="alternate"></link><updated>2009-08-15T20:12:43+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-15:posts/2009/08/15/prokololsia/</id><summary type="html">&lt;p&gt;Нужно было, чтобы функция созвращала работала, как сопрограмма, т.е.
была генератором. Но при этом я решил вынести часть кода для удобства в
другую функцию. Но вызов &lt;code class="code"&gt;
yield&lt;/code&gt;
 там тоже остался. Получилось нечто
подобное:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;class&lt;/strong&gt; Warrior(Controller)&lt;strong&gt;:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; &lt;strong&gt;def&lt;/strong&gt; __rotating(&lt;strong&gt;self&lt;/strong&gt;, to_look)&lt;strong&gt;:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; …&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;strong&gt;for&lt;/strong&gt; … &lt;strong&gt;in&lt;/strong&gt; …&lt;strong&gt;:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; …&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;strong&gt;yield&lt;/strong&gt; look&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; &lt;strong&gt;def&lt;/strong&gt; __look_at(&lt;strong&gt;self&lt;/strong&gt;, to_look)&lt;strong&gt;:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; …&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;strong&gt;self&lt;/strong&gt;.__rotating(old_look, to_look)&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; &lt;strong&gt;def&lt;/strong&gt; __moving(&lt;strong&gt;self&lt;/strong&gt;, steps)&lt;strong&gt;:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; …&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;strong&gt;for&lt;/strong&gt; new_pos &lt;strong&gt;in&lt;/strong&gt; steps&lt;strong&gt;:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;strong&gt;self&lt;/strong&gt;.__look_at(new_pos)&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; …&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;strong&gt;yield&lt;/strong&gt; …&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p class="cut"&gt;&lt;a class="h-link reference internal" href="#cut_32244816"data-toggle="collapse"&gt;читать дальше&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_32244816"&gt;
&lt;p&gt;И сижу себе мучаюсь, ищу проблему в коде (наивный, ошибка в моём
ДНК). Мой мозг почему-то подумал, что &lt;strong&gt;yield&lt;/strong&gt; из &lt;em&gt;__rotating&lt;/em&gt;
прервёт сопрограмму аж до уровня выше &lt;em&gt;__moving&lt;/em&gt;, т.е. то, что вызвало
весь основной процесс. И не подумал, что генератор будет возвращён ещё
внутри &lt;em&gt;__look_at&lt;/em&gt; и проигнорирован.&lt;/p&gt;
&lt;p&gt;Пришлось переделать так, чтобы генератор вложенных функций тоже
итерировался с возвратом в главную вызывающую часть:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;class&lt;/strong&gt; Warrior(Controller)&lt;strong&gt;:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; &lt;strong&gt;def&lt;/strong&gt; __rotating(&lt;strong&gt;self&lt;/strong&gt;, to_look)&lt;strong&gt;:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; …&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;strong&gt;for&lt;/strong&gt; … &lt;strong&gt;in&lt;/strong&gt; …&lt;strong&gt;:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; …&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;strong&gt;yield&lt;/strong&gt; look&lt;/p&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; &lt;strong&gt;def&lt;/strong&gt; __look_at(&lt;strong&gt;self&lt;/strong&gt;, to_look)&lt;strong&gt;:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; …&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;strong&gt;return&lt;/strong&gt; &lt;strong&gt;self&lt;/strong&gt;.__rotating(old_look, to_look)&lt;/p&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; &lt;strong&gt;def&lt;/strong&gt; __moving(&lt;strong&gt;self&lt;/strong&gt;, steps)&lt;strong&gt;:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; …&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;strong&gt;for&lt;/strong&gt; new_pos &lt;strong&gt;in&lt;/strong&gt; steps&lt;strong&gt;:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;strong&gt;for&lt;/strong&gt; look in &lt;strong&gt;self&lt;/strong&gt;.__look_at(new_pos)&lt;strong&gt;:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;strong&gt;yield&lt;/strong&gt; look&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; …&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;strong&gt;yield&lt;/strong&gt; …&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
</summary><category term="python"></category><category term="генератор"></category></entry><entry><title></title><link href="/posts/2009/08/15/urn:ya.ru:post/22199227/140/" rel="alternate"></link><updated>2009-08-15T19:58:54+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-15:posts/2009/08/15/urn:ya.ru:post/22199227/140/</id><summary type="html">&lt;p&gt;чувствую себя глупым&lt;/p&gt;
</summary></entry><entry><title></title><link href="/posts/2009/08/13/urn:ya.ru:post/22199227/139/" rel="alternate"></link><updated>2009-08-13T18:23:42+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-13:posts/2009/08/13/urn:ya.ru:post/22199227/139/</id><summary type="html">&lt;p&gt;работать с git по http - только нервы портить, лучше использовать git://&lt;/p&gt;
</summary></entry><entry><title>Мегаулитко</title><link href="/posts/2009/08/13/megaulitko/" rel="alternate"></link><updated>2009-08-13T16:30:47+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-13:posts/2009/08/13/megaulitko/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/69010"&gt;&lt;img alt="Улитка" src="http://img-fotki.yandex.ru/get/3613/imdagger.3/0_10d92_23aff49d_L" title="Улитка"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/69011"&gt;&lt;img alt="Улитка II" src="http://img-fotki.yandex.ru/get/3614/imdagger.3/0_10d93_a0d4992b_L" title="Улитка II"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Найдена была большущая улитка. Никого не трогала, :) ползла себе
спокойно, решила попозировать. Эх.. люблю я этих червячков.&lt;/p&gt;
&lt;p&gt;P.S. Знаю, что горизонт завален :).&lt;/p&gt;</summary><category term="улитка"></category></entry><entry><title>Ещё патчик</title><link href="/posts/2009/08/12/eshchio-patchik/" rel="alternate"></link><updated>2009-08-12T18:31:49+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-12:posts/2009/08/12/eshchio-patchik/</id><summary type="html">&lt;p&gt;Наконец-то я доделал патч к &lt;a class="reference external" href="http://www.midnight-commander.org/ticket/38"&gt;38
тикету&lt;/a&gt;. Оттестил его
вроде всё работает, как нужно, хотя 100% гарантии дать не могу :P. Я и
то сделал, сперва, одним способом, а потом вспомнил, что есть же ещё
VFS, которые тоже следует корректно обрабатывать. Пришлось доделать ещё
один фикс к ветке с 38 тикетом. Хорошо, что &lt;strong&gt;mc_chdir&lt;/strong&gt; работает как
следует, даже если перед этим путь преобразовать при помощи
&lt;strong&gt;vfs_translate_url&lt;/strong&gt;. Только жаль, что не получилось использовать
do_panel_cd, хотя это были бы лишние chdir и лишняя перестройка списка
файлов. А у меня только одна при инициализации структуры. Но для этого
пришлось чуть подправавить функцию panel_new, и разрешить принимать
параметр текущей директории панели.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/68848/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3610/imdagger.3/0_10cf0_ccd3af09_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Ё-хо-хо!&lt;/p&gt;</summary><category term="патч"></category><category term="midnight commander"></category></entry><entry><title></title><link href="/posts/2009/08/12/urn:ya.ru:post/22199227/135/" rel="alternate"></link><updated>2009-08-12T18:10:43+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-12:posts/2009/08/12/urn:ya.ru:post/22199227/135/</id><summary type="html">&lt;p&gt;настроение идёт вгору&lt;/p&gt;
</summary></entry><entry><title>Странное поведение Blender 2.49a</title><link href="/posts/2009/08/10/strannoe-povedenie-blender-249a/" rel="alternate"></link><updated>2009-08-10T20:51:28+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-10:posts/2009/08/10/strannoe-povedenie-blender-249a/</id><summary type="html">&lt;p&gt;Забавная ошибка (точнее недочёт) в Blender при работе с игровыми
блоками, как исправить это без правки исходников я пока не знаю :(.
Создаём кубик, на котором добавляем логические блоки (только сенсор и
актуатор).&lt;/p&gt;
&lt;p&gt;Затем файл нужно сохранить. Таким образом получится отдельная
&lt;strong&gt;blend-библиотека&lt;/strong&gt;. После этого создаём новый файл, в который
прилинковываем объект &lt;em&gt;Cube&lt;/em&gt; (&lt;kbd class="kbd"&gt;
Shift + F1&lt;/kbd&gt;
, с опцией &lt;strong&gt;Link&lt;/strong&gt;) с
логическими блоками.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/68347/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3609/imdagger.3/0_10afb_15b79523_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="cut"&gt;&lt;a class="h-link reference internal" data-toggle="collapse" href="#cut_30387088"&gt;далее&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_30387088"&gt;
&lt;p&gt;Допустим, нам хочется, чтобы при срабатывании контроллера на кубике
&lt;em&gt;Cube&lt;/em&gt;, вызывался актуатор из объекта &lt;em&gt;Test&lt;/em&gt;. Выделяем оба объекта
(голубым цветом выделен объект из библиотеки, его редактировать нельзя):&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/68348/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/3609/imdagger.3/0_10afc_b99af12_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Пробуем провести связь от контроллера &lt;em&gt;cont&lt;/em&gt; к актуатору &lt;em&gt;act&lt;/em&gt; в
&lt;em&gt;Test&lt;/em&gt;. И тут поджидает ошибка:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/68349/"&gt;&lt;img alt="image2" src="http://img-fotki.yandex.ru/get/3508/imdagger.3/0_10afd_bfd51e41_L" title="image2"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Но как исправить ситуацию? Ведь хочется же соединить два объекта.
Тогда попробуем провести связь наоборот: от &lt;em&gt;act&lt;/em&gt; к &lt;em&gt;cont&lt;/em&gt;. И эта ошибка
уже не выпадает (хотя иногда появляется, но нужно просто нажать на
сообщение, и оно пропадёт).&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/68350/"&gt;&lt;img alt="image3" src="http://img-fotki.yandex.ru/get/3610/imdagger.3/0_10afe_b3128bed_L" title="image3"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Просто Blender считает, что мы хотим что-то подредактировать в
прилинкованном объекте, хотя на самом деле, просто, есть намерение
провести линию связи. Всё работает, но как только сохраняем уже этот
файл и открываем, то связь пропадает :(!&lt;/p&gt;
&lt;/div&gt;</summary><category term="blender"></category><category term="странное поведение"></category></entry><entry><title></title><link href="/posts/2009/08/10/urn:ya.ru:post/22199227/132/" rel="alternate"></link><updated>2009-08-10T11:59:55+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-10:posts/2009/08/10/urn:ya.ru:post/22199227/132/</id><summary type="html">&lt;p&gt;ааа! моя мелкая правка оказалась кривоватой :) хорошо, что dborca
поправил&lt;/p&gt;
</summary></entry><entry><title>Ещё мелкая правка</title><link href="/posts/2009/08/09/eshchio-melkaia-pravka/" rel="alternate"></link><updated>2009-08-09T18:39:16+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-09:posts/2009/08/09/eshchio-melkaia-pravka/</id><summary type="html">&lt;p&gt;Ещё немного подправил поведение Midnight Commander. Раньше он вёл себя
не хорошо…, в &lt;a class="reference external" href="http://www.midnight-commander.org/ticket/82"&gt;тикете&lt;/a&gt;
сказано, что:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Нужно открыть файл, который доступен только для чтения&lt;/li&gt;
&lt;li&gt;Подправить его&lt;/li&gt;
&lt;li&gt;Gопытаться сохранить&lt;/li&gt;
&lt;li&gt;Выбрать новое имя файла&lt;/li&gt;
&lt;li&gt;Новый файл снова подправить&lt;/li&gt;
&lt;li&gt;Попытаться сохранить&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;При этом хоть данные были сохранены в новый файл, но права на него всё
равно только для чтения для владельца. Я сделал микроскопический
&lt;a class="reference external" href="http://www.midnight-commander.org/attachment/ticket/82/add_write.diff"&gt;патч&lt;/a&gt;,
который добавил при создании редактировании нового файла &lt;strong&gt;S_IWRITE&lt;/strong&gt;
аттрибут в маске, если это не первоначальный файл.&lt;/p&gt;
</summary><category term="патч"></category><category term="midnight commander"></category><category term="баг"></category><category term="С"></category></entry><entry><title></title><link href="/posts/2009/08/09/urn:ya.ru:post/22199227/130/" rel="alternate"></link><updated>2009-08-09T16:31:36+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-09:posts/2009/08/09/urn:ya.ru:post/22199227/130/</id><summary type="html">&lt;p&gt;опустошён&lt;/p&gt;
</summary></entry><entry><title>Правка ошибки в Midnight Commander</title><link href="/posts/2009/08/08/pravka-oshibki-v-midnight-commander/" rel="alternate"></link><updated>2009-08-08T20:18:32+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-08:posts/2009/08/08/pravka-oshibki-v-midnight-commander/</id><summary type="html">&lt;p&gt;Подправил его родного, чтобы не падал в фоновом копировании. Мой первый
&lt;a class="reference external" href="http://www.midnight-commander.org/ticket/1500"&gt;тикет&lt;/a&gt; и такой
хороший номер 1500. :) Хочу ещё добавить фишку, чтобы можно было видеть
сколько процентов скопировалось в фоне, а ещё чтобы при уже копировании
не в фоне, можно было нажать кнопочку “продолжить в фоне”.&lt;/p&gt;
</summary><category term="midnight commander"></category></entry><entry><title>Кнопочки</title><link href="/posts/2009/08/06/knopochki/" rel="alternate"></link><updated>2009-08-06T20:07:43+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-06:posts/2009/08/06/knopochki/</id><summary type="html">&lt;p&gt;Добавил кнопочки для редактирования воинов, установки диалогов,
удаления. До этого эти операции производились при помощи нажатия
некоторых комбинаций клавиш. А ещё есть такая полезная штука, как
Interactive Python Console в Blender (&lt;strong&gt;Scripts Window → System →
Interactive Python Console&lt;/strong&gt;). &lt;del class="del"&gt;
Всё время забываю, что в HTML стрелочка
вправо — &amp;amp;rarr; а не &amp;amp;rarrow;&lt;/del&gt;
 При помощи этой консоли можно отладить
некоторые участки скриптов. Чтобы не отвекало и не отбирало ресурсы всё
лишее было убрано (т.е. карта и воины), вместо этого кубики и часть
кары:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/67360/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3608/imdagger.3/0_10720_8e217a0a_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="проект"></category><category term="программирование"></category><category term="triad_vesuvius"></category></entry><entry><title>Скриншоты меню</title><link href="/posts/2009/08/05/skrinshoty-meniu/" rel="alternate"></link><updated>2009-08-05T20:05:44+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-05:posts/2009/08/05/skrinshoty-meniu/</id><summary type="html">&lt;p&gt;Так выглядит меню во время работы с картой, всё плавно нажимается:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/67147/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3610/imdagger.3/0_1064b_393fec_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;А так проект выглядит в режиме редактирования (скоро добавится ещё
чуть-чуть GUI для управления воинами прямо из редактора):&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/67146/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/3609/imdagger.3/0_1064a_15c244ec_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;В целом &lt;del class="del"&gt;
работы ещё много&lt;/del&gt;
 должны успеть сделать к дате релиза версии
&lt;strong&gt;TriadVesuvius&lt;/strong&gt; всё, что запланировано в эту итерацию. А дальше пойдёт
набивка контентом.&lt;/p&gt;</summary><category term="triad_vesuvius"></category><category term="проект"></category><category term="bge"></category></entry><entry><title></title><link href="/posts/2009/08/04/urn:ya.ru:post/22199227/126/" rel="alternate"></link><updated>2009-08-04T19:33:05+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-04:posts/2009/08/04/urn:ya.ru:post/22199227/126/</id><summary type="html">&lt;p&gt;работа кипит&lt;/p&gt;
</summary></entry><entry><title>Midnight Commander</title><link href="/posts/2009/08/04/midnight-commander/" rel="alternate"></link><updated>2009-08-04T19:31:11+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-04:posts/2009/08/04/midnight-commander/</id><summary type="html">&lt;p&gt;Сижу использую Opera, версию вроде свежая. Думаю: “Что-то она сильно
тормозит? :-/” Смотрю в top — процессор нагружен на 100%. Уже начал
грешить на JS на сайте, но вдруг обратил внимание на процесс &lt;strong&gt;./mc&lt;/strong&gt;,
который висит себе порождённый от &lt;strong&gt;init&lt;/strong&gt; и не подсоединён к терминалу.
И оказывается это он всё время ест! Я стал вспоминать откуда этот
процесс взялся и вспомнил, что в воскресение я скачал 4.7.0 версию и
решил проверить оченб старую, давнюю багу в Midnight Commander.
Оказывается её никто не поправил: создаём папку в одном месте, а файл с
таким же именем в другом, пробуем копировать файл туда же, где и папка&amp;nbsp;—
всё ok (т.е. mc говорит, что это сделать не возможно и я с ним
солидарен). Но стоит порпосить его скопировать &lt;u class="underline"&gt;
в фоне&lt;/u&gt;
, он сразу рухнет с
segfault, а родительский процесс останется подвисшим.&lt;/p&gt;
&lt;p&gt;Когда-то я смотрел ещё старые исходники и нашёл, что mc, чтобы
копировать в фоне делает &lt;strong&gt;fork()&lt;/strong&gt;, для работы с основным mc и
отображением всех ошибок в фоне есть специальные функции и структуры,
но… но…!! разработчик фонового копирования их не использовал! Он просто
работал как-будто и не было никакого &lt;strong&gt;fork&lt;/strong&gt;! Зайду как-нибудь на
jabber-конференцию текущих разработчиков да скажу им пробаг, а если
появится немного времени свободного от проекта и работы, то сам поправлю
(хотя бывает лень, т.к. я не копирую в фоновом режиме, у меня для этого
обычно несколько mc).&lt;/p&gt;
&lt;p&gt;Самое забавное, что Midnight Commander успел наработать 54 &lt;u class="underline"&gt;
часа&lt;/u&gt;
!!
процессорного времени после segfault его дочернего процесса :D.&lt;/p&gt;
</summary><category term="midnight commander"></category><category term="баг"></category></entry><entry><title>Автоматическое определение режима в 2.49a</title><link href="/posts/2009/08/04/avtomaticheskoe-opredelenie-rezhima-v-249a/" rel="alternate"></link><updated>2009-08-04T18:29:17+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-04:posts/2009/08/04/avtomaticheskoe-opredelenie-rezhima-v-249a/</id><summary type="html">&lt;p&gt;Наконец, я переделал определение режима для скриптов. Раньше
специальный обработчик (SPACEHANDLER) перехватывал нажатие &lt;kbd class="kbd"&gt;
P&lt;/kbd&gt;
,
устанавливал флаг игрового режима и переключал режим, затем запускал
саму игру вот таким трюком:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-c"&gt;#SPACEHANDLER.VIEW3D.EVENT&lt;/span&gt;
&lt;span class="pgcss-c"&gt;# ...  установка переменной режима, проверка клавиши P ...&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-ow"&gt;not&lt;/span&gt; &lt;span class="pgcss-n"&gt;Blender&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;game_mode&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;print&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;switch to game mode&amp;#39;&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;Blender&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;game_mode&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-bp"&gt;True&lt;/span&gt; &lt;span class="pgcss-c"&gt;# защита от рекурсии&lt;/span&gt;
        &lt;span class="pgcss-c"&gt;# т.к. QHandle вызовет снова этот скрипт, но уже нужно&lt;/span&gt;
        &lt;span class="pgcss-c"&gt;# будет не реагировать на событие, а позволить это&lt;/span&gt;
        &lt;span class="pgcss-c"&gt;# Blender&lt;/span&gt;

        &lt;span class="pgcss-n"&gt;current_window&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;Blender&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;Window&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;GetAreaID&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;Blender&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;Window&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;QAdd&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;current_window&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;\
                                &lt;span class="pgcss-n"&gt;Blender&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;Draw&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;PKEY&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-bp"&gt;True&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;Blender&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;Window&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;QHandle&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;current_window&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;  &lt;span class="pgcss-c"&gt;# принудительный&lt;/span&gt;

        &lt;span class="pgcss-c"&gt;# запуск BGE&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;Blender&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;event&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-bp"&gt;None&lt;/span&gt; &lt;span class="pgcss-c"&gt;# событие P уже обработано&lt;/span&gt;
                             &lt;span class="pgcss-c"&gt;# данным сценарием&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;normalize_path&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;  &lt;span class="pgcss-c"&gt;# это нужно для import&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;print&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;switch to edit mode&amp;#39;&lt;/span&gt;
        &lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;base.controllers&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;switch_to_editmode&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;switch_to_editmode&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt; &lt;span class="pgcss-c"&gt;# вернуть режим к прежнему&lt;/span&gt;
                             &lt;span class="pgcss-c"&gt;# состоянию&lt;/span&gt;
        &lt;span class="pgcss-n"&gt;Blender&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;game_mode&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-bp"&gt;False&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p class="cut"&gt;&lt;a class="h-link reference internal" href="#cut_30193552"data-toggle="collapse"&gt;читать далее&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_30193552"&gt;
&lt;p&gt;Добавляется заново событие нажатия клавиши &lt;kbd class="kbd"&gt;
P&lt;/kbd&gt;
,  и вызывается
принудительная обработка всех событий немедленно. Сценарий
приостановится в этой точке, т.к. игровой режим пока ещё блокирует
Blender (это будет исправлено в версии 2.5, но я для проекта буду
использовать 2.49a, поэтому могу быть спокоен за такой код). После
разблокировки сценарий возвращает подсистему обратно в режим
редактирования.&lt;/p&gt;
&lt;p&gt;Все эти танцы с бубном были из-за того, что в Blender &amp;lt;2.49 модуль
&lt;strong&gt;GameLogic&lt;/strong&gt; не выгружался после завершения игрового процесса. Поэтому
было трудно скрипту, который выполнялся и там, и там, менять своё
поведение в зависимости от режима. Но в новой версии это поправили, и я
решил переделать данный кусочек кода, и избавиться от странных
перехватов событий (и от проблемы, что меню не перехватывается, и это
могло вызывать ошибки).&lt;/p&gt;
&lt;p&gt;Вот такой немного страшный класс написал (он ещё не отрефакторен и
не отдокументирован):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-c"&gt;# -*- coding: utf-8 -*-&lt;/span&gt;
&lt;span class="pgcss-k"&gt;class&lt;/span&gt; &lt;span class="pgcss-nc"&gt;Controller&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;object&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;EditModeClass&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-bp"&gt;None&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;GameModeClass&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-bp"&gt;None&lt;/span&gt;

    &lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;__new__&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;cls&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-o"&gt;*&lt;/span&gt;&lt;span class="pgcss-n"&gt;args&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-o"&gt;**&lt;/span&gt;&lt;span class="pgcss-n"&gt;kwargs&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;try&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
            &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-nn"&gt;GameLogic&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;Controller&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;GameModeClass&lt;/span&gt; &lt;span class="pgcss-ow"&gt;is&lt;/span&gt; &lt;span class="pgcss-bp"&gt;None&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
                &lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;controller_gamemode&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;ControllerGameMode&lt;/span&gt;
                &lt;span class="pgcss-k"&gt;class&lt;/span&gt; &lt;span class="pgcss-nc"&gt;CGameMode&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;cls&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;ControllerGameMode&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
                    &lt;span class="pgcss-k"&gt;pass&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;CGameMode&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;__name__&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;cls&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;__name__&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;CGameMode&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;__module__&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;cls&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;__module__&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;Controller&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;GameModeClass&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;CGameMode&lt;/span&gt;
            &lt;span class="pgcss-n"&gt;Class&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;Controller&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;GameModeClass&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-nb"&gt;object&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;__new__&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Class&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-o"&gt;*&lt;/span&gt;&lt;span class="pgcss-n"&gt;args&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-o"&gt;**&lt;/span&gt;&lt;span class="pgcss-n"&gt;kwargs&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;except&lt;/span&gt; &lt;span class="pgcss-ne"&gt;ImportError&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;Controller&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;EditModeClass&lt;/span&gt; &lt;span class="pgcss-ow"&gt;is&lt;/span&gt; &lt;span class="pgcss-bp"&gt;None&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
                &lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;controller_editmode&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;ControllerEditMode&lt;/span&gt;
                &lt;span class="pgcss-k"&gt;class&lt;/span&gt; &lt;span class="pgcss-nc"&gt;CEditMode&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;cls&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;ControllerEditMode&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
                    &lt;span class="pgcss-k"&gt;pass&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;CEditMode&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;__name__&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;cls&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;__name__&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;CEditMode&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;__module__&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;cls&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;__module__&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;Controller&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;EditModeClass&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;CEditMode&lt;/span&gt;
            &lt;span class="pgcss-n"&gt;Class&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;Controller&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;EditModeClass&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;return&lt;/span&gt; &lt;span class="pgcss-nb"&gt;object&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;__new__&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;Class&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-o"&gt;*&lt;/span&gt;&lt;span class="pgcss-n"&gt;args&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-o"&gt;**&lt;/span&gt;&lt;span class="pgcss-n"&gt;kwargs&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Зачем такая сложная схема? Всё дело в том, что контроллер &lt;code class="code"&gt;
Knight&lt;/code&gt;

унаследован от &lt;code class="code"&gt;
Warrior&lt;/code&gt;
, а тот в свою очередь от &lt;code class="code"&gt;
Controller&lt;/code&gt;
, который
должен себя вести либо как &lt;code class="code"&gt;
ControllerGameMode&lt;/code&gt;
, либо как
&lt;code class="code"&gt;
ControllerEditMode&lt;/code&gt;
, и желательно без потерь производительности при
обращении к методам, но можно работать медленнее при создании. Эти два
класса наследуются от &lt;code class="code"&gt;
BaseController&lt;/code&gt;
, который много чем заправляет.&lt;/p&gt;
&lt;p&gt;Теперь &lt;em&gt;Controller&lt;/em&gt; может в зависимости от режима создавать объекты
с примесью либо одного класса либо другого и корректно справляется с
десериализацией &lt;code class="code"&gt;
load&lt;/code&gt;
 из модуля &lt;code class="code"&gt;
pickle&lt;/code&gt;
. Но есть проблема, что
сериализатор &lt;code class="code"&gt;
dump&lt;/code&gt;
 из &lt;code class="code"&gt;
pickle&lt;/code&gt;
 не разрешает сохранять классы, у имя
которых не соответвтует содержимому (т.е. существует другой класс с
таким же &lt;code class="code"&gt;
 _ _name _ _&lt;/code&gt;
 в &lt;code class="code"&gt;
 _ _module _ _&lt;/code&gt;
). Поэтому пришлось
написать свой &lt;em&gt;NewPickler&lt;/em&gt; унаследованный от &lt;strong&gt;Pickler&lt;/strong&gt;, который
перекрывал метод &lt;strong&gt;save&lt;/strong&gt; и в случае класса, который ему не стоило
проверять, подменял объект на настоящий класс. Делал он это
исключительно для &lt;u class="underline"&gt;
определённых&lt;/u&gt;
 типов классов, т.к. нужно понимать, что
делаешь, а для всех это могло породить ошибки. Если решиться таким
способом (горячей заменой сохраняемого класса) перекрыть
&lt;strong&gt;save_global&lt;/strong&gt;, то придётся воевать с &lt;strong&gt;memoize&lt;/strong&gt;, мне не удалось его
победить и я нашёл этот, более лёгкий и верный путь.&lt;/p&gt;
&lt;/div&gt;
</summary><category term="blender"></category><category term="python"></category><category term="bge"></category><category term="triad_vesuvius"></category><category term="pickle"></category></entry><entry><title>Привет 2.49a</title><link href="/posts/2009/08/02/privet-249a/" rel="alternate"></link><updated>2009-08-02T17:10:05+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-02:posts/2009/08/02/privet-249a/</id><summary type="html">&lt;p&gt;Пора перебросить проект на версию &lt;strong&gt;2.49a&lt;/strong&gt;. Что вынуждает это сделать:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Досадная ошибка в 2.48a из-за которой пришлось пересобрать Blender
вручную, но для некоторой (одной) очень популярной платформы я
пересобрать не смогу (не хочу) его. Под своим Linux я это сделал без
проблем, а в другой системе мне придётся искать все либы, компилятор
и так далее.&lt;/li&gt;
&lt;li&gt;Наконец они выбросили все эти приписки get/set в Blender Python API и
заменими нормальными и удобными свойствами&lt;/li&gt;
&lt;li&gt;Теперь можно использовать addObject, а не немного странный
instantAddObject&lt;/li&gt;
&lt;li&gt;Сделали возможность вызова из актуатора функции из модуля, теперь не
обязательно хранить текст (а то как пришлось вывовачиваться с import,
если было желание хранить текст на диске)&lt;/li&gt;
&lt;li&gt;Много приятных функций без разрешения старого интерфейса&lt;/li&gt;
&lt;li&gt;Безболезненный перенос старого кода путём правки небольшого числа
файлов (работы не более чем на пару часов)&lt;/li&gt;
&lt;/ol&gt;
</summary><category term="blender"></category><category term="triad_vesuvius"></category><category term="2.49a"></category></entry><entry><title>Почта</title><link href="/posts/2009/08/01/pochta/" rel="alternate"></link><updated>2009-08-01T20:56:54+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-01:posts/2009/08/01/pochta/</id><summary type="html">&lt;p&gt;Попробовал новую &lt;strong&gt;Яндекс.Почта бета&lt;/strong&gt;, … хм… понравилось. Довольно
удобно, только чуть-чуть пока не привычно, но группировка и метки
покрывают недостатки непривычности. Ещё сегодня первый раз попробовал
&lt;strong&gt;Яндекс.Календарь&lt;/strong&gt;. Тоже довольно удобно, добавил туда пару событий.
Может даже создам список TODO в “Мои дела”, нужно подумать :-/.&lt;/p&gt;
</summary><category term="почта"></category><category term="Яндекс"></category><category term="бета"></category></entry><entry><title></title><link href="/posts/2009/08/01/urn:ya.ru:post/22199227/121/" rel="alternate"></link><updated>2009-08-01T14:59:27+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-08-01:posts/2009/08/01/urn:ya.ru:post/22199227/121/</id><summary type="html">&lt;p&gt;грустно как-то&lt;/p&gt;
</summary></entry><entry><title>Отображение ячеек</title><link href="/posts/2009/07/31/game-cells-display/" rel="alternate"></link><updated>2009-07-31T21:10:09+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-31:posts/2009/07/31/game-cells-display/</id><summary type="html">&lt;p&gt;Ура! Сделал автоматическое отображение ячеек карты прямо в редакторе.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/65627/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3508/imdagger.2/0_1005b_eca3575a_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="triad_vesuvius"></category><category term="ячейки"></category></entry><entry><title>Работа с BGL в Blender</title><link href="/posts/2009/07/31/rabota-s-bgl-v-blender/" rel="alternate"></link><updated>2009-07-31T12:41:07+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-31:posts/2009/07/31/rabota-s-bgl-v-blender/</id><summary type="html">&lt;p&gt;Мне нужно было создать дополнительно в Blender шестигранную сетку.
Но так, чтобы это был не объект Blender, а просто рисунок во время
редактирования (чтобы было легче и нагляднее добавлять всё остальное в
редакторе). Я к этому моменту уже знал, что такое &lt;strong&gt;SpaceHandler&lt;/strong&gt; в
Blender, поэтому создал его вида &lt;em&gt;#SPACEHANDLER.VIEW3D.DRAW&lt;/em&gt;. Который
вызывается на каждое событие перерисовки. Модуль BGL предоставляет набор
функций OpenGL, которыми можно воспользоваться и дорисовать что-нибудь в
сцену. Я решил нарисовать полупрозрачный треугольник (0; 0; 0) - (0; 1;
0) - (1; 0; 0). Но возникла проблема, что я никак не мог установить
матрицу преобразований верно, чтобы треугольник был в указанных
координатах. Сначала он у меня не хотел воспринимать параметры
масштабирования и вращения, а затем были проблемы с позицией и
трансляцией координат в экранные. Поэтому я поискал подходящий скрипт на
форуме
&lt;a class="reference external" href="http://www.blenderartists.org/forum"&gt;blenderartists.org/forum/&lt;/a&gt;.
Там нашёлся простой и понятный для моего ума
&lt;a class="reference external" href="http://blenderartists.org/forum/showthread.php?p=1333169"&gt;скрипт&lt;/a&gt; от
пользователя &lt;strong&gt;Crouch&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Я сразу же вытащил из drawText первые строки по установке матрицы,
немного подправил, т.к. можно это сделать проще, чем у &lt;strong&gt;Crouch&lt;/strong&gt;.
Вот, что получилось:&lt;/p&gt;
&lt;p class="cut"&gt;&lt;a class="h-link reference internal" data-toggle="collapse" href="#cut_40701904"&gt;посмотреть&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_40701904"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-c"&gt;#SPACEHANDLER.VIEW3D.DRAW&lt;/span&gt;
&lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;Blender&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;BGL&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;Window&lt;/span&gt;

&lt;span class="pgcss-n"&gt;viewMatrix&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;Window&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;GetPerspMatrix&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
&lt;span class="pgcss-n"&gt;viewBuff&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;BGL&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;Buffer&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;BGL&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;GL_FLOAT&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-mi"&gt;4&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-mi"&gt;4&lt;/span&gt;&lt;span class="pgcss-p"&gt;],&lt;/span&gt; &lt;span class="pgcss-n"&gt;viewMatrix&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-n"&gt;BGL&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;glLoadIdentity&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
&lt;span class="pgcss-n"&gt;BGL&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;glMatrixMode&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;BGL&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;GL_PROJECTION&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-n"&gt;BGL&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;glLoadMatrixf&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;viewBuff&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-n"&gt;BGL&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;glEnable&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;BGL&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;GL_BLEND&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;  &lt;span class="pgcss-c"&gt;# без этого не будет прозрачности&lt;/span&gt;
&lt;span class="pgcss-n"&gt;BGL&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;glColor4f&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-mf"&gt;0.0&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-mf"&gt;1.0&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-mf"&gt;0.0&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-mf"&gt;0.2&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-n"&gt;BGL&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;glBegin&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;BGL&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;GL_TRIANGLES&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;  &lt;span class="pgcss-c"&gt;# чертит треугольник&lt;/span&gt;
&lt;span class="pgcss-n"&gt;BGL&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;glVertex3f&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-mf"&gt;0.0&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-mf"&gt;0.0&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-mf"&gt;0.0&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-n"&gt;BGL&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;glVertex3f&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-mf"&gt;0.0&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-mf"&gt;1.0&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-mf"&gt;0.0&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-n"&gt;BGL&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;glVertex3f&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-mf"&gt;1.0&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-mf"&gt;0.0&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-mf"&gt;0.0&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-n"&gt;BGL&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;glEnd&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;BGL.Buffer&lt;/strong&gt; — это объект, первым параметром которого является тип
данных, второй — размерность (для &lt;strong&gt;glLoadMatrix&lt;/strong&gt; требуется 4x4),
последний параметр — список инициализации, должен быть указанного
размера (т.е. двумерный список 4x4).&lt;/p&gt;
&lt;p&gt;Главное в этом скрипте, что его отличает от других — комментарий в
первой строке, этот комментарий говорит Blender’у, что это не простой
сценарий, а обработчик события перерисовки в режиме просмотра 3D. Но по
умолчанию скрипт выполнятся не будет, для этого его нужно включить.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/65449/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3612/imdagger.2/0_ffa9_44eb7a60_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Нужно установить галочку напротив имени сценария. После этого
появится треугольник:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/65450/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/3613/imdagger.2/0_ffaa_6ae2f86f_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;</summary><category term="spacehandler"></category><category term="opengl"></category><category term="треугольник"></category><category term="обработчик"></category><category term="triangle"></category><category term="matrix"></category><category term="blender"></category><category term="python"></category></entry><entry><title>Актуаторы в BGE</title><link href="/posts/2009/07/29/aktuatory-v-bge/" rel="alternate"></link><updated>2009-07-29T14:53:19+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-29:posts/2009/07/29/aktuatory-v-bge/</id><summary type="html">&lt;p&gt;Не задумывался раньше, что в BGE такие актуаторы, как: &lt;strong&gt;Action&lt;/strong&gt;,
&lt;strong&gt;Motion&lt;/strong&gt; и некоторые другие, добавленные при помощи
&lt;strong&gt;addActiveActuator&lt;/strong&gt; из Python-скрипта с флагом True, работают до тех
пор, пока их не добавят с инвертированным сигналом, т.е.
GameLogic.addActiveActuator(my_act, False). Только после этого актуатор
перестанет выполняться на каждом тике. И это верно даже для
&lt;strong&gt;Action—&amp;gt;Property&lt;/strong&gt;, хотя я думал, что оно установит один раз и не
будет больше мешать. Я написал такой скрипт для логики скелета:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-n"&gt;cc&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;GameLogic&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;getCurrentController&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
&lt;span class="pgcss-n"&gt;restart_frame&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;cc&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;getActuator&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;restart&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-n"&gt;pressed_key_restart&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;cc&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;getSensor&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;pressed r&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;isPositive&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
&lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;pressed_key_move&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;GameLogic&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;addActiveActuator&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;restart_frame&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-bp"&gt;True&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
    &lt;span class="pgcss-err"&gt;…&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Актуатор &lt;em&gt;restart&lt;/em&gt; — &lt;strong&gt;Action&lt;/strong&gt; типа &lt;strong&gt;Property&lt;/strong&gt;, который сбрасывал
текущий кадр в 1. Ещё данный сценарий переносил одновременно с
обнулением анимации объект в новую позицию. Но возникла проблема, что
после срабатывания скрипта, больше не возможно запустить анимацию ещё
раз. Немного покумекав и исследовав топики форума
&lt;a class="reference external" href="http://blenderartists.org/forum/"&gt;http://blenderartists.org/forum/&lt;/a&gt; я понял, что после активации актуатор
&lt;em&gt;restart&lt;/em&gt; постоянно пытается сбросить кадр анимации и не даёт нормально
работать дальше. Это мне пришло в голову, когда я нашёл на форуме топик
про Motion и, что его нужно деактивировать. Вышел такой Python-скрипт:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-n"&gt;cc&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;GameLogic&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;getCurrentController&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
&lt;span class="pgcss-n"&gt;restart_frame&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;cc&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;getActuator&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;restart&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-n"&gt;pressed_key_restart&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;cc&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;getSensor&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;pressed r&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;isPositive&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
&lt;span class="pgcss-n"&gt;need_activate&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;pressed_key_restart&lt;/span&gt;
&lt;span class="pgcss-n"&gt;GameLogic&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;addActiveActuator&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;restart_frame&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;need_activate&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;И это помогло решить проблемы. Всё работает, как и требуется :).&lt;/p&gt;
</summary><category term="python"></category><category term="bge"></category><category term="action"></category><category term="актуатор"></category></entry><entry><title>Перцы</title><link href="/posts/2009/07/28/pertsy/" rel="alternate"></link><updated>2009-07-28T14:26:28+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-28:posts/2009/07/28/pertsy/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/63378"&gt;&lt;img alt="Обычный зелёный перец" src="http://img-fotki.yandex.ru/get/3512/imdagger.2/0_f792_166b4d6_-1-L" title="Обычный зелёный перец"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/63379"&gt;&lt;img alt="Странный перец" src="http://img-fotki.yandex.ru/get/3613/imdagger.2/0_f793_4c8c2a70_-1-L" title="Странный перец"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/63380"&gt;&lt;img alt="Рука-перец" src="http://img-fotki.yandex.ru/get/3511/imdagger.2/0_f794_e369247c_-1-L" title="Рука-перец"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Почему-то на огороде вырос только единственный перец, как на первой
картинке, а остальные растут вверх! Да ещё и странной формы :) Раньше
они так весело не росли, наверное смущались :D.&lt;/p&gt;</summary><category term="перец"></category></entry><entry><title>Линковка объектов в другие сцены</title><link href="/posts/2009/07/27/linkovka-obektov-v-drugie-stseny/" rel="alternate"></link><updated>2009-07-27T15:37:35+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-27:posts/2009/07/27/linkovka-obektov-v-drugie-stseny/</id><summary type="html">&lt;p&gt;Стал вспоминать как же сделать так, чтобы объект был всего один, а сцен
несколько и все содержали этот объект. Чуть подумал и сделал так:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/62949/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3510/imdagger.2/0_f5e5_7b0e95d4_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Создан кубик на сцене &lt;strong&gt;Scene&lt;/strong&gt;. Затем создаётся пустая сцена:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/62950/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/3609/imdagger.2/0_f5e6_dae9a71c_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;На сцене &lt;strong&gt;Scene&lt;/strong&gt; выделяется объект &lt;strong&gt;Cube&lt;/strong&gt; и нажимается сочетание
&lt;kbd class="kbd"&gt;
Ctrl+L&lt;/kbd&gt;
, а затем цифра 1 (всё это можно проделать и через меню).&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/65952/"&gt;&lt;img alt="image2" src="http://img-fotki.yandex.ru/get/3511/imdagger.2/0_f5e8_72374589_L" title="image2"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;После этого Blender спросит в какую сцену нужно добавить объект. И
вуаля, … объект изменился на двух сценах одновременно:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/62953/"&gt;&lt;img alt="image3" src="http://img-fotki.yandex.ru/get/3610/imdagger.2/0_f5e9_b72f69d7_L" title="image3"/&gt;&lt;/a&gt; &lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/62954/"&gt;&lt;img alt="image4" src="http://img-fotki.yandex.ru/get/3612/imdagger.2/0_f5ea_ca428f05_L" title="image4"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="объект"></category><category term="сцены"></category></entry><entry><title>Мультяшный глаз</title><link href="/posts/2009/07/25/multiashnyi-glaz/" rel="alternate"></link><updated>2009-07-25T20:20:03+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-25:posts/2009/07/25/multiashnyi-glaz/</id><summary type="html">&lt;p&gt;Делаю глазик, пока ещё ресницы не доделал. Всё время они какие-то не
такие получаются :S.&lt;/p&gt;
&lt;p&gt;С ресницами (не очень):&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/62347/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3508/imdagger.2/0_f38b_e8e1cfc0_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Без ресниц:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/62348/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/3513/imdagger.2/0_f38c_b16b943d_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Если возник вопрос: “А что это за штука внизу?”, то смотри заголовок
записи: “Мультяшный глаз”. Поэтому эта “штука” - способ крепления к телу
персонажа.&lt;/p&gt;</summary><category term="blender"></category><category term="глаз"></category></entry><entry><title></title><link href="/posts/2009/07/24/urn:ya.ru:post/22199227/113/" rel="alternate"></link><updated>2009-07-24T17:30:43+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-24:posts/2009/07/24/urn:ya.ru:post/22199227/113/</id><summary type="html">&lt;p&gt;немножко простудился&lt;/p&gt;
</summary></entry><entry><title>Сериализация</title><link href="/posts/2009/07/24/serializatsiia/" rel="alternate"></link><updated>2009-07-24T13:28:37+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-24:posts/2009/07/24/serializatsiia/</id><summary type="html">&lt;p&gt;Раньше карта из &lt;strong&gt;core.map.model&lt;/strong&gt; сохраняла своё состояние при помощи
сериализатора из модуля cPickle, но чтобы контроллировать процесс
десериализации достаточно глубоко - нужно унаследовать класс UnPickler.
Т.к. я решил, что кто-нибудь уже сделал готовый класс и мне не придётся
“изобретать велосипед”, то я решил поискать в интернете. И нашёл модуль
sweet_pickle, который входил в пакет решений от
&lt;a class="reference external" href="http://www.enthought.com/products/open-tool-suite.php"&gt;Enthought&lt;/a&gt;. Я
немного убрал оттуда лишнего (некоторые возможности мне не требовались):
использование других модулей из этого проекта и ограничился
стандартными. Теперь я могу объявить в класса метод __initialize__,
который выполняется после конструирования всего объекта, а этот метод
может просто выполнится или вернуть генератор, который будет исполняться
десериализатором.&lt;/p&gt;
</summary><category term="python"></category><category term="сериализация"></category></entry><entry><title>Контроллеры</title><link href="/posts/2009/07/23/kontrollery/" rel="alternate"></link><updated>2014-07-13T17:53:00+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-23:posts/2009/07/23/kontrollery/</id><summary type="html">&lt;p&gt;Требовалось наконец разрешить проблему двух контроллеров. Нужно, чтобы
Blender в одном режиме пользовался одним контроллером, а в другом режиме
(BGE) вторым контроллером. Много классов, которые наследуются от
Controller, поэтому нужно, чтобы после вызова переключения режима, все
новые создавались уже на базе нового контроллера и без релоадинга
модулей. Решил проблему копированием всех аттрибутов и методов в класс
Controller из заданного.&lt;/p&gt;
&lt;p class="cut"&gt;&lt;a class="h-link reference internal" href="#cut_31578512"data-toggle="collapse"&gt;посмотреть код&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_31578512"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-c"&gt;# -*- coding: utf-8 -*-&lt;/span&gt;
&lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;controller_editmode&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;ControllerEditMode&lt;/span&gt;

&lt;span class="pgcss-k"&gt;class&lt;/span&gt; &lt;span class="pgcss-nc"&gt;Controller&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ControllerEditMode&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;pass&lt;/span&gt;

&lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;__copy&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;FromClass&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;ToClass&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
    &lt;span class="pgcss-sd"&gt;&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;    Копирует содержимое одного класса в другой. Не&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;    копирует неизменяемые аттрибуты: __doc__ и&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;    __dict__.&lt;/span&gt;

&lt;span class="pgcss-sd"&gt;    :Parameters:&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;    `FromClass` : class&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;    Класс аттрибуты, которого нужно скопировать&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;    `ToClass` : class&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;    Класс приёмник&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;    &amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
    &lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-n"&gt;with_name&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-n"&gt;FromClass&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;__dict__&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
        &lt;span class="pgcss-c"&gt;# некоторые аттрибуты не возможно перезаписать&lt;/span&gt;
        &lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;with_name&lt;/span&gt; &lt;span class="pgcss-ow"&gt;not&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;__doc__&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;__dict__&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
            &lt;span class="pgcss-n"&gt;value&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-nb"&gt;getattr&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;FromClass&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;with_name&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;try&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
                &lt;span class="pgcss-n"&gt;func&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;value&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;im_func&lt;/span&gt; &lt;span class="pgcss-c"&gt;# это метод, если есть im_func&lt;/span&gt;
                &lt;span class="pgcss-c"&gt;# копируется только функция от метода класса&lt;/span&gt;
                &lt;span class="pgcss-nb"&gt;setattr&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ToClass&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;with_name&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;func&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
            &lt;span class="pgcss-k"&gt;except&lt;/span&gt; &lt;span class="pgcss-ne"&gt;AttributeError&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt; &lt;span class="pgcss-c"&gt;# нет это был не метод&lt;/span&gt;
                &lt;span class="pgcss-nb"&gt;setattr&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ToClass&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;with_name&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;value&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

&lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;switch_to_gamemode&lt;/span&gt;&lt;span class="pgcss-p"&gt;():&lt;/span&gt;
    &lt;span class="pgcss-sd"&gt;&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;    Переключает модуль в игровой режим. После этой&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;    операции все действия по десериализации будут&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;    проводится с классом ControllerGameMode.&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;    &amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
    &lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;controller_gamemode&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;ControllerGameMode&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;__copy&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ControllerGameMode&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;Controller&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;

&lt;span class="pgcss-k"&gt;def&lt;/span&gt; &lt;span class="pgcss-nf"&gt;switch_to_editmode&lt;/span&gt;&lt;span class="pgcss-p"&gt;():&lt;/span&gt;
    &lt;span class="pgcss-sd"&gt;&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;    Переключает модуль в режим редактора. После этой&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;    операции все действия по десериализации будут&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;    проводится с классом ControllerEditMode.&lt;/span&gt;
&lt;span class="pgcss-sd"&gt;    &amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;__copy&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;ControllerEditMode&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;Controller&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Главное только не копировать __doc__ и __dict__, т.к. они не
желают перезаписываться. Если копируемый аттрибут - переменная, то она
переносится простым setattr. А если - это метод, но встаёт небольшая
проблема, что он уже забинден в другой класс. Поэтому нужно получить не
метод, а функцию, которая за ним “прячется”. Это свойство im_func, если
оно присутствует, то можно быть уверенным, что value - метод.&lt;/p&gt;
</summary><category term="python"></category><category term="bge"></category><category term="контроллер"></category></entry><entry><title>Преальфа релиз</title><link href="/posts/2009/07/22/prealfa-reliz/" rel="alternate"></link><updated>2009-07-22T18:00:57+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-22:posts/2009/07/22/prealfa-reliz/</id><summary type="html">&lt;p&gt;Готовимся к версии TriadVesuvius. Это будет эпохальное событие для меня.&lt;/p&gt;
</summary><category term="triad_vesuvius"></category><category term="проект"></category><category term="программирование"></category></entry><entry><title>Активные объекты и контекст</title><link href="/posts/2009/07/22/aktivnye-obekty-i-kontekst/" rel="alternate"></link><updated>2009-07-22T17:56:30+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-22:posts/2009/07/22/aktivnye-obekty-i-kontekst/</id><summary type="html">&lt;p&gt;Бывает нужно в скрипте в BGE пройтись по выделенным объектам. Если
использовать такой код:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;import bpy&lt;/p&gt;
&lt;p&gt;active_scene = bpy.data.scenes.active &amp;nbsp;# текущая сцена&lt;/p&gt;
&lt;p&gt;objects = active_scene.objects.selected&lt;/p&gt;
&lt;p&gt;for warrior in objects:&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; pass&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Но возникает одна проблема: выбираются объекты и с других слоёв, даже
если эти слои не активные, но на них выделены объекты. Чтобы этого не
происходило, нужно работать только с текущим контекстом (выделенные
объекты на текущем слое).&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;import bpy&lt;/p&gt;
&lt;p&gt;active_scene = bpy.data.scenes.active &amp;nbsp;# текущая сцена&lt;/p&gt;
&lt;p&gt;objects = active_scene.objects.&lt;strong&gt;context&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;for warrior in objects:&lt;/p&gt;
&lt;p&gt;&amp;nbsp; &amp;nbsp; pass&lt;/p&gt;
&lt;/blockquote&gt;
</summary><category term="python"></category><category term="bge"></category></entry><entry><title>Полноэкранный режим</title><link href="/posts/2009/07/20/polnoekrannyi-rezhim/" rel="alternate"></link><updated>2009-07-20T15:31:27+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-20:posts/2009/07/20/polnoekrannyi-rezhim/</id><summary type="html">&lt;p&gt;Если требуется запуск Blender в полноэкранном режиме, то его следует
запускать с опцией -W:&lt;/p&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;blockquote&gt;
./blender -W&lt;/blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Так как поведение 3D редактора было изменено где-то ещё в версии 2.43
если мне не изменяет память. Во всех новых версиях Blender запускается в
оконном режиме, что может немного раздражать, если монитор и так не
очень большой, и всё еле влазит.&lt;/p&gt;
</summary><category term="blender"></category><category term="полноэкранный"></category></entry><entry><title>Добавка множества объектов в BGE</title><link href="/posts/2009/07/20/dobavka-mnozhestva-obektov-v-bge/" rel="alternate"></link><updated>2009-07-20T13:33:29+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-20:posts/2009/07/20/dobavka-mnozhestva-obektov-v-bge/</id><summary type="html">&lt;p&gt;Меня попросил мой друг Many объяснить ему, как можно в Blender GE
создавать много объектов за один запуск контроллера.Т.к. на словах
объяснять сложно, то он попросил, чтобы я это предоставил в письменной
форме, т.е. в виде небольшого туториала.&lt;/p&gt;
&lt;p&gt;И так, приступим. Пусть уже создан объект Cube на втором слое в
Blender (можно и на другом слое, важно, чтобы не на видимом, а то объект
не будет создаваться).&lt;/p&gt;
&lt;p class="cut"&gt;&lt;a class="h-link reference internal" data-toggle="collapse" href="#cut_32054992"&gt;читать далее&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_32054992"&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/60176/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3508/imdagger.2/0_eb10_e122c2dc_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Теперь нужно деактивировать второй слой и активировать первый, на
котором расположен источник света и камера. Пусть требуется создать 64
объекта кубика, которые будут расположены вдоль окружности радиусом 1Бм
(Блендер метр) и с центром (0.5; 0.5)Бм.&lt;/p&gt;
&lt;p&gt;Для того, чтобы создавать объекты нужно, чтобы актуатор какого-нибудь
другого объекта произвёл эти операции. Но нужно, чтобы сам “создатель”
не отображался, а лишь служил “фабрикой по производству кубиков”. Для
этого подойдёт тип объекта Empty. Он не отображается в BGE, но все
операции над ним можно проводить, как с обычным объектом. Добавим его на
первый слой.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/60177/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/3513/imdagger.2/0_eb11_60cc8f83_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Теперь активный слой выглядит так:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/60178/"&gt;&lt;img alt="image2" src="http://img-fotki.yandex.ru/get/3508/imdagger.2/0_eb12_2595173d_L" title="image2"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Изначально по-умолчанию камера повёрнута и смещена от глобального
центра. Поэтому можно сбросить эти параметры в ноль при помощи &lt;kbd class="kbd"&gt;
Alt+R&lt;/kbd&gt;

(вращение) и &lt;kbd class="kbd"&gt;
Alt+G&lt;/kbd&gt;
 (смещение). Это можно и не производить, просто
было бы удобнее, чтобы объекты были расположены по правильной
окружности, а не в перспективе издалека.&lt;/p&gt;
&lt;p&gt;Теперь можно приступить непосредственно к конструированию логических
блоков и написанию программного кода. Следует выделить Empty и нажать
&lt;kbd class="kbd"&gt;
F4&lt;/kbd&gt;
. Таким образом, будет открыт режим редактирования логики объекта.
Создание “окружности кубиков” должно произойти сразу после запуска
игрового режима (клавиша &lt;kbd class="kbd"&gt;
P&lt;/kbd&gt;
). Чтобы логический блок выполнился ровно
один раз, нужно создать сенсор типа Always, у которого выключен &lt;em&gt;pulse
mode:&lt;/em&gt;&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/60180/"&gt;&lt;img alt="image3" src="http://img-fotki.yandex.ru/get/3514/imdagger.2/0_eb14_2bdda85_L" title="image3"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Затем следует добавить контроллер типа Python и указать название
скрипта (скрипт создаётся в режиме работы с текстом по &lt;strong&gt;Shift+F11&lt;/strong&gt;).
Если название скрипта будет введено неправильно, то Blender обнулит это
поле и не даст присвоить в него некорректное значение. Сенсор необходимо
соединить с контроллером.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/60181/"&gt;&lt;img alt="image4" src="http://img-fotki.yandex.ru/get/3512/imdagger.2/0_eb15_2122e075_L" title="image4"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;После этого создаётся актуатор типа Edit Object с выбранным Add
Object. В поле &lt;em&gt;OB&lt;/em&gt; нужно указать, что объект для добавки - Cube.
Актуатор не будет вызываться, если только его не активирует код из
скрипта. Соединение требуется лишь потому, что получить актуатор из
сценария можно, если он соединён со слотом.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/60182/"&gt;&lt;img alt="image5" src="http://img-fotki.yandex.ru/get/3610/imdagger.2/0_eb16_9a2282f3_L" title="image5"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Код сценария выглядит таким образом:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;math&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;sin&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;cos&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;pi&lt;/span&gt;
&lt;span class="pgcss-n"&gt;cc&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;GameLogic&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;getCurrentController&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
&lt;span class="pgcss-n"&gt;a&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;cc&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;getActuator&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;'add'&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-n"&gt;count&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-mi"&gt;64&lt;/span&gt;
&lt;span class="pgcss-n"&gt;sector&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-mi"&gt;2&lt;/span&gt; &lt;span class="pgcss-o"&gt;*&lt;/span&gt; &lt;span class="pgcss-n"&gt;pi&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;/&lt;/span&gt; &lt;span class="pgcss-n"&gt;count&lt;/span&gt;
&lt;span class="pgcss-n"&gt;radius&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-mf"&gt;1.0&lt;/span&gt;
&lt;span class="pgcss-n"&gt;sx&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;sy&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-mf"&gt;0.5&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-mf"&gt;0.5&lt;/span&gt;
&lt;span class="pgcss-k"&gt;for&lt;/span&gt; &lt;span class="pgcss-n"&gt;i&lt;/span&gt; &lt;span class="pgcss-ow"&gt;in&lt;/span&gt; &lt;span class="pgcss-nb"&gt;xrange&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;count&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;angle&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;i&lt;/span&gt; &lt;span class="pgcss-o"&gt;*&lt;/span&gt; &lt;span class="pgcss-n"&gt;sector&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;x&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;cos&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;angle&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;*&lt;/span&gt; &lt;span class="pgcss-n"&gt;radius&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt; &lt;span class="pgcss-n"&gt;sx&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;y&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;sin&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;angle&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt; &lt;span class="pgcss-o"&gt;*&lt;/span&gt; &lt;span class="pgcss-n"&gt;radius&lt;/span&gt; &lt;span class="pgcss-o"&gt;+&lt;/span&gt; &lt;span class="pgcss-n"&gt;sy&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;a&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;instantAddObject&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;obj&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;a&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;getLastCreatedObject&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
    &lt;span class="pgcss-n"&gt;obj&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;setPosition&lt;/span&gt;&lt;span class="pgcss-p"&gt;([&lt;/span&gt;&lt;span class="pgcss-n"&gt;x&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-n"&gt;y&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-mf"&gt;0.0&lt;/span&gt;&lt;span class="pgcss-p"&gt;])&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Сначала определяется текущий контроллер, в котором исполняется
сценарий (т.к. один и тот же скрипт можно вызывать из разных
контроллеров). Затем, используя контроллер, получается актуатор типа
Edit Object, который был создан ранее в логических блоках. Объявляются
переменные: count - количество кубиков, sector - угол перемещения
объекта по окружности в радианах, sx и sy - смещение круга относительно
системы координат.&lt;/p&gt;
&lt;p&gt;Функция &lt;code class="code"&gt;
instantAddObject&lt;/code&gt;
 объявлена в актуатор, который присоединён
к слоту контроллера. Она создаёт то, что указано в актуаторе, но не
после выполнения логической цепи, а непосредственно в момент вызова
этого метода. Теперь возникает вопрос: “А как получить то, что оно
создало, если метод ничего не возвращает?”. Для этого существует другой
метод в актуаторе, который называется &lt;code class="code"&gt;
getLastCreatedObject&lt;/code&gt;
; т.к. в
момент работы текущего контроллера никакие другие не исполняются, то эта
функция, вызванная сразу за &lt;code class="code"&gt;
instantAddObject&lt;/code&gt;
, вернёт как-раз
созданный объект из-за того, что он последний добавленный.&lt;/p&gt;
&lt;div class="alert alert-info compound"&gt;
&lt;p&gt;&lt;strong&gt;Замечание:&lt;/strong&gt; Актуатор добавки объекта создаёт их всегда в той же
позиции, что и у владельца актуатора. Поэтому для перемещения нужно
использовать метод setPosition.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Теперь можно нарисовать систему координат, чтобы было понятно, что
окружность, вдоль которой расположены объекты, смещена на заданное
расстояние.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/60183/"&gt;&lt;img alt="image6" src="http://img-fotki.yandex.ru/get/3609/imdagger.2/0_eb17_8a15ae0d_L" title="image6"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;После запуска игрового режима можно увидеть результат (файл можно
скачать
&lt;a class="reference external" href="https://yadi.sk/d/I-Na-ezsUmdNn"&gt;тут&lt;/a&gt;):&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/60328/"&gt;&lt;img alt="image7" src="http://img-fotki.yandex.ru/get/3609/imdagger.2/0_eba8_92ef9603_L" title="image7"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;</summary><category term="blender"></category><category term="python"></category><category term="bge"></category><category term="добавка"></category><category term="объект"></category></entry><entry><title>Парсер</title><link href="/posts/2009/07/19/parser/" rel="alternate"></link><updated>2009-07-19T18:52:13+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-19:posts/2009/07/19/parser/</id><summary type="html">&lt;p&gt;Пишу парсер диалогов на Python. Выбирал между SAX2 и ElementTree
модулями, всё таки ElementTree мне больше подходит, хотя ИМХО он не
поддерживает сущности, которые мне будут нужны. Но не беда, выкручусь,
т.к. при работе с SAX2 у меня получается вообще не код, а спагетти, т.к.
мне нужно обязательно состояние. Да и с ElementTree можно делать всякие
приятные штуки, т.к. узлы одновременно и списки и словари:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-kn"&gt;from&lt;/span&gt; &lt;span class="pgcss-nn"&gt;xml.etree.ElementTree&lt;/span&gt; &lt;span class="pgcss-kn"&gt;import&lt;/span&gt; &lt;span class="pgcss-n"&gt;parse&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-n"&gt;document&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;parse&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;test.xml&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-n"&gt;dialog_root&lt;/span&gt; &lt;span class="pgcss-o"&gt;=&lt;/span&gt; &lt;span class="pgcss-n"&gt;document&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;getroot&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-k"&gt;print&lt;/span&gt; &lt;span class="pgcss-n"&gt;dialog_root&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-mi"&gt;0&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;
&lt;span class="pgcss-go"&gt;&amp;lt;Element define at 403554484c&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-k"&gt;print&lt;/span&gt; &lt;span class="pgcss-n"&gt;dialog_root&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;attrib&lt;/span&gt;
&lt;span class="pgcss-go"&gt;{&amp;#39;{http://www.w3.org/2001/XMLSchema-instance}noNamespaceSchemaLocation&amp;#39;: &amp;#39;dialog.xsd&amp;#39;}&lt;/span&gt;
&lt;span class="pgcss-gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="pgcss-k"&gt;print&lt;/span&gt; &lt;span class="pgcss-n"&gt;dialog_root&lt;/span&gt;&lt;span class="pgcss-p"&gt;[&lt;/span&gt;&lt;span class="pgcss-mi"&gt;0&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;get&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;pattern&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-go"&gt;Test &amp;#39;${name}&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;А test.xml выглядит следующим образом:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-cp"&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;dialog&lt;/span&gt; &lt;span class="pgcss-na"&gt;xmlns:xsi=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;&lt;/span&gt;
  &lt;span class="pgcss-na"&gt;xsi:noNamespaceSchemaLocation=&lt;/span&gt;&lt;span class="pgcss-s"&gt;“dialog.xsd”&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;define&lt;/span&gt; &lt;span class="pgcss-na"&gt;pattern=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;Test &amp;#39;${name}&amp;#39;&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;name_mutable&amp;quot;&lt;/span&gt; &lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;filter&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;test_filt&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;function=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;test_filt_f&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;from=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;filtmodule&amp;quot;&lt;/span&gt; &lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
…
&lt;/pre&gt;&lt;/div&gt;
</summary><category term="python"></category><category term="xml"></category><category term="ElementTree"></category></entry><entry><title>Текст и узлы</title><link href="/posts/2009/07/18/tekst-i-uzly/" rel="alternate"></link><updated>2009-07-18T13:31:40+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-18:posts/2009/07/18/tekst-i-uzly/</id><summary type="html">&lt;p&gt;Нашёл, как сделать
&lt;a class="reference external" href="http://www.w3schools.com/schema/schema_complex_mixed.asp"&gt;так&lt;/a&gt;,
чтобы внутри узла можно было писать текст вперемешку с дочерними узлами.
Оказалось, что достаточно к &lt;em&gt;xsd:complexType&lt;/em&gt; добавить параметр &lt;em&gt;mixed&lt;/em&gt;
равный &lt;em&gt;true&lt;/em&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-nt"&gt;&amp;lt;xsd:complexType&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;AnswerTextType&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;mixed=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;true&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;xsd:sequence&amp;gt;&lt;/span&gt;
    &lt;span class="pgcss-nt"&gt;&amp;lt;xsd:choice&lt;/span&gt; &lt;span class="pgcss-na"&gt;minOccurs=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;0&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;maxOccurs=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;unbounded&amp;quot;&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;
      &lt;span class="pgcss-nt"&gt;&amp;lt;xsd:element&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;use&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;type=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;UseStringType&amp;quot;&lt;/span&gt; &lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
      &lt;span class="pgcss-nt"&gt;&amp;lt;xsd:element&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;use-file&amp;quot;&lt;/span&gt; &lt;span class="pgcss-na"&gt;type=&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;quot;UseFileType&amp;quot;&lt;/span&gt; &lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class="pgcss-nt"&gt;&amp;lt;/xsd:choice&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;/xsd:sequence&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;/xsd:complexType&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</summary><category term="xml schema"></category><category term="xsd"></category></entry><entry><title>Схема для диалога</title><link href="/posts/2009/07/18/skhema-dlia-dialoga/" rel="alternate"></link><updated>2009-07-18T11:39:58+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-18:posts/2009/07/18/skhema-dlia-dialoga/</id><summary type="html">&lt;p&gt;Мне требовалось, чтобы в корневом теге диалога можно было использовать
произвольное число узлов filter, include, define (даже ноль раз) и в
произвольном порядке, а после этого всего объявить &lt;strong&gt;ровно один&lt;/strong&gt; узел
talking, который обязательно должен быть. Но возникла проблема, что
&lt;code class="code"&gt;
&amp;lt;xsd:all&amp;gt;&lt;/code&gt;
 позволяет объявить произвольный порядок для дочерних узлов,
но накладывает ограничение: каждый из них встречается ровно 0 или 1 раз.
&lt;code class="code"&gt;
&amp;lt;xsd:sequence&amp;gt;&lt;/code&gt;
 требует строгого порядка объявления узлов, и это мне не
очень подходило. Поискав в рунете что-нибудь внятное я ничего толкового
не нашёл (может плохо искал), кроме аналогичных вопросов на форумах.
Поэтому решил поискать среди англоязычных страниц и нашёл похожий вопрос
и &lt;a class="reference external" href="http://xsd.stylusstudio.com/2001nov/post03029.htm"&gt;ответ&lt;/a&gt; на него.&lt;/p&gt;
&lt;p&gt;Ответ заключался в том, чтобы рассмотреть проблему с другой стороны. Что
на самом деле мне нужно не просто произвольное число узлов в произвольно
порядке, а произвольное число узлов, каждый из которых выбирается
произвольным образом из заданных мной. Поэтому следовало использовать
&lt;code class="code"&gt;
&amp;lt;xsd:choice&amp;gt;&lt;/code&gt;
 с параметрами &lt;code class="code"&gt;
minOccurs&lt;/code&gt;
 и &lt;code class="code"&gt;
maxOccurs&lt;/code&gt;
. После этого я
получил такую схему, которая мне и требовалась:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-nt"&gt;&amp;lt;xsd:sequence&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;xsd:choice&lt;/span&gt; &lt;span class="pgcss-na"&gt;minOccurs=&lt;/span&gt;&lt;span class="pgcss-s"&gt;“0”&lt;/span&gt; &lt;span class="pgcss-na"&gt;maxOccurs=&lt;/span&gt;&lt;span class="pgcss-s"&gt;“unbounded”&lt;/span&gt;&lt;span class="pgcss-nt"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="pgcss-nt"&gt;&amp;lt;xsd:element&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;“include”&lt;/span&gt; &lt;span class="pgcss-na"&gt;type=&lt;/span&gt;&lt;span class="pgcss-s"&gt;“IncludeType”&lt;/span&gt; &lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class="pgcss-nt"&gt;&amp;lt;xsd:element&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;“filter”&lt;/span&gt; &lt;span class="pgcss-na"&gt;type=&lt;/span&gt;&lt;span class="pgcss-s"&gt;“FilterType”&lt;/span&gt; &lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class="pgcss-nt"&gt;&amp;lt;xsd:element&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;“define”&lt;/span&gt; &lt;span class="pgcss-na"&gt;type=&lt;/span&gt;&lt;span class="pgcss-s"&gt;“DefineType”&lt;/span&gt; &lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;/xsd:choice&amp;gt;&lt;/span&gt;
  &lt;span class="pgcss-nt"&gt;&amp;lt;xsd:element&lt;/span&gt; &lt;span class="pgcss-na"&gt;name=&lt;/span&gt;&lt;span class="pgcss-s"&gt;“talking”&lt;/span&gt; &lt;span class="pgcss-na"&gt;type=&lt;/span&gt;&lt;span class="pgcss-s"&gt;“TalkingType”&lt;/span&gt; &lt;span class="pgcss-nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="pgcss-nt"&gt;&amp;lt;/xsd:sequence&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</summary><category term="xml schema"></category><category term="xsd"></category></entry><entry><title>Франкенштейн оживает!</title><link href="/posts/2009/07/17/frankenshtein-ozhivaet/" rel="alternate"></link><updated>2009-07-17T18:50:47+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-17:posts/2009/07/17/frankenshtein-ozhivaet/</id><summary type="html">&lt;p&gt;Ура! Моя xsd-схема уже пригодна для использования. Я всё же её смог
довести до приличного/рабочего вида (а куда же я денусь ;) ). Осталось
только доработать немного, подчистить, сделать так, чтобы обязательный
порядок и опциональные параметры были только там, где положено. Немного
подправить документацию по структуре. Разбить файл на несколько частей,
используя &amp;lt;xsd:include&amp;gt; (можно
&lt;a class="reference external" href="http://www.w3schools.com/schema/el_include.asp"&gt;ознакомиться&lt;/a&gt;) и
добавить внутрь описания при помощи &amp;lt;xsd:annotation&amp;gt;. Скоро “наваяю”
кода.&lt;/p&gt;
</summary><category term="xml schema"></category><category term="xsd"></category></entry><entry><title>Откат</title><link href="/posts/2009/07/17/otkat/" rel="alternate"></link><updated>2009-07-17T17:04:04+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-17:posts/2009/07/17/otkat/</id><summary type="html">&lt;p&gt;Ладно, я погорячился. Возвращаюсь использовать XML Schema (W3C). Всё
таки в xsd-схемах я хоть что-то понимаю. Да и утилиты для проверки
валидности есть.&lt;/p&gt;
</summary><category term="xml schema"></category><category term="xsd"></category></entry><entry><title>Проверка на валидность диалогов</title><link href="/posts/2009/07/17/proverka-na-validnost-dialogov/" rel="alternate"></link><updated>2009-07-17T16:00:32+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-17:posts/2009/07/17/proverka-na-validnost-dialogov/</id><summary type="html">&lt;p&gt;Решил всё же не использовать XML Schema. Т.к. всё равно в стандартной
библиотеке поддержки сего чуда нету. Значит придётся качать… но, … но
лучше я скачаю что-нибудь удобнее, т.к. мне хотелось бы осуществить
более строгую проверку, чем позволяет мне xsd-схема. Найду какую-нибудь
удобную, простую библиотеку валидации, тогда скачаю и запишу линк на
неё.&lt;/p&gt;
</summary><category term="python"></category><category term="xsd"></category></entry><entry><title></title><link href="/posts/2009/07/17/urn:ya.ru:post/22199227/100/" rel="alternate"></link><updated>2009-07-17T15:56:36+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-17:posts/2009/07/17/urn:ya.ru:post/22199227/100/</id><summary type="html">&lt;p&gt;опустошён&lt;/p&gt;
</summary></entry><entry><title>Разработка схемы для диалога</title><link href="/posts/2009/07/16/razrabotka-skhemy-dlia-dialoga/" rel="alternate"></link><updated>2009-07-16T19:53:38+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-16:posts/2009/07/16/razrabotka-skhemy-dlia-dialoga/</id><summary type="html">&lt;p&gt;Столкнулся с небольшой проблемой при создании xsd-схемы (&lt;strong&gt;XML Schema&lt;/strong&gt;)
для проверки корректности информации диалога между персонажами: &lt;em&gt;The
content model is not determinist&lt;/em&gt;. Похоже она у меня действительно не
детерминирована, поэтому придётся либо переименовать часть тегов, либо
как-то решить мою проблему группировки. Т.к. я хотел, чтобы было две
разновидности тегов: &lt;code class="code"&gt;
&amp;lt;use pattern=&amp;quot;…&amp;quot;&amp;gt;…&amp;lt;/use&amp;gt;&lt;/code&gt;
 и &lt;code class="code"&gt;
&amp;lt;use pattern=&amp;quot;…&amp;quot;
function=&amp;quot;…&amp;quot; from=&amp;quot;…&amp;quot; /&amp;gt;&lt;/code&gt;
. Но что-то не выходит. Так что, залью я это
добро в локалью bzr-ветку, да пойду ещё что-нибудь наваяю :).&lt;/p&gt;
</summary><category term="xml"></category><category term="xml schema"></category><category term="xsd"></category></entry><entry><title>Посмотрел мультик</title><link href="/posts/2009/07/16/posmotrel-multik/" rel="alternate"></link><updated>2009-07-16T15:21:07+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-16:posts/2009/07/16/posmotrel-multik/</id><summary type="html">&lt;p&gt;Посмотрел мультфильм “Братец медведь” (&lt;strong&gt;Brother bear&lt;/strong&gt;). В целом,
положительный, добрый и сентиментальный мультфильм про трёх братьев. В
основном мультфильм о взаимоотношении братьев, хотя большая часть про
двух медведей. Один из них человек, который был превращён духом в
медведя за то, что убил маму медвежонка Кода. Потом он проведёт большую
часть времени с этим медвежонком. Вообще я люблю медведей, наверное,
поэтому меня даже немного “пробил” (чуть-чуть увеличилось сердцебиение)
этот мультик, т.к. обычно я не сентиментален. Медвежонок Кода хорошо
разбавляет атмосферу мультика про доисторические времена, тотемы,
отношения людей и животных; очень понравился бонус-трек, про кривых
медведей :D (тот, что самый последний)! Единственное, что заметил мой
“едкий” и вредный :) разум, что в мультике прослеживается “рыбная
дискриминация”, т.е. люди наделены душой и разумом, животные - тоже, а
вот … рыбам не повезло - они не говорят, не думают, а их только едят,
при чём все! :S&lt;/p&gt;
</summary><category term="мультфильм"></category></entry><entry><title>Система диалогов</title><link href="/posts/2009/07/15/sistema-dialogov/" rel="alternate"></link><updated>2009-07-15T17:07:43+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-15:posts/2009/07/15/sistema-dialogov/</id><summary type="html">&lt;p&gt;Доделаю загрузку диалога из XML-файла и тогда уже немного опишу, как оно
у меня всё работает и выложу архив с частью проекта.&lt;/p&gt;
&lt;p&gt;А пока чуть-чуть рефакторил свой код и наткнулся, что я в некоторый
местах делал проверку, если строка начинается с определённой
последовательности символов следующим образом:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-n"&gt;attr&lt;/span&gt;&lt;span class="pgcss-p"&gt;[:&lt;/span&gt;&lt;span class="pgcss-mi"&gt;12&lt;/span&gt;&lt;span class="pgcss-p"&gt;]&lt;/span&gt; &lt;span class="pgcss-o"&gt;!=&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;#39;new_warrior_&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;:&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Решил, что это как-то “по-корявски”, т.к. вдруг мне захочется
переименовать префикс методов на что-то отличное от &lt;strong&gt;new_warrior_&lt;/strong&gt;,
но тогда придётся и число 12 менять (да и выходит какая-то “магическая”
константа). Заменил этот код на другой, благо у строк есть чудесный
метод &lt;code class="code"&gt;
startswith&lt;/code&gt;
:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-k"&gt;if&lt;/span&gt; &lt;span class="pgcss-ow"&gt;not&lt;/span&gt; &lt;span class="pgcss-n"&gt;attr&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;startswith&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-s"&gt;&amp;#39;new_warrior_&amp;#39;&lt;/span&gt;&lt;span class="pgcss-p"&gt;):&lt;/span&gt;
    &lt;span class="pgcss-o"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Его теперь и читать можно как пердложение :), а не “набор значков”.&lt;/p&gt;
</summary><category term="python"></category></entry><entry><title>Диалог с выбором вариантов</title><link href="/posts/2009/07/14/dialog-s-vyborom-variantov/" rel="alternate"></link><updated>2009-07-14T19:01:06+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-14:posts/2009/07/14/dialog-s-vyborom-variantov/</id><summary type="html">&lt;p&gt;Сделал меню диалога, вот как оно выглядит при запуске в Blender GE:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/58963/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3512/imdagger.2/0_e653_6c69c5e1_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Можно курсором мыши подводить к тексту и нажимать левой клавишей на
строки, после этого будет определён номер выбранного пункта и выведен на
экран. Скрипт, который создаёт текст умеет его разбивать на множество
строк и так, чтобы они не превышали заданную максимальную длину.&lt;/p&gt;
&lt;p&gt;А так оно выглядит в режиме редактирования в Blender:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/58964/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/3509/imdagger.2/0_e654_355a538a_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Для того, чтобы создать закруглённую основу с полупрозрачностью,
пришлось нарисовать тестуру с рамкой. Затем правильно развернуть так,
чтобы при изменении размера панельки не увеличивалась толщина линий и
уголков.&lt;/p&gt;
&lt;p&gt;Как оно работает и как создавалось, может, опишу в другой раз, когда
полностью завершу.&lt;/p&gt;</summary><category term="bge"></category><category term="текст"></category></entry><entry><title>Пожар</title><link href="/posts/2009/07/13/pozhar/" rel="alternate"></link><updated>2009-07-13T09:30:31+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-13:posts/2009/07/13/pozhar/</id><summary type="html">&lt;p&gt;Вчера случился на работе пожар. Всё потушили. Это всё из-за сильной
грозы. Наш этаж не задело, сервера на бесперебойниках, хотя и моя
машинка не перегрузилась, хотя стоит без ничего.&lt;/p&gt;
</summary><category term="пожар"></category><category term="работа"></category></entry><entry><title>Копирование атрибутов</title><link href="/posts/2009/07/12/kopirovanie-atributov/" rel="alternate"></link><updated>2009-07-12T19:39:34+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-12:posts/2009/07/12/kopirovanie-atributov/</id><summary type="html">&lt;p&gt;Мне нужно было скопировать игровую логику с одного объекта на другой
(да, жаль, что в Blender 2.48 нету наследования логики объектов :S). Я
вспомнил про сочетание &lt;kbd class="kbd"&gt;
Ctrl + C&lt;/kbd&gt;
, оно предложило копировать атрибуты,
я выбрал &lt;strong&gt;Logic Bricks&lt;/strong&gt;. Но тут возникла проблема, я не нашёл, как
применить то, что скопировал. Тогда я понял (нагуглил), что это не
копирование в некоторый буффер, а прямое копирование параметров одного
объекта на другой.&lt;/p&gt;
&lt;p class="cut"&gt;&lt;a class="h-link reference internal" data-toggle="collapse" href="#cut_38869456"&gt;... создание&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_38869456"&gt;
&lt;p&gt;Так выглядел объект наследник:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/58296/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3509/imdagger.2/0_e3b8_cf493eb5_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;А так - объект родитель:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/58297/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/3512/imdagger.2/0_e3b9_86d36654_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Нужно было с родителя перенести логику к потомку. Для этого я выбрал
сначала объект-потомок, а затем добавил к выделению объект-родитель (при
помощи Shift+ЛКМ). После чего была нажато магическое сочетание клавиш
&lt;kbd class="kbd"&gt;
Ctlr + C&lt;/kbd&gt;
:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/58299/"&gt;&lt;img alt="image2" src="http://img-fotki.yandex.ru/get/3513/imdagger.2/0_e3bb_b35fcecc_L" title="image2"/&gt;&lt;/a&gt; &lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/58301/"&gt;&lt;img alt="image3" src="http://img-fotki.yandex.ru/get/3610/imdagger.2/0_e3bd_7c3a66d1_L" title="image3"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;И логические блоги продублировались, как раз то, что и требовалось мне.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/58302/"&gt;&lt;img alt="image4" src="http://img-fotki.yandex.ru/get/3508/imdagger.2/0_e3be_96655cdc_L" title="image4"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;</summary><category term="blender"></category><category term="атрибуты"></category><category term="копирование"></category></entry><entry><title>После отдыха с пользой</title><link href="/posts/2009/07/12/posle-otdykha-s-polzoi/" rel="alternate"></link><updated>2009-07-12T09:34:11+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-12:posts/2009/07/12/posle-otdykha-s-polzoi/</id><summary type="html">&lt;p&gt;Итого 12 часов работы: извлечение фундамента старого дома, прополка,
сбор малины, разбрызгивание химиката, тренировка в косьбе. Когда
пришлось извлекать бревно длиной &lt;strong&gt;10м&lt;/strong&gt; из земли, то я решил, что
разумнее его перерубить. Стал на него, взял самый большой топор и
подумал… только бы не отрубить себе ноги, а то это сосна, была сырая и
пролежала в земле уже минимум 10 лет (а может намного больше, т.к. дому
уже ~70 лет было). Ну.. ноги у меня целы :) жить буду, всё же я победил,
а не бревно. Его удел был в большущем костре, который мы развели (2 на 2
метра).&lt;/p&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;/div&gt;
</summary><category term="рабочий"></category><category term="деревня"></category></entry><entry><title></title><link href="/posts/2009/07/10/urn:ya.ru:post/22199227/92/" rel="alternate"></link><updated>2009-07-10T19:06:06+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-10:posts/2009/07/10/urn:ya.ru:post/22199227/92/</id><summary type="html">&lt;p&gt;сейчас многое переосмысливаю, видимо пора что-то в себе рушить&lt;/p&gt;
</summary></entry><entry><title>Кавер</title><link href="/posts/2009/07/10/kaver/" rel="alternate"></link><updated>2009-07-10T19:01:49+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-10:posts/2009/07/10/kaver/</id><summary type="html">&lt;p&gt;Это окончательный вариант моего кавера на песню “Бегу я рысью, бегу я
волком” от чудесной группы Butterfly Temple. Чтобы понять, как нужно
петь сей кавер, то обязательно &lt;u class="underline"&gt;
нужно прослушать оригинал&lt;/u&gt;
. Т.к. это Pagan
metal и специфика звучания и ритма своя.&lt;/p&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;strong&gt;Кодю я быстро, кодю я с толком&lt;/strong&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ***&lt;/div&gt;
&lt;div class="line"&gt;Тёмной ночью зимой,&lt;/div&gt;
&lt;div class="line"&gt;Взгляд затуманен тобой,&lt;/div&gt;
&lt;div class="line"&gt;Баги это ж не сбой&lt;/div&gt;
&lt;div class="line"&gt;GOTO - это метод крутой!&lt;/div&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;div class="line"&gt;Кодю я быстро,&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; ногти сточить успел,&lt;/div&gt;
&lt;div class="line"&gt;Бред программиста,&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; это же беспредел.&lt;/div&gt;
&lt;div class="line"&gt;Багом увечен,&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; функции хрупкий склад&lt;/div&gt;
&lt;div class="line"&gt;Вновь обеспечен,&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; прогером быдловклад.&lt;/div&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;div class="line"&gt;Снова дождливой весной&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; взгляд затуманен тобой&lt;/div&gt;
&lt;div class="line"&gt;Слепит моник слезой,&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; Глаз закрывает сон неземной!&lt;/div&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;div class="line"&gt;Кодю я с толком,&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; ногти сточить успел,&lt;/div&gt;
&lt;div class="line"&gt;Бред программиста,&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; это же беспредел.&lt;/div&gt;
&lt;div class="line"&gt;Багом увечен,&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; функции хрупкий склад&lt;/div&gt;
&lt;div class="line"&gt;Вновь обеспечен,&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; прогером быдловклад.&lt;/div&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;div class="line"&gt;Жаркой летней порой,&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; снова дебаггер со мной,&lt;/div&gt;
&lt;div class="line"&gt;Трэйсы всегда под рукой,&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; Баг смеётся опять надо мной.&lt;/div&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;div class="line"&gt;Кодю я быстро,&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; ногти сточить успел,&lt;/div&gt;
&lt;div class="line"&gt;Бред программиста,&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; это же беспредел.&lt;/div&gt;
&lt;div class="line"&gt;Багом увечен,&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; функции хрупкий склад&lt;/div&gt;
&lt;div class="line"&gt;Вновь обеспечен,&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; прогером быдловклад.&lt;/div&gt;
&lt;/div&gt;
</summary><category term="butterfly temple"></category><category term="программирование"></category><category term="текст"></category><category term="кавер"></category></entry><entry><title>Жук</title><link href="/posts/2009/07/10/zhuk/" rel="alternate"></link><updated>2009-07-10T13:15:02+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-10:posts/2009/07/10/zhuk/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/58065"&gt;&lt;img alt="Жук-носорог" src="http://img-fotki.yandex.ru/get/3510/imdagger.2/0_e2d1_da547556_L" title="Жук-носорог"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/58066"&gt;&lt;img alt="Жук-носорог" src="http://img-fotki.yandex.ru/get/3508/imdagger.2/0_e2d2_aba99ed2_L" title="Жук-носорог"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Это жук-носорог, он живой.&lt;/p&gt;</summary><category term="жук-носорог"></category><category term="жук"></category></entry><entry><title></title><link href="/posts/2009/07/09/urn:ya.ru:post/22199227/88/" rel="alternate"></link><updated>2009-07-09T16:36:04+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-09:posts/2009/07/09/urn:ya.ru:post/22199227/88/</id><summary type="html">&lt;p&gt;грустно как-то&lt;/p&gt;
</summary></entry><entry><title>Побаловался с DupliFrames</title><link href="/posts/2009/07/09/pobalovalsia-s-dupliframes/" rel="alternate"></link><updated>2009-07-09T14:59:48+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-09:posts/2009/07/09/pobalovalsia-s-dupliframes/</id><summary type="html">&lt;p&gt;Особого желания что-нибудь моделировать не было, но хотелось посмотреть,
как я смогу применить &lt;strong&gt;DupliFrames&lt;/strong&gt; на практике. Решил сделать некое
подобие цепочки, которая повёрнута несколько раз вокруг своей оси.
Материалы и свет не особо горел желанием проставлять, просто хотелось
узнать, как можно быстро управлять технологией покадрового дублирования
(т.к. бывают у меня потребности создать какой-нибудь заборчик или много
дощечек, но расположенных по кривой). Вот, что вышло:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/57508/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3513/imdagger.2/0_e0a4_778ce76f_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Моделирование и подготовка скриншотов для блога заняли 25 минут.&lt;/p&gt;
&lt;p class="cut"&gt;&lt;a class="h-link reference internal" data-toggle="collapse" href="#cut_32051408"&gt;... процесс создания&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_32051408"&gt;
&lt;p&gt;Создание самого звена цепи проблем не вызвало. Из-за того, что это была
не цель работы, то особо не старался, просто создал кривую и установил
ей параметр &lt;strong&gt;BevOb&lt;/strong&gt; равным названию объекта типа &lt;strong&gt;Curve Circle&lt;/strong&gt;.
После этого создал “путь” (т.е. линия вдоль, которой будут расположены
звенья). Выделил звено, а затем сам путь и нажал &lt;kbd class="kbd"&gt;
Ctrl+P&lt;/kbd&gt;
.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/57509/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/3512/imdagger.2/0_e0a5_e2e9bac2_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Нужно указать, что выбранный (тот, что потомок) объект должен следовать
вдоль пути кривой (тот, что родитель).&lt;/p&gt;
&lt;p&gt;Далее я на панели &lt;strong&gt;Object&lt;/strong&gt; (нужно нажать &lt;kbd class="kbd"&gt;
F7&lt;/kbd&gt;
) во вкладке &lt;strong&gt;Anim
settings&lt;/strong&gt; включил опцию &lt;strong&gt;Dupli Frames&lt;/strong&gt;. Появились дубликаты моего
звена на каждый кадр с 1 по 100. При помощи параметра &lt;strong&gt;DupOff&lt;/strong&gt;, я
выбросил кадры через 1, чтобы “проредить” цепь.&lt;/p&gt;
&lt;p&gt;Но я не ожидал небольшого сюрприза, что перемещение вдоль пути
анимировалось не с постоянной скоростью, как я думал, а с ускорением. Я
посмотрел в окно IPO кривых, но там не было управления моей кривой
анимации. Поэтому я понял, что редактировать это нужно в Anim Settings.
Обратив внимание на появившуюся кнопочку &lt;strong&gt;No Speed&lt;/strong&gt;, я решил проблему,
активировав её :).&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/57510/"&gt;&lt;img alt="image2" src="http://img-fotki.yandex.ru/get/3609/imdagger.2/0_e0a6_cd286ea7_L" title="image2"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Правда, чтобы звенья вращались, пришлось ещё добавить анимацию поворота
в IPO кривых,.. пару кадров поворота и эстраполяция…вуаля!&lt;/p&gt;
&lt;/div&gt;</summary><category term="blender"></category><category term="dupliframes"></category><category term="цепь"></category><category term="набросок"></category></entry><entry><title>Кавер на Butterfly Temple</title><link href="/posts/2009/07/08/kaver-na-butterfly-temple/" rel="alternate"></link><updated>2009-07-08T20:57:45+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-08:posts/2009/07/08/kaver-na-butterfly-temple/</id><summary type="html">&lt;p&gt;Давно эта затея у меня витала в голове. Решил немного пересочинить песню
&lt;strong&gt;“Бегу я рысью, бегу я волком”&lt;/strong&gt;,.. да не обидятся на меня Butterfly
Temple. Просто, ну не удержался!, я уже давно не мог…удержаться от строк
“Бегу я рысью, когти сточить успел”, так и напевались другие слова. Вот
я и решил чуть “подправить текст”. Вот что вышло (это черновой вариант,
ещё нету последнего куплета; а ещё чтобы понять как оно звучит, то лучше
послушать сначала оригинал ;) ):&lt;/p&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;strong&gt;Кодю я быстро, кодю я с толком&lt;/strong&gt;&lt;/div&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;div class="line"&gt;***&lt;/div&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;div class="line"&gt;Тёмной ночью зимой,&lt;/div&gt;
&lt;div class="line"&gt;Взгляд затуманен тобой,&lt;/div&gt;
&lt;div class="line"&gt;Баги это ж не сбой&lt;/div&gt;
&lt;div class="line"&gt;GOTO - это метод крутой!&lt;/div&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;div class="line"&gt;Кодю я быстро,&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; ногти сточить успел,&lt;/div&gt;
&lt;div class="line"&gt;Бред программиста,&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; это же беспредел.&lt;/div&gt;
&lt;div class="line"&gt;Багом увечен,&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; функции хрупкий склад&lt;/div&gt;
&lt;div class="line"&gt;Вновь обеспечен,&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; прогером быдловклад.&lt;/div&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;div class="line"&gt;Снова дождливой весной&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; взгляд затуманен тобой&lt;/div&gt;
&lt;div class="line"&gt;Слепит моник слезой,&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; Глаз закрывает сон неземной!&lt;/div&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;div class="line"&gt;Кодю я с толком,&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; ногти сточить успел,&lt;/div&gt;
&lt;div class="line"&gt;Бред программиста,&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; это же беспредел.&lt;/div&gt;
&lt;div class="line"&gt;Багом увечен,&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; функции хрупкий склад&lt;/div&gt;
&lt;div class="line"&gt;Вновь обеспечен,&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; прогером быдловклад.&lt;/div&gt;
&lt;/div&gt;
</summary><category term="кавер"></category><category term="butterfly temple"></category><category term="песня"></category><category term="текст"></category><category term="набросок"></category></entry><entry><title>Отчёт</title><link href="/posts/2009/07/07/otchiot/" rel="alternate"></link><updated>2009-07-07T19:05:52+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-07:posts/2009/07/07/otchiot/</id><summary type="html">&lt;p&gt;Вот допишу отчёт по практике и сдам, а после этого что-нибудь сюда
напишу про Blender, Python или Emacs…&lt;/p&gt;
</summary><category term="практика"></category></entry><entry><title></title><link href="/posts/2009/07/06/urn:ya.ru:post/22199227/84/" rel="alternate"></link><updated>2009-07-06T19:26:08+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-06:posts/2009/07/06/urn:ya.ru:post/22199227/84/</id><summary type="html">&lt;p&gt;немножко простудился&lt;/p&gt;
</summary></entry><entry><title>Посмотрел фильм</title><link href="/posts/2009/07/05/posmotrel-film/" rel="alternate"></link><updated>2009-07-05T18:08:30+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-05:posts/2009/07/05/posmotrel-film/</id><summary type="html">&lt;p&gt;Посмотрел Nim’s Island (Остров Ним), … симпатичная добрая сказочная,
немного детская и наивная история со счастливым концом. Впечатления
остались положительные. Не жалею, что посмотрел. История об одной
девочке, живущей на острове вместе с папой.&lt;/p&gt;
</summary><category term="фильм"></category></entry><entry><title>Сервис Yandex</title><link href="/posts/2009/07/04/servis-yandex/" rel="alternate"></link><updated>2009-07-04T21:33:40+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-04:posts/2009/07/04/servis-yandex/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/56342"&gt;&lt;img alt="Hacker 2" src="http://img-fotki.yandex.ru/get/3502/imdagger.2/0_dc16_83fc429f_L" title="Hacker 2"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Вот как бы сменить фото на странице на Yandex, не дублируя пост ? :-/ А
то, если уже её опубликовал и она не первая, то не идёт в качестве
фотки.&lt;/p&gt;</summary><category term="Я"></category></entry><entry><title>Работа не волк, ...</title><link href="/posts/2009/07/04/rabota-ne-volk/" rel="alternate"></link><updated>2009-07-04T12:42:21+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-04:posts/2009/07/04/rabota-ne-volk/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/55925"&gt;&lt;img alt="Закат" src="http://img-fotki.yandex.ru/get/3507/imdagger.2/0_da75_76b5b6ac_L" title="Закат"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/55929"&gt;&lt;img alt="Дорога в небо" src="http://img-fotki.yandex.ru/get/5/imdagger.2/0_da79_de3c51c4_L" title="Дорога в небо"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/56342"&gt;&lt;img alt="Hacker 2" src="http://img-fotki.yandex.ru/get/3502/imdagger.2/0_dc16_83fc429f_L" title="Hacker 2"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Съездил поработал, поел, загорел :P&lt;/p&gt;</summary><category term="деревня"></category></entry><entry><title>Про форматирование в строках</title><link href="/posts/2009/07/02/pro-formatirovanie-v-strokakh/" rel="alternate"></link><updated>2009-07-02T13:09:52+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-02:posts/2009/07/02/pro-formatirovanie-v-strokakh/</id><summary type="html">&lt;p&gt;К предыдущим постам о выводе чисел с плавающей запятой. Открываю Python
Lirbary Reference для моего Python 2.5 нахожу главу &lt;strong&gt;3.6.2 String
Formatting Operation&lt;/strong&gt;s и внимательно читаю: A length modifier (&lt;em&gt;h&lt;/em&gt;,
&lt;em&gt;l&lt;/em&gt; or &lt;em&gt;L&lt;/em&gt;) may be presented, &lt;strong&gt;but is ignored&lt;/strong&gt; as it is not necessery
for Python. Почему я раньше это не читал ? :( Вот дурная голова… Что ещё
раз подтверждает, что спецификацию по нюансам языка нужно читать
&lt;u class="underline"&gt;
внимательно&lt;/u&gt;
. Вот отсюда и следует, что в Python ‘%lf’ и ‘%f’ - &lt;u class="underline"&gt;
одно и
тоже&lt;/u&gt;
.&lt;/p&gt;
</summary><category term="python"></category></entry><entry><title></title><link href="/posts/2009/07/02/urn:ya.ru:post/22199227/71/" rel="alternate"></link><updated>2009-07-02T11:22:40+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-02:posts/2009/07/02/urn:ya.ru:post/22199227/71/</id><summary type="html">&lt;p&gt;и полегчало, но ещё не весело&lt;/p&gt;
</summary></entry><entry><title>Нужно</title><link href="/posts/2009/07/02/nuzhno/" rel="alternate"></link><updated>2009-07-02T11:20:51+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-02:posts/2009/07/02/nuzhno/</id><summary type="html">&lt;p&gt;Нужно обязательно перечитать Python Library Reference, а то, кто же знал
:D, что не бывает в Python ‘%lf’, буду теперь всегда стараться
использовать ‘%s’.&lt;/p&gt;
</summary><category term="python"></category></entry><entry><title></title><link href="/posts/2009/07/01/urn:ya.ru:post/22199227/69/" rel="alternate"></link><updated>2009-07-01T15:11:35+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-01:posts/2009/07/01/urn:ya.ru:post/22199227/69/</id><summary type="html">&lt;p&gt;расстроен&lt;/p&gt;
</summary></entry><entry><title>Жестоко, но справедливо</title><link href="/posts/2009/07/01/zhestoko-no-spravedlivo/" rel="alternate"></link><updated>2009-07-01T15:08:46+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-07-01:posts/2009/07/01/zhestoko-no-spravedlivo/</id><summary type="html">&lt;p&gt;Теперь я понял, где у меня была пролема на олимпиаде (в ДНК!). Ошибка
нашлась там, где я даже не хотел верить, что она есть: она была при
передаче параметров сгенерированной проге, а я то наивный всё
беспокоился, почему мой спутник не вращается, а летит прямо! Оказалось,
что даже (&lt;strong&gt;‘%lf’ % значение&lt;/strong&gt;) выводит числа типа &lt;em&gt;double&lt;/em&gt; с 6 знаками
после запятой, т.к. %lf воспринимается, как %f. Нужно было учиться на
чужих ошибках, а не на своих :(. А достаточно было написать (&lt;strong&gt;‘%.13lf’
% значение&lt;/strong&gt;) или использовать %s (что значительно лучше и правильнее),
и спутник начинал вращаться по орбите. И то, что я нашёл решение для
своей VM, да… я посмотрел, как оно выглядит на Orbit VM без ошибки: оно
просто выворачивается и падает на Землю! Не зря я решил после олимпы
посмотреть в чём у меня проблема.&lt;/p&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;/div&gt;
</summary><category term="python"></category><category term="icfpc"></category></entry><entry><title>Немного настроил редактор</title><link href="/posts/2009/06/30/nemnogo-nastroil-redaktor/" rel="alternate"></link><updated>2009-06-30T17:36:42+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-30:posts/2009/06/30/nemnogo-nastroil-redaktor/</id><summary type="html">&lt;p&gt;Решил убрать аляповатости в интерфейсе и немного донастроить Emacs. Темы
на Gtk нету, но серый цвет подходит к цвету заголовка оконного менеджера
(у меня Fluxbox). Это то, как оно выглядит на работе:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/55125/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3507/imdagger.1/0_d755_5caddec2_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Дома есть тема на gtk, и там я тоже его “подогнал” под тему, осталось
сделать скрин, как оно дома выглядит (чуть получше).&lt;/p&gt;</summary><category term="emacs"></category><category term="рабочий"></category></entry><entry><title></title><link href="/posts/2009/06/30/urn:ya.ru:post/22199227/65/" rel="alternate"></link><updated>2009-06-30T11:01:41+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-30:posts/2009/06/30/urn:ya.ru:post/22199227/65/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/54832"&gt;&lt;img alt="s1.jpg" src="http://img-fotki.yandex.ru/get/3501/imdagger.1/0_d630_3a5febd4_L" title="s1.jpg"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/54833"&gt;&lt;img alt="s2.jpg" src="http://img-fotki.yandex.ru/get/3507/imdagger.1/0_d631_e6d85165_L" title="s2.jpg"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/54834"&gt;&lt;img alt="s3.jpg" src="http://img-fotki.yandex.ru/get/3606/imdagger.1/0_d632_d5149d6_L" title="s3.jpg"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Вот, что-то типа такого… это я сделал при помощи &lt;kbd class="kbd"&gt;
Alt+D&lt;/kbd&gt;
. Я правильно
понял, это нужно ?&lt;/p&gt;</summary><category term=""></category></entry><entry><title>Вывод</title><link href="/posts/2009/06/29/vyvod/" rel="alternate"></link><updated>2009-06-29T16:45:01+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-29:posts/2009/06/29/vyvod/</id><summary type="html">&lt;p&gt;Виртуальную машину нужную для задачи я закодировал быстро (был
только один небольшой нюанс, о котором ниже). После этого контеста для
себя я сделал некоторый вывод, чтобы в следующем году было больше фана и
результат:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Продолжу писать на Python, он меня по большей части порадовал, даже
когда я почувствовал потери производительности, то быстро смог
сделать модуль на C и подключить через &lt;strong&gt;ctypes&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;Очень порадовал Blender, я использовал его BGE для визуализации,
несмотря на то, что мне нужно было от него только 2D.&lt;/li&gt;
&lt;li&gt;Собрать команду, даже если из окружающих никто не захочет, то найти
онлайн человека 3-4&lt;/li&gt;
&lt;li&gt;Подготовиться заранее учавствовать командой (опыт ICPC имеется, но
ICFP Programming Contest - это всё же совсем другое)&lt;/li&gt;
&lt;li&gt;Учесть “грабли”, на которыя я наступил, теперь я на своей шкуре
понял, зачем в Python ввели &lt;strong&gt;with&lt;/strong&gt;:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-n"&gt;x86&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;writelines&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;generated_source&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-n"&gt;os&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;sytem&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-o"&gt;...&lt;/span&gt;&lt;span class="pgcss-err"&gt;лалала&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-err"&gt;а&lt;/span&gt; &lt;span class="pgcss-err"&gt;тут&lt;/span&gt; &lt;span class="pgcss-err"&gt;вызывается&lt;/span&gt; &lt;span class="pgcss-err"&gt;команда&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
  &lt;span class="pgcss-err"&gt;которая&lt;/span&gt; &lt;span class="pgcss-err"&gt;работала&lt;/span&gt; &lt;span class="pgcss-err"&gt;с&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;quot;сохранённым&amp;quot;&lt;/span&gt; &lt;span class="pgcss-err"&gt;файлом&lt;/span&gt; &lt;span class="pgcss-err"&gt;на&lt;/span&gt;
  &lt;span class="pgcss-err"&gt;диск&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-err"&gt;лалалала&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;И этой программой был компилятор языка C из GCC. Когда я
компилировал руками созданный файл, то всё было хорошо, но как только я
пытался это делать из Python, то вываливались очень странные ошибки
компиляции, которых в принципе быт не могло. Так я промучался порядочное
время, пока не вспомнил одну беду, я забыл &lt;strong&gt;синхронизировать&lt;/strong&gt; буффер
кэша в памяти с диском. Я добавил x86.close() (можно было x86.flush(),
но мне реально дескриптор файла уже не нужен был после записи туда
информации). Получилось:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-n"&gt;x86&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;writelines&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-n"&gt;generated_source&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-n"&gt;x86&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;close&lt;/span&gt;&lt;span class="pgcss-p"&gt;()&lt;/span&gt;
&lt;span class="pgcss-n"&gt;os&lt;/span&gt;&lt;span class="pgcss-o"&gt;.&lt;/span&gt;&lt;span class="pgcss-n"&gt;sytem&lt;/span&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-o"&gt;...&lt;/span&gt;&lt;span class="pgcss-err"&gt;лалала&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-err"&gt;а&lt;/span&gt; &lt;span class="pgcss-err"&gt;тут&lt;/span&gt; &lt;span class="pgcss-err"&gt;вызывается&lt;/span&gt; &lt;span class="pgcss-err"&gt;команда&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt;
  &lt;span class="pgcss-err"&gt;которая&lt;/span&gt; &lt;span class="pgcss-err"&gt;работала&lt;/span&gt; &lt;span class="pgcss-err"&gt;с&lt;/span&gt; &lt;span class="pgcss-s"&gt;&amp;quot;сохранённым&amp;quot;&lt;/span&gt; &lt;span class="pgcss-err"&gt;файлом&lt;/span&gt; &lt;span class="pgcss-err"&gt;на&lt;/span&gt;
  &lt;span class="pgcss-err"&gt;диск&lt;/span&gt;&lt;span class="pgcss-p"&gt;,&lt;/span&gt; &lt;span class="pgcss-err"&gt;лалалала&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;И о чудо! Всё заработало.&lt;/p&gt;
</summary><category term="вывод"></category><category term="python"></category><category term="icfpc"></category></entry><entry><title></title><link href="/posts/2009/06/29/urn:ya.ru:post/22199227/61/" rel="alternate"></link><updated>2009-06-29T16:08:11+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-29:posts/2009/06/29/urn:ya.ru:post/22199227/61/</id><summary type="html">&lt;p&gt;“перегорел”&lt;/p&gt;
</summary></entry><entry><title>Не хватает сил</title><link href="/posts/2009/06/29/ne-khvataet-sil/" rel="alternate"></link><updated>2009-06-29T16:07:46+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-29:posts/2009/06/29/ne-khvataet-sil/</id><summary type="html">&lt;p&gt;И всё же я толком ничего не смог нарешать на контесте :S. Т.к. я …(про
себя: псих-одиночка)… т.е. ээ… нужно готовиться заранее и собирать
команду. И всё же от Sapka остались воспоминания напорядок приятнее и
веселее, я там хоть бота писал и место не такое уж страшное занял :D.
Тем более, что я не люблю астрофизику (ну почему авторы решили
приурочить контест к 29.06 13:00:16 CDT, что им эти Шаттлы и Мир?! а мне
мучайся с орбитами). И только я начал въезжать в условие и продвигаться,
я даже смог получать баллы у меня на VM, а оно раз и CRASHED на сайте, я
долго перебирал и понял, что либо врезаюсь, либо расходую всё топливо.
Но врядли уже что-то смогу поправить, т.к. вывел, вроде, всё в
правильном формате, у меня на моей VM работает на отлично, получаю
баллы. Так, что один тут я не смог управиться, а время ужен почти всё
истекло и мне уже охота отдохнуть, я “перегорел”…&lt;/p&gt;
</summary><category term="icfpc"></category></entry><entry><title>Началось</title><link href="/posts/2009/06/26/nachalos/" rel="alternate"></link><updated>2009-06-26T21:26:41+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-26:posts/2009/06/26/nachalos/</id><summary type="html">&lt;p&gt;Начался контест, который продлится 72 часа. Сначала (ну ещё бы, столько
участников) их сайт сильно лагал, но они оперативно справились и я смог
зарегестрироваться и скачать условие.&lt;/p&gt;
</summary><category term="начало"></category><category term="icfpc"></category></entry><entry><title>ICFP Programming Contest 2009</title><link href="/posts/2009/06/26/icfp-programming-contest-2009/" rel="alternate"></link><updated>2014-07-13T18:24:00+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-26:posts/2009/06/26/icfp-programming-contest-2009/</id><summary type="html">&lt;p&gt;Осталось до начала чуть больше чем 2 часа. С нетерпением жду олимпы.
Жаль, что придётся учавствовать одному, а не командой, т.к. ни у кого
нету времени, а некоторые думают, что их опыта не хватит. В общем:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;Один в поле не воин, если нет веры и блеска в глазах&lt;/div&gt;
&lt;div class="line"&gt;Воинство Рода навечно с тобою,&lt;/div&gt;
&lt;div class="line"&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; даже истёртое временем в прах!&lt;/div&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;div class="line"&gt;(c) “Победа” &lt;strong&gt;Невидь&lt;/strong&gt; - Зов Новой Гипербореи&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Попробую сразиться, а результат :) лишь бы не последним…&lt;/p&gt;
</summary><category term="icfpc"></category></entry><entry><title></title><link href="/posts/2009/06/26/urn:ya.ru:post/22199227/54/" rel="alternate"></link><updated>2009-06-26T15:28:38+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-26:posts/2009/06/26/urn:ya.ru:post/22199227/54/</id><summary type="html">&lt;p&gt;грустно как-то&lt;/p&gt;
</summary></entry><entry><title>Уснул на огороде</title><link href="/posts/2009/06/26/usnul-na-ogorode/" rel="alternate"></link><updated>2009-06-26T15:15:56+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-26:posts/2009/06/26/usnul-na-ogorode/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/52810"&gt;&lt;img alt="Ёжик в клубнике" src="http://img-fotki.yandex.ru/get/3507/imdagger.1/0_ce4a_d1399f89_L" title="Ёжик в клубнике"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Оно весело “пыфкает”, когда спит :)&lt;/p&gt;</summary><category term="соня"></category><category term="ёжик"></category></entry><entry><title>Жук-микросхема</title><link href="/posts/2009/06/25/zhuk-mikroskhema/" rel="alternate"></link><updated>2009-06-25T14:43:04+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-25:posts/2009/06/25/zhuk-mikroskhema/</id><summary type="html">&lt;p&gt;Никогда особо не работал с &lt;strong&gt;Meta-поверхностями&lt;/strong&gt;, но выдалось как-то
немного свободного времени, и я решил что-нибудь “сваять” при помощи
meta. Получился вот такой жук-микросхема (никаких материалов не
расставлял, голый рендер):&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/52547/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3603/imdagger.1/0_cd43_2d2de5a4_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="микросхема"></category><category term="жук"></category><category term="набросок"></category></entry><entry><title>Стандартный режим подсветки Python в Emacs 23</title><link href="/posts/2009/06/24/standartnyi-rezhim-podsvetki-python-v-emacs-23/" rel="alternate"></link><updated>2009-06-24T21:41:25+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-24:posts/2009/06/24/standartnyi-rezhim-podsvetki-python-v-emacs-23/</id><summary type="html">&lt;p&gt;Я не хотел качать python-mode.el, а хотел просто использовать python.el
со своей темой для Emacs. Т.к. раньше у меня, когда я писал на Lua,
посвечивались методы моих самописных классов и числа (эту возможность я
сам добавил в режиму &lt;em&gt;lua-mode&lt;/em&gt;), то этого хотелось и в &lt;em&gt;python-mode&lt;/em&gt;.
Поэтому я полез в &lt;strong&gt;python.el&lt;/strong&gt; и подправил его немного. Новый
&lt;a class="reference external" href="https://yadi.sk/d/w0okiTNcUmdLS"&gt;python.el&lt;/a&gt;.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/52478/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3604/imdagger.1/0_ccfe_5bcafdb4_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Есть пока недочёты при подсветке в импорте.&lt;/p&gt;</summary><category term="python"></category><category term="emacs"></category><category term="подсветка"></category><category term="синтаксис"></category></entry><entry><title>Отладка Python</title><link href="/posts/2009/06/23/otladka-python/" rel="alternate"></link><updated>2009-06-23T17:30:36+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-23:posts/2009/06/23/otladka-python/</id><summary type="html">&lt;p&gt;Скачал отладчик &lt;a class="reference external" href="http://bashdb.sourceforge.net/pydb/"&gt;Pydb&lt;/a&gt;, очень
доволен им. Тем более, что в поставке прилагаются el-файлы для Emacs.
теперь я могу отлаживать свои программы на Python легко и просто из
моего Emacs 23. Стандартный pdb не поддерживает команды info и поэтому
из GUD не возможно попросить показать буфер текущих переменных.&lt;/p&gt;
&lt;p&gt;Отладчик установился без проблем, даже сам установил расширение для
моего любимого редактора. В мой .emacs файл я добавил лишь:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-nb"&gt;require&lt;/span&gt; &lt;span class="pgcss-ss"&gt;'pydb&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;span class="pgcss-p"&gt;(&lt;/span&gt;&lt;span class="pgcss-k"&gt;setq&lt;/span&gt; &lt;span class="pgcss-nv"&gt;pydb-many-windows&lt;/span&gt; &lt;span class="pgcss-no"&gt;t&lt;/span&gt;&lt;span class="pgcss-p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Последняя строчка указывает, что нужно загрузить стандартный вид отладки
и разместить в окнах (а не фреймах). Запускать нужно так: &lt;kbd class="kbd"&gt;
M-x pydb&lt;/kbd&gt;
.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/52020/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3500/imdagger.1/0_cb34_222c6ee5_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="отладка"></category><category term="python"></category><category term="emacs"></category><category term="pydb"></category></entry><entry><title>Житель огорода</title><link href="/posts/2009/06/22/zhitel-ogoroda/" rel="alternate"></link><updated>2009-06-22T16:17:42+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-22:posts/2009/06/22/zhitel-ogoroda/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/51910"&gt;&lt;img alt="Вредитель" src="http://img-fotki.yandex.ru/get/3505/imdagger.1/0_cac6_4a3cdc1b_L" title="Вредитель"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Вот такой вредитель найден на огороде, вообще их там много и они любят
выползать по утрам. Я их одновременно и люблю и не люблю. Люблю за то,
что они мягенькие и безобидные. А не люблю за то, что если их
наплодится, то они могут множество квадратных метров растений уничтожить
подчистую.&lt;/p&gt;</summary></entry><entry><title>Blender и освещение</title><link href="/posts/2009/06/22/blender-i-osveshchenie/" rel="alternate"></link><updated>2009-06-22T12:58:23+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-22:posts/2009/06/22/blender-i-osveshchenie/</id><summary type="html">&lt;p&gt;Дали ссылку на блог, где можно читать, куда стремиться, чтобы делать
красивые рендеры в Blender&lt;/p&gt;
</summary><category term="blender"></category><category term="свет"></category></entry><entry><title>ICFPC 2009</title><link href="/posts/2009/06/21/icfpc-2009/" rel="alternate"></link><updated>2009-06-21T20:22:00+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-21:posts/2009/06/21/icfpc-2009/</id><summary type="html">&lt;p&gt;Попробую поучавствовать в этом соревновании. Проверю свои навыки в
программировании в связке Python + C. До этого учавствовал в Sapka, бот
(NoobTeam) занял 8-11 место, я был очень рад результату и огорчён
досадной ошибке в коде. Думаю получу от этого турнира не меньше фана…&lt;/p&gt;
</summary></entry><entry><title></title><link href="/posts/2009/06/21/urn:ya.ru:post/22199227/35/" rel="alternate"></link><updated>2009-06-21T19:05:21+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-21:posts/2009/06/21/urn:ya.ru:post/22199227/35/</id><summary type="html">&lt;p&gt;жизнь - сложная штука&lt;/p&gt;
</summary></entry><entry><title>Здание</title><link href="/posts/2009/06/21/zdanie/" rel="alternate"></link><updated>2009-06-21T19:03:18+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-21:posts/2009/06/21/zdanie/</id><summary type="html">&lt;p&gt;Моделька получилась, а вот никак не могу подобрать освещение и
материалы, всякий там мрамор, бетон. Рендерю без влияния окружающей
среды, тогда получается слишком светло. Решил всё таки отрендерить с
влиянием, пусть и жёлтая картинка :-/.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/51836/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3607/imdagger.1/0_ca7c_9483e9b1_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;А вот и сам исходный
blend-` &amp;lt;&lt;a class="reference external" href="https://yadi.sk/d/lwxrbOIFUmdM3"&gt;https://yadi.sk/d/lwxrbOIFUmdM3&lt;/a&gt;&amp;gt;`__&lt;a class="reference external" href="https://yadi.sk/d/Q9LwhrzOUmdNe"&gt;файл&lt;/a&gt;` &amp;lt;&lt;a class="reference external" href="https://yadi.sk/d/lwxrbOIFUmdM3"&gt;https://yadi.sk/d/lwxrbOIFUmdM3&lt;/a&gt;&amp;gt;`__.
Если, кто осилит поправить материалы на моей модельке, то черкните в
комментах.&lt;/p&gt;</summary><category term="blender"></category><category term="здание"></category></entry><entry><title>Набросок</title><link href="/posts/2009/06/20/urn:ya.ru:post/22199227/32/" rel="alternate"></link><updated>2014-07-14T17:01:00+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-20:posts/2009/06/20/urn:ya.ru:post/22199227/32/</id><summary type="html">&lt;p&gt;Делаю небольшую модельку предприятия. Пока что, вот как выглядит
черновой вариант, это всего лишь кусочек работы.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/51778/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3603/imdagger.1/0_ca42_7fb2f99a_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="здание"></category><category term="набросок"></category></entry><entry><title></title><link href="/posts/2009/06/20/urn:ya.ru:post/22199227/31/" rel="alternate"></link><updated>2009-06-20T15:59:11+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-20:posts/2009/06/20/urn:ya.ru:post/22199227/31/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/51762"&gt;&lt;img alt="slk.png" src="http://img-fotki.yandex.ru/get/3505/imdagger.1/0_ca32_1ca2cbc1_L" title="slk.png"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Потому, что он позволял ковырять свои внутренности, как вздумается и не
навязывал никакого стиля обновления: хочешь скопируй бинарники, а хочешь
собери сам.
Поэтому я его ставил везде, где только руки дотянутся :D&lt;/p&gt;</summary></entry><entry><title>Характер</title><link href="/posts/2009/06/19/kharakter/" rel="alternate"></link><updated>2009-06-19T21:00:34+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-19:posts/2009/06/19/kharakter/</id><summary type="html">&lt;p&gt;Когда возможности человека оказываются меньше, чем его желания, то он
становится очень вредным, особенно, если чётко осознаёт несбыточность
мечты, … вот такой и я.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;img alt="Вредина" src="http://img-fotki.yandex.ru/get/3507/imdagger.1/0_c9da_aaf5556c_XL" title="Вредина"/&gt;&lt;/p&gt;</summary><category term="Я"></category></entry><entry><title></title><link href="/posts/2009/06/18/urn:ya.ru:post/22199227/29/" rel="alternate"></link><updated>2009-06-18T14:43:05+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-18:posts/2009/06/18/urn:ya.ru:post/22199227/29/</id><summary type="html">&lt;p&gt;Использую на работе&lt;/p&gt;
</summary></entry><entry><title></title><link href="/posts/2009/06/18/urn:ya.ru:post/22199227/28/" rel="alternate"></link><updated>2009-06-18T14:16:27+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-18:posts/2009/06/18/urn:ya.ru:post/22199227/28/</id><summary type="html">&lt;p&gt;Верю, что за этим языком часть нашего будущего, хотя я пока мало чего
написал на ЯФП, но они у меня вызывают особое чувство.&lt;/p&gt;
</summary></entry><entry><title></title><link href="/posts/2009/06/18/urn:ya.ru:post/22199227/27/" rel="alternate"></link><updated>2009-06-18T14:12:37+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-18:posts/2009/06/18/urn:ya.ru:post/22199227/27/</id><summary type="html">&lt;p&gt;Делаю курсовые в LaTeX, делаю документацию для наших программ в LaTeX.&lt;/p&gt;
</summary></entry><entry><title></title><link href="/posts/2009/06/18/urn:ya.ru:post/22199227/26/" rel="alternate"></link><updated>2009-06-18T13:51:53+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-18:posts/2009/06/18/urn:ya.ru:post/22199227/26/</id><summary type="html">&lt;p&gt;и полегчало, но ещё не весело&lt;/p&gt;
</summary></entry><entry><title></title><link href="/posts/2009/06/17/urn:ya.ru:post/22199227/23/" rel="alternate"></link><updated>2009-06-17T19:43:25+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-17:posts/2009/06/17/urn:ya.ru:post/22199227/23/</id><summary type="html">&lt;p&gt;устал&lt;/p&gt;
</summary></entry><entry><title>Сделал немного монеток</title><link href="/posts/2009/06/17/sdelal-nemnogo-monetok/" rel="alternate"></link><updated>2009-06-17T17:55:11+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-17:posts/2009/06/17/sdelal-nemnogo-monetok/</id><summary type="html">&lt;p&gt;Потребовалось мне сегодня сделать небольшую группу монет для одного
дела. Требовался среднего качества рендер и поэтому я решил, что
справлюсь кое-как самостоятельно.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/next/users/imdagger/album/36211/view/51123"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3502/imdagger.0/0_c7b3_8c4cbf8e_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Исходный файл с монетками и текстурой лежит тут
&lt;a class="reference external" href="https://yadi.sk/d/lwxrbOIFUmdM3"&gt;(coin.blend)&lt;/a&gt;.&lt;/p&gt;
&lt;p class="cut"&gt;&lt;a class="h-link reference internal" data-toggle="collapse" href="#cut_32054928"&gt;Делалось это всё так:&lt;/a&gt;&lt;/p&gt;
&lt;div class="collapse" id="cut_32054928"&gt;
&lt;p&gt;Для начала нужно создать цилиндр с 64 вершинами&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/next/users/imdagger/album/36211/view/51127"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/3500/imdagger.0/0_c7b7_34fff6e_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Затем его нужно сжать вдоль оси Y&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/next/users/imdagger/album/36211/view/51128"&gt;&lt;img alt="image2" src="http://img-fotki.yandex.ru/get/3606/imdagger.0/0_c7b8_5da0b6c4_L" title="image2"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;После того, как один цилиндр создан и смасштабирован, то нужно создать
ещё один цилиндр с 64 вершинами. Нужно перейти в режим редактирования,
выделить половину вершин пр ипомощи сочетания &lt;strong&gt;Shift+B&lt;/strong&gt; и удалить
этучасть. Получившаяся фигура служит частью ребра монетки. Объект
необходимо переместить (клавиша &lt;strong&gt;G&lt;/strong&gt;) по оси X так, чтобы он слегка
касался монеты.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/next/users/imdagger/album/36211/view/51129"&gt;&lt;img alt="image3" src="http://img-fotki.yandex.ru/get/3506/imdagger.0/0_c7b9_cc85bf83_L" title="image3"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Затем нужно в режиме редактирования выделить все вершины и при помощи
&lt;strong&gt;Spin Dup&lt;/strong&gt; (что на панели Mesh Tools) продублировать объект 48 раз,
поворачивая вокруг оси Y на 360 градусов. После этой операции нужно не
забыть выделить все вершины и нажать &lt;strong&gt;Remove Doubles&lt;/strong&gt;.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/next/users/imdagger/album/36211/view/51130"&gt;&lt;img alt="image4" src="http://img-fotki.yandex.ru/get/3606/imdagger.0/0_c7ba_3144e56e_L" title="image4"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;При помощи google.com было найдено изображение монеты с двух сторон:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/next/users/imdagger/album/36211/view/51131"&gt;&lt;img alt="image5" src="http://img-fotki.yandex.ru/get/3507/imdagger.0/0_c7bb_d8b64168_L" title="image5"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Для цилиндра, который будет основой монеты (&lt;strong&gt;CoinHeart&lt;/strong&gt;) производится
развёртка UVTex, как показано на рисунке:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/next/users/imdagger/album/36211/view/51134"&gt;&lt;img alt="image6" src="http://img-fotki.yandex.ru/get/3500/imdagger.0/0_c7be_f1755bda_L" title="image6"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;для обратной стороны:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/next/users/imdagger/album/36211/view/51135"&gt;&lt;img alt="image7" src="http://img-fotki.yandex.ru/get/3604/imdagger.0/0_c7bf_ef8ea1f4_L" title="image7"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;для обода, хотя для него можно и не делать развёртку:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/next/users/imdagger/album/36211/view/51136"&gt;&lt;img alt="image8" src="http://img-fotki.yandex.ru/get/3503/imdagger.0/0_c7c0_9d82ef0d_L" title="image8"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;После того, как развёртка сделана корректно, нужно добавить материал с
данной текстурой и настроить его. Т.к. цвет материала не важен, а только
цвет текстуры, требуется включить опцию &lt;strong&gt;TexFace&lt;/strong&gt; (на панели
Material). Чтобы добавить немного блеска параметр &lt;strong&gt;Spec&lt;/strong&gt;
устанавливается равным &lt;em&gt;0.829&lt;/em&gt;. Для текстурирования включается режим
инверсии Nor (выделен жёлтым). Значение устанавливается &lt;em&gt;9.88&lt;/em&gt;. Главное
не забыть на панели &lt;strong&gt;Map Input&lt;/strong&gt; установить, чтодля развёртки
использовать UV.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/next/users/imdagger/album/36211/view/51138"&gt;&lt;img alt="image9" src="http://img-fotki.yandex.ru/get/3607/imdagger.0/0_c7c2_74cffcd8_L" title="image9"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Некстуру нужно установить из файла coin.jpg, для этого на панели
установки текстры нужно выбрать тип &lt;em&gt;Image&lt;/em&gt;, а затем открыть файл
coin.jpg (предварительно нажав кнопку &lt;em&gt;Relative&lt;/em&gt;, чтобы путь был
относительным):&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/next/users/imdagger/album/36211/view/51139"&gt;&lt;img alt="image10" src="http://img-fotki.yandex.ru/get/3601/imdagger.0/0_c7c3_73408b5a_L" title="image10"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Чтобы было проще подобрать цвет ребра монеты, нужно перейти в режим
редактора и просмотра изображений (&lt;strong&gt;Shift+F10&lt;/strong&gt;), после нажатия левой
клавиши на уже выбранной картинке, появится информация о координатах
курсора мыши и параметрах текселя (пиксель текстуры) под курсором.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/next/users/imdagger/album/36211/view/51140"&gt;&lt;img alt="image11" src="http://img-fotki.yandex.ru/get/3603/imdagger.0/0_c7c4_cbd3e0a6_L" title="image11"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Полученный цвет нужно установить в качестве цвета материала, а так же
потребуется тебольшой не резкий шум для каймы. Для этого установим
текстуру типа &lt;strong&gt;Stucci&lt;/strong&gt; с параметрами по умолчанию. Цвет смешения с
цветом материала нужно задать чуть более светлый, чем монета.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/next/users/imdagger/album/36211/view/51141"&gt;&lt;img alt="image12" src="http://img-fotki.yandex.ru/get/3603/imdagger.0/0_c7c5_2d5ba5b8_L" title="image12"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;После этого результат почти готов, за исключением того, что “обод” не
плотно прилегает к “базису”. Но это можно исправить при помощи создания
группы вершин (которые являются внутренней частью обода) и применения
модификатора &lt;strong&gt;Shrink Wrap&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Было:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/next/users/imdagger/album/36211/view/51142"&gt;&lt;img alt="image13" src="http://img-fotki.yandex.ru/get/3503/imdagger.0/0_c7c6_dcb8af17_L" title="image13"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Применение модификатора:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/next/users/imdagger/album/36211/view/51143"&gt;&lt;img alt="image14" src="http://img-fotki.yandex.ru/get/3601/imdagger.0/0_c7c7_9a9b7c04_L" title="image14"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;После применения края “прижались” к монете:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/next/users/imdagger/album/36211/view/51145"&gt;&lt;img alt="image15" src="http://img-fotki.yandex.ru/get/3507/imdagger.0/0_c7c9_85368f4a_L" title="image15"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Теперь остаётся только объединить обод и монету в группы CoinGroup и
создать несколько экземепляров групп, разместив всё на сцене. Ещё
потребуется два источника света: сбоку и сверху, чтобы создать чуть
более сильный блики, а ещё нужно включить &lt;strong&gt;Ambient Occlusion&lt;/strong&gt;, чтобы
сцена не смотрелась тёмной.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/next/users/imdagger/album/36211/view/51146"&gt;&lt;img alt="image16" src="http://img-fotki.yandex.ru/get/3603/imdagger.0/0_c7ca_71f29ba1_L" title="image16"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;</summary><category term="blender"></category><category term="монеты"></category></entry><entry><title></title><link href="/posts/2009/06/16/urn:ya.ru:post/22199227/20/" rel="alternate"></link><updated>2009-06-16T09:56:59+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-16:posts/2009/06/16/urn:ya.ru:post/22199227/20/</id><summary type="html"></summary></entry><entry><title></title><link href="/posts/2009/06/15/urn:ya.ru:post/22199227/19/" rel="alternate"></link><updated>2009-06-15T18:38:28+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-15:posts/2009/06/15/urn:ya.ru:post/22199227/19/</id><summary type="html"></summary></entry><entry><title></title><link href="/posts/2009/06/15/urn:ya.ru:post/22199227/18/" rel="alternate"></link><updated>2009-06-15T18:37:59+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-15:posts/2009/06/15/urn:ya.ru:post/22199227/18/</id><summary type="html"></summary></entry><entry><title></title><link href="/posts/2009/06/15/urn:ya.ru:post/22199227/17/" rel="alternate"></link><updated>2009-06-15T18:35:23+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-15:posts/2009/06/15/urn:ya.ru:post/22199227/17/</id><summary type="html"></summary></entry><entry><title>Слои и BGE</title><link href="/posts/2009/06/15/sloi-i-bge/" rel="alternate"></link><updated>2009-06-15T18:17:30+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-15:posts/2009/06/15/sloi-i-bge/</id><summary type="html">&lt;p&gt;Если создать объект на видимом слое и разместить его в отдельном
blend-файле, а потом его подключить как библиотеку в другом, переместив
его на невидимый слой уже внутри данного blend-файла, то могут
возникнуть проблемы. Если запустить игру, нажав &lt;kbd class="kbd"&gt;
P&lt;/kbd&gt;
 в редакторе Blender,
то создание объекта при помощи актуатора пройдёт без проблем. Если же
сделать ‘Save Game As Runtime…’, а потом запустить готовую игру, то оно
скажет, что объект не на скрытом слое. Поэтому, я полагаю, лучше
объекты, которые будут создаваться динамически при помощи актуатора,
стоит размещать заранее на невидимые слои.&lt;/p&gt;
</summary><category term="blender"></category><category term="bge"></category></entry><entry><title></title><link href="/posts/2009/06/15/urn:ya.ru:post/22199227/15/" rel="alternate"></link><updated>2009-06-15T18:11:53+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-15:posts/2009/06/15/urn:ya.ru:post/22199227/15/</id><summary type="html">&lt;p&gt;извечно нейтральное&lt;/p&gt;
</summary></entry><entry><title></title><link href="/posts/2009/06/15/urn:ya.ru:post/22199227/14/" rel="alternate"></link><updated>2009-06-15T16:06:05+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-15:posts/2009/06/15/urn:ya.ru:post/22199227/14/</id><summary type="html">&lt;p&gt;настроение не очень&lt;/p&gt;
</summary></entry><entry><title>Обои рабочего стола</title><link href="/posts/2009/06/15/oboi-rabochego-stola/" rel="alternate"></link><updated>2009-06-15T12:43:48+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-15:posts/2009/06/15/oboi-rabochego-stola/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/50563"&gt;&lt;img alt="Slackware.png" src="http://img-fotki.yandex.ru/get/3607/imdagger.0/0_c583_20453d28_L" title="Slackware.png"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Делал давно, тогда почти ничего не умел, это одна из самых первых
черновых работ. Использую как обою рабочего стола. Может кому
понравится, сильно не пинать за качество. Есть идея нарисовать новую, но
уже не такую.&lt;/p&gt;</summary><category term="blender"></category><category term="обои"></category><category term="slackware"></category><category term="linux"></category><category term="wallpaper"></category></entry><entry><title>Изменение меша прямо из BGE</title><link href="/posts/2009/06/15/izmenenie-mesha-priamo-iz-bge/" rel="alternate"></link><updated>2009-06-15T12:29:05+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-15:posts/2009/06/15/izmenenie-mesha-priamo-iz-bge/</id><summary type="html">&lt;p&gt;Попробовал сегодня изменить положении точек в прострастве для меша
кубика прямо из BGE. Не знаю зачем мне пока это нужно, но всё же
прикольно :) Написал такой Python скрипт для актуатора:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
cc = GameLogic.getCurrentController()
obj = cc.getOwner()
mesh = obj.getMesh()
v = mesh.getVertex(0, 2)
v.setXYZ([-1.0, -1.0, 5.0])
&lt;/pre&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/50556/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3603/imdagger.0/0_c57c_68396e5b_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Получилась вот такая вот штука, нужно только не забывать, что будут
изменены все объекты в BGE, которые опираются на данный меш:&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/50558/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/3505/imdagger.0/0_c57e_36a2edd7_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;</summary><category term="blender"></category><category term="python"></category><category term="bge"></category></entry><entry><title>Ураганы</title><link href="/posts/2009/06/14/uragany/" rel="alternate"></link><updated>2009-06-14T18:14:23+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-14:posts/2009/06/14/uragany/</id><summary type="html">&lt;p&gt;Жаль, что после ураганов у нас в городе не пытаются “вернуть в строй”
хотя бы часть деревьев. А то летом без них никак, спрятаться негде.&lt;/p&gt;
&lt;p&gt;Фото после бури (сделано мной)
&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/album/35621/"&gt;…&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Новость с сайта
&lt;a class="reference external" href="http://naviny.by/rubrics/disaster/2009/06/13/ic_articles_124_163139/"&gt;naviny.by&lt;/a&gt;&lt;/p&gt;
</summary><category term="Гомель"></category><category term="буря"></category></entry><entry><title>Устройство "текстовых текстур" в Blender</title><link href="/posts/2009/06/13/ustroistvo-tekstovykh-tekstur-v-blender/" rel="alternate"></link><updated>2009-06-13T20:28:30+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-13:posts/2009/06/13/ustroistvo-tekstovykh-tekstur-v-blender/</id><summary type="html">&lt;p&gt;Недавно прочитал интересную
&lt;a class="reference external" href="http://blender-ru.blogspot.com/2009/05/blender-ge.html"&gt;запись&lt;/a&gt; в
блоге про создание динамического текста в BGE. Скачал пример оттуда, всё
было прекрасно, я был счаслив, но… потом я решил поредактировать
текстуру прямо в Blender редакторе и сохранить на диск. Включил опцию
редактирования.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/50257/"&gt;&lt;img alt="image0" src="http://img-fotki.yandex.ru/get/3606/imdagger.0/0_c451_45828fd2_L" title="image0"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Потом я просто зарисовал символ “@” на текстуре.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/50258/"&gt;&lt;img alt="image1" src="http://img-fotki.yandex.ru/get/3501/imdagger.0/0_c452_4cc20671_L" title="image1"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Ничто не предвещало беды, т.к. я всё выполнил правильно, текст
отображался и работал в игровом движке. Но когда я сохранил файл на
диск, а потом попытался создать новый проект в Blender (использую
2.48a), то получилась какая то ерунда. Больше текст не отображался, а
лишь какое-то странное повторение символов “@”, которые были старательно
мной “замылены” (т.е. вместо текста были одни “собаки”).&lt;/p&gt;
&lt;p&gt;Тогда мне пришла мысль, что оно где-то хранит данные о позициях
символов, размера и внутренний редактор Blender’а просто для удобства
редактирования убирает “лишнее”.&lt;/p&gt;
&lt;p&gt;Так оно и оказалось. После долгих мучений и сравнений изображения из
примера и моего “редактирование”  я обратил внимаение на небольшое
различие: на эталонной картинке вверху присутствовало приблизительно 4
пикселя высотой “мусора”, состоящего из оттенков серого. Эта информация
была сгенерирована скриптом из туториала, но не отображалась в редакторе
Blender.&lt;/p&gt;
&lt;p class="text-center"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/50279/"&gt;&lt;img alt="image2" src="http://img-fotki.yandex.ru/get/3607/imdagger.0/0_c467_b6603cc7_L" title="image2"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Сначала я озхнакомился с текстом Python скрипта &lt;strong&gt;blendFont.py&lt;/strong&gt;,
обратил внимание на &lt;a class="reference external" href="http://pastebin.com/f2d827021"&gt;функцию&lt;/a&gt; putPix.
Понял, что она записывает байты данных, как пиксели прямо на картинку
при помощи цвета. Потом я решил поковыряться в исходниках Blender и
найти, где же оно проверяет соответствие формату и парсит заголовок.&lt;/p&gt;
&lt;p&gt;Так я пришёл к файлу &lt;strong&gt;source/blender/blenkernel/intern/bmfont.c&lt;/strong&gt;. Там
расположены две интересные функции &lt;em&gt;detectBitmapFont&lt;/em&gt;(ImBuf *ibuf) и
&lt;em&gt;readBitmapFontVersion0&lt;/em&gt;(ImBuf *ibuf, unsigned char *rect, int
step). Указатель ibuf-&amp;gt;rect ссылается на участок байтов, который
содержит пиксельные данные.&lt;/p&gt;
&lt;p&gt;Если rect[0], rect[1], rect[2] и rect[3] равны символам ‘B’, ‘F’, ‘N’,
‘T’, то данное изображение 8-битное. Если эта проверка не ыполнилась, то
считается, что картинка 32-битная и проверяется rect[0], rect[4],
rect[8], rect[12] со смещениями от 0 до 4. Если заголовок был найден, то
вызывается readBitmapFontVersion, ей передаётся по сколько нужно читать
байтов, пр 32-битном изображении - по 4 байта на пиксель.&lt;/p&gt;
&lt;p&gt;Формат текстуры для шрифта выглядит таким образом (это стало ясно после
обзора исходного кода readBitmapFontVersion):&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;4 байта для magic-последовательности (BFNT)&lt;/li&gt;
&lt;li&gt;2 байта для версии&lt;/li&gt;
&lt;li&gt;2 байта - количество глифов&lt;/li&gt;
&lt;li&gt;размер по X - 2 байта&lt;/li&gt;
&lt;li&gt;размер по Y - 2 байта&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Затем  идёт описание каждого из символов (ровно столько сколько указано
в заголовке):&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;уникодный символ - 2 байта&lt;/li&gt;
&lt;li&gt;позиция левого верхнего угла для символа на текстуре (LocX - 2 байта,
LocY - 2 байта)&lt;/li&gt;
&lt;li&gt;смещение (OfsX - 1 байт, OfsY - 1 байт)&lt;/li&gt;
&lt;li&gt;размер в пикселях (SizeX - 1 байт, SizeY - 1 байт)&lt;/li&gt;
&lt;li&gt;advance - 1 байт&lt;/li&gt;
&lt;li&gt;1 байт зарезервирован&lt;/li&gt;
&lt;/ul&gt;</summary><category term="bge"></category><category term="изнутри"></category><category term="устройство"></category><category term="bfnt"></category><category term="текст"></category></entry><entry><title>Вот</title><link href="/posts/2009/06/13/vot/" rel="alternate"></link><updated>2014-04-19T11:58:25+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-13:posts/2009/06/13/vot/</id><summary type="html">&lt;p&gt;Попробую переодически писать немного про blender и python, может силы
воли хватит написать что-нибудь интересное.&lt;/p&gt;
&lt;p&gt;Когда-то даже работал контрактором на &lt;strong&gt;Google&lt;/strong&gt; в подразделении &lt;strong&gt;Slide
Inc&lt;/strong&gt;.&lt;/p&gt;
</summary></entry><entry><title></title><link href="/posts/2009/06/13/urn:ya.ru:post/22199227/5/" rel="alternate"></link><updated>2009-06-13T19:28:50+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-13:posts/2009/06/13/urn:ya.ru:post/22199227/5/</id><summary type="html">&lt;p&gt;извечно нейтральное&lt;/p&gt;
</summary></entry><entry><title></title><link href="/posts/2009/06/13/urn:ya.ru:post/22199227/4/" rel="alternate"></link><updated>2009-06-13T19:28:16+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-06-13:posts/2009/06/13/urn:ya.ru:post/22199227/4/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/50251"&gt;&lt;img alt="ALIM0741.JPG" src="http://img-fotki.yandex.ru/get/3501/imdagger.0/0_c44b_935b02ff_L" title="ALIM0741.JPG"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;хочу быть роботом&lt;/p&gt;</summary><category term="Я"></category></entry><entry><title></title><link href="/posts/2009/05/24/urn:ya.ru:post/22199227/1/" rel="alternate"></link><updated>2012-05-29T21:28:09+03:00</updated><author><name>IMDagger</name></author><id>tag:,2009-05-24:posts/2009/05/24/urn:ya.ru:post/22199227/1/</id><summary type="html">&lt;p class="row photo-item"&gt;&lt;a class="reference external" href="http://fotki.yandex.ru/users/imdagger/view/46248"&gt;&lt;img alt="После дождя" src="http://img-fotki.yandex.ru/get/3605/imdagger.0/0_b4a8_b3ecda8a_L" title="После дождя"/&gt;&lt;/a&gt;&lt;/p&gt;</summary></entry></feed>