<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="utf-8" />
        <title>IMDagger: Дневник</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="Блог IMDagger: IT и жизнь" />
        <meta name="keywords" content="python,lisp,scheme,racket,emacs,blender,программирование,моделирование,lua,c++,c,js,java,git,bazaar" />
        <meta name="author" content="Alex Moiseenko (IMDagger)" />

<meta name="robots" content="noindex"/>
        <!-- Open Graph -->
        <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" />
        <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" />
        <link rel="shortcut icon" href="/favicon.ico" />
        <link rel="stylesheet" href="/theme/css/html4css1.css" />
        <link rel="stylesheet" href="/theme/css/style.css" />
        <link rel="stylesheet" href="/theme/css/pygment.css" />
        <link rel="stylesheet" href="/theme/css/math.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML,http://imdagger.github.io/theme/js/math.js"></script>
        <script src="http://s3.amazonaws.com/nwapi/nwmatcher/nwmatcher-1.2.5-min.js"></script>
        <!--[if (gte IE 6)&(lte IE 8)]>
          <script type="text/javascript" src="/theme/js/selectivizr-min.js"></script>
          <noscript><link rel="stylesheet" href="[fallback css]" /></noscript>
        <![endif]-->

        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
    </head>

    <body>
        <div class="row page-head">
            <div class="row page-head-status page-head-status-top"><div class="col-sm-12 b-status mine"><p><i></i><a href="#" title="настроение" class="b-consistent-link"><b>Продать кому-то что-то всегда на деле сложнее, чем кажется</b></a></p></div></div>
            <div class="col-sm-2 page-left">
                <a href="#">
                    <img src="http://upics.yandex.ru/22199227/normal" ilo-full-src="http://upics.yandex.ru/22199227/normal">
                </a>
            </div>
            <div class="col-sm-10 all-posts">
                <div class="title-container">
                    <h1><b><a href="http://imdagger.github.io" class="fn nickname">IMDagger</a></b></h1>
                </div>
                <div class="title-menu">
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="active">
                            <a href="#">Дневник</a>
                        </li>
                        <li><a href="#">О себе</a></li>
                        <li><a href="#">Фотки</a></li>
                        <li><a href="#">RSS-ленты</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="row page-body">
<div class="col-sm-2 page-left">
<div class="row widget widget-photo">
    <a href="posts/2011/08/07/aga-popalsia/" class="b-user-photo__link"><img class="b-user-photo__img" src=" http://img-fotki.yandex.ru/get/5409/22199227.a/0_625fc_e780ccc7_L
?log_nocount=64720402854"></a>
</div><div class="row widget">
    <div class="widget-content b-user-info">
        <div class="widget__body">
            <div class="widget-user-info__age">
                <i class="widget-user-info__sex widget-user-info__sex_type_"></i> 26&nbsp;лет
            </div>
            <div class="widget-user-info__place">
                <a href="#">Гомель</a>,                <a href="#">Беларусь</a>            </div>
            <ul class="contacts">
                <li class="contact contact-type-email"><i></i><a href="mailto:imdagger@yandex.ru">imdagger@yandex.ru</a></li>
                <li class="contact contact-type-ya-online"><i></i>imdagger@ya.ru</li>
                <li class="contact contact-type-icq"><i></i>350395088</li>
            </ul>
        </div>
    </div>
</div>

<div class="row widget">
    <div class="widget-content">
        <div class="widget__title">
            <div class="widget__title-link">Метрика</div>
        </div>
        <div class="widget__body">
            <div class="widget-line">
              <!-- noindex -->
              <!-- googleoff: index -->
              <div class="widget-entry">
                <!-- Yandex.Metrika informer --><a href="https://metrika.yandex.ru/stat/?id=25746494&amp;from=informer" target="_blank" rel="nofollow"><img src="//bs.yandex.ru/informer/25746494/3_1_FFFFFFFF_EFEFEFFF_0_pageviews" style="width:88px; height:31px; border:0;" alt="Яндекс.Метрика" title="Яндекс.Метрика: данные за сегодня (просмотры, визиты и уникальные посетители)" onclick="try{Ya.Metrika.informer({i:this,id:25746494,lang:'ru'});return false}catch(e){}"/></a><!-- /Yandex.Metrika informer --><!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter25746494 = new Ya.Metrika({id:25746494, clickmap:true, trackLinks:true, accurateTrackBounce:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="//mc.yandex.ru/watch/25746494" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->
                <!-- googleon: index -->
                <!-- /noindex -->
                </div>
            </div>
        </div>
    </div>
</div><div class="row widget">
    <div class="widget-content">
        <div class="widget__title">
            <div class="widget__title-link">Популярное в дневнике</div>
        </div>
        <div class="widget__body">
            <div class="widget-line">
                <div class="widget-entry">
                    <div class="widget-day__title">25&nbsp;июня</div>
                    <div class="widget-entry clearfix">
                        <div class="widget-entry__item">
                            <div class="widget-entry__title">
                                <a href="#" class="h-link">&nbsp;&nbsp;&nbsp; Висцеральная теория сна выглядит стр…</a>
                            </div>
                            <div class="widget-entry__info">2&nbsp;ответа</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div></div>

<div class="col-sm-10 all-posts">
<div class="row b-post-filter">
    <span class="pull-right">
        записи по
        <div class="btn-group">
            <span type="button" class="pseudo-link" data-toggle="dropdown">месяцам</span>
            <ul class="dropdown-menu dropdown-menu-right" role="menu">
                <li><a rel="nofollow" href="#" class="h-link">Нулябрь</a><li>
                <li><a rel="nofollow" href="#" class="h-link">Первябрь</a><li>
            </ul>
        </div> ·
        <div class="btn-group">
            <span type="button" class="pseudo-link" data-toggle="dropdown">меткам</span>
            <ul class="dropdown-menu dropdown-menu-right" role="menu">                <li>                    <a rel="nofollow" class="tag-1" href="http://imdagger.github.io/tag/zhizn.html" class="h-link">жизнь</a>                    <a rel="nofollow" class="tag-1" href="http://imdagger.github.io/tag/radost.html" class="h-link">радость</a>                    <a rel="nofollow" class="tag-2" href="http://imdagger.github.io/tag/google.html" class="h-link">google</a>                    <a rel="nofollow" class="tag-2" href="http://imdagger.github.io/tag/eda.html" class="h-link">еда</a>                    <a rel="nofollow" class="tag-2" href="http://imdagger.github.io/tag/emacs.html" class="h-link">emacs</a>                </li>                <li>                    <a rel="nofollow" class="tag-1" href="http://imdagger.github.io/tag/blender.html" class="h-link">blender</a>                    <a rel="nofollow" class="tag-1" href="http://imdagger.github.io/tag/ia.html" class="h-link">Я</a>                    <a rel="nofollow" class="tag-1" href="http://imdagger.github.io/tag/bge.html" class="h-link">bge</a>                    <a rel="nofollow" class="tag-2" href="http://imdagger.github.io/tag/sborka.html" class="h-link">сборка</a>                    <a rel="nofollow" class="tag-2" href="http://imdagger.github.io/tag/iandeks.html" class="h-link">Яндекс</a>                </li>                <li>                    <a rel="nofollow" class="tag-2" href="http://imdagger.github.io/tag/linux.html" class="h-link">linux</a>                    <a rel="nofollow" class="tag-1" href="http://imdagger.github.io/tag/programmirovanie.html" class="h-link">программирование</a>                    <a rel="nofollow" class="tag-1" href="http://imdagger.github.io/tag/nabrosok.html" class="h-link">набросок</a>                    <a rel="nofollow" class="tag-2" href="http://imdagger.github.io/tag/java.html" class="h-link">java</a>                    <a rel="nofollow" class="tag-2" href="http://imdagger.github.io/tag/icfpc.html" class="h-link">icfpc</a>                </li>                <li>                    <a rel="nofollow" class="tag-2" href="http://imdagger.github.io/tag/bredni.html" class="h-link">бредни</a>                    <a rel="nofollow" class="tag-2" href="http://imdagger.github.io/tag/javascript.html" class="h-link">javascript</a>                    <a rel="nofollow" class="tag-1" href="http://imdagger.github.io/tag/oshibka.html" class="h-link">ошибка</a>                    <a rel="nofollow" class="tag-1" href="http://imdagger.github.io/tag/rabota.html" class="h-link">работа</a>                    <a rel="nofollow" class="tag-1" href="http://imdagger.github.io/tag/python.html" class="h-link">python</a>                </li>            </ul>
        </div> ·
        <div class="btn-group">
            <span type="button" class="pseudo-link" data-toggle="dropdown">типам</span>
            <ul class="dropdown-menu dropdown-menu-right" role="menu">
                <li><a rel="nofollow" href="http://imdagger.github.io/category/description.html" class="h-link">обращение</a><li>
                <li><a rel="nofollow" href="http://imdagger.github.io/category/friend.html" class="h-link">дружба</a><li>
                <li><a rel="nofollow" href="http://imdagger.github.io/category/join.html" class="h-link">клубы</a><li>
                <li><a rel="nofollow" href="http://imdagger.github.io/category/link.html" class="h-link">ссылки</a><li>
                <li><a rel="nofollow" href="http://imdagger.github.io/category/mood.html" class="h-link">настроение</a><li>
                <li><a rel="nofollow" href="http://imdagger.github.io/category/photo.html" class="h-link">фото</a><li>
                <li><a rel="nofollow" href="http://imdagger.github.io/category/text.html" class="h-link">текст</a><li>
                <li><a rel="nofollow" href="http://imdagger.github.io/category/video.html" class="h-link">видео</a><li>
                <li><a rel="nofollow" href="http://imdagger.github.io/category/wishlist.html" class="h-link"></a><li>
            </ul>
        </div>
    </span>
</div>
    <div class="row b-post">
<div class="panel panel-text">
    <div class="panel-heading b-post-type b-post-type-text">
        <b class="b-user">
            <a class="b-user__link" href="http://imdagger.github.io/author/imdagger.html"><b class="b-user__first-letter">I</b>MDagger</a>
        </b>
написал        <span class="pull-right b-date">
            <a class="h-link" href="http://imdagger.github.io/posts/2009/09/02/bagi/" >
                2 сентября 2009 года, 21:30
            </a>
        </span>
    </div>
    <div class="panel-body">
        <div class="col-sm-1 b-post__layout-left">
            <a href="http://imdagger.github.io/author/imdagger.html"><img src="http://upics.yandex.ru/22199227/middle"></a>
        </div>
        <div class="col-sm-11 b-right-col">
            <noindex>
<div class="row tags-row">
    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/samba4.html">samba4</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/domen.html">домен</a></span></div>
            </noindex>
            <div class="post-title">
<a class="no-link" href="http://imdagger.github.io/posts/2009/09/02/bagi/">Баги</a>            </div>
            <div class="row post-body">
                <div class="b-text">
<p>Приходится вводить часто клиентские window$-машины в домен. Но порой
сталкиваюсь с проблемой: “База данных защиты повреждена”. Кое-что нашёл
по запросу “window$ security database corruption” в Google, но мне
перечисленные варианты не подошли :(. Пока не знаю как решать такую
проблему, знаю лишь, что это связано с тем, что остались старые SID’ы
внутри системы (с новыми образами вроде всё ok), случилось это после
переноса на новый домен.</p>
                </div>
            </div>
            <div class="row comments-row">
                <span><a class="pseudo-link b-candy b-comment-shortcut"><i class="b-ico"></i>ответить</a></span>
            </div>
        </div>
    </div>
</div><div class="panel panel-text">
    <div class="panel-heading b-post-type b-post-type-text">
        <b class="b-user">
            <a class="b-user__link" href="http://imdagger.github.io/author/imdagger.html"><b class="b-user__first-letter">I</b>MDagger</a>
        </b>
написал        <span class="pull-right b-date">
            <a class="h-link" href="http://imdagger.github.io/posts/2009/09/01/python-i-sokety/" >
                1 сентября 2009 года, 19:44
            </a>
        </span>
    </div>
    <div class="panel-body">
        <div class="col-sm-1 b-post__layout-left">
            <a href="http://imdagger.github.io/author/imdagger.html"><img src="http://upics.yandex.ru/22199227/middle"></a>
        </div>
        <div class="col-sm-11 b-right-col">
            <noindex>
<div class="row tags-row">
    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/python.html">python</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/soket.html">сокет</a></span></div>
            </noindex>
            <div class="post-title">
<a class="no-link" href="http://imdagger.github.io/posts/2009/09/01/python-i-sokety/">Python и сокеты</a>            </div>
            <div class="row post-body">
                <div class="b-text">
<p>У Samba 4 всё ещё почему-то нет поддержки RPC для net user, чтобы менять
пароли удалённо с виндовой машины. Т.к. людям это очень нужно было, то я
был вынужден сделать небольшой сервис, который принимал бы запросы на
смену пароля от моего самодельного Java клиента со Swing интерфейсом.
Сервер смены пароля написан на основе <em>setpassword</em> (чтобы не
разбираться как работать с ldb-backend :) ) из стандартной поставки
вместе с Samba. Мне оставалось лишь написать часть, которая бы работала
с сокетами. Сначала я начал писать свой велосипед на основе
<code class="code">
socket.socket</code>
, но потом обратил внимание на модуль <code class="code">
SocketServer</code>
.
Этот модуль предоставляет классы для удобной работы с сокетами
различными способами, и он достаточно гибок. Сначала я взял за основу
<code class="code">
TCPServer</code>
, начал в нём перегружать методы. Потом подумал, что мне
нужно обслуживать много клиентов сразу, поэтому нашёл в исходниках
модуля класс <code class="code">
ForkingTCPServer</code>
 (есть и <code class="code">
ThreadingTCPServer</code>
),
который использует <code class="code">
fork</code>
 для каждого нового соединения. Но я понял,
что в связи с тем, что мне нужно просто обработать довольно несложный
запрос, то мне не стоит перекрывать методы этих классов. Для таких целей
вторым параметром для инициализации объекта класса ForkingTCPServer
передаётся класс обработчика. Мне показался удобным
<code class="code">
StreamRequestHandler</code>
 (есть и другие, например, для UDP), поэтому я
его взял за основу:</p>
<p class="cut"><a class="h-link reference internal" href="#cut_59108240"data-toggle="collapse">читать далее</a></p>
<div class="collapse" id="cut_59108240">
<div class="highlight"><pre><span class="pgcss-o">...</span>
<span class="pgcss-k">class</span> <span class="pgcss-nc">PasswordChanger</span><span class="pgcss-p">(</span><span class="pgcss-n">StreamRequestHandler</span><span class="pgcss-p">):</span>
    <span class="pgcss-o">...</span>
    <span class="pgcss-k">def</span> <span class="pgcss-nf">handle</span><span class="pgcss-p">(</span><span class="pgcss-bp">self</span><span class="pgcss-p">):</span>
        <span class="pgcss-o">...</span>
<span class="pgcss-n">config</span> <span class="pgcss-o">=</span> <span class="pgcss-s">&#39;&#39;</span><span class="pgcss-p">,</span> <span class="pgcss-mi">3333</span>
<span class="pgcss-n">server</span> <span class="pgcss-o">=</span> <span class="pgcss-n">ForkingTCPServer</span><span class="pgcss-p">(</span><span class="pgcss-n">config</span><span class="pgcss-p">,</span> <span class="pgcss-n">PasswordChanger</span><span class="pgcss-p">)</span>
<span class="pgcss-n">server</span><span class="pgcss-o">.</span><span class="pgcss-n">serve_forever</span><span class="pgcss-p">()</span>
</pre></div>
<p>Класс StreamRequestHandler предоставляет свойства <code class="code">
rfile</code>
 и <code class="code">
wfile</code>
.
Первое — поток для чтения (данные от клиента), а второе — поток для
передачи ответа клиенту. Самое приятное, что они поддерживают интерфейс
стандартного типа <code class="code">
file</code>
. Т.е. можно работать будто это просто файлы
на диске! В методе <code class="code">
handle</code>
 нужно произвести чтение данных от клиента и
записать в поток ответ (можно и не делать этого :), но никто читать за
нас их не будет).</p>
<p>Я столкнулся с тем, что сокет не переиспользовался, и система не давала
открыть сокет, если я завершил программу по <kbd class="kbd">
Ctrl+C</kbd>
. Но для этого у
класса <code class="code">
ForkingTCPServer</code>
 есть свойство <code class="code">
allow _reuse _address</code>
.
Пришлось его выставить в значение <strong>True</strong>. Т.к. этот сервис будет
единственным на таком порту, но можно не беспокоиться, что вторая копия
переоткроет порт.</p>
</div>
                </div>
            </div>
            <div class="row comments-row">
                <span><a class="pseudo-link b-candy b-comment-shortcut"><i class="b-ico"></i>ответить</a></span>
            </div>
        </div>
    </div>
</div><div class="panel panel-text">
    <div class="panel-heading b-post-type b-post-type-text">
        <b class="b-user">
            <a class="b-user__link" href="http://imdagger.github.io/author/imdagger.html"><b class="b-user__first-letter">I</b>MDagger</a>
        </b>
написал        <span class="pull-right b-date">
            <a class="h-link" href="http://imdagger.github.io/posts/2009/08/31/film/" >
                31 августа 2009 года, 18:42
            </a>
        </span>
    </div>
    <div class="panel-body">
        <div class="col-sm-1 b-post__layout-left">
            <a href="http://imdagger.github.io/author/imdagger.html"><img src="http://upics.yandex.ru/22199227/middle"></a>
        </div>
        <div class="col-sm-11 b-right-col">
            <noindex>
<div class="row tags-row">
    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/film.html">фильм</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/zviozdnaia-pyl.html">звёздная пыль</a></span></div>
            </noindex>
            <div class="post-title">
<a class="no-link" href="http://imdagger.github.io/posts/2009/08/31/film/">Фильм</a>            </div>
            <div class="row post-body">
                <div class="b-text">
<p>Посмотрел <strong>StarDust</strong>. Если бы там развили сильнее тему с пиратами, то
мог бы получится хороший стимпанк с оттенком фэнтэзи. Есть довольно
забавные шутки и приятно, что в фильме не делали сильный акцент на
драки, сражение и увечья. Только вот одного не могу понять… зачем было
делать капитана пиратского воздушного судна нетрадиционной ориентации??
Я конечно понимаю, что там прикольно, всё такое… дань моде, но можно
было обойтись и без этого, т.к. в сюжете это не создаёт поворотных
моментов.</p>
                </div>
            </div>
            <div class="row comments-row">
                <span><a class="pseudo-link b-candy b-comment-shortcut"><i class="b-ico"></i>ответить</a></span>
            </div>
        </div>
    </div>
</div><div class="panel panel-text">
    <div class="panel-heading b-post-type b-post-type-text">
        <b class="b-user">
            <a class="b-user__link" href="http://imdagger.github.io/author/imdagger.html"><b class="b-user__first-letter">I</b>MDagger</a>
        </b>
написал        <span class="pull-right b-date">
            <a class="h-link" href="http://imdagger.github.io/posts/2009/08/28/kamasutra-na-python/" >
                28 августа 2009 года, 20:21
            </a>
        </span>
    </div>
    <div class="panel-body">
        <div class="col-sm-1 b-post__layout-left">
            <a href="http://imdagger.github.io/author/imdagger.html"><img src="http://upics.yandex.ru/22199227/middle"></a>
        </div>
        <div class="col-sm-11 b-right-col">
            <noindex>
<div class="row tags-row">
    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/python.html">python</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/kamasutra.html">камасутра</a></span></div>
            </noindex>
            <div class="post-title">
<a class="no-link" href="http://imdagger.github.io/posts/2009/08/28/kamasutra-na-python/">Камасутра на Python</a>            </div>
            <div class="row post-body">
                <div class="b-text">
<p>Воспалённый больной мозг придумал начало Камасутры для программиста на
Python:</p>
<blockquote>
<div class="line-block">
<div class="line">&gt;&gt;&gt; <strong>oo</strong> = &quot;<strong>(.)</strong>&quot;, &quot;<strong>(.)</strong>&quot;</div>
<div class="line">&gt;&gt;&gt; def touch_by_hands(left_right):</div>
<div class="line">. . . &nbsp; &nbsp; &nbsp;<strong>(o)</strong> = 'it' is True</div>
<div class="line">. . . &nbsp; &nbsp; &nbsp;for nipple in [left_right][<strong>(o)</strong>:<strong>(o)</strong>]:</div>
<div class="line">. . .&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gently_bite(nipple)</div>
<div class="line">&gt;&gt;&gt; touch_by_hands(<strong>oo</strong>)</div>
<div class="line">&gt;&gt;&gt; <strong>Y</strong> = <strong>&quot;censored&quot;</strong></div>
<div class="line">&gt;&gt;&gt; dir(<strong>(Y)</strong>)</div>
<div class="line">['join', 'strip', 'isspace', 'zfill']</div>
<div class="line">&gt;&gt;&gt; def enter_to<strong>(_)</strong>:</div>
<div class="line">. . . &nbsp; &nbsp; &nbsp; her = <strong>{_:_}</strong></div>
<div class="line">. . . &nbsp; &nbsp; &nbsp; her.get('for pleasure')</div>
<div class="line">&gt;&gt;&gt; <strong>_</strong>, <strong>_</strong> = <strong>&quot;buttocks&quot;</strong>, <strong>2</strong></div>
<div class="line">&gt;&gt;&gt; enter_to<strong>(_*_)</strong></div>
</div>
</blockquote>
                </div>
            </div>
            <div class="row comments-row">
                <span><a class="pseudo-link b-candy b-comment-shortcut"><i class="b-ico"></i>ответить</a></span>
            </div>
        </div>
    </div>
</div><div class="panel panel-text">
    <div class="panel-heading b-post-type b-post-type-text">
        <b class="b-user">
            <a class="b-user__link" href="http://imdagger.github.io/author/imdagger.html"><b class="b-user__first-letter">I</b>MDagger</a>
        </b>
написал        <span class="pull-right b-date">
            <a class="h-link" href="http://imdagger.github.io/posts/2009/08/26/pci-x/" >
                26 августа 2009 года, 19:59
            </a>
        </span>
    </div>
    <div class="panel-body">
        <div class="col-sm-1 b-post__layout-left">
            <a href="http://imdagger.github.io/author/imdagger.html"><img src="http://upics.yandex.ru/22199227/middle"></a>
        </div>
        <div class="col-sm-11 b-right-col">
            <noindex>
<div class="row tags-row">
    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/pci.html">pci</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/pci-x.html">pci-x</a></span></div>
            </noindex>
            <div class="post-title">
<a class="no-link" href="http://imdagger.github.io/posts/2009/08/26/pci-x/">PCI-X</a>            </div>
            <div class="row post-body">
                <div class="b-text">
<p>&nbsp; &nbsp; Поднял вторую сетевую карту на машине, чтобы один канал отдать для
Clonezilla, а то когда оно тянет образ по 100Mbit-ке, то канал полностью
ложиться, а нужно ещё и другим машинкам с ней работать. Единственное,
что у этого компа все слоы <strong>PCI-X</strong> (PCI-Express), но как приятно, что
оставлена обратная совместимость… и можно воткнуть туда PCI сетевую
карту (немного остаётся свободных контактов в слоте, которые не
задействует PCI и, что отличает его от PCI-X, но можно безбоязненно
подключать, ничего не сгорит, может только упасть производительность
PCI-X шины (и то не всегда)).</p>
                </div>
            </div>
            <div class="row comments-row">
                <span><a class="pseudo-link b-candy b-comment-shortcut"><i class="b-ico"></i>ответить</a></span>
            </div>
        </div>
    </div>
</div><div class="panel panel-text">
    <div class="panel-heading b-post-type b-post-type-text">
        <b class="b-user">
            <a class="b-user__link" href="http://imdagger.github.io/author/imdagger.html"><b class="b-user__first-letter">I</b>MDagger</a>
        </b>
написал        <span class="pull-right b-date">
            <a class="h-link" href="http://imdagger.github.io/posts/2009/08/25/pxe/" >
                25 августа 2009 года, 20:44
            </a>
        </span>
    </div>
    <div class="panel-body">
        <div class="col-sm-1 b-post__layout-left">
            <a href="http://imdagger.github.io/author/imdagger.html"><img src="http://upics.yandex.ru/22199227/middle"></a>
        </div>
        <div class="col-sm-11 b-right-col">
            <noindex>
<div class="row tags-row">
    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/pxe.html">pxe</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/asus.html">asus</a></span></div>
            </noindex>
            <div class="post-title">
<a class="no-link" href="http://imdagger.github.io/posts/2009/08/25/pxe/">PXE</a>            </div>
            <div class="row post-body">
                <div class="b-text">
<p>Я “счастливый” обладатель 30 компов с материнской платой <strong>ASUS P5VD2-VM
SE</strong>. Но я никогда не задумывался, куда можно засунуть настройку PXE
загрузки, т.к. на моей домашней тачке он включён по дефолту. А тут
пришлось повозиться… Оказалось PXE включается так (в <em>AMIBIOS</em>):
<strong>Advanced→Chipset→SouthBridge VIA VT8237S Configuration→LAN Option
ROM→Enabled</strong>. Это мне помогло грузить Clonezilla SE по сети используя
PXE.</p>
                </div>
            </div>
            <div class="row comments-row">
                <span><a class="pseudo-link b-candy b-comment-shortcut"><i class="b-ico"></i>ответить</a></span>
            </div>
        </div>
    </div>
</div><div class="panel panel-text">
    <div class="panel-heading b-post-type b-post-type-text">
        <b class="b-user">
            <a class="b-user__link" href="http://imdagger.github.io/author/imdagger.html"><b class="b-user__first-letter">I</b>MDagger</a>
        </b>
написал        <span class="pull-right b-date">
            <a class="h-link" href="http://imdagger.github.io/posts/2009/08/24/triadvesuvius/" >
                24 августа 2009 года, 20:53
            </a>
        </span>
    </div>
    <div class="panel-body">
        <div class="col-sm-1 b-post__layout-left">
            <a href="http://imdagger.github.io/author/imdagger.html"><img src="http://upics.yandex.ru/22199227/middle"></a>
        </div>
        <div class="col-sm-11 b-right-col">
            <noindex>
<div class="row tags-row">
    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/triad_vesuvius.html">triad_vesuvius</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/proekt.html">проект</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/programmirovanie.html">программирование</a></span></div>
            </noindex>
            <div class="post-title">
<a class="no-link" href="http://imdagger.github.io/posts/2009/08/24/triadvesuvius/">TriadVesuvius</a>            </div>
            <div class="row post-body">
                <div class="b-text">
<p>О великий <strong>Bazaar</strong>, кланяюсь тебе, проставь тег triad_vesuvius в наш
репозиторий:</p>
<div class="highlight"><pre><span class="pgcss-gp">$</span> bzr tag triad_vesuvius
<span class="pgcss-go">Created tag triad_vesuvius.</span>
<span class="pgcss-gp">$</span> bzr tags
<span class="pgcss-go">triad_vesuvius 130</span>
</pre></div>
<p>Это 130 ревизия и 220 <em>bzr</em>-коммит. А ещё 150 <em>git</em>-коммитов до этого и
где-то 500 без репозитория x-D. Всё, что было запланировано — выполнено.
Где-то в ноябре будет альфа версия.</p>
                </div>
            </div>
            <div class="row comments-row">
                <span><a class="pseudo-link b-candy b-comment-shortcut"><i class="b-ico"></i>ответить</a></span>
            </div>
        </div>
    </div>
</div><div class="panel panel-text">
    <div class="panel-heading b-post-type b-post-type-text">
        <b class="b-user">
            <a class="b-user__link" href="http://imdagger.github.io/author/imdagger.html"><b class="b-user__first-letter">I</b>MDagger</a>
        </b>
написал        <span class="pull-right b-date">
            <a class="h-link" href="http://imdagger.github.io/posts/2009/08/23/emacs-shrifty-i-tormoza/" >
                23 августа 2009 года, 17:26
            </a>
        </span>
    </div>
    <div class="panel-body">
        <div class="col-sm-1 b-post__layout-left">
            <a href="http://imdagger.github.io/author/imdagger.html"><img src="http://upics.yandex.ru/22199227/middle"></a>
        </div>
        <div class="col-sm-11 b-right-col">
            <noindex>
<div class="row tags-row">
    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/emacs.html">emacs</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/fontconfig.html">fontconfig</a></span></div>
            </noindex>
            <div class="post-title">
<a class="no-link" href="http://imdagger.github.io/posts/2009/08/23/emacs-shrifty-i-tormoza/">Emacs, шрифты и тормоза</a>            </div>
            <div class="row post-body">
                <div class="b-text">
<p>У меня до сегодняшнего дня библиотека fontconfig была довольно старая. Я
сначала думал, что это Emacs тормозит при скроллинге и перемещению по
тексту. Но потом заметил, что большинство тормозов связано в моих
текстах, где докстринги на русском описывают суть кода. И Emacs 23.1.1
не собрался с моим fontconfig (а Emacs 23.0.95.1 собирался), тогда я
решил обновиться… От этого <u class="underline">
решилась проблема</u>
, что русские буквы в Emacs
не имели наклона и частично исчезли сильные тормоза. Остались только
небольшие замедления из-за того, что X-ы староваты, но меня это уже не
сильно напрягает x-D.</p>
                </div>
            </div>
            <div class="row comments-row">
                <span><a class="pseudo-link b-candy b-comment-shortcut"><i class="b-ico"></i>ответить</a></span>
            </div>
        </div>
    </div>
</div><div class="panel panel-text">
    <div class="panel-heading b-post-type b-post-type-text">
        <b class="b-user">
            <a class="b-user__link" href="http://imdagger.github.io/author/imdagger.html"><b class="b-user__first-letter">I</b>MDagger</a>
        </b>
написал        <span class="pull-right b-date">
            <a class="h-link" href="http://imdagger.github.io/posts/2009/08/22/emacs-i-ssylki/" >
                22 августа 2009 года, 20:10
            </a>
        </span>
    </div>
    <div class="panel-body">
        <div class="col-sm-1 b-post__layout-left">
            <a href="http://imdagger.github.io/author/imdagger.html"><img src="http://upics.yandex.ru/22199227/middle"></a>
        </div>
        <div class="col-sm-11 b-right-col">
            <noindex>
<div class="row tags-row">
    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/emacs.html">emacs</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/opera.html">opera</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/web.html">web</a></span></div>
            </noindex>
            <div class="post-title">
<a class="no-link" href="http://imdagger.github.io/posts/2009/08/22/emacs-i-ssylki/">Emacs и ссылки</a>            </div>
            <div class="row post-body">
                <div class="b-text">
<p>Сделал, чтобы открывался из Emacs не браузер <strong>lynx</strong> при <kbd class="kbd">
M-x
browse-url</kbd>
, а мой браузер <strong>Opera</strong>. А остальные утилиты пусть всё же
используют lynx и поэтому я не стал трогать переменную среды.</p>
<div class="highlight"><pre><span class="pgcss-p">(</span><span class="pgcss-k">setq</span> <span class="pgcss-nv">browse-url-generic-program</span> <span class="pgcss-p">(</span><span class="pgcss-nv">executable-find</span> <span class="pgcss-s">&quot;opera&quot;</span><span class="pgcss-p">)</span>
        <span class="pgcss-nv">browse-url-browser-function</span> <span class="pgcss-ss">&#39;browse-url-generic</span><span class="pgcss-p">)</span>
</pre></div>
<p>А вообще на
<a class="reference external" href="http://www.emacswiki.org/cgi-bin/wiki/BrowseUrl">EmacsWiki</a> всё
хорошо расписано на английском :).</p>
                </div>
            </div>
            <div class="row comments-row">
                <span><a class="pseudo-link b-candy b-comment-shortcut"><i class="b-ico"></i>ответить</a></span>
            </div>
        </div>
    </div>
</div><div class="panel panel-text">
    <div class="panel-heading b-post-type b-post-type-text">
        <b class="b-user">
            <a class="b-user__link" href="http://imdagger.github.io/author/imdagger.html"><b class="b-user__first-letter">I</b>MDagger</a>
        </b>
написал        <span class="pull-right b-date">
            <a class="h-link" href="http://imdagger.github.io/posts/2009/08/21/emacs-i-jabber/" >
                21 августа 2009 года, 20:33
            </a>
        </span>
    </div>
    <div class="panel-body">
        <div class="col-sm-1 b-post__layout-left">
            <a href="http://imdagger.github.io/author/imdagger.html"><img src="http://upics.yandex.ru/22199227/middle"></a>
        </div>
        <div class="col-sm-11 b-right-col">
            <noindex>
<div class="row tags-row">
    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/jabber.html">jabber</a></span>,    <span class="tag"><a rel="nofollow" class="h-link" href="http://imdagger.github.io/tag/emacs.html">emacs</a></span></div>
            </noindex>
            <div class="post-title">
<a class="no-link" href="http://imdagger.github.io/posts/2009/08/21/emacs-i-jabber/">Emacs и Jabber</a>            </div>
            <div class="row post-body">
                <div class="b-text">
<p>Почти доделал поддержку Jabber в Emacs путём тюнинга jabber.el.
Теперь иконка моргает, когда пришло новое сообщение, <strong>xosd</strong> напоминает
сообщением на экране. Заодно я запустил <strong>Emacs</strong> в <strong>--daemon</strong> режиме,
что позволило оставлять соединения даже после закрытия всех клиентов
Emacs.</p>
<p>Пришлось кое-что добавить, чтобы сообщение <strong>xosd</strong> появлялось
только, если я не общаюсь на данный момент с этим человеком. А то
обработчик вызывался на каждое событие даже тогда, когда я уже в этом
буффере. Пришлось сменить обработчик на такой:</p>
<div class="highlight"><pre><span class="pgcss-p">(</span><span class="pgcss-nb">defun</span> <span class="pgcss-nv">my-show-notification</span> <span class="pgcss-p">(</span><span class="pgcss-nv">from</span> <span class="pgcss-nv">buffer</span> <span class="pgcss-nv">text</span> <span class="pgcss-nv">proposed-alert</span><span class="pgcss-p">)</span>
  <span class="pgcss-p">(</span><span class="pgcss-nb">when</span> <span class="pgcss-p">(</span><span class="pgcss-nb">not</span> <span class="pgcss-p">(</span><span class="pgcss-nb">equal</span> <span class="pgcss-p">(</span><span class="pgcss-nv">get-buffer-window</span> <span class="pgcss-nv">buffer</span> <span class="pgcss-ss">&#39;visible</span><span class="pgcss-p">)</span>
                      <span class="pgcss-p">(</span><span class="pgcss-nv">selected-window</span><span class="pgcss-p">)))</span>
     <span class="pgcss-p">(</span><span class="pgcss-nv">jabber-message-osd</span> <span class="pgcss-nv">from</span> <span class="pgcss-nv">buffer</span> <span class="pgcss-nv">text</span> <span class="pgcss-nv">proposed-alert</span><span class="pgcss-p">)</span>
     <span class="pgcss-p">(</span><span class="pgcss-nv">my-tray-icon-blink</span><span class="pgcss-p">)))</span>

<span class="pgcss-p">(</span><span class="pgcss-nv">add-hook</span> <span class="pgcss-ss">&#39;jabber-alert-message-hooks</span>
                <span class="pgcss-ss">&#39;my-show-notification</span><span class="pgcss-p">)</span>
</pre></div>
<p>Функция <code class="code">
my-tray-icon-blink</code>
 вызывает мерциние иконки, чтобы я
обратил внимание, а то я бывает, когда не пишу код, а страдаю ерундой,
то могу не обратить внимание на сообщение (а оно может быть для меня
очень срочным).</p>
                </div>
            </div>
            <div class="row comments-row">
                <span><a class="pseudo-link b-candy b-comment-shortcut"><i class="b-ico"></i>ответить</a></span>
            </div>
        </div>
    </div>
</div>        <div class="panel panel-default">
            <div class="panel-body more">
                <span class="less-prev"><a class="h-link" href="http://imdagger.github.io/category/text70.html">Назад</a></span>
                <span class="more-next"><a class="h-link" href="http://imdagger.github.io/category/text72.html">Ещё записи</a></span>
            </div>
        </div>
    </div>
</div>
        </div>
    </body>
</html>