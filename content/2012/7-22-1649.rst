Экспорт Java-классов в Bigloo
=============================
:date: 2012-07-22 01:18:42
:modified: 2012-07-22 01:19:34
:tags: JVM, генерация, Scheme, java, автоматический, улучшение, bigloo, класс, экспорт
:category: text
:author: IMDagger
:yaru-link: http://imdagger.ya.ru/replies.xml?item_no=1649

Bigloo Scheme прекрасно умеет импортировать Java-классы, но если
требуется унаследоваться от какого-либо Java-класса, то встаёт небольшая
проблема – нужно писать на Java обёртку, которая дёргает процедуры из
модуля. Это не очень удобно, т.к. приходится постоянно писать такие
обёртки, а хотелось бы, чтобы код был сгенерирован автоматически. После
отдыха на природе я смог собраться с силами и сделать это. Я смог
заставить (пока с кучей грязно-кода и хаков) Bigloo Scheme переварить
нечто такое:

.. code-block:: scheme

    (module some-name
        ....
        (java
            .....
            (export (class name::parent
                      (field x::int "xname")
                      ...
                      (method test::void ( ::name )))) ...) ...)

И оно даже сгенерировало классы для экспортируемых сущностей и
тестовый образец заработал после нескольких допиливаний в JVM-as коде и
сборкой при помощи утилиты *bgljas*.
