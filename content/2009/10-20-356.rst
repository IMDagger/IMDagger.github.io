Наследование, Hibernate и NativeSQL
===================================
:date: 2009-10-20 17:38:55
:tags: наследование, hibernate
:category: text
:author: IMDagger
:yaru-link: http://imdagger.ya.ru/replies.xml?item_no=356

Всё было хорошо, пока был всего один класс и для него был свой
NativeSQL. Но потом я унаследовал от него другой, расширенный класс и
создал для него свой SQL. И тут такое началось, ругалось в логах чем-то
таким (точн оуже не помню, вчера это было):

    67770 [http-8080-1] ERROR org.hibernate.util.JDBCExceptionReporter -
    Invalid column name DTYPE.

Пришлось в SQL добавить при выборке ещё одно поле **‘имя класса’ as
DTYPE**. А в родительский класс:

.. code-block:: java

    ...
    @NamedNativeQuery(name = "лалала", resultClass = BaseClass.class, ...)
    class BaseClass ... {
    ...
        @Column(name="DTYPE", insertable=false, updateable=false)
        public String getDtype() {
            return dtype;
        }
        public void setDtype(String dtype) {
            this.dtype = dtype;
        }
    ...
    }

Вроде пока работает, но нужно подумать, как «выровнять» это всё, а то
как-то некрасиво в SQL вписывать ещё раз имя класса.
