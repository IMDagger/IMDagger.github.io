Патч
====
:date: 2009-10-24 18:52:46
:tags: патч, midnight commander
:category: text
:author: IMDagger
:yaru-link: http://imdagger.ya.ru/replies.xml?item_no=361

Потратил сегодня несколько часов для того, чтобы исправить все
ошибки, которые я нашёл фоновом копировании, а так же новые добавленные
мной. Теперь окончательный патч для ветки 1500-ого тикета выглядит
`так <https://www.midnight-commander.org/attachment/ticket/1500/0001-Fixed-problems.patch>`__.
Он исправляет проблему, что процессы не исчезают после завершения из
списка по :kbd:`C-x j`, а также предупреждение и перезапись по умолчанию
при фоновом копировании. Теперь появляется сообщение, но оно может
появится и в момент, когда не ожидаешь ;), т.к. файл, который
обрабатывается в фоне может, например, не удастся записать.

Посмотрел параметры и как работать с **waitpid** в \*nix, а то
раньше не приходилось сталкиваться. Заюзал полезную функцию **getpid**,
чтобы фоновые процессы могли узнать, кто они и отправить сигнал предку
на дерегистрацию себя.

P.S. А так весь день воевал с модулем для диплома.
