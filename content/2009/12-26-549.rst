Динамическая загрузка
=====================
:date: 2009-12-26 19:34:45
:tags: загрузка, python
:category: text
:author: IMDagger
:yaru-link: http://imdagger.ya.ru/replies.xml?item_no=549

У меня есть один \_\_init\_\_.py, который динамически загружает все
нижележащие модули. И собирает список классов из этих модулей. Но я не
замечал проблемы, что использование относительного пути заданного
константой, от которого нужно перемещаться по дереву, вызывает ошибку,
если директория проекта не текущая. Временно я решал эту “боль”
созданием мягкой ссылки, но сейчас применил такой трюк:

.. code-block:: python

    items_dir = dirname(__file__)

Функция :code:`dirname` расположена в модуле :code:`os.path`. Она возвращает
директорию без завершающего разделителя, в которой находится указанный
файл. Т.к. в Python переменная \_\_file\_\_ для каждого из модулей
устанавливается, как полный путь к файлу, то легко можно получить путь к
динамически загружаемым, лежащим в поддиректориях модулям пакета.
