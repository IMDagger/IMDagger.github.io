Гетерогенная среда
==================
:date: 2009-09-04 16:36:41
:tags: samba4, ошибка, домен
:category: text
:author: IMDagger
:yaru-link: http://imdagger.ya.ru/replies.xml?item_no=195

Если среда гетерогенная и клиенты **Window$ XP** и **Window$ 2000**,
а PDC — **Samba4.0.0alpha9-GIT-fced9df** (:del:`да-да я знаю, что её нельзя
ещё юзать в продакшн` x-D), то можно иногда столкнуться с проблемой при
вводе компьютера в домен. При этом Window$ выдаёт сообщение :underline:`"База данных
защиты повреждена"`, а стандартная утилита из комплекта системы коворит,
что с базой всё хорошо; то возможно это случай, с которым в 50% я
научился бороться:

    $ ldbedit -H ldap://localhost -U administrator

Найти запись для компьютера вида **CN=имя\_компьютера,DN=…**,
удалить :underline:`всю запись` (если $EDITOR равен **vi**, то поиск — :kbd:`/`, а
удаление одной строки — :kbd:`dd`). Попробовать ввести компьютер снова.
Эта проблема иногда возникает, если компьютер был введён и не выведен из
домена.
