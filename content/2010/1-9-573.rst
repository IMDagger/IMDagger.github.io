Как использовать то, что я наваял
=================================
:date: 2010-01-09 18:25:50
:tags: blender, загрузка, bge, уровни, пример
:category: text
:author: IMDagger
:yaru-link: http://imdagger.ya.ru/replies.xml?item_no=573

Я сделал два актуатора для загрузки и выгрузки объектов в BGE, ну и
ещё со скриптлинками по мелочам. Я собрал билд под Linux, а Belsagor под
Windows (спасибо ему огромное). Теперь о том, как потестить эти билды
(они пока тестовые и там конечно же есть утечка памяти и небольшой
сегфолт под виндой, но это решу позднее).

Приведу очень простой пример, без сложных мешей и детализации.
Создадим основную сцену с двумя воображаемыми уровнями и персонажем
Кубиком.

.. class:: text-center

|image0|

По средине расположен сенсор, который определяет проходящие через
него объекты со свойством **collision**.

.. class:: text-center

|image1|

Свойство-флаг **lock** не позволяет срабатывать коллизии два раза:
при начале коллизии и при завершении. Нужно только определяеть первую
коллизию. Свойство **level** хранит номер уровня, который уже загружен
динамически, поэтому требуется загрузка противоположного уровня и
выгрузка текущего. Актуатор **Load Scene Objects** загружает объекты с
указанной сцены из указанного файла. А вот **Remove Scene Objects**
обладает ещё выбором: удалить объекты или удалить объекты и выгрузить
карскас сцены из памяти (второе экономнее, если сцены не часто
подгружаются, а первое, если часто грузятся и диск может стать узким
местом).

После запуска игрового  режима загрузится первый уровень (присутствуют
два странных объекта, которые являются **DupliGroup**):

.. class:: text-center

|image2|

Если перейти невидимую границу между уровнями, то первый будет
выгружен, а второй загружен (при обратном обходе, всё работает
аналогично):

.. class:: text-center

|image3|

Один шар является прилинкованной копией другого, они связаны
родительской связью. На большом шаре работает логика вращения, всё
движется словно спутник и планета :).

Вот так простой пример, как сделать загрузку уровней и их выгрузку.
Если забыть выгрузить уровень при помощи скриптов, то движок всё равно
про него не забудет, но напомнит разработчику предупреждением в консоль.

.. |image0| image:: http://img-fotki.yandex.ru/get/4013/imdagger.5/0_1cd25_21374d56_L
   :target: http://fotki.yandex.ru/users/imdagger/view/118053/
.. |image1| image:: http://img-fotki.yandex.ru/get/4012/imdagger.5/0_1cd26_72347339_L
   :target: http://fotki.yandex.ru/users/imdagger/view/118054/
.. |image2| image:: http://img-fotki.yandex.ru/get/4114/imdagger.5/0_1cd27_72eacec0_L
   :target: http://fotki.yandex.ru/users/imdagger/view/118055/
.. |image3| image:: http://img-fotki.yandex.ru/get/4106/imdagger.5/0_1cd28_8bb0caee_L
   :target: http://fotki.yandex.ru/users/imdagger/view/118056/
