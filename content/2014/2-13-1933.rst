Проблема с удалением множества объектов в polymorphic
=====================================================
:date: 2014-02-13 23:56:19
:tags: ошибка, django-polymorphic, программирование, Django, запрос, удаление, работа, администрирование
:category: text
:author: IMDagger
:yaru-link: http://imdagger.ya.ru/replies.xml?item_no=1933

    Если есть некоторый класс A и в нём поле b, которое может описывать
множество объектов класса C, у которого есть потомки D и E, то при
попытке удалить все эти объекты разом может возникнуть проблема (у меня
возникает в админке). И суть ещё заключается в том, что в Django при
сборе всех зависимых объектов `берут первый из
списка <https://github.com/django/django/blob/stable/1.6.x/django/db/models/deletion.py#L170>`__,
его класс и остальные обрабатывают из расчёта на его поля, хотя в этом
множестве могут быть немного другие по поведению объекты. Придётся
какой-то обходной путь строить, иначе не получается удалять в админке
пользователей, т.к. те у меня тащат за собой созданные ими документы,
которые имеют небольшие различия, что сразу отправляет обработчик
запроса в 502.

