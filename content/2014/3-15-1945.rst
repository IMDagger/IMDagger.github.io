django-polymorphic и поле начинающееся с подчёркивания
======================================================
:date: 2014-03-15 03:30:04
:modified: 2014-03-15 03:31:49
:tags: django-polymorphic, запрос, программирование, подчёркивание, название, модель, поле, python, тройной, фильтрация
:category: text
:author: IMDagger
:yaru-link: http://imdagger.ya.ru/replies.xml?item_no=1945

Если название поля начинается с одинарного продчёркивания, то в
некоторых случаях в вложенных запросах не получится его использовать,
polymorphic будет ругаться на модель. Почему? Потому, что в
django-polymorphic есть поддержка "\_\ **\_**\ \_" (тройного
подчёркивания), которое означает, что указана модель и её поле. Это всё
нужно, чтобы не писать
filter(writtingdocument\_sellabledocument\_traidingdocument\_mymegafield),
а написать просто filter(TraidingDocument\_\ **\_**\ \_mymegafield), и
библиотека уже сама сгенерирует полный путь. Удобно, в доке описано, но
я как-то не обратил внимание, что там оно тройное и тогда не уловит
из-за этого суть. А наткнулся, когда попытался обратное поле фильтровать
\_client\_profile, получалось, что-то типа
filter(user\_\ **\_**\ \_client\_profile), и от этого django-polymorphic
решал, что user никакое не название промежуточного поля, а название
модели. Быстрое решение? Не называть с “\_” поля, если используешь
библиотеку полиморфных моделей.
