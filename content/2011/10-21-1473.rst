Стоило хорошо подумать
======================
:date: 2011-10-21 00:37:26
:tags: python, pymongo, MongoDB
:category: text
:author: IMDagger
:yaru-link: http://imdagger.ya.ru/replies.xml?item_no=1473

    Прежде, чем запихнуть в код вызов PyMongo функции db.eval с
параметром, в котором описана JavaScript-функция, стоило проверить, что
оно будет делать. Т.к. оно пыталось выполнить функцию, а мне всего лишь
нужно было проверить корректность синтаксиса и распарсить, но вовсе не
вызывать содержимое. Т.е. вызвать то можно, но если функция просто
описана, но не пытаться её выполнять. Хорошо, что я перепроверил сегодня
и наткнулся, что мой код портит важную информацию. Я ж ещё додумался
(это ж надо блин) вызвать проверку и если код неверный, то в базу
записать не то, что просят, а пустую строку. Хотя по нормальному я
должен был просто не записывать JS, который считаю некорректным.

