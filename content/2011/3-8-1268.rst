CEGUI и BGE Ketsji
==================
:date: 2011-03-08 12:05:15
:tags: bge, CEGUI, интерфейс, улучшение, разработка, возможности, добавка
:category: text
:author: IMDagger
:yaru-link: http://imdagger.ya.ru/replies.xml?item_no=1268

MyGUI 3.0.1 собирался легко и быстро, но почему-то напрочь отказался
работать в режиме OpenGL платформы без всяких глюков. При добавлении его
в Blender и простой инициализации уже валился сам Blender. Ещё я нашёл
там ошибки в обработке opendir под Linux под OpenGL платформу, в функции
проверки *NULL* стоял только комментарий и не было **return**, маска
\_mask вообще не учитывалась и от этого DataManager никогда не находил
ресурсы и говорил not found :(. Поэтому я решил попробовать CEGUI 0.7.5,
благо я его лет 5 назад собирал, когда была версия 0.4. Как бонус идёт
то, что есть стандартные биндинги для Python.

Собралась библиотека без особых проблем, даже на GCC 3.4.6 (пару
микроскопических правок исходников только пришлось сделать). И главное,
что скомпилились демки (в MyGUI они только под винду компилятся) и я
смог их глянуть. Оттуда я вырезал нужные мне участки кода, и разбросал в
Ketsji коде.

Запускаю Blender нажимаю :kbd:`P`… бах упало, смотрю, а оно не смогло
инициализировать ресурсы, понимаю, что не всё перенёс. Добавляю
инициализацию ресурсов, запсукаю.. нажимаю :kbd:`P`.. и бах.. ничего не
появилось и не упало. Понимаю, что Ketsji Render сделал Swap Buffers.
Добавляю отрисовку кадра в нужное место, запускаю.. нажимаю :kbd:`P`..
барабанная дробь… ура! появилось чёрное GUI :D

Почему было оно чёрное?… Ах, я забыл перед отрисовкой GUI сделать
:code:`glDisable(GL\_LIGHTING)`. Он нужен самому движку, но для интерфейса
нужен режим без освещения, вот что получилось:

.. class:: text-center

|image0|

.. |image0| image:: http://img-fotki.yandex.ru/get/6003/imdagger.9/0_5454a_a0d6305_L
   :target: http://fotki.yandex.ru/users/imdagger/view/345418/
