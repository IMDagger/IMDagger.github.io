+70 fps
=======
:date: 2011-08-15 22:28:49
:tags: bge, производительность, очистка, улучшение, blender, регрессия, буфер
:category: text
:author: IMDagger
:yaru-link: http://imdagger.ya.ru/replies.xml?item_no=1401

    Заметил, что моя сборка Blender работает медленнее на 70fps, чем моя
прошлая сборка (которую ещё прошлым летом делал). Я думал, что это CEGUI
замедляет так. Но после выключения вывода и всех событий от CEGUI fps не
сильно увеличился. Где-то *только на 17fps*. Я стал перебирать ту
ревизию, где это случилось и оно конечно же указало на момент, когда я
добавлял X-Ray.

    Сначала я подумал, что вот оно нашлось. Просто вывожу два раза,
поэтому и падает fps. Но тесты показали, что это не так. Оказалось, что
очистка GL\_DEPTH\_BUFFER и GL\_STENCIL\_BUFFER и отнимают всё время. У
меня получается идёт очистка трафаретного буфера, потом вывод объектов,
затем очистка буфера глубины. Оно и пожирает более половины
производительности, т.к. почти всё время код **простаивает в очистке
этих буферов**.

    Я пока временно выключил их очистку, несмотря на то, что это
частично сломает вывод X-Ray.

 

