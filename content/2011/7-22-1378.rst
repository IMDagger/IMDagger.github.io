Мелкий тест для CouchDB
=======================
:date: 2011-07-22 13:49:13
:tags: база, тест, couchdb
:category: text
:author: IMDagger
:yaru-link: http://imdagger.ya.ru/replies.xml?item_no=1378

Протестировал вчера CouchDB на создание структуры типа дерево,
заливал по узкому каналу на удалённую машину через VPN соединение.
Принимающая машинка не быстрая, винчестер старый и медленный и процессор
Celeron. Конечно такой вид дерева не подходил для быстрой выборки, то
мне было интересно протестировать view с include\_docs и внешним \_id.
Итого загружено 71196 документов вида :code:`{\_id: строка, parent: строка}` в
базу. После заливки через bulk-операцию (время не измерял, т.к. всё
проводилось на нестабильном канале), а последующая индексация view
длилась около 1 минуты, т.е. где-то 1186 документов в секунду.
Представление было простое: обычный map с :code:`emit(null, {\_id:
doc.parent})`. До индексации база весила 13 598 818 байт, а после
индексации 13 619 298 байт. В принципе для такого количества документов
мне понравились результаты. Правда я пока не представляю каким образом
хранить дерево, чтобы можно было легко и удобно выполнять Map/Reduce и
одновременно можно было запросто переместить огромное поддерево без
проблем. И конечно же, чтобы репликация не создала проблем тоже.
