Конфликт
========
:date: 2011-07-17 18:42:41
:tags: дом, ошибка, конфликт, couchdb, исправление
:category: text
:author: IMDagger
:yaru-link: http://imdagger.ya.ru/replies.xml?item_no=1377

Дома установлена CouchDB 1.1.0, но при попытке создания новой базы
или сохранении документа выскакивала ошибка *function\_clause error*.
Хорошо, что я вспомнил, что до этого пробовал установить версию 0.11 и
вызвал не обновление пакета, а установку новой версии. От этого в
директории с CouchDB для Erlang образовалось по несколько версий на
couchdb, mochiweb и т.д. После удаления 0.11 директорий вот такая ошибка
при создании документа исчезла и я смог продолжить мои эксперименты с
репликацией:

.. cut:: показать весь трэйс с ошибкой
  :paragraph: yes

  ::

        [info] [<0.464.0>] 127.0.0.1 - - 'PUT' /dluser/5aeb0baa0557cc4048385a8ff3000e2b 500
        [error] [<0.609.0>] function_clause error in HTTP request
        [info] [<0.609.0>] Stacktrace: [{mochiweb_request,get,
                                         [scheme,
                                          {mochiweb_request,#Port<0.2302>,'PUT',
                                           "/dluser/5aeb0baa0557cc4048385a8ff3000e2b",
                                           {1,1},
                                           {12,
                                            {"host",
                                             {'Host',"127.0.0.1:5985"},
                                             {"accept",
                                              {'Accept',
                                               "application/json, text/javascript, */*"},
                                              nil,
                                              {"accept-language",
                                               {'Accept-Language',"en-us,en;q=0.5"},
                                               {"accept-encoding",
                                                {'Accept-Encoding',"gzip, deflate"},
                                                {"accept-charset",
                                                 {'Accept-Charset',
                                                  "ISO-8859-1,utf-8;q=0.7,*;q=0.7"},
                                                 nil,nil},
                                                nil},
                                               {"connection",
                                                {'Connection',"keep-alive"},
                                                nil,
                                                {"content-type",
                                                 {'Content-Type',
                                                  "application/json; charset=UTF-8"},
                                                 {"content-length",
                                                  {'Content-Length',"108"},
                                                  nil,nil},
                                                 nil}}}},
                                             {"user-agent",
                                              {'User-Agent',
                                               "Mozilla/5.0 (X11; Linux i686; rv:2.0) Gecko/20100101 Firefox/4.0"},
                                              {"keep-alive",
                                               {'Keep-Alive',"115"},
                                               nil,
                                               {"referer",
                                                {'Referer',
                                                 "http://127.0.0.1:5985/_utils/document.html?dluser"},
                                                nil,nil}},
                                              {"x-requested-with",
                                               {"X-Requested-With","XMLHttpRequest"},
                                               nil,nil}}}}}]},
                                        {couch_httpd,absolute_uri,2},
                                        {couch_httpd_db,db_doc_req,3},
                                        {couch_httpd_db,do_db_req,2},
                                        {couch_httpd,handle_request_int,5},
                                        {mochiweb_http,headers,5},
                                        {proc_lib,init_p_do_apply,3}]
